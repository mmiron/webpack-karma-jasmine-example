(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],[function(e,t){e.exports=jQuery},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(0);var a=l(i);var o=r(5);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function t(){u(this,t);this.errorMsgPrefix="Error code =  "}n(t,[{key:"getCrewsForUser",value:function t(r){var n=this;if(!r){throw new Error("userId is mandatory")}var i="/maintenix/rest/crews";var o={userId:r};return new e(function(e,t){a.default.ajax({url:i,type:"GET",data:o,success:function t(r,n,i){e(r)},error:function e(r,i,a){var o=n.errorMsgPrefix+r.status;t(o)}})})}},{key:"getDefaultStartAndEndDates",value:function t(r){var n=this;if(!r){throw new Error("userId is mandatory")}var i="/maintenix/rest/datetime/getCurrent";var o={userId:r};return new e(function(e,t){a.default.ajax({url:i,type:"GET",data:o,success:function r(i,a,o){var s=new Date(i.startYear,i.startMonth-1,i.startDayOfMonth,i.startHourInDay,i.startMinute);var l=new Date(i.endYear,i.endMonth-1,i.endDayOfMonth,i.endHourInDay,i.endMinute);var u={};u.startDate=n.formatDate(s);u.startTime=n.formatTime(s);u.startTimeZone=i.startTimezone;try{n.validateDateFormat(u.startDate)}catch(e){t("default startDate failed validation: "+e.message)}try{n.validateTimeFormat(u.startTime)}catch(e){t("default startTime failed validation: "+e.message)}u.endDate=n.formatDate(l);u.endTime=n.formatTime(l);u.endTimeZone=i.endTimezone;try{n.validateDateFormat(u.endDate)}catch(e){t("default endDate failed validation: "+e.message)}try{n.validateTimeFormat(u.endTime)}catch(e){t("default endTime failed validation: "+e.message)}e(u)},error:function e(r,i,a){var o=n.errorMsgPrefix+r.status;t(o)}})})}},{key:"performSearch",value:function t(r){var n=this;return new e(function(e,t){var i=r.showCompleteTasks==true?false:true;var o={onlyWorkscoped:true,onlyContainingLabour:true,assignedToCrewId:r.crewId,minScheduledStartDateTime:r.startDateTime,maxScheduledStartDateTime:r.endDateTime,excludeCompleted:i};var s="/maintenix/rest/tasks";a.default.ajax({url:s,data:o,type:"GET",success:function t(r,n,i){e(r)},error:function e(r,i,a){var o=n.errorMsgPrefix+r.status;t(o)}})})}},{key:"updateScheduledHours",value:function e(t,r,n){var i=this;var o={scheduledHours:n};a.default.ajax({url:"/maintenix/rest/tasks/"+t+"/labours/"+r,type:"PUT",contentType:"application/json",data:JSON.stringify(o),error:function e(t,r,n){var a=i.errorMsgPrefix+t.status;new Error(a)}})}},{key:"updateActualHours",value:function e(t,r,n){var i=this;var o={actualHours:n};a.default.ajax({url:"/maintenix/rest/tasks/"+t+"/labours/"+r,type:"PUT",contentType:"application/json",data:JSON.stringify(o),error:function e(t,r,n){var a=i.errorMsgPrefix+t.status;new Error(a)}})}},{key:"validateDateFormat",value:function e(t){if(!t){throw new Error("dateStr is mandatory.")}if(typeof t!=="string"){throw new Error("dateStr is not a string")}var r=/^(([0-9])|([0-2][0-9])|([3][0-1]))\-(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\-\d{4}$/;var n=t.match(r);if(n==null){throw new Error("dateStr has invalid format.")}return true}},{key:"validateTimeFormat",value:function e(t){if(!t){throw new Error("timeStr is mandatory.")}if(typeof t!=="string"){throw new Error("timeStr is not a string.")}var r=/^$|^(([01][0-9])|(2[0-3])):[0-5][0-9]$/;var n=t.match(r);if(n==null){throw new Error("timeStr has invalid format.")}return true}},{key:"addHours",value:function e(t,r){return new Date(t.getTime()+r*60*60*1e3)}},{key:"formatDate",value:function e(t){var r=(t.getDate()<10?"0":"")+t.getDate()+"-"+this.getMonthShortStr(t.getMonth()+1)+"-"+t.getFullYear();return r}},{key:"formatTime",value:function e(t){var r=(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes();return r}},{key:"getMonthShortStr",value:function e(t){if(t===1)return"JAN";if(t===2)return"FEB";if(t===3)return"MAR";if(t===4)return"APR";if(t===5)return"MAY";if(t===6)return"JUN";if(t===7)return"JUL";if(t===8)return"AUG";if(t===9)return"SEP";if(t===10)return"OCT";if(t===11)return"NOV";if(t===12)return"DEC";return""}}]);return t}();t.default=d}).call(this,r(2))},function(e,t,r){"use strict";e.exports=r(17).Promise},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(0);var a=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function t(){s(this,t)}n(t,null,[{key:"sortTaskDefinitions",value:function e(t){if(!t||!(t instanceof Array)){throw new Error("taskDefinitions expected to be an Array")}return t.sort(function(e,t){var r=e.code>t.code?1:e.code<t.code?-1:0;if(r==0){r=e.configSlotCode>t.configSlotCode?1:e.configSlotCode<t.configSlotCode?-1:0}if(r==0){r=e.name>t.name?1:e.name<t.name?-1:0}return r})}},{key:"getFollowOnTaskDefinitions",value:function t(r){var n=this;return new e(function(e,t){return a.default.ajax({type:"GET",url:r,success:function t(r){var i=n.sortTaskDefinitions(r);e(i)},error:function t(r){e([])}})})}}]);return t}();t.default=l}).call(this,r(2))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function e(t){n(this,e);if(!t||!(t instanceof Array)){throw new Error("The response data suppose to be in array form")}this.data=t;this.name="followOnTaskDefnSearch";this.limit=50;this.minLength=1};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){i(this,e)}n(e,null,[{key:"addHours",value:function e(t,r){return new Date(t.getTime()+r*60*60*1e3)}},{key:"formatDate",value:function e(t){var r=(t.getDate()<10?"0":"")+t.getDate()+"-"+this.getMonthShortStr(t.getMonth()+1)+"-"+t.getFullYear();return r}},{key:"formatTime",value:function e(t){var r=(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes();return r}},{key:"convertTimeToDecimal",value:function e(t){var r=t.split(/[.:]/);var n=parseInt(r[0],10);var i=r[1]?parseInt(r[1],10):0;return n+i/60}},{key:"getMonthShortStr",value:function e(t){if(t===1)return"JAN";else if(t===2)return"FEB";else if(t===3)return"MAR";else if(t===4)return"APR";else if(t===5)return"MAY";else if(t===6)return"JUN";else if(t===7)return"JUL";else if(t===8)return"AUG";else if(t===9)return"SEP";else if(t===10)return"OCT";else if(t===11)return"NOV";else if(t===12)return"DEC";else return""}}]);return e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=t.Add=function e(t,r){return t+r};var i=t.Subtract=function e(t,r){return t-r};var a=t.Multiply=function e(t,r){return t*r}},function(e,t,r){"use strict";var n=r(6);describe("[Dummy]",function(){it("[Add] should add two numbers together and return the result",function(){expect((0,n.Add)(1,2)).toBe(3)});it("[Subtract] should subtract second param from first and return the result",function(){expect((0,n.Subtract)(1,2)).toBe(-1)});it("[Multiply] should multiply two numbers and return the result",function(){expect((0,n.Multiply)(1,2)).toBe(2)})})},function(e,t,r){"use strict";(function(e){var t=r(3);var n=i(t);function i(e){return e&&e.__esModule?e:{default:e}}describe("FollowOnTaskDefinitionSearchService followOnTask/followOnTaskDefinitionSearchService.js",function(){var t=void 0;var r="https://www.google.com";var i=[{code:3,configSlotCode:3,name:"Third"},{code:2,configSlotCode:2,name:"Second"},{code:1,configSlotCode:1,name:"First"}];beforeAll(function(){this.service=n.default});it("Sorts task definitions",function(){var e=this.service.sortTaskDefinitions(i);expect(e[0].code).toBe(1);expect(e[1].code).toBe(2);expect(e[2].code).toBe(3)});it("Fetches task definitions with error for invalid response",function(){jasmine.Ajax.install();spyOn(e,"ajax").and.callFake(function(e){var t={};return e.success(t)});expect(function(){this.service.getFollowOnTaskDefinitions(r)}).toThrow();jasmine.Ajax.uninstall()});it("Fetches task definitions successfully",function(){jasmine.Ajax.install();spyOn(e,"ajax").and.callFake(function(e){return e.success(i)});this.service.getFollowOnTaskDefinitions(r).then(function(e){expect(e).toEqual(i)});jasmine.Ajax.uninstall()})})}).call(this,r(0))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(0);var a=d(i);var o=r(4);var s=d(o);var l=r(3);var u=d(l);function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=function(){function e(t,r,n,i,o){c(this,e);var s=this;this.notFoundMsgEl=(0,a.default)("#"+n);this.okBtnEl=(0,a.default)("#"+r);this.typeAheadSearchInputEl=(0,a.default)("#"+t);this.followOnTaskDefnUuidOuputEl=(0,a.default)("#"+i);var l=(0,a.default)("#"+o);if(!this.notFoundMsgEl.length>0){throw new Error("Not found message element required")}if(!this.okBtnEl.length>0){throw new Error("Ok button element required")}if(!this.typeAheadSearchInputEl.length>0){throw new Error("Typeahead input element required")}if(!this.followOnTaskDefnUuidOuputEl.length>0){throw new Error("Output followOn task definition UUI input element required")}if(!l.length>0){throw new Error("REST api url element is required")}this.apiUrl=l.val();this.selectedOption="";this.typeAheadSearchInputEl.keydown(function(){setTimeout(function(){if(s.typeAheadSearchInputEl.val()!=s.selectedOption){s.disableOkBtn();s.clearSelectedTaskDefinition()}})});this.initialize=this.initialize.bind(this)}n(e,[{key:"setSelectedTaskDefinition",value:function e(t){if(t){this.typeAheadSearchInputEl.val(this.displayFollowOn(null,t));this.selectedOption=this.typeAheadSearchInputEl.val();this.followOnTaskDefnUuidOuputEl.attr("value",t.id)}}},{key:"clearSelectedTaskDefinition",value:function e(){this.followOnTaskDefnUuidOuputEl.attr("value","")}},{key:"initialize",value:function e(){var t=this;this.disableOkBtn();try{return u.default.getFollowOnTaskDefinitions(this.apiUrl).then(function(e){t.configureTypeAhead(e);t.typeAheadSearchInputEl.focus()})}catch(e){throw new Error("Error while trying to fetch task definitions.",e)}}},{key:"configureTypeAhead",value:function e(t){var r=this;var n=new s.default(t);a.default.each(n.data,function(e,t){t.displayValue=r.displayFollowOn(null,t)});a.default.typeahead({input:r.typeAheadSearchInputEl,highlight:true,name:n.name,limit:n.limit,minLength:n.minLength,display:["displayValue"],emptyTemplate:'<div class="mx-typeahead-msg-notfound">'+r.notFoundMsgEl.val()+"</div>",source:{data:n.data},callback:{onClick:function e(t,n,i,a){a.preventDefault();r.enableOkBtn();r.setSelectedTaskDefinition(i);this.hideLayout()}}})}},{key:"displayFollowOn",value:function e(t,r){if(r){return r.code+" - "+r.configSlotCode+" - "+r.name}}},{key:"enableOkBtn",value:function e(){if(this.okBtnEl){if(this.okBtnEl.attr("originOnClickEvent")){this.okBtnEl.attr("onclick",this.okBtnEl.attr("originOnClickEvent"))}if(this.okBtnEl.attr("originTitle")){this.okBtnEl.attr("title",this.okBtnEl.attr("originTitle"))}this.okBtnEl.removeClass("disabled");this.okBtnEl.removeAttr("disabled");this.okBtnEl.removeAttr("originOnClickEvent");this.okBtnEl.removeAttr("originTitle")}}},{key:"disableOkBtn",value:function e(){if(this.okBtnEl){if(!this.okBtnEl.attr("originOnClickEvent")){this.okBtnEl.attr("originOnClickEvent",this.okBtnEl.attr("onclick"))}if(!this.okBtnEl.attr("originTitle")){this.okBtnEl.attr("originTitle",this.okBtnEl.attr("title"))}this.okBtnEl.addClass("disabled");this.okBtnEl.attr("disabled","disabled");this.okBtnEl.attr("onclick",false);this.okBtnEl.attr("title","")}}}]);return e}();t.default=f},function(e,t,r){"use strict";(function(e){var t=r(9);var n=i(t);function i(e){return e&&e.__esModule?e:{default:e}}describe("FollowOnTaskDefinitionSearchController followOnTask/followOnTaskDefinitionSearchController.js",function(){var t="/someRestApi";function r(){return new n.default("followOnTaskSearchQuery","idButtonOk","idTypeaheadNotFoundMessage","idFieldFollowOnTaskDefnUuid","idfollowOnTaskDefinitionRestAPI")}function i(){setFixtures('<form id="form-typeahead-test" name="form-typeahead-test">'+'  <div class="typeahead__container">'+'     <div class="typeahead__field">'+'        <span class="typeahead__query">'+'          <input class= "js-typeahead-test" id="followOnTaskSearchQuery" name="followOnTaskSearchQuery">'+"        </span>"+"     </div>"+"  </div>"+'  <button id="idButtonOk" title="mytitle">Ok</button>'+'  <input type="hidden" name="aFollowOnTaskDefinitionUuid" id="idFieldFollowOnTaskDefnUuid">'+'  <input type="hidden" id="idTypeaheadNotFoundMessage" value="web.msg.MSG_NO_MATCHING_FOLLOWON_TASK_DEFINITIONS">'+'  <input type="hidden" id="idfollowOnTaskDefinitionRestAPI" value="'+t+'"'+"</form>")}beforeEach(function(){jasmine.Ajax.install();i();this.okButtonEl=e("#idButtonOk");this.fieldFollowOnTaskDefnUuidEl=e("#idFieldFollowOnTaskDefnUuid")});afterEach(function(){jasmine.Ajax.uninstall()});it("Should have a button with OK label",function(){expect(this.okButtonEl).toHaveText("Ok")});it("Should throw error indicating missing typeaheadId",function(){expect(function(){new n.default("FAKE_followOnTaskSearchQuery","FAKE_idButtonOk","FAKE_idTypeaheadNotFoundMessage","FAKE_idFieldFollowOnTaskDefnUuid","FAKE_idfollowOnTaskDefinitionRestAPI")}).toThrow()});it("Should have Ok button enabled",function(){var e=r();e.enableOkBtn();expect(this.okButtonEl).not.toHaveClass("disabled")});it("Should have Ok button disabled",function(){var e=r();e.disableOkBtn();expect(this.okButtonEl).toHaveClass("disabled")});it("returns a properly constructed display value",function(){var e=[{code:5,configSlotCode:3,name:"test"}];var t=r();expect(t.displayFollowOn(null,e[0])).toBe("5 - 3 - test")});it("Should set and clear selected task definition of output element",function(){var e=r();e.setSelectedTaskDefinition({id:"someValue"});expect(this.fieldFollowOnTaskDefnUuidEl.attr("value")).toBe("someValue");e.clearSelectedTaskDefinition();expect(this.fieldFollowOnTaskDefnUuidEl.attr("value")).toBe("")});it("Fetches task definitions successfully",function(n){var i=r();var a=[{id:"A6AAE18B638740B29B2F34D51CF2CCD5",configSlotCode:"BOM123",name:"ReqWithImpact1",code:"NC14992-REQ1"},{id:"A6AAE18B638740B29B2F34D51CF2CCD6",configSlotCode:"BOM123",name:"ReqWithImpact2",code:"NC14992-REQ2"},{id:"A6AAE18B638740B29B2F34D51CF2CCD7",configSlotCode:"BOM123",name:"ReqWithImpact3",code:"NC14992-REQ3"},{id:"A6AAE18B638740B29B2F34D51CF2CCD8",configSlotCode:"BOM123",name:"ReqWithImpact4",code:"NC14992-REQ4"},{id:"A6AAE18B638740B29B2F34D51CF2CCD9",configSlotCode:"BOM123",name:"ReqWithImpact5",code:"NC14992-REQ5"},{id:"A6AAE18B638740B29B2F34D51CF2CCE3",configSlotCode:"BOM123",name:"ReqWithImpact6",code:"NC14992-REQ6"}];spyOn(e,"ajax").and.callFake(function(e){return e.success(a)});var o=e("#idButtonOk");var s=e("#followOnTaskSearchQuery");i.initialize().then(function(){expect(e.ajax.calls.mostRecent().args[0].url).toEqual(t);expect(o).toHaveClass("disabled");expect(s).toBeFocused();n()})})})}).call(this,r(0))},function(e,t,r){"use strict";var n=r(4);var i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}describe("FollowOnTaskDefinitionSearchConfig followOnTask/followOnTaskDefinitionSearchConfig.js",function(){it("throws exception on empty data parameter",function(){expect(function(){var e=new i.default}).toThrowError("The response data suppose to be in array form")});it("throws exception with a object type data parameter instead of array",function(){expect(function(){var e={};var t=new i.default(e)}).toThrowError("The response data suppose to be in array form")});it("creates a valid config object",function(){var e=[];var t=new i.default(e);expect(t.name).toBe("followOnTaskDefnSearch");expect(t.limit).toBe(50);expect(t.minLength).toBe(1)})})},function(e,t,r){"use strict";var n=r(0);var i=s(n);var a=r(1);var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}describe("TaskSupervisionService.js",function(){describe("getCrewsForUser",function(){var e=new o.default;var t="user";var r=function e(){};var n=function e(){};beforeEach(function(){jasmine.Ajax.install()});afterEach(function(){jasmine.Ajax.uninstall()});it("will call the success handler when the ajax call is successful",function(){spyOn(i.default,"ajax").and.callFake(function(e){e.success({})})})})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){i(this,e)}n(e,null,[{key:"validateHours",value:function e(t){var r=t.split(".");if(r.length>0){if(r[0].length>4){return false}if(r.length==2){if(r[1].length>5){return false}}else if(r.length>2){return false}}return true}},{key:"validateDateFormat",value:function e(t){if(!t){throw new Error("dateStr is mandatory.")}if(typeof t!=="string"){throw new Error("dateStr is not a string")}var r=/^(([0-9])|([0-2][0-9])|([3][0-1]))\-(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\-\d{4}$/;var n=t.match(r);if(n==null){throw new Error("dateStr has invalid format.")}return true}},{key:"validateTimeFormat",value:function e(t){if(!t){throw new Error("timeStr is mandatory.")}if(typeof t!=="string"){throw new Error("timeStr is not a string.")}var r=/^$|^(([01][0-9])|(2[0-3])):[0-5][0-9]$/;var n=t.match(r);if(n==null){throw new Error("timeStr has invalid format.")}return true}}]);return e}();t.default=a},function(e,t){},function(e,t,r){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i;i=function(){return this}();try{i=i||Function("return this")()||(1,eval)("this")}catch(e){if((typeof window==="undefined"?"undefined":n(window))==="object")i=window}e.exports=i},function(e,t,r){"use strict";var n=e.exports={};var i;var a;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){i=setTimeout}else{i=o}}catch(e){i=o}try{if(typeof clearTimeout==="function"){a=clearTimeout}else{a=s}}catch(e){a=s}})();function l(e){if(i===setTimeout){return setTimeout(e,0)}if((i===o||!i)&&setTimeout){i=setTimeout;return setTimeout(e,0)}try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function u(e){if(a===clearTimeout){return clearTimeout(e)}if((a===s||!a)&&clearTimeout){a=clearTimeout;return clearTimeout(e)}try{return a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}var d=[];var c=false;var f;var h=-1;function v(){if(!c||!f){return}c=false;if(f.length){d=f.concat(d)}else{h=-1}if(d.length){m()}}function m(){if(c){return}var e=l(v);c=true;var t=d.length;while(t){f=d;d=[];while(++h<t){if(f){f[h].run()}}h=-1;t=d.length}f=null;c=false;u(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}d.push(new p(e,t));if(d.length===1&&!c){l(m)}};function p(e,t){this.fun=e;this.array=t}p.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function w(){}n.on=w;n.addListener=w;n.once=w;n.off=w;n.removeListener=w;n.removeAllListeners=w;n.emit=w;n.prependListener=w;n.prependOnceListener=w;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},function(e,t,r){"use strict";(function(n,i){var a,o;var s;var l=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */
(function(n,i){(false?undefined:l(t))==="object"&&typeof e!=="undefined"?e.exports=i():true?!(a=i,o=typeof a==="function"?a.call(t,r,t,e):a,o!==undefined&&(e.exports=o)):undefined})(undefined,function(){"use strict";function e(e){return typeof e==="function"||(typeof e==="undefined"?"undefined":l(e))==="object"&&e!==null}function t(e){return typeof e==="function"}var a=undefined;if(!Array.isArray){a=function e(t){return Object.prototype.toString.call(t)==="[object Array]"}}else{a=Array.isArray}var o=a;var u=0;var d=undefined;var c=undefined;var f=function e(t,r){I[u]=t;I[u+1]=r;u+=2;if(u===2){if(c){c(D)}else{A()}}};function h(e){c=e}function v(e){f=e}var m=typeof window!=="undefined"?window:undefined;var p=m||{};var w=p.MutationObserver||p.WebKitMutationObserver;var y=typeof self==="undefined"&&typeof n!=="undefined"&&{}.toString.call(n)==="[object process]";var g=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function E(){return function(){return n.nextTick(D)}}function T(){return function(){d(D)}}function k(){var e=0;var t=new w(D);var r=document.createTextNode("");t.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function b(){var e=new MessageChannel;e.port1.onmessage=D;return function(){return e.port2.postMessage(0)}}function S(){var e=setTimeout;return function(){return e(D,1)}}var I=new Array(1e3);function D(){for(var e=0;e<u;e+=2){var t=I[e];var r=I[e+1];t(r);I[e]=undefined;I[e+1]=undefined}u=0}function F(){try{var e=s;var t=r(14);d=t.runOnLoop||t.runOnContext;return T()}catch(e){return S()}}var A=undefined;if(y){A=E()}else if(w){A=k()}else if(g){A=b()}else if(m===undefined&&"function"==="function"){A=F()}else{A=S()}function O(e,t){var r=arguments;var n=this;var i=new this.constructor(B);if(i[C]===undefined){ne(i)}var a=n._state;if(a){(function(){var e=r[a-1];f(function(){return X(a,i,e,n._result)})})()}else{Z(n,i,e,t)}return i}function _(e){var t=this;if(e&&(typeof e==="undefined"?"undefined":l(e))==="object"&&e.constructor===t){return e}var r=new t(B);J(r,e);return r}var C=Math.random().toString(36).substring(16);function B(){}var x=void 0;var M=1;var P=2;var j=new Q;function H(){return new TypeError("You cannot resolve a promise with itself")}function R(){return new TypeError("A promises callback cannot return that same promise.")}function W(e){try{return e.then}catch(e){j.error=e;return j}}function N(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function U(e,t,r){f(function(e){var n=false;var i=N(r,t,function(r){if(n){return}n=true;if(t!==r){J(e,r)}else{G(e,r)}},function(t){if(n){return}n=true;Y(e,t)},"Settle: "+(e._label||" unknown promise"));if(!n&&i){n=true;Y(e,i)}},e)}function L(e,t){if(t._state===M){G(e,t._result)}else if(t._state===P){Y(e,t._result)}else{Z(t,undefined,function(t){return J(e,t)},function(t){return Y(e,t)})}}function $(e,r,n){if(r.constructor===e.constructor&&n===O&&r.constructor.resolve===_){L(e,r)}else{if(n===j){Y(e,j.error)}else if(n===undefined){G(e,r)}else if(t(n)){U(e,r,n)}else{G(e,r)}}}function J(t,r){if(t===r){Y(t,H())}else if(e(r)){$(t,r,W(r))}else{G(t,r)}}function q(e){if(e._onerror){e._onerror(e._result)}V(e)}function G(e,t){if(e._state!==x){return}e._result=t;e._state=M;if(e._subscribers.length!==0){f(V,e)}}function Y(e,t){if(e._state!==x){return}e._state=P;e._result=t;f(q,e)}function Z(e,t,r,n){var i=e._subscribers;var a=i.length;e._onerror=null;i[a]=t;i[a+M]=r;i[a+P]=n;if(a===0&&e._state){f(V,e)}}function V(e){var t=e._subscribers;var r=e._state;if(t.length===0){return}var n=undefined,i=undefined,a=e._result;for(var o=0;o<t.length;o+=3){n=t[o];i=t[o+r];if(n){X(r,n,i,a)}else{i(a)}}e._subscribers.length=0}function Q(){this.error=null}var z=new Q;function K(e,t){try{return e(t)}catch(e){z.error=e;return z}}function X(e,r,n,i){var a=t(n),o=undefined,s=undefined,l=undefined,u=undefined;if(a){o=K(n,i);if(o===z){u=true;s=o.error;o=null}else{l=true}if(r===o){Y(r,R());return}}else{o=i;l=true}if(r._state!==x){}else if(a&&l){J(r,o)}else if(u){Y(r,s)}else if(e===M){G(r,o)}else if(e===P){Y(r,o)}}function ee(e,t){try{t(function t(r){J(e,r)},function t(r){Y(e,r)})}catch(t){Y(e,t)}}var te=0;function re(){return te++}function ne(e){e[C]=te++;e._state=undefined;e._result=undefined;e._subscribers=[]}function ie(e,t){this._instanceConstructor=e;this.promise=new e(B);if(!this.promise[C]){ne(this.promise)}if(o(t)){this._input=t;this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0){G(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){G(this.promise,this._result)}}}else{Y(this.promise,ae())}}function ae(){return new Error("Array Methods must be provided an Array")}ie.prototype._enumerate=function(){var e=this.length;var t=this._input;for(var r=0;this._state===x&&r<e;r++){this._eachEntry(t[r],r)}};ie.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;var n=r.resolve;if(n===_){var i=W(e);if(i===O&&e._state!==x){this._settledAt(e._state,t,e._result)}else if(typeof i!=="function"){this._remaining--;this._result[t]=e}else if(r===ce){var a=new r(B);$(a,e,i);this._willSettleAt(a,t)}else{this._willSettleAt(new r(function(t){return t(e)}),t)}}else{this._willSettleAt(n(e),t)}};ie.prototype._settledAt=function(e,t,r){var n=this.promise;if(n._state===x){this._remaining--;if(e===P){Y(n,r)}else{this._result[t]=r}}if(this._remaining===0){G(n,this._result)}};ie.prototype._willSettleAt=function(e,t){var r=this;Z(e,undefined,function(e){return r._settledAt(M,t,e)},function(e){return r._settledAt(P,t,e)})};function oe(e){return new ie(this,e).promise}function se(e){var t=this;if(!o(e)){return new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}else{return new t(function(r,n){var i=e.length;for(var a=0;a<i;a++){t.resolve(e[a]).then(r,n)}})}}function le(e){var t=this;var r=new t(B);Y(r,e);return r}function ue(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function de(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function ce(e){this[C]=re();this._result=this._state=undefined;this._subscribers=[];if(B!==e){typeof e!=="function"&&ue();this instanceof ce?ee(this,e):de()}}ce.all=oe;ce.race=se;ce.resolve=_;ce.reject=le;ce._setScheduler=h;ce._setAsap=v;ce._asap=f;ce.prototype={constructor:ce,then:O,catch:function e(t){return this.then(null,t)}};function fe(){var e=undefined;if(typeof i!=="undefined"){e=i}else if(typeof self!=="undefined"){e=self}else{try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if(r==="[object Promise]"&&!t.cast){return}}e.Promise=ce}fe();ce.polyfill=fe;ce.Promise=ce;return ce})}).call(this,r(16),r(15))},function(e,t,r){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a=r(1);var o=c(a);var s=r(13);var l=c(s);var u=r(5);var d=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var h=function(){function t(e){f(this,t);this.userId=e.userId;if(!this.userId){throw new Error("userId is mandatory")}this.crewsFieldId=e.crewsFieldId;if(!this.crewsFieldId){throw new Error("crewsFieldId is mandatory")}var r=document.getElementById(this.crewsFieldId);if(!r||r.tagName!="SELECT"){throw new Error("crewsFieldId must be a SELECT element")}this.service=e.TaskSupervisionService||new o.default;this.isAllowedToSearch=e.isAllowedToSearch==="true";this.isAllowedToEditSchedledHours=e.isAllowedToEditSchedledHours==="true";this.isAllowedToEditActualHours=e.isAllowedToEditActualHours==="true";this.startDateWidgetId=e.startFieldId;this.endDateWidgetId=e.endFieldId;this.showCompleteId=e.showCompleteId;this.searchButtonId=e.searchButtonId;this.searchResultsId=e.searchResultsId;this.noSearchResultsMessage=e.noSearchResultsMessage;this.laborRowElaspedTimeThreshold=e.laborRowElaspedTimeThreshold;this.defaultShowComplete=true;this.isScheduledHoursCellEditable.bind(this);this.handleScheduleHoursEdit.bind(this);this.handleActualHoursEdit.bind(this);this.actualHourCellFormatter.bind(this)}i(t,[{key:"getServiceInstance",value:function e(){return this.service}},{key:"init",value:function t(){var r=this;return new e(function(t,n){r.initShowCompleteTasksWidget();r.initResultsTable();r.initSearchButton();e.all([r.initCrewsWidget(),r.initStartAndEndWidgets()]).then(function(e){r.populateCrewsWidget(e[0]);r.setStartAndEndWidgets(e[1]);r.performSearch().then(function(){return t()})}).catch(function(e){throw new Error(e)})})}},{key:"initCrewsWidget",value:function e(){return this.service.getCrewsForUser(this.userId)}},{key:"initStartAndEndWidgets",value:function e(){if(!this.userId){throw new Error("userId is mandatory")}try{this.validateStartEndWidgetIds();var t=this.buildFieldIdsForDateTimeWidget(this.startDateWidgetId);var r=this.buildFieldIdsForDateTimeWidget(this.endDateWidgetId);this.setStartEndElemAttrs(t,r);this.validateStartEndElems()}catch(e){console.error("initStartAndEndWidgets",e)}this.startDateElem.disabled=true;this.endDateElem.disabled=true;return this.service.getDefaultStartAndEndDates(this.userId)}},{key:"initShowCompleteTasksWidget",value:function e(){document.getElementById(this.showCompleteId).checked=this.defaultShowComplete}},{key:"initResultsTable",value:function e(){var t=this;var r=["technician","labourSkill","labourStatus","jobStopReason","elapsedHoursMinutes","scheduledHours","actualHours"];this.table=new Tabulator("#"+this.searchResultsId,{columns:[{title:"Task Id",field:"taskId",visible:false},{title:"Labour Row Id",field:"labourRowId",visible:false},{title:"From Job Stop",field:"isFromJobStop",visible:false},{title:"Line No",field:"lineNo",sorter:"number",align:"center"},{title:"Task",field:"taskName",sorter:"string",align:"center"},{title:"Task Status",field:"taskStatus",sorter:"string",align:"center"},{title:"Task Class - Subclass",field:"taskClassSubclass",sorter:"string",align:"center"},{title:"Task Priority",field:"taskPriority",sorter:"string",align:"center"},{title:"Aircraft",field:"aircraft",sorter:"string",align:"center"},{title:"Work Package",field:"workpackage",sorter:"string",align:"center"},{title:"Work Location",field:"workLocation",sorter:"string",align:"center"},{title:"Work Area",field:"workArea",sorter:"string",align:"center"},{title:"Scheduled Start Date",field:"scheduledStartDate",sorter:"string",align:"center"},{title:"Actual Start Date",field:"actualStartDate",sorter:"string",align:"center"},{field:"Selected",align:"center",width:50,headerSort:false,formatter:function e(){return'<input id="checkBox" type="checkbox">'}},{title:"Technician",field:"technician",sorter:"string",align:"center"},{title:"Skill",field:"labourSkill",sorter:"string",align:"center"},{title:"Labour Row Status",field:"labourStatus",sorter:"string",align:"center"},{title:"Job Stop Reason",field:"jobStopReason",sorter:"string",align:"center"},{title:"Elapsed Time",field:"elapsedHoursMinutes",sorter:"string",align:"center",formatter:this.isElapsedTimeGreaterThanThreshold.bind(this)},{title:"Sched. Hours",field:"scheduledHours",sorter:"string",align:"center",editor:"input",validator:["min: 0",this.validateHours],editable:this.isScheduledHoursCellEditable,cellEdited:this.handleScheduleHoursEdit},{title:"Actual Hours",field:"actualHours",sorter:"string",align:"center",editor:"input",validator:["min: 0",this.validateHours],editable:this.isActualHoursCellEditable,cellEdited:this.handleActualHoursEdit,formatter:this.actualHourCellFormatter}],dataSorted:function e(n,i){if(t.table){if(n.some(function(e){return r.indexOf(e.field)>=0})){t.table.setGroupBy()}else{t.table.setGroupBy("taskId")}}},groupHeader:function e(t,r,n,i){return n[0].taskName+"<span style='color:#000; margin-left:10px;'>("+r+" items)</span>"},groupToggleElement:"header",placeholder:this.noSearchResultsMessage})}},{key:"actualHourCellFormatter",value:function e(t){if(!t){return t}if(this.actualHourGreaterThanScheduledHours(t)){t.getElement().classList.add("highlightActualHoursCell")}var r=t.getValue();return r?r:""}},{key:"actualHourGreaterThanScheduledHours",value:function e(t){var r=t.getValue();if(!r){return r}var n=t.getRow().getData().scheduledHours;if(!n){return n}return parseInt(r)>parseInt(n)}},{key:"initSearchButton",value:function e(){var t=this;var r=n("#"+this.searchButtonId);if(this.isAllowedToSearch){r.show();r.click(function(e){e.preventDefault();t.performSearch()})}else{r.hide()}}},{key:"performSearch",value:function t(){var r=this;return new e(function(e,t){if(r.isAllowedToSearch){var n={crewId:document.getElementById(r.crewsFieldId).value,startDateTime:r.formatDateTime(r.startDateWidgetId),endDateTime:r.formatDateTime(r.endDateWidgetId),showCompleteTasks:document.getElementById(r.showCompleteId).checked};return r.service.performSearch(n).then(function(e){r.updateResultsTable(e)})}else{e()}})}},{key:"populateCrewsWidget",value:function e(t){n("#"+this.crewsFieldId).find("option").remove();t.sort(this.compareCrewAlphanumerically);if(t){var r=document.getElementById(this.crewsFieldId);var i=r.options;t.forEach(function(e,t){var r=document.createElement("option");r.text=e.label;r.value=e.id;i.add(r)});r.selectedIndex=0}}},{key:"compareCrewAlphanumerically",value:function e(t,r){if(t.label<r.label)return-1;if(t.label>r.label)return 1;return 0}},{key:"handleFailureToGetCrewsForUser",value:function e(t){throw new Error(t)}},{key:"validateStartEndWidgetIds",value:function e(){if(!this.startDateWidgetId){throw new Error("startFieldId is mandatory")}if(typeof this.startDateWidgetId!=="string"){throw new Error("startFieldId is not a string")}if(!this.endDateWidgetId){throw new Error("endFieldId is mandatory")}if(typeof this.endDateWidgetId!=="string"){throw new Error("endFieldId is not a string")}}},{key:"buildFieldIdsForDateTimeWidget",value:function e(t){return{dateFieldId:t+"_$DATE$",timeFieldId:t+"_$TIME$",timeZoneFieldId:t+"_$TIMEZONE_DISPLAY$",startPickerId:t+"_SelectBtn"}}},{key:"setStartEndElemAttrs",value:function e(t,r){this.startDateElem=document.getElementById(t.dateFieldId);this.startTimeElem=document.getElementById(t.timeFieldId);this.startTimeZoneElem=document.getElementById(t.timeZoneFieldId);this.startPickerElem=document.getElementById(t.startPickerId);this.endDateElem=document.getElementById(r.dateFieldId);this.endTimeElem=document.getElementById(r.timeFieldId);this.endTimeZoneElem=document.getElementById(r.timeZoneFieldId);this.endPickerElem=document.getElementById(r.startPickerId)}},{key:"validateStartEndElems",value:function e(){if(!this.startDateElem){throw new Error("start date field does not exist in the DOM.")}if(!this.startTimeElem){throw new Error("start time field does not exist in the DOM.")}if(!this.startTimeZoneElem){throw new Error("start time zone field does not exist in the DOM.")}if(!this.startPickerElem){throw new Error("start date picker field does not exist in the DOM.")}if(!this.endDateElem){throw new Error("end date field does not exist in the DOM.")}if(!this.endTimeElem){throw new Error("end time field does not exist in the DOM.")}if(!this.endTimeZoneElem){throw new Error("end time zone field does not exist in the DOM.")}if(!this.endPickerElem){throw new Error("end date picker field does not exist in the DOM.")}}},{key:"setStartAndEndWidgets",value:function e(t){this.startDateElem.value=t.startDate;this.startTimeElem.value=t.startTime;this.startTimeZoneElem.value=t.startTimeZone;this.endDateElem.value=t.endDate;this.endTimeElem.value=t.endTime;this.endTimeZoneElem.value=t.endTimeZone}},{key:"updateResultsTable",value:function e(t){var r=true;this.table.clearData();this.table.addData(t,r);this.table.setSort([{column:"lineNo",dir:"asc"}])}},{key:"formatDateTime",value:function e(t){var r=this.buildFieldIdsForDateTimeWidget(t);var n=document.getElementById(r.dateFieldId).value;var i=document.getElementById(r.timeFieldId).value;return n+" "+i}},{key:"isScheduledHoursCellEditable",value:function e(t){if(this.isAllowedToEditSchedledHours){var r=t.getRow().getData();if(r.isFromJobStop&&r.labourStatus=="ACTV"){return true}}return false}},{key:"isActualHoursCellEditable",value:function e(t){if(this.isAllowedToEditActualHours){var r=t.getRow().getData();if(r.labourStatus=="COMPLETE"){return true}}return false}},{key:"isElapsedTimeGreaterThanThreshold",value:function e(t){var r=t.getValue();if(r){var n=l.default.convertTimeToDecimal(r);if(n>parseFloat(this.laborRowElaspedTimeThreshold)){return"<span class='elapsedTimeExceedsThreshold'>"+r+"</span>"}}return r}},{key:"validateHours",value:function e(t,r){return l.default.validateHours(r)}},{key:"handleScheduleHoursEdit",value:function e(t){var r=t.getRow().getData();this.service.updateScheduledHours(r.taskId,r.labourRowId,t.getValue())}},{key:"handleActualHoursEdit",value:function e(t){var r=t.getRow().getData();this.service.updateActualHours(r.taskId,r.labourRowId,t.getValue())}}]);return t}();t.default=h}).call(this,r(2),r(0))},function(e,t,r){"use strict";(function(e){var t=r(18);var n=i(t);function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}describe("TaskSupervisionController",function(){describe("initCrewsWidget",function(){var t;var r=[{id:"1",code:"crew1",description:"crew one"},{id:"2",code:"crew2",description:"crew two"},{id:"3",code:"crew3",description:"crew three"}];var i=[{id:"1",code:"crew1",description:"crew one"}];var o=(t={startYear:"2019",startMonth:"01",startDayOfMonth:"01",startHourInDay:"12"},a(t,"startHourInDay","00"),a(t,"startMinute","00"),a(t,"endYear","2019"),a(t,"endMonth","02"),a(t,"endDayOfMonth","01"),a(t,"endHourInDay","12"),a(t,"endMinute","00"),a(t,"startTimezone","EST"),t);var s=void 0;var l=void 0;beforeEach(function(){jasmine.Ajax.install();this.validParms={userId:"userId",crewsFieldId:"crewsFieldId",startFieldId:"idStartDateTime",endFieldId:"idEndDateTime",showCompleteId:"idShowComplete",searchButtonId:"idSearchButton",searchResultsId:"idSearchResults",isAllowedToSearch:"true"};setFixtures('<select id="'+this.validParms.crewsFieldId+'"></select>'+'<input id="'+this.validParms.showCompleteId+'" type="checkbox"/>'+'<button id="'+this.validParms.searchButtonId+'" />'+'<div id="'+this.validParms.searchResultsId+'" />'+'<div id="'+this.validParms.startFieldId+'" />'+'<div id="'+this.validParms.startFieldId+'_$DATE$" />'+'<div id="'+this.validParms.startFieldId+'_$TIME$" />'+'<div id="'+this.validParms.startFieldId+'_$TIMEZONE_DISPLAY$" />'+'<div id="'+this.validParms.startFieldId+'_SelectBtn" />'+'<div id="'+this.validParms.endFieldId+'" />'+'<div id="'+this.validParms.endFieldId+'_$DATE$" />'+'<div id="'+this.validParms.endFieldId+'_$TIME$" />'+'<div id="'+this.validParms.endFieldId+'_$TIMEZONE_DISPLAY$" />'+'<div id="'+this.validParms.endFieldId+'_SelectBtn" />')});afterEach(function(){jasmine.Ajax.uninstall()});it("Throws error when user id not provided.",function(){var e=this.validParms;e.userId=undefined;expect(function(){var t=new n.default(e);t.initCrewsWidget()}).toThrowError("userId is mandatory")});it("Throws error when user id is blank.",function(){var e=this.validParms;e.userId=undefined;expect(function(){var t=new n.default(e)}).toThrowError("userId is mandatory")});it("Throws error when crew field id not provided.",function(){var e=this.validParms;e.crewsFieldId=undefined;expect(function(){var t=new n.default(e)}).toThrowError("crewsFieldId is mandatory")});it("Throws error when crew field id is blank.",function(){var e=this.validParms;e.crewsFieldId="";expect(function(){var t=new n.default(e)}).toThrowError("crewsFieldId is mandatory")});it("Throws error when crew field id does not identify a select element.",function(){var e=this.validParms;e.crewsFieldId="non-existing-id";expect(function(){var t=new n.default(e)}).toThrowError("crewsFieldId must be a SELECT element")});it("Throws error when crew field id identifies a non-select element.",function(){setFixtures('<input id="crewsFieldId"></input>');var e=this.validParms;e.crewsFieldId="crewsFieldId";expect(function(){var t=new n.default(e)}).toThrowError("crewsFieldId must be a SELECT element")});it("Fetch of crew list is returned",function(t){setFixtures('<select id="'+this.validParms.crewsFieldId+'"></select>');var i=new n.default(this.validParms);spyOn(e,"ajax").and.callFake(function(e){return e.success(r)});i.initCrewsWidget().then(function(e){expect(e).toBe(r);t()})});it("Populates Crew dropdown when provided list of crews.",function(t){this.validParms.isAllowedToSearch="false";var i=new n.default(this.validParms);spyOn(e,"ajax").and.callFake(function(e){if(e.url==="/maintenix/rest/crews"){return e.success(r)}else if(e.url==="/maintenix/rest/datetime/getCurrent"){return e.success(o)}else{console.warn("Unsupported url: ",e.url)}});var a=document.getElementById(this.validParms.crewsFieldId);var s=a.options;i.init().then(function(e){expect(s.length).toBe(r.length);t()})})})})}).call(this,r(0))},function(e,t,r){var n={"./basemaintenance/task/tasksupervision/TaskSupervisionController.spec.js":19,"./basemaintenance/task/tasksupervision/TaskSupervisionService.spec.js":12,"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchConfig.spec.js":11,"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchController.spec.js":10,"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchService.spec.js":8,"./someFeature/featureMath/featureMath.spec.js":7};function i(e){var t=a(e);var n=r(t);return n}function a(e){var t=n[e];if(!(t+1)){var r=new Error('Cannot find module "'+e+'".');r.code="MODULE_NOT_FOUND";throw r}return t}i.keys=function e(){return Object.keys(n)};i.resolve=a;e.exports=i;i.id=20},function(e,t,r){"use strict";var n=r(20);n.keys().forEach(n)}],[[21,0]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqUXVlcnlcIiIsIndlYnBhY2s6Ly8vLi9zcmMvYmFzZW1haW50ZW5hbmNlL3Rhc2svdGFza3N1cGVydmlzaW9uL1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlLXByb21pc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3V0aWwvRGF0ZVRpbWVIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NvbWVGZWF0dXJlL2ZlYXR1cmVNYXRoL2ZlYXR1cmVNYXRoLmpzIiwid2VicGFjazovLy8uL3NyYy9zb21lRmVhdHVyZS9mZWF0dXJlTWF0aC9mZWF0dXJlTWF0aC5zcGVjLmpzIiwid2VicGFjazovLy8uL3NyYy9lbmdpbmVlcmluZy9yZXF1aXJlbWVudGRlZmluaXRpb24vZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIuc3BlYy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5naW5lZXJpbmcvcmVxdWlyZW1lbnRkZWZpbml0aW9uL2ZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi92YWxpZGF0aW9uL0RhdGVUaW1lVmFsaWRhdG9yLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZXM2LXByb21pc2UtcHJvbWlzZS9ub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYmFzZW1haW50ZW5hbmNlL3Rhc2svdGFza3N1cGVydmlzaW9uL1Rhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjIHN5bmMgc3BlYy5qcyQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rlc3RfaW5kZXguanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsImpRdWVyeSIsIl9qcXVlcnkiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX0RhdGVUaW1lSGVscGVyIiwiVGFza1N1cGVydmlzaW9uU2VydmljZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJlcnJvck1zZ1ByZWZpeCIsInVzZXJJZCIsIl90aGlzIiwiRXJyb3IiLCJjcmV3TGlzdFJlc3RFbmRwb2ludCIsImFyZ3MiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIiQiLCJ1cmwiLCJ0eXBlIiwiZGF0YSIsInN1Y2Nlc3MiLCJjcmV3UmVzcG9uc2VMaXN0IiwidGV4dFN0YXR1cyIsImpxWEhSIiwiZXJyb3IiLCJlcnJvclRocm93biIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJfdGhpczIiLCJjdXJyZW50RGF0ZVRpbWVSZXN0RW5kcG9pbnQiLCJyZXNwb25zZSIsImRlZmF1bHRTdGFydCIsIkRhdGUiLCJzdGFydFllYXIiLCJzdGFydERheU9mTW9udGgiLCJzdGFydEhvdXJJbkRheSIsInN0YXJ0TWludXRlIiwiZGVmYXVsdEVuZCIsImVuZFllYXIiLCJlbmREYXlPZk1vbnRoIiwiZW5kSG91ckluRGF5IiwiZW5kTWludXRlIiwiZGVmYXVsdFN0YXJ0RW5kVmFsdWVzIiwiZm9ybWF0RGF0ZSIsImZvcm1hdFRpbWUiLCJ2YWxpZGF0ZURhdGVGb3JtYXQiLCJzdGFydERhdGUiLCJ2YWxpZGF0ZVRpbWVGb3JtYXQiLCJzdGFydFRpbWUiLCJlbmREYXRlIiwiZW5kVGltZSIsIl90aGlzMyIsImV4Y2x1ZGVDb21wbGV0ZSIsInNlYXJjaERhdGEiLCJvbmx5V29ya3Njb3BlZCIsIm9ubHlDb250YWluaW5nTGFib3VyIiwiYXNzaWduZWRUb0NyZXdJZCIsImNyZXdJZCIsIm1pblNjaGVkdWxlZFN0YXJ0RGF0ZVRpbWUiLCJzdGFydERhdGVUaW1lIiwibWF4U2NoZWR1bGVkU3RhcnREYXRlVGltZSIsImVuZERhdGVUaW1lIiwiZXhjbHVkZUNvbXBsZXRlZCIsImxpc3RDcmV3VGFza0xhYm91ckVuZHBvaW50IiwidGFza0lkIiwibGFib3VyUm93SWQiLCJuZXdWYWx1ZSIsIl90aGlzNCIsInNjaGVkdWxlZEhvdXJzIiwiY29udGVudFR5cGUiLCJKU09OIiwiX3RoaXM1IiwiYWN0dWFsSG91cnMiLCJkYXRlU3RyIiwiZGF0ZUZvcm1hdCIsIm1hdGNoQXJyYXkiLCJ0aW1lU3RyIiwidGltZUZvcm1hdCIsImRhdGUiLCJob3VycyIsInN0ciIsImdldERhdGUiLCJnZXRNb250aFNob3J0U3RyIiwiZ2V0RnVsbFllYXIiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJtb250aCIsIkZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlIiwidGFza0RlZmluaXRpb25zIiwiQXJyYXkiLCJzb3J0IiwiYSIsImIiLCJjb21wYXJlUmVzdWx0IiwiY29kZSIsImNvbmZpZ1Nsb3RDb2RlIiwibmFtZSIsImFwaVVybCIsInNjb3BlIiwiX2pxdWVyeTIiLCJkZWZhdWx0IiwiYWpheCIsInRhc2tEZWZpbml0aW9uc1Jlc3BvbnNlIiwic29ydGVkVGFza0RlZmluaXRpb25zIiwiZXJyIiwiRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyIsImxpbWl0IiwibWluTGVuZ3RoIiwiRGF0ZVRpbWVIZWxwZXIiLCJ0aW1lIiwiaG91cnNNaW51dGVzIiwicGFyc2VJbnQiLCJtaW51dGVzIiwiQWRkIiwieCIsInkiLCJTdWJ0cmFjdCIsIk11bHRpcGx5IiwiX2ZlYXR1cmVNYXRoIiwiZGVzY3JpYmUiLCJpdCIsImV4cGVjdCIsIl9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZSIsInNlcnZpY2UiLCJ0YXNrRGVmaW5pdGlvblJlc3BvbnNlIiwiYmVmb3JlQWxsIiwic29ydGVkRGF0YSIsInNvcnRUYXNrRGVmaW5pdGlvbnMiLCJqYXNtaW5lIiwic3B5T24iLCJlIiwiaW52YWxpZFJlc3BvbnNlIiwiZ2V0Rm9sbG93T25UYXNrRGVmaW5pdGlvbnMiLCJ0aGVuIiwiZmFrZURhdGEiLCJfZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyIsIkZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyIiwidHlwZUFoZWFkSWQiLCJva0J1dHRvbklkIiwibm90Rm91bmRNc2dJZCIsImZvbGxvd09uVGFza0RlZm5VdWlkT3VwdXRJZCIsImFwaVVybElkIiwibm90Rm91bmRNc2dFbCIsIm9rQnRuRWwiLCJ0eXBlQWhlYWRTZWFyY2hJbnB1dEVsIiwiZm9sbG93T25UYXNrRGVmblV1aWRPdXB1dEVsIiwiYXBpVXJsRWwiLCJsZW5ndGgiLCJ2YWwiLCJzZWxlY3RlZE9wdGlvbiIsImtleWRvd24iLCJzZXRUaW1lb3V0IiwiaW5pdGlhbGl6ZSIsImJpbmQiLCJzdWdnZXN0aW9uIiwiZGlzcGxheUZvbGxvd09uIiwiYXR0ciIsImlkIiwiZGlzYWJsZU9rQnRuIiwiX2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlMiIsImNvbmZpZ3VyZVR5cGVBaGVhZCIsImZvY3VzIiwiY29uZmlnIiwiaW5kZXgiLCJpbnB1dCIsImhpZ2hsaWdodCIsImRpc3BsYXkiLCJlbXB0eVRlbXBsYXRlIiwic291cmNlIiwiY2FsbGJhY2siLCJvbkNsaWNrIiwidHlwZUFoZWFkSW5wdXRFbCIsInNlbGVjdGlvbkVsIiwic2VsZWN0ZWRSZWNvcmQiLCJldmVudCIsImhpZGVMYXlvdXQiLCJxdWVyeSIsInN1Z2dlc3Rpb25PYmoiLCJyZW1vdmVDbGFzcyIsInJlbW92ZUF0dHIiLCJhZGRDbGFzcyIsIl9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29udHJvbGxlciIsInJlc3RBcGlVcmwiLCJnZXRHb29kQ29udHJvbGxlciIsInNldFVwSFRNTEZpeHR1cmUiLCJzZXRGaXh0dXJlcyIsImJlZm9yZUVhY2giLCJva0J1dHRvbkVsIiwiZmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZEVsIiwiYWZ0ZXJFYWNoIiwiY29udHJvbGxlciIsImRvbmUiLCJyZXNwb25zZVRhc2tEZWZpbml0aW9ucyIsIm5hdGl2ZUVsIiwiX1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UiLCJzdWNjZXNzSGFuZGxlciIsImZhaWx1cmVIYW5kbGVyIiwiYWp4IiwiRGF0ZVRpbWVWYWxpZGF0b3IiLCJ2YWx1ZSIsInNwbGl0IiwiZyIsIkZ1bmN0aW9uIiwiZXZhbCIsIndpbmRvdyIsIl90eXBlb2YiLCJwcm9jZXNzIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhbGwiLCJydW5DbGVhclRpbWVvdXQiLCJtYXJrZXIiLCJxdWV1ZSIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImNvbmNhdCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibGVuIiwicnVuIiwibmV4dFRpY2siLCJhcmd1bWVudHMiLCJpIiwicHVzaCIsIkl0ZW0iLCJhcnJheSIsInByb3RvdHlwZSIsImFwcGx5IiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm5vb3AiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsImdsb2JhbCIsImZhY3RvcnkiLCJ1bmRlZmluZWQiLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsIm9iamVjdE9yRnVuY3Rpb24iLCJpc0Z1bmN0aW9uIiwiX2lzQXJyYXkiLCJpc0FycmF5IiwiT2JqZWN0IiwidG9TdHJpbmciLCJ2ZXJ0eE5leHQiLCJjdXN0b21TY2hlZHVsZXJGbiIsImFzYXAiLCJhcmciLCJmbHVzaCIsInNjaGVkdWxlRmx1c2giLCJzZXRTY2hlZHVsZXIiLCJzY2hlZHVsZUZuIiwic2V0QXNhcCIsImFzYXBGbiIsImJyb3dzZXJXaW5kb3ciLCJicm93c2VyR2xvYmFsIiwiQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwiV2ViS2l0TXV0YXRpb25PYnNlcnZlciIsImlzTm9kZSIsInNlbGYiLCJpc1dvcmtlciIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwiaW1wb3J0U2NyaXB0cyIsIk1lc3NhZ2VDaGFubmVsIiwidXNlTmV4dFRpY2siLCJ1c2VWZXJ0eFRpbWVyIiwidXNlTXV0YXRpb25PYnNlcnZlciIsIml0ZXJhdGlvbnMiLCJvYnNlcnZlciIsIm5vZGUiLCJkb2N1bWVudCIsImNyZWF0ZVRleHROb2RlIiwib2JzZXJ2ZSIsImNoYXJhY3RlckRhdGEiLCJ1c2VNZXNzYWdlQ2hhbm5lbCIsImNoYW5uZWwiLCJwb3J0MSIsIm9ubWVzc2FnZSIsInBvcnQyIiwicG9zdE1lc3NhZ2UiLCJ1c2VTZXRUaW1lb3V0IiwiZ2xvYmFsU2V0VGltZW91dCIsImF0dGVtcHRWZXJ0eCIsInIiLCJyZXF1aXJlIiwidmVydHgiLCJydW5Pbkxvb3AiLCJydW5PbkNvbnRleHQiLCJvbkZ1bGZpbGxtZW50Iiwib25SZWplY3Rpb24iLCJfYXJndW1lbnRzIiwicGFyZW50IiwiY2hpbGQiLCJjb25zdHJ1Y3RvciIsIlBST01JU0VfSUQiLCJtYWtlUHJvbWlzZSIsIl9zdGF0ZSIsImludm9rZUNhbGxiYWNrIiwiX3Jlc3VsdCIsInN1YnNjcmliZSIsIm9iamVjdCIsIkNvbnN0cnVjdG9yIiwicHJvbWlzZSIsIl9yZXNvbHZlIiwiTWF0aCIsInJhbmRvbSIsInN1YnN0cmluZyIsIlBFTkRJTkciLCJGVUxGSUxMRUQiLCJSRUpFQ1RFRCIsIkdFVF9USEVOX0VSUk9SIiwiRXJyb3JPYmplY3QiLCJzZWxmRnVsZmlsbG1lbnQiLCJUeXBlRXJyb3IiLCJjYW5ub3RSZXR1cm5Pd24iLCJnZXRUaGVuIiwidHJ5VGhlbiIsImZ1bGZpbGxtZW50SGFuZGxlciIsInJlamVjdGlvbkhhbmRsZXIiLCJoYW5kbGVGb3JlaWduVGhlbmFibGUiLCJ0aGVuYWJsZSIsInNlYWxlZCIsImZ1bGZpbGwiLCJyZWFzb24iLCJfcmVqZWN0IiwiX2xhYmVsIiwiaGFuZGxlT3duVGhlbmFibGUiLCJoYW5kbGVNYXliZVRoZW5hYmxlIiwibWF5YmVUaGVuYWJsZSIsInRoZW4kJCIsInB1Ymxpc2hSZWplY3Rpb24iLCJfb25lcnJvciIsInB1Ymxpc2giLCJfc3Vic2NyaWJlcnMiLCJzdWJzY3JpYmVycyIsInNldHRsZWQiLCJkZXRhaWwiLCJUUllfQ0FUQ0hfRVJST1IiLCJ0cnlDYXRjaCIsImhhc0NhbGxiYWNrIiwic3VjY2VlZGVkIiwiZmFpbGVkIiwiaW5pdGlhbGl6ZVByb21pc2UiLCJyZXNvbHZlciIsInJlc29sdmVQcm9taXNlIiwicmVqZWN0UHJvbWlzZSIsIm5leHRJZCIsIkVudW1lcmF0b3IiLCJfaW5zdGFuY2VDb25zdHJ1Y3RvciIsIl9pbnB1dCIsIl9yZW1haW5pbmciLCJfZW51bWVyYXRlIiwidmFsaWRhdGlvbkVycm9yIiwiX2VhY2hFbnRyeSIsImVudHJ5IiwiYyIsInJlc29sdmUkJCIsIl90aGVuIiwiX3NldHRsZWRBdCIsIl93aWxsU2V0dGxlQXQiLCJzdGF0ZSIsImVudW1lcmF0b3IiLCJhbGwiLCJlbnRyaWVzIiwicmFjZSIsIl8iLCJuZWVkc1Jlc29sdmVyIiwibmVlZHNOZXciLCJfc2V0U2NoZWR1bGVyIiwiX3NldEFzYXAiLCJfYXNhcCIsImNhdGNoIiwiX2NhdGNoIiwicG9seWZpbGwiLCJsb2NhbCIsIlAiLCJwcm9taXNlVG9TdHJpbmciLCJjYXN0IiwiX0RhdGVUaW1lVmFsaWRhdG9yIiwiVGFza1N1cGVydmlzaW9uQ29udHJvbGxlciIsInBhcm1zIiwiY3Jld3NGaWVsZElkIiwiY3Jld3NGaWVsZCIsImlzQWxsb3dlZFRvU2VhcmNoIiwiaXNBbGxvd2VkVG9FZGl0U2NoZWRsZWRIb3VycyIsImlzQWxsb3dlZFRvRWRpdEFjdHVhbEhvdXJzIiwic3RhcnREYXRlV2lkZ2V0SWQiLCJzdGFydEZpZWxkSWQiLCJlbmREYXRlV2lkZ2V0SWQiLCJlbmRGaWVsZElkIiwic2hvd0NvbXBsZXRlSWQiLCJzZWFyY2hCdXR0b25JZCIsInNlYXJjaFJlc3VsdHNJZCIsIm5vU2VhcmNoUmVzdWx0c01lc3NhZ2UiLCJsYWJvclJvd0VsYXNwZWRUaW1lVGhyZXNob2xkIiwiZGVmYXVsdFNob3dDb21wbGV0ZSIsImlzU2NoZWR1bGVkSG91cnNDZWxsRWRpdGFibGUiLCJoYW5kbGVTY2hlZHVsZUhvdXJzRWRpdCIsImhhbmRsZUFjdHVhbEhvdXJzRWRpdCIsImFjdHVhbEhvdXJDZWxsRm9ybWF0dGVyIiwiaW5pdFNob3dDb21wbGV0ZVRhc2tzV2lkZ2V0IiwiaW5pdFJlc3VsdHNUYWJsZSIsImluaXRTZWFyY2hCdXR0b24iLCJpbml0Q3Jld3NXaWRnZXQiLCJyZXN1bHRzIiwicG9wdWxhdGVDcmV3c1dpZGdldCIsInNldFN0YXJ0QW5kRW5kV2lkZ2V0cyIsInBlcmZvcm1TZWFyY2giLCJnZXRDcmV3c0ZvclVzZXIiLCJ2YWxpZGF0ZVN0YXJ0RW5kV2lkZ2V0SWRzIiwic3RhcnRGaWVsZElkcyIsImJ1aWxkRmllbGRJZHNGb3JEYXRlVGltZVdpZGdldCIsImVuZEZpZWxkSWRzIiwic2V0U3RhcnRFbmRFbGVtQXR0cnMiLCJ2YWxpZGF0ZVN0YXJ0RW5kRWxlbXMiLCJleGNlcHRpb24iLCJjb25zb2xlIiwic3RhcnREYXRlRWxlbSIsImRpc2FibGVkIiwiZW5kRGF0ZUVsZW0iLCJnZXREZWZhdWx0U3RhcnRBbmRFbmREYXRlcyIsImxpc3RPZkxhYm91ckF0dHJzIiwidGFibGUiLCJUYWJ1bGF0b3IiLCJjb2x1bW5zIiwiZmllbGQiLCJ2aXNpYmxlIiwic29ydGVyIiwiYWxpZ24iLCJ3aWR0aCIsImhlYWRlclNvcnQiLCJmb3JtYXR0ZXIiLCJpc0VsYXBzZWRUaW1lR3JlYXRlclRoYW5UaHJlc2hvbGQiLCJlZGl0b3IiLCJ2YWxpZGF0b3IiLCJ2YWxpZGF0ZUhvdXJzIiwiZWRpdGFibGUiLCJjZWxsRWRpdGVkIiwiaXNBY3R1YWxIb3Vyc0NlbGxFZGl0YWJsZSIsImRhdGFTb3J0ZWQiLCJzb3J0ZXJzIiwicm93cyIsInNvbWUiLCJzZXRHcm91cEJ5IiwiZ3JvdXBIZWFkZXIiLCJjb3VudCIsImdyb3VwIiwiZ3JvdXBUb2dnbGVFbGVtZW50IiwicGxhY2Vob2xkZXIiLCJjZWxsIiwiYWN0dWFsSG91ckdyZWF0ZXJUaGFuU2NoZWR1bGVkSG91cnMiLCJnZXRWYWx1ZSIsInNjaGVkdWxlSG91cnMiLCIkYnV0dG9uIiwiZm9ybWF0RGF0ZVRpbWUiLCJzaG93Q29tcGxldGVUYXNrcyIsImNoZWNrZWQiLCJ1cGRhdGVSZXN1bHRzVGFibGUiLCJjcmV3cyIsInNlbGVjdCIsInNlbGVjdE9wdGlvbnMiLCJvcHRpb25zIiwiY3JldyIsIm9wdGlvbiIsImxhYmVsIiwid2lkZ2V0SWQiLCJkYXRlRmllbGRJZCIsInRpbWVGaWVsZElkIiwidGltZVpvbmVGaWVsZElkIiwic3RhcnRQaWNrZXJJZCIsInN0YXJ0RGF0ZVdpZGdldElkcyIsImVuZERhdGVXaWRnZXRJZHMiLCJzdGFydFRpbWVFbGVtIiwic3RhcnRUaW1lWm9uZUVsZW0iLCJzdGFydFBpY2tlckVsZW0iLCJlbmRUaW1lRWxlbSIsImVuZFRpbWVab25lRWxlbSIsImVuZFBpY2tlckVsZW0iLCJzdGFydFRpbWVab25lIiwiZW5kVGltZVpvbmUiLCJhZGRUb1RvcCIsImNsZWFyRGF0YSIsImFkZERhdGEiLCJzZXRTb3J0IiwiY29sdW1uIiwiZGF0ZVRpbWVXaWRnZXRJZCIsImZpZWxkSWRzIiwiZGF0ZVZhbHVlIiwidGltZVZhbHVlIiwicm93RGF0YSIsImdldERhdGEiLCJkZWNpbWFsVGltZSIsInBhcnNlRmxvYXQiLCJ1cGRhdGVTY2hlZHVsZWRIb3VycyIsInVwZGF0ZUFjdHVhbEhvdXJzIiwiX1Rhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIiLCJfdGVzdEN1cnJlbnREYXRlVGltZVIiLCJ0ZXN0Q3Jld0xpc3QiLCJkZXNjcmlwdGlvbiIsInRlc3RDcmV3TGlzdE9mT25lIiwidGVzdEN1cnJlbnREYXRlVGltZVJlc3BvbnNlIiwic3RhcnRNb250aCIsIl9kZWZpbmVQcm9wZXJ0eSIsInZhbGlkUGFybXMiLCJmYWtlU2VydmljZSIsInJlcXVlc3QiLCJjcmV3c0ZpZWxkU2VsZWN0RWwiLCJtYXAiLCIuL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyLnNwZWMuanMiLCIuL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlLnNwZWMuanMiLCIuL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5zcGVjLmpzIiwiLi9lbmdpbmVlcmluZy9yZXF1aXJlbWVudGRlZmluaXRpb24vZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyLnNwZWMuanMiLCIuL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2Uuc3BlYy5qcyIsIi4vc29tZUZlYXR1cmUvZmVhdHVyZU1hdGgvZmVhdHVyZU1hdGguc3BlYy5qcyIsIndlYnBhY2tDb250ZXh0IiwicmVxIiwid2VicGFja0NvbnRleHRSZXNvbHZlIiwia2V5cyIsIndlYnBhY2tDb250ZXh0S2V5cyIsInRlc3RzQ29udGV4dCJdLCJtYXBwaW5ncyI6IjZFQUFBQSxFQUFBQyxRQUFBQyx5V0NBQSxJQUFBQyxFQUFBQyxFQUFBLGNBQ0EsSUFBQUMsRUFBQUQsRUFBQSxxS0FFcUJFLGFBRWxCLFNBQUFBLElBQWNDLEVBQUFDLEtBQUFGLEdBQ1hFLEtBQUFDLGVBQUEsOERBR2FDLEdBQVEsSUFBQUMsRUFBQUgsS0FFckIsSUFBQUUsRUFBYSxDQUNWLE1BQU0sSUFBQUUsTUFBTix1QkFHSCxJQUFNQyxFQUFOLHdCQUNBLElBQU1DLEdBQVNKLE9BQWZBLEdBQ0EsT0FBTyxJQUFBSyxFQUFZLFNBQUFDLEVBQUFDLEdBQ2hCQyxnQkFDR0MsSUFESU4sRUFFSk8sS0FGSSxNQUdKQyxLQUhJ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LFFBQUE0aEIsRUFDQUEsRUFBQTlYLEdBQUEsaUNDNUJBLElBQUltWSxFQUFlOWhCLEVBQUEsSUFDbkI4aEIiLCJmaWxlIjoic3JjL3Rlc3QvamF2YXNjcmlwdC8xLnNwZWMtYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBqUXVlcnk7IiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IERhdGVUaW1lSGVscGVyIGZyb20gJy4uLy4uLy4uL2NvbW1vbi91dGlsL0RhdGVUaW1lSGVscGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2tTdXBlcnZpc2lvblNlcnZpY2Uge1xyXG5cclxuICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHRoaXMuZXJyb3JNc2dQcmVmaXggPSAnRXJyb3IgY29kZSA9ICAnO1xyXG4gICB9XHJcblxyXG4gICBnZXRDcmV3c0ZvclVzZXIodXNlcklkKSB7XHJcblxyXG4gICAgICBpZiAoIXVzZXJJZCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZXJJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY3Jld0xpc3RSZXN0RW5kcG9pbnQgPSAnL21haW50ZW5peC9yZXN0L2NyZXdzJztcclxuICAgICAgY29uc3QgYXJncyA9IHsgJ3VzZXJJZCc6IHVzZXJJZCB9O1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IGNyZXdMaXN0UmVzdEVuZHBvaW50LFxyXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBhcmdzLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiAoY3Jld1Jlc3BvbnNlTGlzdCwgdGV4dFN0YXR1cywganFYSFIpID0+IHtcclxuICAgICAgICAgICAgICAgcmVzb2x2ZShjcmV3UmVzcG9uc2VMaXN0KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pID0+IHtcclxuICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSB0aGlzLmVycm9yTXNnUHJlZml4ICsganFYSFIuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICByZWplY3QobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBnZXREZWZhdWx0U3RhcnRBbmRFbmREYXRlcyh1c2VySWQpIHtcclxuICAgICAgaWYgKCF1c2VySWQpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1c2VySWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGN1cnJlbnREYXRlVGltZVJlc3RFbmRwb2ludCA9ICcvbWFpbnRlbml4L3Jlc3QvZGF0ZXRpbWUvZ2V0Q3VycmVudCc7XHJcbiAgICAgIGNvbnN0IGFyZ3MgPSB7ICd1c2VySWQnOiB1c2VySWQgfTtcclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogY3VycmVudERhdGVUaW1lUmVzdEVuZHBvaW50LFxyXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBhcmdzLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiAocmVzcG9uc2UsIHRleHRTdGF0dXMsIGpxWEhSKSA9PiB7XHJcbiAgICAgICAgICAgICAgIGxldCBkZWZhdWx0U3RhcnQgPSBuZXcgRGF0ZShcclxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhcnRZZWFyLFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGFydE1vbnRoIC0gMSxcclxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhcnREYXlPZk1vbnRoLFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGFydEhvdXJJbkRheSxcclxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhcnRNaW51dGVcclxuICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgbGV0IGRlZmF1bHRFbmQgPSBuZXcgRGF0ZShcclxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZW5kWWVhcixcclxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZW5kTW9udGggLSAxLFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5lbmREYXlPZk1vbnRoLFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5lbmRIb3VySW5EYXksXHJcbiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmVuZE1pbnV0ZVxyXG4gICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgbGV0IGRlZmF1bHRTdGFydEVuZFZhbHVlcyA9IHt9O1xyXG4gICAgICAgICAgICAgICBkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuc3RhcnREYXRlID0gdGhpcy5mb3JtYXREYXRlKGRlZmF1bHRTdGFydCk7XHJcbiAgICAgICAgICAgICAgIGRlZmF1bHRTdGFydEVuZFZhbHVlcy5zdGFydFRpbWUgPSB0aGlzLmZvcm1hdFRpbWUoZGVmYXVsdFN0YXJ0KTtcclxuICAgICAgICAgICAgICAgZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLnN0YXJ0VGltZVpvbmUgPSByZXNwb25zZS5zdGFydFRpbWV6b25lO1xyXG4gICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlRGF0ZUZvcm1hdChkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuc3RhcnREYXRlKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgcmVqZWN0KCdkZWZhdWx0IHN0YXJ0RGF0ZSBmYWlsZWQgdmFsaWRhdGlvbjogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlVGltZUZvcm1hdChkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuc3RhcnRUaW1lKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgcmVqZWN0KCdkZWZhdWx0IHN0YXJ0VGltZSBmYWlsZWQgdmFsaWRhdGlvbjogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICBkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuZW5kRGF0ZSA9IHRoaXMuZm9ybWF0RGF0ZShkZWZhdWx0RW5kKTtcclxuICAgICAgICAgICAgICAgZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLmVuZFRpbWUgPSB0aGlzLmZvcm1hdFRpbWUoZGVmYXVsdEVuZCk7XHJcbiAgICAgICAgICAgICAgIGRlZmF1bHRTdGFydEVuZFZhbHVlcy5lbmRUaW1lWm9uZSA9IHJlc3BvbnNlLmVuZFRpbWV6b25lO1xyXG4gICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlRGF0ZUZvcm1hdChkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuZW5kRGF0ZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlamVjdCgnZGVmYXVsdCBlbmREYXRlIGZhaWxlZCB2YWxpZGF0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVRpbWVGb3JtYXQoZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLmVuZFRpbWUpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICByZWplY3QoJ2RlZmF1bHQgZW5kVGltZSBmYWlsZWQgdmFsaWRhdGlvbjogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICByZXNvbHZlKGRlZmF1bHRTdGFydEVuZFZhbHVlcyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSA9PiB7XHJcbiAgICAgICAgICAgICAgIGxldCBtZXNzYWdlID0gdGhpcy5lcnJvck1zZ1ByZWZpeCArIGpxWEhSLnN0YXR1cztcclxuICAgICAgICAgICAgICAgcmVqZWN0KG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgcGVyZm9ybVNlYXJjaChhcmdzKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgIGxldCBleGNsdWRlQ29tcGxldGUgPSAoKGFyZ3Muc2hvd0NvbXBsZXRlVGFza3MgPT0gdHJ1ZSkgPyBmYWxzZSA6IHRydWUpO1xyXG5cclxuICAgICAgICAgbGV0IHNlYXJjaERhdGEgPSB7XHJcbiAgICAgICAgICAgIG9ubHlXb3Jrc2NvcGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBvbmx5Q29udGFpbmluZ0xhYm91cjogdHJ1ZSxcclxuICAgICAgICAgICAgYXNzaWduZWRUb0NyZXdJZDogYXJncy5jcmV3SWQsXHJcbiAgICAgICAgICAgIG1pblNjaGVkdWxlZFN0YXJ0RGF0ZVRpbWU6IGFyZ3Muc3RhcnREYXRlVGltZSxcclxuICAgICAgICAgICAgbWF4U2NoZWR1bGVkU3RhcnREYXRlVGltZTogYXJncy5lbmREYXRlVGltZSxcclxuICAgICAgICAgICAgZXhjbHVkZUNvbXBsZXRlZDogZXhjbHVkZUNvbXBsZXRlXHJcbiAgICAgICAgIH07XHJcbiAgICAgICAgIFxyXG4gICAgICAgICBsZXQgbGlzdENyZXdUYXNrTGFib3VyRW5kcG9pbnQgPSAnL21haW50ZW5peC9yZXN0L3Rhc2tzJztcclxuXHJcbiAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogbGlzdENyZXdUYXNrTGFib3VyRW5kcG9pbnQsXHJcbiAgICAgICAgICAgIGRhdGE6IHNlYXJjaERhdGEsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IChyZXNwb25zZSwgdGV4dFN0YXR1cywganFYSFIpID0+IHtcclxuICAgICAgICAgICAgICAgLy8gVGhlIHJlc3BvbnNlIGlzIGEganNvbiBsaXN0IG9mIG9iamVjdHMgZ2VuZXJhdGVkIGZyb206XHJcbiAgICAgICAgICAgICAgIC8vICAgIGNvbS5teGkubXgud2ViLnJlc3QudGFzay5DcmV3VGFza0xhYm91clJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgPT4ge1xyXG4gICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IHRoaXMuZXJyb3JNc2dQcmVmaXggKyBqcVhIUi5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgIHJlamVjdChtZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIC8vIHZhbGlkYXRlSG91cnModmFsdWUpIHtcclxuICAgLy8gICAgLy8gVGhpcyBpcyBiYXNlZCBvbiB0aGUgTlVNQkVSKDksNSkgY29uc3RyYWludCBmb3JcclxuICAgLy8gICAgLy8gc2NoZWRfbGFib3VyX3JvbGUuc2NoZWRfaHIgYW5kIHNjaGVkX2xhYm91cl9yb2xlLmFjdHVhbF9oclxyXG4gICAvLyAgICBsZXQgc3BsaXQgPSB2YWx1ZS5zcGxpdCgnLicpO1xyXG4gICAvLyAgICBpZiAoIHNwbGl0Lmxlbmd0aCA+IDAgKSB7XHJcbiAgIC8vICAgICAgIGlmICggc3BsaXRbMF0ubGVuZ3RoID4gNCApIHtcclxuICAgLy8gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAvLyAgICAgICB9XHJcbiAgIC8vICAgICAgIGlmICggc3BsaXQubGVuZ3RoID09IDIgKSB7XHJcbiAgIC8vICAgICAgICAgIGlmICggc3BsaXRbMV0ubGVuZ3RoID4gNSApIHtcclxuICAgLy8gICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAvLyAgICAgICAgICB9XHJcbiAgIC8vICAgICAgIH0gZWxzZSBpZiAoc3BsaXQubGVuZ3RoID4gMiApIHtcclxuICAgLy8gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAvLyAgICAgICB9XHJcbiAgIC8vICAgIH1cclxuICAgLy8gICAgcmV0dXJuIHRydWU7XHJcbiAgIC8vIH1cclxuXHJcbiAgIHVwZGF0ZVNjaGVkdWxlZEhvdXJzKHRhc2tJZCwgbGFib3VyUm93SWQsIG5ld1ZhbHVlKSB7XHJcbiAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICBzY2hlZHVsZWRIb3VyczogbmV3VmFsdWVcclxuICAgICAgfTtcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICAgdXJsOiAnL21haW50ZW5peC9yZXN0L3Rhc2tzLycgKyB0YXNrSWQgKyAnL2xhYm91cnMvJyArIGxhYm91clJvd0lkLFxyXG4gICAgICAgICB0eXBlOiBcIlBVVFwiLFxyXG4gICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgICAgZXJyb3I6IChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pID0+IHtcclxuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSB0aGlzLmVycm9yTXNnUHJlZml4ICsganFYSFIuc3RhdHVzO1xyXG4gICAgICAgICAgICBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIHVwZGF0ZUFjdHVhbEhvdXJzKHRhc2tJZCwgbGFib3VyUm93SWQsIG5ld1ZhbHVlKSB7XHJcbiAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICBhY3R1YWxIb3VyczogbmV3VmFsdWVcclxuICAgICAgfTtcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICAgdXJsOiAnL21haW50ZW5peC9yZXN0L3Rhc2tzLycgKyB0YXNrSWQgKyAnL2xhYm91cnMvJyArIGxhYm91clJvd0lkLFxyXG4gICAgICAgICB0eXBlOiBcIlBVVFwiLFxyXG4gICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgICAgZXJyb3I6IChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pID0+IHtcclxuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSB0aGlzLmVycm9yTXNnUHJlZml4ICsganFYSFIuc3RhdHVzO1xyXG4gICAgICAgICAgICBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcblxyXG4gICAvL1xyXG4gICAvLyBwcml2YXRlIG1ldGhvZHNcclxuICAgLy9cclxuXHJcbiAgIHZhbGlkYXRlRGF0ZUZvcm1hdChkYXRlU3RyKSB7XHJcbiAgICAgIGlmICghZGF0ZVN0cikge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGVTdHIgaXMgbWFuZGF0b3J5LicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgZGF0ZVN0ciAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRlU3RyIGlzIG5vdCBhIHN0cmluZycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyByZWdleCBleGFtcGxlOiBkZC1NTU0teXl5eVxyXG4gICAgICBjb25zdCBkYXRlRm9ybWF0ID0gL14oKFswLTldKXwoWzAtMl1bMC05XSl8KFszXVswLTFdKSlcXC0oSkFOfEZFQnxNQVJ8QVBSfE1BWXxKVU58SlVMfEFVR3xTRVB8T0NUfE5PVnxERUMpXFwtXFxkezR9JC87XHJcbiAgICAgIGNvbnN0IG1hdGNoQXJyYXkgPSBkYXRlU3RyLm1hdGNoKGRhdGVGb3JtYXQpO1xyXG5cclxuICAgICAgaWYgKG1hdGNoQXJyYXkgPT0gbnVsbCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGVTdHIgaGFzIGludmFsaWQgZm9ybWF0LicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgfVxyXG5cclxuICAgdmFsaWRhdGVUaW1lRm9ybWF0KHRpbWVTdHIpIHtcclxuICAgICAgaWYgKCF0aW1lU3RyKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcigndGltZVN0ciBpcyBtYW5kYXRvcnkuJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVvZiB0aW1lU3RyICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RpbWVTdHIgaXMgbm90IGEgc3RyaW5nLicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyByZWdleCBleGFtcGxlOiBoaDptbVxyXG4gICAgICBjb25zdCB0aW1lRm9ybWF0ID0gL14kfF4oKFswMV1bMC05XSl8KDJbMC0zXSkpOlswLTVdWzAtOV0kLztcclxuICAgICAgY29uc3QgbWF0Y2hBcnJheSA9IHRpbWVTdHIubWF0Y2godGltZUZvcm1hdCk7XHJcblxyXG4gICAgICBpZiAobWF0Y2hBcnJheSA9PSBudWxsKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcigndGltZVN0ciBoYXMgaW52YWxpZCBmb3JtYXQuJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICB9XHJcblxyXG4gICBhZGRIb3VycyhkYXRlLCBob3Vycykge1xyXG4gICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgKyAoaG91cnMgKiA2MCAqIDYwICogMTAwMCkpO1xyXG4gICB9XHJcblxyXG4gICBmb3JtYXREYXRlKGRhdGUpIHtcclxuICAgICAgbGV0IHN0ciA9XHJcbiAgICAgICAgICgoZGF0ZS5nZXREYXRlKCkgPCAxMCkgPyAnMCcgOiAnJykgKyBkYXRlLmdldERhdGUoKSArICctJyArXHJcbiAgICAgICAgIHRoaXMuZ2V0TW9udGhTaG9ydFN0cihkYXRlLmdldE1vbnRoKCkgKyAxKSArICctJyArXHJcbiAgICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgcmV0dXJuIHN0cjtcclxuICAgfVxyXG5cclxuICAgZm9ybWF0VGltZShkYXRlKSB7XHJcbiAgICAgIGxldCBzdHIgPVxyXG4gICAgICAgICAoKGRhdGUuZ2V0SG91cnMoKSA8IDEwKSA/ICcwJyA6ICcnKSArIGRhdGUuZ2V0SG91cnMoKSArICc6JyArXHJcbiAgICAgICAgICgoZGF0ZS5nZXRNaW51dGVzKCkgPCAxMCkgPyAnMCcgOiAnJykgKyBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgcmV0dXJuIHN0cjtcclxuICAgfVxyXG5cclxuICAgZ2V0TW9udGhTaG9ydFN0cihtb250aCkge1xyXG4gICAgICBpZiAobW9udGggPT09IDEpIHJldHVybiAnSkFOJztcclxuICAgICAgaWYgKG1vbnRoID09PSAyKSByZXR1cm4gJ0ZFQic7XHJcbiAgICAgIGlmIChtb250aCA9PT0gMykgcmV0dXJuICdNQVInO1xyXG4gICAgICBpZiAobW9udGggPT09IDQpIHJldHVybiAnQVBSJztcclxuICAgICAgaWYgKG1vbnRoID09PSA1KSByZXR1cm4gJ01BWSc7XHJcbiAgICAgIGlmIChtb250aCA9PT0gNikgcmV0dXJuICdKVU4nO1xyXG4gICAgICBpZiAobW9udGggPT09IDcpIHJldHVybiAnSlVMJztcclxuICAgICAgaWYgKG1vbnRoID09PSA4KSByZXR1cm4gJ0FVRyc7XHJcbiAgICAgIGlmIChtb250aCA9PT0gOSkgcmV0dXJuICdTRVAnO1xyXG4gICAgICBpZiAobW9udGggPT09IDEwKSByZXR1cm4gJ09DVCc7XHJcbiAgICAgIGlmIChtb250aCA9PT0gMTEpIHJldHVybiAnTk9WJztcclxuICAgICAgaWYgKG1vbnRoID09PSAxMikgcmV0dXJuICdERUMnO1xyXG4gICAgICByZXR1cm4gXCJcIjtcclxuICAgfVxyXG5cclxufVxyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XHJcblxyXG4vKipcclxuICogVGhlIHNlcnZpY2UgbGF5ZXIsIGl0IHNlbmRzIFJFU1QgQVBJIGNhbGwgYW5kIHBhc3MgdGhlIHJlc3BvbnNlIGRhdGEgdG8gY29udHJvbGxlclxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2Uge1xyXG5cclxuICAgc3RhdGljIHNvcnRUYXNrRGVmaW5pdGlvbnModGFza0RlZmluaXRpb25zKSB7XHJcbiAgICAgIGlmICghdGFza0RlZmluaXRpb25zIHx8ICEodGFza0RlZmluaXRpb25zIGluc3RhbmNlb2YgQXJyYXkpKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRhc2tEZWZpbml0aW9ucyBleHBlY3RlZCB0byBiZSBhbiBBcnJheVwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRhc2tEZWZpbml0aW9ucy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgbGV0IGNvbXBhcmVSZXN1bHQgPSAoYS5jb2RlID4gYi5jb2RlKSA/IDEgOiAoKGEuY29kZSA8IGIuY29kZSkgPyAtMSA6IDApO1xyXG5cclxuICAgICAgICAgaWYgKGNvbXBhcmVSZXN1bHQgPT0gMCkge1xyXG4gICAgICAgICAgICBjb21wYXJlUmVzdWx0ID0gKGEuY29uZmlnU2xvdENvZGUgPiBiLmNvbmZpZ1Nsb3RDb2RlKSA/IDEgOiAoKGEuY29uZmlnU2xvdENvZGUgPCBiLmNvbmZpZ1Nsb3RDb2RlKSA/IC0xIDogMCk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGlmIChjb21wYXJlUmVzdWx0ID09IDApIHtcclxuICAgICAgICAgICAgY29tcGFyZVJlc3VsdCA9IChhLm5hbWUgPiBiLm5hbWUpID8gMSA6ICgoYS5uYW1lIDwgYi5uYW1lKSA/IC0xIDogMCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgcmV0dXJuIGNvbXBhcmVSZXN1bHQ7XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBzdGF0aWMgZ2V0Rm9sbG93T25UYXNrRGVmaW5pdGlvbnMoYXBpVXJsKSB7XHJcbiAgICAgIGxldCBzY29wZSA9IHRoaXM7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIHVybDogYXBpVXJsLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbih0YXNrRGVmaW5pdGlvbnNSZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAvLyBuaWNlIHRvIGhhdmU6IHBvc3RQcm9jZXNzb3IgaG9va1xyXG4gICAgICAgICAgICAgICBsZXQgc29ydGVkVGFza0RlZmluaXRpb25zID0gc2NvcGUuc29ydFRhc2tEZWZpbml0aW9ucyh0YXNrRGVmaW5pdGlvbnNSZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgIHJlc29sdmUoc29ydGVkVGFza0RlZmluaXRpb25zKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAvLyBpZiBlcnJvciBoYXBwZW5zIHdpdGggdGhlIEFQSSBjYWxsLCBpbml0aWFsaXplIHRoZSB3aWRnZXQgd2l0aCBhbiBlbXB0eSBhcnJheS5cclxuICAgICAgICAgICAgICAgcmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG59XHJcbiIsIi8qIGdsb2JhbCAkICovXHJcbi8qKlxyXG4gKiBJdCBjb250YWlucyBhbGwgY29uZmlndXJhdGlvbnMgZm9yIHRoZSB0eXBlIGFoZWFkIHNlYXJjaCB3aWRnZXRcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcge1xyXG5cclxuICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICBpZiAoIWRhdGEgfHwgIShkYXRhIGluc3RhbmNlb2YgQXJyYXkpKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSByZXNwb25zZSBkYXRhIHN1cHBvc2UgdG8gYmUgaW4gYXJyYXkgZm9ybVwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuXHJcbiAgICAgIC8vIFRoZSBuYW1lIG9mIHRoZSBkYXRhc2V0LlxyXG4gICAgICAvLyBUaGlzIHdpbGwgYmUgYXBwZW5kZWQgdG8gdGhlIGNsYXNzIG5hbWUgb2YgdGhlIGZpbHRlcmVkIHJlc3VsdCA8ZGl2Pi5cclxuICAgICAgdGhpcy5uYW1lID0gJ2ZvbGxvd09uVGFza0RlZm5TZWFyY2gnO1xyXG5cclxuICAgICAgLy8gVGhlIG1heCBudW1iZXIgb2Ygc3VnZ2VzdGlvbnMgdG8gYmUgZGlzcGxheWVkLlxyXG4gICAgICB0aGlzLmxpbWl0ID0gNTA7XHJcblxyXG4gICAgICAvLyBUaGUgbWluaW11bSBjaGFyYWN0ZXIgbGVuZ3RoIG5lZWRlZCBiZWZvcmUgc3VnZ2VzdGlvbnMgc3RhcnQgZ2V0dGluZyByZW5kZXJlZC5cclxuICAgICAgdGhpcy5taW5MZW5ndGggPSAxO1xyXG4gICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0ZVRpbWVIZWxwZXIge1xuXG4gICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgIHN0YXRpYyBhZGRIb3VycyhkYXRlLCBob3Vycykge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpICsgKGhvdXJzICogNjAgKiA2MCAqIDEwMDApKTtcbiAgIH1cblxuICAgc3RhdGljIGZvcm1hdERhdGUoZGF0ZSkge1xuICAgICAgbGV0IHN0ciA9XG4gICAgICAgICAoKGRhdGUuZ2V0RGF0ZSgpIDwgMTApID8gJzAnIDogJycpICsgZGF0ZS5nZXREYXRlKCkgKyAnLScgK1xuICAgICAgICAgdGhpcy5nZXRNb250aFNob3J0U3RyKGRhdGUuZ2V0TW9udGgoKSArIDEpICsgJy0nICtcbiAgICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgIHJldHVybiBzdHI7XG4gICB9XG5cbiAgIHN0YXRpYyBmb3JtYXRUaW1lKGRhdGUpIHtcbiAgICAgIGxldCBzdHIgPVxuICAgICAgICAgKChkYXRlLmdldEhvdXJzKCkgPCAxMCkgPyAnMCcgOiAnJykgKyBkYXRlLmdldEhvdXJzKCkgKyAnOicgK1xuICAgICAgICAgKChkYXRlLmdldE1pbnV0ZXMoKSA8IDEwKSA/ICcwJyA6ICcnKSArIGRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgcmV0dXJuIHN0cjtcbiAgIH1cblxuICAgLy8gQ29udmVydHMgYSB0aW1lIGluIHRoZSBmb3JtYXQgaGg6bW0gaW50byBpdHMgY29ycmVzcG9uZGluZyBkZWNpbWFsIHZhbHVlXG4gICBzdGF0aWMgY29udmVydFRpbWVUb0RlY2ltYWwodGltZSkge1xuICAgICAgbGV0IGhvdXJzTWludXRlcyA9IHRpbWUuc3BsaXQoL1suOl0vKTtcbiAgICAgIGxldCBob3VycyA9IHBhcnNlSW50KGhvdXJzTWludXRlc1swXSwgMTApO1xuICAgICAgbGV0IG1pbnV0ZXMgPSBob3Vyc01pbnV0ZXNbMV0gPyBwYXJzZUludChob3Vyc01pbnV0ZXNbMV0sIDEwKSA6IDA7XG4gICAgICByZXR1cm4gaG91cnMgKyBtaW51dGVzIC8gNjA7XG4gICB9XG5cbiAgIHN0YXRpYyBnZXRNb250aFNob3J0U3RyKG1vbnRoKSB7XG4gICAgICBpZiAobW9udGggPT09IDEpIHJldHVybiAnSkFOJztcbiAgICAgIGVsc2UgaWYgKG1vbnRoID09PSAyKSByZXR1cm4gJ0ZFQic7XG4gICAgICBlbHNlIGlmIChtb250aCA9PT0gMykgcmV0dXJuICdNQVInO1xuICAgICAgZWxzZSBpZiAobW9udGggPT09IDQpIHJldHVybiAnQVBSJztcbiAgICAgIGVsc2UgaWYgKG1vbnRoID09PSA1KSByZXR1cm4gJ01BWSc7XG4gICAgICBlbHNlIGlmIChtb250aCA9PT0gNikgcmV0dXJuICdKVU4nO1xuICAgICAgZWxzZSBpZiAobW9udGggPT09IDcpIHJldHVybiAnSlVMJztcbiAgICAgIGVsc2UgaWYgKG1vbnRoID09PSA4KSByZXR1cm4gJ0FVRyc7XG4gICAgICBlbHNlIGlmIChtb250aCA9PT0gOSkgcmV0dXJuICdTRVAnO1xuICAgICAgZWxzZSBpZiAobW9udGggPT09IDEwKSByZXR1cm4gJ09DVCc7XG4gICAgICBlbHNlIGlmIChtb250aCA9PT0gMTEpIHJldHVybiAnTk9WJztcbiAgICAgIGVsc2UgaWYgKG1vbnRoID09PSAxMikgcmV0dXJuICdERUMnO1xuICAgICAgZWxzZSByZXR1cm4gXCJcIjtcbiAgIH1cblxufVxuIiwiZXhwb3J0IGNvbnN0IEFkZCA9IGZ1bmN0aW9uKHgsIHkpIHtcblx0cmV0dXJuKHgreSk7XG59XG5cbmV4cG9ydCBjb25zdCBTdWJ0cmFjdCA9IGZ1bmN0aW9uKHgsIHkpIHtcblx0cmV0dXJuKHgteSk7XG59XG5cbmV4cG9ydCBjb25zdCBNdWx0aXBseSA9IGZ1bmN0aW9uKHgsIHkpIHtcblx0cmV0dXJuKHgqeSk7XG59IiwiLypnbG9iYWwgZXhwZWN0Ki9cbmltcG9ydCB7IEFkZCwgU3VidHJhY3QsIE11bHRpcGx5IH0gZnJvbSAnLi9mZWF0dXJlTWF0aC5qcyc7XG5cbmRlc2NyaWJlKCdbRHVtbXldJywgKCkgPT4ge1xuXHRcblx0aXQoJ1tBZGRdIHNob3VsZCBhZGQgdHdvIG51bWJlcnMgdG9nZXRoZXIgYW5kIHJldHVybiB0aGUgcmVzdWx0JywgKCkgPT4ge1xuXHRcdGV4cGVjdChBZGQoMSwgMikpLnRvQmUoMyk7XG5cdH0pO1xuXG5cdGl0KCdbU3VidHJhY3RdIHNob3VsZCBzdWJ0cmFjdCBzZWNvbmQgcGFyYW0gZnJvbSBmaXJzdCBhbmQgcmV0dXJuIHRoZSByZXN1bHQnLCAoKSA9PiB7XG5cdFx0ZXhwZWN0KFN1YnRyYWN0KDEsIDIpKS50b0JlKC0xKTtcblx0fSk7XG5cblx0aXQoJ1tNdWx0aXBseV0gc2hvdWxkIG11bHRpcGx5IHR3byBudW1iZXJzIGFuZCByZXR1cm4gdGhlIHJlc3VsdCcsICgpID0+IHtcblx0XHRleHBlY3QoTXVsdGlwbHkoMSwgMikpLnRvQmUoMik7XG5cdH0pO1xuXG59KTsgXG4iLCIvKiBnbG9iYWwgZXhwZWN0LCBqYXNtaW5lLCBiZWZvcmVBbGwsIHNweU9uLCAkICovXHJcbmltcG9ydCBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZSBmcm9tICcuL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLmpzJztcclxuXHJcbmRlc2NyaWJlKCdGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZSBmb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UuanMnLCBmdW5jdGlvbigpIHtcclxuICAgbGV0IHNlcnZpY2U7XHJcbiAgIGxldCB1cmwgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jb21cIjtcclxuICAgbGV0IHRhc2tEZWZpbml0aW9uUmVzcG9uc2UgPSBbe1xyXG4gICAgICBjb2RlOiAzLFxyXG4gICAgICBjb25maWdTbG90Q29kZTogMyxcclxuICAgICAgbmFtZTogXCJUaGlyZFwiXHJcbiAgIH0sIHtcclxuICAgICAgY29kZTogMixcclxuICAgICAgY29uZmlnU2xvdENvZGU6IDIsXHJcbiAgICAgIG5hbWU6IFwiU2Vjb25kXCJcclxuICAgfSwge1xyXG4gICAgICBjb2RlOiAxLFxyXG4gICAgICBjb25maWdTbG90Q29kZTogMSxcclxuICAgICAgbmFtZTogXCJGaXJzdFwiXHJcbiAgIH1dO1xyXG5cclxuICAgYmVmb3JlQWxsKGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aGlzLnNlcnZpY2UgPSBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZTtcclxuICAgfSk7XHJcblxyXG4gICBpdCgnU29ydHMgdGFzayBkZWZpbml0aW9ucycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgc29ydGVkRGF0YSA9IHRoaXMuc2VydmljZS5zb3J0VGFza0RlZmluaXRpb25zKHRhc2tEZWZpbml0aW9uUmVzcG9uc2UpO1xyXG5cclxuICAgICAgZXhwZWN0KHNvcnRlZERhdGFbMF0uY29kZSkudG9CZSgxKTtcclxuICAgICAgZXhwZWN0KHNvcnRlZERhdGFbMV0uY29kZSkudG9CZSgyKTtcclxuICAgICAgZXhwZWN0KHNvcnRlZERhdGFbMl0uY29kZSkudG9CZSgzKTtcclxuICAgfSk7XHJcblxyXG4gICBpdCgnRmV0Y2hlcyB0YXNrIGRlZmluaXRpb25zIHdpdGggZXJyb3IgZm9yIGludmFsaWQgcmVzcG9uc2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgamFzbWluZS5BamF4Lmluc3RhbGwoKTtcclxuXHJcbiAgICAgIHNweU9uKCQsICdhamF4JykuYW5kLmNhbGxGYWtlKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgbGV0IGludmFsaWRSZXNwb25zZSA9IHt9O1xyXG4gICAgICAgICByZXR1cm4gZS5zdWNjZXNzKGludmFsaWRSZXNwb25zZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICB0aGlzLnNlcnZpY2UuZ2V0Rm9sbG93T25UYXNrRGVmaW5pdGlvbnModXJsKTtcclxuICAgICAgfSkudG9UaHJvdygpO1xyXG5cclxuICAgICAgamFzbWluZS5BamF4LnVuaW5zdGFsbCgpO1xyXG5cclxuICAgfSk7XHJcblxyXG4gICBpdCgnRmV0Y2hlcyB0YXNrIGRlZmluaXRpb25zIHN1Y2Nlc3NmdWxseScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBqYXNtaW5lLkFqYXguaW5zdGFsbCgpO1xyXG5cclxuICAgICAgc3B5T24oJCwgJ2FqYXgnKS5hbmQuY2FsbEZha2UoZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICByZXR1cm4gZS5zdWNjZXNzKHRhc2tEZWZpbml0aW9uUmVzcG9uc2UpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuc2VydmljZS5nZXRGb2xsb3dPblRhc2tEZWZpbml0aW9ucyh1cmwpLnRoZW4oZnVuY3Rpb24oZmFrZURhdGEpIHtcclxuICAgICAgICAgZXhwZWN0KGZha2VEYXRhKS50b0VxdWFsKHRhc2tEZWZpbml0aW9uUmVzcG9uc2UpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGphc21pbmUuQWpheC51bmluc3RhbGwoKTtcclxuXHJcbiAgIH0pO1xyXG5cclxufSk7XHJcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XHJcbi8vIGltcG9ydCBUeXBlYWhlYWQgZnJvbSBcInR5cGVhaGVhZC5qc1wiO1xyXG4vLyBpbXBvcnQgQmxvb2Rob3VuZCBmcm9tIFwiYmxvb2Rob3VuZC1qc1wiO1xyXG5cclxuaW1wb3J0IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcgZnJvbSAnLi9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnLmpzJztcclxuaW1wb3J0IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlIGZyb20gJy4vZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UuanMnO1xyXG5cclxuLyoqXHJcbiAqIFRoZSBidXR0b24gY29udHJvbGxlciB0aGF0IGhhbmRsZXMgdWkgaW50ZXJhY3Rpb25zLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIge1xyXG5cclxuICAgY29uc3RydWN0b3IodHlwZUFoZWFkSWQsIG9rQnV0dG9uSWQsIG5vdEZvdW5kTXNnSWQsIGZvbGxvd09uVGFza0RlZm5VdWlkT3VwdXRJZCwgYXBpVXJsSWQpIHtcclxuICAgICAgbGV0IHNjb3BlID0gdGhpcztcclxuICAgICAgdGhpcy5ub3RGb3VuZE1zZ0VsID0gJChcIiNcIiArIG5vdEZvdW5kTXNnSWQpO1xyXG4gICAgICB0aGlzLm9rQnRuRWwgPSAkKCcjJyArIG9rQnV0dG9uSWQpO1xyXG4gICAgICB0aGlzLnR5cGVBaGVhZFNlYXJjaElucHV0RWwgPSAkKCcjJyArIHR5cGVBaGVhZElkKTtcclxuICAgICAgdGhpcy5mb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0RWwgPSAkKCcjJyArIGZvbGxvd09uVGFza0RlZm5VdWlkT3VwdXRJZCk7XHJcbiAgICAgIGxldCBhcGlVcmxFbCA9ICQoXCIjXCIgKyBhcGlVcmxJZCk7XHJcblxyXG4gICAgICBpZiAoIXRoaXMubm90Rm91bmRNc2dFbC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBmb3VuZCBtZXNzYWdlIGVsZW1lbnQgcmVxdWlyZWRcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdGhpcy5va0J0bkVsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT2sgYnV0dG9uIGVsZW1lbnQgcmVxdWlyZWRcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdGhpcy50eXBlQWhlYWRTZWFyY2hJbnB1dEVsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHlwZWFoZWFkIGlucHV0IGVsZW1lbnQgcmVxdWlyZWRcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdGhpcy5mb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0RWwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPdXRwdXQgZm9sbG93T24gdGFzayBkZWZpbml0aW9uIFVVSSBpbnB1dCBlbGVtZW50IHJlcXVpcmVkXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWFwaVVybEVsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUkVTVCBhcGkgdXJsIGVsZW1lbnQgaXMgcmVxdWlyZWRcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuYXBpVXJsID0gYXBpVXJsRWwudmFsKCk7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPSAnJztcclxuXHJcbiAgICAgIHRoaXMudHlwZUFoZWFkU2VhcmNoSW5wdXRFbC5rZXlkb3duKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgaWYgKHNjb3BlLnR5cGVBaGVhZFNlYXJjaElucHV0RWwudmFsKCkgIT0gc2NvcGUuc2VsZWN0ZWRPcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgc2NvcGUuZGlzYWJsZU9rQnRuKCk7XHJcbiAgICAgICAgICAgICAgICAgIHNjb3BlLmNsZWFyU2VsZWN0ZWRUYXNrRGVmaW5pdGlvbigpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIGJpbmQgc2libGluZyBtZXRob2RzIHRvIGNsYXNzIGluc3RhbmNlLlxyXG4gICAgICB0aGlzLmluaXRpYWxpemUgPSB0aGlzLmluaXRpYWxpemUuYmluZCh0aGlzKTtcclxuXHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBzZXQgdGhlIGlkIHZhbHVlIG9mIHRoZSBzZWxlY3RlZCB0YXNrIGRlZmluaXRpb24gdG8gb3VyIGh0bWwgaW5wdXQgZWxlbWVudFxyXG4gICAgKi9cclxuICAgc2V0U2VsZWN0ZWRUYXNrRGVmaW5pdGlvbihzdWdnZXN0aW9uKSB7XHJcbiAgICAgIGlmIChzdWdnZXN0aW9uKSB7XHJcbiAgICAgICAgIHRoaXMudHlwZUFoZWFkU2VhcmNoSW5wdXRFbC52YWwodGhpcy5kaXNwbGF5Rm9sbG93T24obnVsbCwgc3VnZ2VzdGlvbikpO1xyXG4gICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uID0gdGhpcy50eXBlQWhlYWRTZWFyY2hJbnB1dEVsLnZhbCgpO1xyXG4gICAgICAgICB0aGlzLmZvbGxvd09uVGFza0RlZm5VdWlkT3VwdXRFbC5hdHRyKCd2YWx1ZScsIHN1Z2dlc3Rpb24uaWQpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBjbGVhciBhbnkgc2VsZWN0ZWQgdGFzayBkZWZpbml0aW9uIHZhbHVlIGluIG91ciBodG1sIGlucHV0IGVsZW1lbnRcclxuICAgICovXHJcbiAgIGNsZWFyU2VsZWN0ZWRUYXNrRGVmaW5pdGlvbigpIHtcclxuICAgICAgdGhpcy5mb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0RWwuYXR0cigndmFsdWUnLCAnJyk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBzZXR1cCBVSSBlbGVtZW50cywgZmV0Y2ggdGFzayBkZWZpbml0aW9ucyBhbmQgY29uZmlndXJlIHR5cGUgYWhlYWRcclxuICAgICovXHJcbiAgIGluaXRpYWxpemUoKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZU9rQnRuKCk7XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgICByZXR1cm4gRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UuZ2V0Rm9sbG93T25UYXNrRGVmaW5pdGlvbnModGhpcy5hcGlVcmwpLnRoZW4oKHRhc2tEZWZpbml0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyZVR5cGVBaGVhZCh0YXNrRGVmaW5pdGlvbnMpO1xyXG4gICAgICAgICAgICAvLyBvbmNlIHRoZSB0eXBlYWhlYWQgaW5wdXQgaXMgaW5pdGlhbGl6ZWQsIHRoZSB0eXBlIGZpZWxkIHdpbGwgbG9zdCBmb2N1cywgaGF2ZSB0b1xyXG4gICAgICAgICAgICAvLyBtYW51YWxseSBmb2N1cyBpdCBhZ2Fpbi5cclxuICAgICAgICAgICAgdGhpcy50eXBlQWhlYWRTZWFyY2hJbnB1dEVsLmZvY3VzKCk7XHJcbiAgICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIGZldGNoIHRhc2sgZGVmaW5pdGlvbnMuXCIsIGVycm9yKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogY29uZmlndXJlIHR5cGUgYWhlYWQgd2l0aCBkYXRhIHNvdXJjZSBhbmQgZGVmYXVsdCBjb25maWd1cmF0aW9uLlxyXG4gICAgKi9cclxuICAgY29uZmlndXJlVHlwZUFoZWFkKHRhc2tEZWZpbml0aW9ucykge1xyXG4gICAgICBsZXQgc2NvcGUgPSB0aGlzO1xyXG4gICAgICBsZXQgY29uZmlnID0gbmV3IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcodGFza0RlZmluaXRpb25zKTtcclxuXHJcbiAgICAgIC8vIGNyZWF0ZSBhIGRpc3BsYXkgdmFsdWUgdGhhdCB3aWxsIGFsbG93IGZ1bGwgdGV4dCBzZWFyY2ggb24gZnVsbCB2YWx1ZS5cclxuICAgICAgJC5lYWNoKGNvbmZpZy5kYXRhLCBmdW5jdGlvbihpbmRleCwgZGF0YSkge1xyXG4gICAgICAgICBkYXRhLmRpc3BsYXlWYWx1ZSA9IHNjb3BlLmRpc3BsYXlGb2xsb3dPbihudWxsLCBkYXRhKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAkLnR5cGVhaGVhZCh7XHJcbiAgICAgICAgIGlucHV0OiBzY29wZS50eXBlQWhlYWRTZWFyY2hJbnB1dEVsLFxyXG4gICAgICAgICBoaWdobGlnaHQ6IHRydWUsXHJcbiAgICAgICAgIG5hbWU6IGNvbmZpZy5uYW1lLFxyXG4gICAgICAgICBsaW1pdDogY29uZmlnLmxpbWl0LFxyXG4gICAgICAgICBtaW5MZW5ndGg6IGNvbmZpZy5taW5MZW5ndGgsXHJcbiAgICAgICAgIGRpc3BsYXk6IFtcImRpc3BsYXlWYWx1ZVwiXSxcclxuICAgICAgICAgZW1wdHlUZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJteC10eXBlYWhlYWQtbXNnLW5vdGZvdW5kXCI+JyArIHNjb3BlLm5vdEZvdW5kTXNnRWwudmFsKCkgKyAnPC9kaXY+JyxcclxuICAgICAgICAgc291cmNlOiB7XHJcbiAgICAgICAgICAgIGRhdGE6IGNvbmZpZy5kYXRhLFxyXG4gICAgICAgICB9LFxyXG4gICAgICAgICBjYWxsYmFjazoge1xyXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbih0eXBlQWhlYWRJbnB1dEVsLCBzZWxlY3Rpb25FbCwgc2VsZWN0ZWRSZWNvcmQsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgIHNjb3BlLmVuYWJsZU9rQnRuKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBzYXZlIHVzZXIgc2VsZWN0aW9uIGZyb20gdGhlIHNlYXJjaCByZXN1bHQuXHJcbiAgICAgICAgICAgICAgIHNjb3BlLnNldFNlbGVjdGVkVGFza0RlZmluaXRpb24oc2VsZWN0ZWRSZWNvcmQpO1xyXG4gICAgICAgICAgICAgICB0aGlzLmhpZGVMYXlvdXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICAvLyBEZWZpbmUgaG93IHRoZSByZXN1bHQgaXMgZGlzcGxheWVkIGluIHRoZSBkcm9wZG93bi5cclxuICAgLy8gSXQgd2lsbCBkaXNwbGF5IHRoZSByZXN1bHQgaW4gdGhlIGZvcm1hdCBvZjogdGFzayBjb2RlIC0gY29uZmlnc2xvdCBjb2RlIC0gdGFzayBuYW1lXHJcbiAgIGRpc3BsYXlGb2xsb3dPbihxdWVyeSwgc3VnZ2VzdGlvbk9iaikge1xyXG4gICAgICBpZiAoc3VnZ2VzdGlvbk9iaikge1xyXG4gICAgICAgICByZXR1cm4gc3VnZ2VzdGlvbk9iai5jb2RlICsgXCIgLSBcIiArIHN1Z2dlc3Rpb25PYmouY29uZmlnU2xvdENvZGUgKyBcIiAtIFwiICsgc3VnZ2VzdGlvbk9iai5uYW1lO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBXcmFwcGVyIHRvIGVuYWJsZSBvdXIgT0sgYnV0dG9uXHJcbiAgICAqL1xyXG4gICBlbmFibGVPa0J0bigpIHtcclxuICAgICAgaWYgKHRoaXMub2tCdG5FbCkge1xyXG4gICAgICAgICBpZiAodGhpcy5va0J0bkVsLmF0dHIoJ29yaWdpbk9uQ2xpY2tFdmVudCcpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2tCdG5FbC5hdHRyKCdvbmNsaWNrJywgdGhpcy5va0J0bkVsLmF0dHIoJ29yaWdpbk9uQ2xpY2tFdmVudCcpKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgaWYgKHRoaXMub2tCdG5FbC5hdHRyKCdvcmlnaW5UaXRsZScpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2tCdG5FbC5hdHRyKCd0aXRsZScsIHRoaXMub2tCdG5FbC5hdHRyKCdvcmlnaW5UaXRsZScpKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgdGhpcy5va0J0bkVsLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICB0aGlzLm9rQnRuRWwucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgICAgdGhpcy5va0J0bkVsLnJlbW92ZUF0dHIoJ29yaWdpbk9uQ2xpY2tFdmVudCcpO1xyXG4gICAgICAgICB0aGlzLm9rQnRuRWwucmVtb3ZlQXR0cignb3JpZ2luVGl0bGUnKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogV3JhcHBlciB0byBkaXNhYmxlIG91ciBPSyBidXR0b25cclxuICAgICovXHJcbiAgIGRpc2FibGVPa0J0bigpIHtcclxuICAgICAgaWYgKHRoaXMub2tCdG5FbCkge1xyXG4gICAgICAgICAvLyBzdG9yZSB0aGUgYnV0dG9uIG9uY2xpY2sgaGFuZGxlciBhbmQgdGl0bGUgZm9yIGZ1dHVyZSByZXN0b3JlXHJcbiAgICAgICAgIGlmICghdGhpcy5va0J0bkVsLmF0dHIoJ29yaWdpbk9uQ2xpY2tFdmVudCcpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2tCdG5FbC5hdHRyKCdvcmlnaW5PbkNsaWNrRXZlbnQnLCB0aGlzLm9rQnRuRWwuYXR0cignb25jbGljaycpKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgaWYgKCF0aGlzLm9rQnRuRWwuYXR0cignb3JpZ2luVGl0bGUnKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9rQnRuRWwuYXR0cignb3JpZ2luVGl0bGUnLCB0aGlzLm9rQnRuRWwuYXR0cigndGl0bGUnKSk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIHRoaXMub2tCdG5FbC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgdGhpcy5va0J0bkVsLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgIHRoaXMub2tCdG5FbC5hdHRyKCdvbmNsaWNrJywgZmFsc2UpO1xyXG4gICAgICAgICB0aGlzLm9rQnRuRWwuYXR0cigndGl0bGUnLCAnJyk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgZXhwZWN0LCBqYXNtaW5lLCBzcHlPbiwgJCwgc2V0Rml4dHVyZXMgKi9cclxuLyoqXHJcbiAqIENyZWF0ZSBGb2xsb3ctb24gVGFzayBTZWFyY2ggVGVzdCBTdWl0ZVxyXG4gKiovXHJcblxyXG5pbXBvcnQgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIgZnJvbSAnLi9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29udHJvbGxlci5qcyc7XHJcblxyXG5kZXNjcmliZSgnRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIgZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyLmpzJywgZnVuY3Rpb24oKSB7XHJcbiAgIGxldCByZXN0QXBpVXJsID0gXCIvc29tZVJlc3RBcGlcIjtcclxuXHJcbiAgIGZ1bmN0aW9uIGdldEdvb2RDb250cm9sbGVyKCkge1xyXG4gICAgICByZXR1cm4gbmV3IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyKCdmb2xsb3dPblRhc2tTZWFyY2hRdWVyeScsXHJcbiAgICAgICAgICdpZEJ1dHRvbk9rJyxcclxuICAgICAgICAgJ2lkVHlwZWFoZWFkTm90Rm91bmRNZXNzYWdlJyxcclxuICAgICAgICAgJ2lkRmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZCcsXHJcbiAgICAgICAgICdpZGZvbGxvd09uVGFza0RlZmluaXRpb25SZXN0QVBJJyk7XHJcbiAgIH1cclxuXHJcbiAgIGZ1bmN0aW9uIHNldFVwSFRNTEZpeHR1cmUoKSB7XHJcbiAgICAgIHNldEZpeHR1cmVzKFxyXG4gICAgICAgICAnPGZvcm0gaWQ9XCJmb3JtLXR5cGVhaGVhZC10ZXN0XCIgbmFtZT1cImZvcm0tdHlwZWFoZWFkLXRlc3RcIj4nICtcclxuICAgICAgICAgJyAgPGRpdiBjbGFzcz1cInR5cGVhaGVhZF9fY29udGFpbmVyXCI+JyArXHJcbiAgICAgICAgICcgICAgIDxkaXYgY2xhc3M9XCJ0eXBlYWhlYWRfX2ZpZWxkXCI+JyArXHJcbiAgICAgICAgICcgICAgICAgIDxzcGFuIGNsYXNzPVwidHlwZWFoZWFkX19xdWVyeVwiPicgK1xyXG4gICAgICAgICAnICAgICAgICAgIDxpbnB1dCBjbGFzcz0gXCJqcy10eXBlYWhlYWQtdGVzdFwiIGlkPVwiZm9sbG93T25UYXNrU2VhcmNoUXVlcnlcIiBuYW1lPVwiZm9sbG93T25UYXNrU2VhcmNoUXVlcnlcIj4nICtcclxuICAgICAgICAgJyAgICAgICAgPC9zcGFuPicgK1xyXG4gICAgICAgICAnICAgICA8L2Rpdj4nICtcclxuICAgICAgICAgJyAgPC9kaXY+JyArXHJcbiAgICAgICAgICcgIDxidXR0b24gaWQ9XCJpZEJ1dHRvbk9rXCIgdGl0bGU9XCJteXRpdGxlXCI+T2s8L2J1dHRvbj4nICtcclxuICAgICAgICAgJyAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiYUZvbGxvd09uVGFza0RlZmluaXRpb25VdWlkXCIgaWQ9XCJpZEZpZWxkRm9sbG93T25UYXNrRGVmblV1aWRcIj4nICtcclxuICAgICAgICAgJyAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBpZD1cImlkVHlwZWFoZWFkTm90Rm91bmRNZXNzYWdlXCIgdmFsdWU9XCJ3ZWIubXNnLk1TR19OT19NQVRDSElOR19GT0xMT1dPTl9UQVNLX0RFRklOSVRJT05TXCI+JyArXHJcbiAgICAgICAgICcgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgaWQ9XCJpZGZvbGxvd09uVGFza0RlZmluaXRpb25SZXN0QVBJXCIgdmFsdWU9XCInICsgcmVzdEFwaVVybCArICdcIicgK1xyXG4gICAgICAgICAnPC9mb3JtPicpO1xyXG4gICB9XHJcblxyXG4gICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBqYXNtaW5lLkFqYXguaW5zdGFsbCgpO1xyXG4gICAgICBzZXRVcEhUTUxGaXh0dXJlKCk7XHJcbiAgICAgIHRoaXMub2tCdXR0b25FbCA9ICQoJyNpZEJ1dHRvbk9rJyk7XHJcbiAgICAgIHRoaXMuZmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZEVsID0gJCgnI2lkRmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZCcpO1xyXG4gICB9KTtcclxuXHJcbiAgIGFmdGVyRWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgamFzbWluZS5BamF4LnVuaW5zdGFsbCgpO1xyXG4gICB9KTtcclxuXHJcbiAgIGl0KFwiU2hvdWxkIGhhdmUgYSBidXR0b24gd2l0aCBPSyBsYWJlbFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgZXhwZWN0KHRoaXMub2tCdXR0b25FbCkudG9IYXZlVGV4dChcIk9rXCIpO1xyXG4gICB9KTtcclxuXHJcbiAgIGl0KFwiU2hvdWxkIHRocm93IGVycm9yIGluZGljYXRpbmcgbWlzc2luZyB0eXBlYWhlYWRJZFwiLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgbmV3IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyKCdGQUtFX2ZvbGxvd09uVGFza1NlYXJjaFF1ZXJ5JyxcclxuICAgICAgICAgICAgJ0ZBS0VfaWRCdXR0b25PaycsXHJcbiAgICAgICAgICAgICdGQUtFX2lkVHlwZWFoZWFkTm90Rm91bmRNZXNzYWdlJyxcclxuICAgICAgICAgICAgJ0ZBS0VfaWRGaWVsZEZvbGxvd09uVGFza0RlZm5VdWlkJyxcclxuICAgICAgICAgICAgJ0ZBS0VfaWRmb2xsb3dPblRhc2tEZWZpbml0aW9uUmVzdEFQSScpO1xyXG4gICAgICB9KS50b1Rocm93KCk7XHJcbiAgIH0pO1xyXG5cclxuICAgaXQoXCJTaG91bGQgaGF2ZSBPayBidXR0b24gZW5hYmxlZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgbGV0IGNvbnRyb2xsZXIgPSBnZXRHb29kQ29udHJvbGxlcigpO1xyXG4gICAgICBjb250cm9sbGVyLmVuYWJsZU9rQnRuKCk7XHJcbiAgICAgIGV4cGVjdCh0aGlzLm9rQnV0dG9uRWwpLm5vdC50b0hhdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgfSk7XHJcblxyXG4gICBpdChcIlNob3VsZCBoYXZlIE9rIGJ1dHRvbiBkaXNhYmxlZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgbGV0IGNvbnRyb2xsZXIgPSBnZXRHb29kQ29udHJvbGxlcigpO1xyXG4gICAgICBjb250cm9sbGVyLmRpc2FibGVPa0J0bigpO1xyXG4gICAgICBleHBlY3QodGhpcy5va0J1dHRvbkVsKS50b0hhdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgfSk7XHJcblxyXG5cclxuICAgaXQoJ3JldHVybnMgYSBwcm9wZXJseSBjb25zdHJ1Y3RlZCBkaXNwbGF5IHZhbHVlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGxldCBkYXRhID0gW3tcclxuICAgICAgICAgY29kZTogNSxcclxuICAgICAgICAgY29uZmlnU2xvdENvZGU6IDMsXHJcbiAgICAgICAgIG5hbWU6ICd0ZXN0J1xyXG4gICAgICB9XTtcclxuXHJcbiAgICAgIGxldCBjb250cm9sbGVyID0gZ2V0R29vZENvbnRyb2xsZXIoKTtcclxuICAgICAgZXhwZWN0KGNvbnRyb2xsZXIuZGlzcGxheUZvbGxvd09uKG51bGwsIGRhdGFbMF0pKS50b0JlKFwiNSAtIDMgLSB0ZXN0XCIpO1xyXG4gICB9KTtcclxuXHJcbiAgIGl0KFwiU2hvdWxkIHNldCBhbmQgY2xlYXIgc2VsZWN0ZWQgdGFzayBkZWZpbml0aW9uIG9mIG91dHB1dCBlbGVtZW50XCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgY29udHJvbGxlciA9IGdldEdvb2RDb250cm9sbGVyKCk7XHJcbiAgICAgIGNvbnRyb2xsZXIuc2V0U2VsZWN0ZWRUYXNrRGVmaW5pdGlvbih7IGlkOiAnc29tZVZhbHVlJyB9KTtcclxuICAgICAgZXhwZWN0KHRoaXMuZmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZEVsLmF0dHIoJ3ZhbHVlJykpLnRvQmUoJ3NvbWVWYWx1ZScpO1xyXG5cclxuICAgICAgY29udHJvbGxlci5jbGVhclNlbGVjdGVkVGFza0RlZmluaXRpb24oKTtcclxuICAgICAgZXhwZWN0KHRoaXMuZmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZEVsLmF0dHIoJ3ZhbHVlJykpLnRvQmUoJycpO1xyXG4gICB9KTtcclxuXHJcbiAgIGl0KCdGZXRjaGVzIHRhc2sgZGVmaW5pdGlvbnMgc3VjY2Vzc2Z1bGx5JywgZnVuY3Rpb24oZG9uZSkge1xyXG4gICAgICBsZXQgY29udHJvbGxlciA9IGdldEdvb2RDb250cm9sbGVyKCk7XHJcbiAgICAgIGxldCByZXNwb25zZVRhc2tEZWZpbml0aW9ucyA9IFtcclxuICAgICAgICAgeyBcImlkXCI6IFwiQTZBQUUxOEI2Mzg3NDBCMjlCMkYzNEQ1MUNGMkNDRDVcIiwgXCJjb25maWdTbG90Q29kZVwiOiBcIkJPTTEyM1wiLCBcIm5hbWVcIjogXCJSZXFXaXRoSW1wYWN0MVwiLCBcImNvZGVcIjogXCJOQzE0OTkyLVJFUTFcIiB9LFxyXG4gICAgICAgICB7IFwiaWRcIjogXCJBNkFBRTE4QjYzODc0MEIyOUIyRjM0RDUxQ0YyQ0NENlwiLCBcImNvbmZpZ1Nsb3RDb2RlXCI6IFwiQk9NMTIzXCIsIFwibmFtZVwiOiBcIlJlcVdpdGhJbXBhY3QyXCIsIFwiY29kZVwiOiBcIk5DMTQ5OTItUkVRMlwiIH0sXHJcbiAgICAgICAgIHsgXCJpZFwiOiBcIkE2QUFFMThCNjM4NzQwQjI5QjJGMzRENTFDRjJDQ0Q3XCIsIFwiY29uZmlnU2xvdENvZGVcIjogXCJCT00xMjNcIiwgXCJuYW1lXCI6IFwiUmVxV2l0aEltcGFjdDNcIiwgXCJjb2RlXCI6IFwiTkMxNDk5Mi1SRVEzXCIgfSxcclxuICAgICAgICAgeyBcImlkXCI6IFwiQTZBQUUxOEI2Mzg3NDBCMjlCMkYzNEQ1MUNGMkNDRDhcIiwgXCJjb25maWdTbG90Q29kZVwiOiBcIkJPTTEyM1wiLCBcIm5hbWVcIjogXCJSZXFXaXRoSW1wYWN0NFwiLCBcImNvZGVcIjogXCJOQzE0OTkyLVJFUTRcIiB9LFxyXG4gICAgICAgICB7IFwiaWRcIjogXCJBNkFBRTE4QjYzODc0MEIyOUIyRjM0RDUxQ0YyQ0NEOVwiLCBcImNvbmZpZ1Nsb3RDb2RlXCI6IFwiQk9NMTIzXCIsIFwibmFtZVwiOiBcIlJlcVdpdGhJbXBhY3Q1XCIsIFwiY29kZVwiOiBcIk5DMTQ5OTItUkVRNVwiIH0sXHJcbiAgICAgICAgIHsgXCJpZFwiOiBcIkE2QUFFMThCNjM4NzQwQjI5QjJGMzRENTFDRjJDQ0UzXCIsIFwiY29uZmlnU2xvdENvZGVcIjogXCJCT00xMjNcIiwgXCJuYW1lXCI6IFwiUmVxV2l0aEltcGFjdDZcIiwgXCJjb2RlXCI6IFwiTkMxNDk5Mi1SRVE2XCIgfSxcclxuICAgICAgXTtcclxuXHJcbiAgICAgIHNweU9uKCQsICdhamF4JykuYW5kLmNhbGxGYWtlKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgXHJcbiAgICAgICAgIHJldHVybiBlLnN1Y2Nlc3MocmVzcG9uc2VUYXNrRGVmaW5pdGlvbnMpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGxldCBva0J1dHRvbkVsID0gJCgnI2lkQnV0dG9uT2snKTtcclxuICAgICAgbGV0IG5hdGl2ZUVsID0gJChcIiNmb2xsb3dPblRhc2tTZWFyY2hRdWVyeVwiKTtcclxuXHJcbiAgICAgIC8vIGluaXRpYWxpemUgY29udHJvbGxlclxyXG4gICAgICBjb250cm9sbGVyLmluaXRpYWxpemUoKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAvLyBjaGVjayB0byBzZWUgaWYgYWpheCB3YXMgZG9uZSB3aXRoIHByb3BlciB1cmxcclxuICAgICAgICAgZXhwZWN0KCQuYWpheC5jYWxscy5tb3N0UmVjZW50KCkuYXJnc1swXS51cmwpLnRvRXF1YWwocmVzdEFwaVVybCk7XHJcblxyXG4gICAgICAgICAvLyBjaGVjayBpZiBvayBidXR0b24gd2FzIGRpc2FibGVkXHJcbiAgICAgICAgIGV4cGVjdChva0J1dHRvbkVsKS50b0hhdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgIC8vIGNoZWNrIGlmIGZvY3VzIHdhcyBnaXZlbiB0byBjb21wb25lbnRcclxuICAgICAgICAgZXhwZWN0KG5hdGl2ZUVsKS50b0JlRm9jdXNlZCgpO1xyXG4gICAgICAgICBkb25lKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgfSk7XHJcblxyXG59KTtcclxuIiwiLyogZ2xvYmFsIGV4cGVjdCAqL1xyXG5pbXBvcnQgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyBmcm9tICcuL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcuanMnO1xyXG5cclxuZGVzY3JpYmUoJ0ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcgZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcuanMnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgIGl0KCd0aHJvd3MgZXhjZXB0aW9uIG9uIGVtcHR5IGRhdGEgcGFyYW1ldGVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgbGV0IGNvbmZpZyA9IG5ldyBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnKCk7XHJcbiAgICAgIH0pLnRvVGhyb3dFcnJvcihcIlRoZSByZXNwb25zZSBkYXRhIHN1cHBvc2UgdG8gYmUgaW4gYXJyYXkgZm9ybVwiKTtcclxuICAgfSk7XHJcbiAgIFxyXG4gICBpdCgndGhyb3dzIGV4Y2VwdGlvbiB3aXRoIGEgb2JqZWN0IHR5cGUgZGF0YSBwYXJhbWV0ZXIgaW5zdGVhZCBvZiBhcnJheScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGxldCBkYXRhID0ge307XHJcbiAgICAgICAgIGxldCBjb25maWcgPSBuZXcgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyhkYXRhKTtcclxuICAgICAgfSkudG9UaHJvd0Vycm9yKFwiVGhlIHJlc3BvbnNlIGRhdGEgc3VwcG9zZSB0byBiZSBpbiBhcnJheSBmb3JtXCIpO1xyXG4gICB9KTtcclxuICAgXHJcbiAgIGl0KCdjcmVhdGVzIGEgdmFsaWQgY29uZmlnIG9iamVjdCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IFtdO1xyXG4gICAgICBsZXQgY29uZmlnID0gbmV3IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcoZGF0YSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoY29uZmlnLm5hbWUpLnRvQmUoJ2ZvbGxvd09uVGFza0RlZm5TZWFyY2gnKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5saW1pdCkudG9CZSg1MCk7XHJcbiAgICAgIGV4cGVjdChjb25maWcubWluTGVuZ3RoKS50b0JlKDEpO1xyXG4gICB9KTtcclxuXHJcbn0pO1xyXG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgVGFza1N1cGVydmlzaW9uU2VydmljZSBmcm9tICcuL1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UnO1xyXG5cclxuZGVzY3JpYmUoJ1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UuanMnLCAoKT0+e1xyXG5cclxuICAgZGVzY3JpYmUoJ2dldENyZXdzRm9yVXNlcicsICgpPT57XHJcblxyXG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFRhc2tTdXBlcnZpc2lvblNlcnZpY2UoKTtcclxuXHJcbiAgICAgIGNvbnN0IHVzZXJJZCA9ICd1c2VyJztcclxuICAgICAgY29uc3Qgc3VjY2Vzc0hhbmRsZXIgPSBmdW5jdGlvbigpe307XHJcbiAgICAgIGNvbnN0IGZhaWx1cmVIYW5kbGVyID0gZnVuY3Rpb24oKXt9O1xyXG5cclxuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgamFzbWluZS5BamF4Lmluc3RhbGwoKTtcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBqYXNtaW5lLkFqYXgudW5pbnN0YWxsKCk7XHJcbiAgICAgICB9KTtcclxuXHQgICBcclxuXHJcblx0ICAgLyoqIFxyXG5cdCAgIFxyXG4gICAgICBpdCgndGhyb3dzIGFuIGVycm9yIHdoZW4gdXNlciBpcyBub3QgcHJvdmlkZWQnLCAoKT0+e1xyXG4gICAgICAgICBsZXQgdW5kZWZpbmVkVXNlcklkO1xyXG4gICAgICAgICBleHBlY3QoKCkgPT4gc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodW5kZWZpbmVkVXNlcklkLCBzdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKSlcclxuICAgICAgICAgICAgLnRvVGhyb3dFcnJvcigndXNlcklkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCd0aHJvd3MgYW4gZXJyb3Igd2hlbiB1c2VyIGlzIGJsYW5rIHN0cmluZycsICgpPT57XHJcbiAgICAgICAgIGNvbnN0IGJsYW5rVXNlcklkID0gJyc7XHJcbiAgICAgICAgIGV4cGVjdCgoKSA9PiBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcihibGFua1VzZXJJZCwgc3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICkpXHJcbiAgICAgICAgICAgIC50b1Rocm93RXJyb3IoJ3VzZXJJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgndGhyb3dzIGFuIGVycm9yIHdoZW4gc3VjY2VzcyBoYW5kbGVyIGlzIG5vdCBwcm92aWRlZCcsICgpPT57XHJcbiAgICAgICAgIGxldCB1bmRlZmluZWRTdWNjZXNzSGFuZGxlcjtcclxuICAgICAgICAgZXhwZWN0KCgpID0+IHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgdW5kZWZpbmVkU3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICkpXHJcbiAgICAgICAgICAgIC50b1Rocm93RXJyb3IoJ3N1Y2Nlc3NIYW5kbGVyIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCd0aHJvd3MgYW4gZXJyb3Igd2hlbiBzdWNjZXNzIGhhbmRsZXIgaXMgbm90IGEgZnVuY3Rpb24nLCAoKT0+e1xyXG4gICAgICAgICBjb25zdCBub25GdW5jdGlvblN1Y2Nlc3NIYW5kbGVyID0gJ2hlbGxvJztcclxuICAgICAgICAgZXhwZWN0KCgpID0+IHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgbm9uRnVuY3Rpb25TdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKSlcclxuICAgICAgICAgICAgLnRvVGhyb3dFcnJvcignc3VjY2Vzc0hhbmRsZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Rocm93cyBhbiBlcnJvciB3aGVuIGZhaWx1cmUgaGFuZGxlciBpcyBub3QgcHJvdmlkZWQnLCAoKT0+e1xyXG4gICAgICAgICBsZXQgdW5kZWZpbmVkRmFpbHVyZUhhbmRsZXI7XHJcbiAgICAgICAgIGV4cGVjdCgoKSA9PiBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCB1bmRlZmluZWRGYWlsdXJlSGFuZGxlciApKVxyXG4gICAgICAgICAgICAudG9UaHJvd0Vycm9yKCdmYWlsdXJlSGFuZGxlciBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgndGhyb3dzIGFuIGVycm9yIHdoZW4gZmFpbHVyZSBoYW5kbGVyIGlzIG5vdCBhIGZ1bmN0aW9uJywgKCk9PntcclxuICAgICAgICAgY29uc3Qgbm9uRnVuY3Rpb25GYWlsdXJlSGFuZGxlciA9ICdoZWxsbyc7XHJcbiAgICAgICAgIGV4cGVjdCgoKSA9PiBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCBub25GdW5jdGlvbkZhaWx1cmVIYW5kbGVyICkpXHJcbiAgICAgICAgICAgIC50b1Rocm93RXJyb3IoJ2ZhaWx1cmVIYW5kbGVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCd3aWxsIG1ha2UgYW4gYWpheCBjYWxsIHRvIHRoZSBjb3JyZWN0IHVybCcsICgpPT57XHJcbiAgICAgICAgIHNweU9uKCQsICdhamF4Jyk7XHJcbiAgICAgICAgIHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgc3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICk7XHJcbiAgICAgICAgIGV4cGVjdCgkLmFqYXguY2FsbHMubW9zdFJlY2VudCgpLmFyZ3NbMF0udXJsKS50b0VxdWFsKCcvbWFpbnRlbml4L3Jlc3QvY3Jldy9saXN0Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3dpbGwgbWFrZSBhbiBhamF4IGNhbGwgd2l0aCB0aGUgY29ycmVjdCB0eXBlJywgKCk9PntcclxuICAgICAgICAgc3B5T24oJCwgJ2FqYXgnKTtcclxuICAgICAgICAgc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCBzdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKTtcclxuICAgICAgICAgZXhwZWN0KCQuYWpheC5jYWxscy5tb3N0UmVjZW50KCkuYXJnc1swXS50eXBlKS50b0VxdWFsKCdHRVQnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnd2lsbCBtYWtlIGFuIGFqYXggY2FsbCB3aXRoIHRoZSBjb3JyZWN0IGRhdGEnLCAoKT0+e1xyXG4gICAgICAgICBzcHlPbigkLCAnYWpheCcpO1xyXG4gICAgICAgICBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlciApO1xyXG4gICAgICAgICBsZXQgZXhwZWN0ZWREYXRhID0geyd1c2VySWQnOiB1c2VySWR9O1xyXG4gICAgICAgICBleHBlY3QoJC5hamF4LmNhbGxzLm1vc3RSZWNlbnQoKS5hcmdzWzBdLmRhdGEpLnRvRXF1YWwoZXhwZWN0ZWREYXRhKTtcclxuICAgICAgfSk7XHJcblx0ICAqKi9cclxuXHJcbiAgICAgIGl0KCd3aWxsIGNhbGwgdGhlIHN1Y2Nlc3MgaGFuZGxlciB3aGVuIHRoZSBhamF4IGNhbGwgaXMgc3VjY2Vzc2Z1bCcsICgpPT57XHJcbiAgICAgICAgIHNweU9uKCQsICdhamF4JykuYW5kLmNhbGxGYWtlKCBmdW5jdGlvbihhangpIHtcclxuICAgICAgICAgICAgYWp4LnN1Y2Nlc3Moe30pO1xyXG4gICAgICAgICB9KTtcclxuXHRcdCBcclxuICAgICAgICAgLyoqIGNvbnN0IHNweVN1Y2Nlc3NIYW5kbGVyID0gamFzbWluZS5jcmVhdGVTcHkoJ3NweVN1Y2Nlc3NIYW5kbGVyJyk7XHJcbiAgICAgICAgIHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgc3B5U3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICk7XHJcbiAgICAgICAgIGV4cGVjdChzcHlTdWNjZXNzSGFuZGxlcikudG9IYXZlQmVlbkNhbGxlZCgpOyAqKi9cclxuXHRcdCBcclxuXHRcdCBcclxuXHRcdCAvKipcclxuXHRcdHZhciBzcHlTdWNjZXNzSGFuZGxlciA9IGphc21pbmUuY3JlYXRlU3B5KCdzdWNjZXNzMjIyJyk7XHJcblx0XHR2YXIgc3B5RmFpbHVyZUhhbmRsZXIgPSBqYXNtaW5lLmNyZWF0ZVNweSgnZmFpbHVyZScpO1xyXG5cdFx0amFzbWluZS5BamF4LndpdGhNb2NrKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHNweVN1Y2Nlc3NIYW5kbGVyLCBzcHlGYWlsdXJlSGFuZGxlciApO1xyXG5cdFx0XHRleHBlY3Qoc3B5U3VjY2Vzc0hhbmRsZXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuXHRcdH0pOyAqKi9cclxuICAgICAgfSk7XHJcbi8qKlxyXG4gICAgICBpdCgnd2lsbCBjYWxsIHRoZSBlcnJvciBoYW5kbGVyIHdoZW4gdGhlIGFqYXggY2FsbCBpcyB1bnN1Y2Nlc3NmdWwnLCAoKT0+e1xyXG4gICAgICAgICBzcHlPbigkLCAnYWpheCcpLmFuZC5jYWxsRmFrZSggZnVuY3Rpb24oYWp4KSB7XHJcbiAgICAgICAgICAgIGFqeC5lcnJvcih7fSk7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICAgICBjb25zdCBzcHlGYWlsdXJlSGFuZGxlciA9IGphc21pbmUuY3JlYXRlU3B5KCdzcHlGYWlsdXJlSGFuZGxlcicpO1xyXG4gICAgICAgICBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCBzcHlGYWlsdXJlSGFuZGxlciApO1xyXG4gICAgICAgICBleHBlY3Qoc3B5RmFpbHVyZUhhbmRsZXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgfSk7XHJcbioqL1xyXG5cclxuLy8gICAgICBpdCgnd2lsbCBjYWxsIHRoZSBzdWNjZXNzIGhhbmRsZXIgd2l0aCBlbXB0eSBsaXN0IHdoZW4gdXNlciBiZWxvbmdzIHRvIG5vIGNyZXdzJywgKCk9PntcclxuLy9cclxuLy8gICAgICAgICAvL1xyXG4vLyAgICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgdGVzdCBkb2VzIGV4ZXJjaXNlIHRoZSBiZWhhdmlvdXIgYnV0IGRvZXMgbm90IHJlYWxseSBoYXZlIGFueXRoaW5nIHRvXHJcbi8vICAgICAgICAgLy8gZG8gd2l0aCB0aGUgbGlzdCBiZWluZyByZXR1cm5lZCwgdGhlIGFqYXggY2FsbCBzaW1wbHkgY2FsbHMgdGhlIHN1Y2Nlc3MgaGFuZGxlciB3aXRoXHJcbi8vICAgICAgICAgLy8gd2hhdGV2ZXIgZGF0YSBpdCBpcyBwcm92aWRlZC4uLiBzZWUgdGVzdCBiZWxvdyBhcyBwcm9vZlxyXG4vLyAgICAgICAgIC8vXHJcbi8vICAgICAgICAgLy8gSSB0aGluayB0aGlzIGFuZCB0aGUgYmVoYXZpb3VycyBiZWxvdyBhcmUgYWxsIGFjdHVhbGx5IGJlaGF2aW91cnMgb2YgdGhlIGVuZHBvaW50XHJcbi8vICAgICAgICAgLy8gYW5kIG5vdCB0aGlzIHNlcnZpY2VcclxuLy8gICAgICAgICAvL1xyXG4vLyAgICAgICAgIC8vIHNvIGluc3RlYWQgb2YgdGhpcyB0ZXN0LCBtYXliZSB3ZSBzaG91bGQganVzdCBiZSB3cml0aW5nIGEgdGVzdCB0byBcImV4cGVjdFwiIHRoYXQgdGhlXHJcbi8vICAgICAgICAgLy8gc3VjY2Vzc0hhbmRsZXIgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gdGhlIGFqYXggY2FsbCBpcyBzdWNjZXNzZnVsXHJcbi8vICAgICAgICAgLy8gKGFscmVhZHkgd3JpdHRlbiBhYm92ZSlcclxuLy8gICAgICAgICAvL1xyXG4vL1xyXG4vLyAgICAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0ID0gJ2V4cGVjdGVkJztcclxuLy9cclxuLy8gICAgICAgICBzcHlPbigkLCAnYWpheCcpLmFuZC5jYWxsRmFrZSggKGUpID0+IHtcclxuLy8gICAgICAgICAgICByZXR1cm4gZS5zdWNjZXNzKCBleHBlY3RlZFJlc3VsdCwgJ2Zha2UgdGV4dFN0YXR1cycsICdmYWtlIGpxWEhSJyApO1xyXG4vLyAgICAgICAgIH0pO1xyXG4vL1xyXG4vLyAgICAgICAgIGxldCBhY3R1YWxSZXN1bHQ7XHJcbi8vICAgICAgICAgY29uc3QgdXNlcklkID0gJ3VzZXInO1xyXG4vLyAgICAgICAgIGNvbnN0IHN1Y2Nlc3NIYW5kbGVyID0gZnVuY3Rpb24oZGF0YSl7IGFjdHVhbFJlc3VsdCA9IGRhdGE7IH07XHJcbi8vICAgICAgICAgY29uc3QgZmFpbHVyZUhhbmRsZXIgPSBmdW5jdGlvbigpe307XHJcbi8vXHJcbi8vICAgICAgICAgc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCBzdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKTtcclxuLy9cclxuLy8gICAgICAgICBleHBlY3QoYWN0dWFsUmVzdWx0KS50b0VxdWFsKGV4cGVjdGVkUmVzdWx0KTtcclxuLy9cclxuLy8gICAgICB9KTtcclxuLy9cclxuLy9cclxuLy9cclxuLy8gICAgICBpdCgnd2lsbCBjYWxsIHRoZSBzdWNjZXNzIGhhbmRsZXIgd2l0aCB0aGUgbGlzdCBvZiBjcmV3cyB0byB3aGljaCB1c2VyIGJlbG9uZ3Mgd2hlbiB0aGUgdXNlciBiZWxvbmdzIHRvIGFsbCBjcmV3cycsICgpPT57XHJcbi8vXHJcbi8vICAgICAgfSk7XHJcbi8vXHJcbi8vICAgICAgaXQoJ3dpbGwgY2FsbCB0aGUgc3VjY2VzcyBoYW5kbGVyIHdpdGggdGhlIGxpc3Qgb2YgY3Jld3MgdG8gd2hpY2ggdXNlciBiZWxvbmdzIHdoZW4gdGhlIHVzZXIgYmVsb25ncyB0byBzb21lIGNyZXdzJywgKCk9PntcclxuLy9cclxuLy8gICAgICB9KTtcclxuLy9cclxuLy8gICAgICBpdCgnd2lsbCBjYWxsIHRoZSBmYWlsdXJlIGhhbmRsZXIgd2l0aCBFcnJvciBtc2cgd2hlbiByZXN0IEVuZCBQb2ludCBpcyBub3QgYWNjZXNzaWJsZScsICgpPT57XHJcbi8vXHJcbi8vICAgICAgfSk7XHJcblxyXG4gICB9KTtcclxuXHJcbn0pOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERhdGVUaW1lVmFsaWRhdG9yIHtcblxuICAgY29uc3RydWN0b3IoKSB7XG4gICB9XG5cbiAgIFxuICAgc3RhdGljIHZhbGlkYXRlSG91cnModmFsdWUpIHtcbiAgICAgIC8vIFRoaXMgaXMgYmFzZWQgb24gdGhlIE5VTUJFUig5LDUpIGNvbnN0cmFpbnQgZm9yXG4gICAgICAvLyBzY2hlZF9sYWJvdXJfcm9sZS5zY2hlZF9ociBhbmQgc2NoZWRfbGFib3VyX3JvbGUuYWN0dWFsX2hyXG4gICAgICBsZXQgc3BsaXQgPSB2YWx1ZS5zcGxpdCgnLicpO1xuICAgICAgaWYgKCBzcGxpdC5sZW5ndGggPiAwICkge1xuICAgICAgICAgaWYgKCBzcGxpdFswXS5sZW5ndGggPiA0ICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgfVxuICAgICAgICAgaWYgKCBzcGxpdC5sZW5ndGggPT0gMiApIHtcbiAgICAgICAgICAgIGlmICggc3BsaXRbMV0ubGVuZ3RoID4gNSApIHtcbiAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIH0gZWxzZSBpZiAoc3BsaXQubGVuZ3RoID4gMiApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgfVxuXG4gIFxuICAgLy9cbiAgIC8vIHByaXZhdGUgbWV0aG9kc1xuICAgLy9cblxuICAgc3RhdGljIHZhbGlkYXRlRGF0ZUZvcm1hdChkYXRlU3RyKSB7XG4gICAgICBpZiggISBkYXRlU3RyICkge1xuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRlU3RyIGlzIG1hbmRhdG9yeS4nKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZGF0ZVN0ciAhPT0gJ3N0cmluZycpICB7XG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGVTdHIgaXMgbm90IGEgc3RyaW5nJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIHJlZ2V4IGV4YW1wbGU6IGRkLU1NTS15eXl5XG4gICAgICBjb25zdCBkYXRlRm9ybWF0ID0gL14oKFswLTldKXwoWzAtMl1bMC05XSl8KFszXVswLTFdKSlcXC0oSkFOfEZFQnxNQVJ8QVBSfE1BWXxKVU58SlVMfEFVR3xTRVB8T0NUfE5PVnxERUMpXFwtXFxkezR9JC87XG4gICAgICBjb25zdCBtYXRjaEFycmF5ID0gZGF0ZVN0ci5tYXRjaChkYXRlRm9ybWF0KTtcblxuICAgICAgaWYoIG1hdGNoQXJyYXkgPT0gbnVsbCApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGVTdHIgaGFzIGludmFsaWQgZm9ybWF0LicpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gICBzdGF0aWMgdmFsaWRhdGVUaW1lRm9ybWF0KHRpbWVTdHIpIHtcbiAgICAgIGlmKCAhIHRpbWVTdHIgKXtcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcigndGltZVN0ciBpcyBtYW5kYXRvcnkuJyk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHRpbWVTdHIgIT09ICdzdHJpbmcnKSAge1xuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd0aW1lU3RyIGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgIH1cblxuICAgICAgLy8gcmVnZXggZXhhbXBsZTogaGg6bW1cbiAgICAgIGNvbnN0IHRpbWVGb3JtYXQgPSAvXiR8XigoWzAxXVswLTldKXwoMlswLTNdKSk6WzAtNV1bMC05XSQvO1xuICAgICAgY29uc3QgbWF0Y2hBcnJheSA9IHRpbWVTdHIubWF0Y2godGltZUZvcm1hdCk7XG5cbiAgICAgIGlmKCBtYXRjaEFycmF5ID09IG51bGwgKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd0aW1lU3RyIGhhcyBpbnZhbGlkIGZvcm1hdC4nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICB9XG5cbn0iLCJ2YXIgZztcclxuXHJcbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXHJcbmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXM7XHJcbn0pKCk7XHJcblxyXG50cnkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxyXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSwgZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoIChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIvKiFcbiAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG4gKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc3RlZmFucGVubmVyL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG4gKiBAdmVyc2lvbiAgIDMuMy4xXG4gKi9cblxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG5cbnZhciBfaXNBcnJheSA9IHVuZGVmaW5lZDtcbmlmICghQXJyYXkuaXNBcnJheSkge1xuICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcbn0gZWxzZSB7XG4gIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbn1cblxudmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcblxudmFyIGxlbiA9IDA7XG52YXIgdmVydHhOZXh0ID0gdW5kZWZpbmVkO1xudmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdW5kZWZpbmVkO1xuXG52YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XG4gIHF1ZXVlW2xlbiArIDFdID0gYXJnO1xuICBsZW4gKz0gMjtcbiAgaWYgKGxlbiA9PT0gMikge1xuICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVGbHVzaCgpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xufVxuXG5mdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikge1xuICBhc2FwID0gYXNhcEZuO1xufVxuXG52YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xudmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICh7fSkudG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4vLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxudmFyIGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblxuLy8gbm9kZVxuZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7XG4gIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gIH07XG59XG5cbi8vIHZlcnR4XG5mdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZlcnR4TmV4dChmbHVzaCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gIHZhciBpdGVyYXRpb25zID0gMDtcbiAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcbiAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgbm9kZS5kYXRhID0gaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDI7XG4gIH07XG59XG5cbi8vIHdlYiB3b3JrZXJcbmZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkge1xuICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcbiAgLy8gb3RoZXIgY29kZSBtb2RpZnlpbmcgc2V0VGltZW91dCAobGlrZSBzaW5vbi51c2VGYWtlVGltZXJzKCkpXG4gIHZhciBnbG9iYWxTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2xvYmFsU2V0VGltZW91dChmbHVzaCwgMSk7XG4gIH07XG59XG5cbnZhciBxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcbmZ1bmN0aW9uIGZsdXNoKCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07XG4gICAgdmFyIGFyZyA9IHF1ZXVlW2kgKyAxXTtcblxuICAgIGNhbGxiYWNrKGFyZyk7XG5cbiAgICBxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcbiAgICBxdWV1ZVtpICsgMV0gPSB1bmRlZmluZWQ7XG4gIH1cblxuICBsZW4gPSAwO1xufVxuXG5mdW5jdGlvbiBhdHRlbXB0VmVydHgoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHIgPSByZXF1aXJlO1xuICAgIHZhciB2ZXJ0eCA9IHIoJ3ZlcnR4Jyk7XG4gICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICByZXR1cm4gdXNlVmVydHhUaW1lcigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbiAgfVxufVxuXG52YXIgc2NoZWR1bGVGbHVzaCA9IHVuZGVmaW5lZDtcbi8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG5pZiAoaXNOb2RlKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpO1xufSBlbHNlIGlmIChCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTXV0YXRpb25PYnNlcnZlcigpO1xufSBlbHNlIGlmIChpc1dvcmtlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTWVzc2FnZUNoYW5uZWwoKTtcbn0gZWxzZSBpZiAoYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSBhdHRlbXB0VmVydHgoKTtcbn0gZWxzZSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7XG5cbiAgdmFyIHBhcmVudCA9IHRoaXM7XG5cbiAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaWYgKGNoaWxkW1BST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcbiAgICBtYWtlUHJvbWlzZShjaGlsZCk7XG4gIH1cblxuICB2YXIgX3N0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuICBpZiAoX3N0YXRlKSB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjYWxsYmFjayA9IF9hcmd1bWVudHNbX3N0YXRlIC0gMV07XG4gICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrKF9zdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9KSgpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG4gIH1cblxuICByZXR1cm4gY2hpbGQ7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlXG4gIHBhc3NlZCBgdmFsdWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVzb2x2ZSgxKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoMSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZXNvbHZlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHZhbHVlIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuXG4gIGB2YWx1ZWBcbiovXG5mdW5jdGlvbiByZXNvbHZlKG9iamVjdCkge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBvYmplY3Q7XG4gIH1cblxuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgX3Jlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbnZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBQRU5ESU5HID0gdm9pZCAwO1xudmFyIEZVTEZJTExFRCA9IDE7XG52YXIgUkVKRUNURUQgPSAyO1xuXG52YXIgR0VUX1RIRU5fRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcblxuZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG59XG5cbmZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yO1xuICAgIHJldHVybiBHRVRfVEhFTl9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlUaGVuKHRoZW4sIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcbiAgdHJ5IHtcbiAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4pIHtcbiAgYXNhcChmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcbiAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4sIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuXG4gICAgICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTtcblxuICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgX3JlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfVxuICB9LCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcbiAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgX3JlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpIHtcbiAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IgJiYgdGhlbiQkID09PSB0aGVuICYmIG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gcmVzb2x2ZSkge1xuICAgIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0aGVuJCQgPT09IEdFVF9USEVOX0VSUk9SKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIEdFVF9USEVOX0VSUk9SLmVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHRoZW4kJCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGVuJCQpKSB7XG4gICAgICBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgX3JlamVjdChwcm9taXNlLCBzZWxmRnVsZmlsbG1lbnQoKSk7XG4gIH0gZWxzZSBpZiAob2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBnZXRUaGVuKHZhbHVlKSk7XG4gIH0gZWxzZSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG4gIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG4gICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuICB9XG5cbiAgcHVibGlzaChwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcbiAgcHJvbWlzZS5fc3RhdGUgPSBGVUxGSUxMRUQ7XG5cbiAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgIGFzYXAocHVibGlzaCwgcHJvbWlzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX3JlamVjdChwcm9taXNlLCByZWFzb24pIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHByb21pc2UuX3N0YXRlID0gUkVKRUNURUQ7XG4gIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjtcblxuICBhc2FwKHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIF9zdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7XG4gIHZhciBsZW5ndGggPSBfc3Vic2NyaWJlcnMubGVuZ3RoO1xuXG4gIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cbiAgX3N1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247XG5cbiAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwYXJlbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSkge1xuICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcbiAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblxuICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNoaWxkID0gdW5kZWZpbmVkLFxuICAgICAgY2FsbGJhY2sgPSB1bmRlZmluZWQsXG4gICAgICBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG4gICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soZGV0YWlsKTtcbiAgICB9XG4gIH1cblxuICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xufVxuXG5mdW5jdGlvbiBFcnJvck9iamVjdCgpIHtcbiAgdGhpcy5lcnJvciA9IG51bGw7XG59XG5cbnZhciBUUllfQ0FUQ0hfRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcblxuZnVuY3Rpb24gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuICB0cnkge1xuICAgIHJldHVybiBjYWxsYmFjayhkZXRhaWwpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcbiAgICByZXR1cm4gVFJZX0NBVENIX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgdmFyIGhhc0NhbGxiYWNrID0gaXNGdW5jdGlvbihjYWxsYmFjayksXG4gICAgICB2YWx1ZSA9IHVuZGVmaW5lZCxcbiAgICAgIGVycm9yID0gdW5kZWZpbmVkLFxuICAgICAgc3VjY2VlZGVkID0gdW5kZWZpbmVkLFxuICAgICAgZmFpbGVkID0gdW5kZWZpbmVkO1xuXG4gIGlmIChoYXNDYWxsYmFjaykge1xuICAgIHZhbHVlID0gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XG5cbiAgICBpZiAodmFsdWUgPT09IFRSWV9DQVRDSF9FUlJPUikge1xuICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XG4gICAgICB2YWx1ZSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGNhbm5vdFJldHVybk93bigpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIC8vIG5vb3BcbiAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcbiAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBGVUxGSUxMRUQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gUkVKRUNURUQpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcbiAgdHJ5IHtcbiAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkge1xuICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIGUpO1xuICB9XG59XG5cbnZhciBpZCA9IDA7XG5mdW5jdGlvbiBuZXh0SWQoKSB7XG4gIHJldHVybiBpZCsrO1xufVxuXG5mdW5jdGlvbiBtYWtlUHJvbWlzZShwcm9taXNlKSB7XG4gIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrO1xuICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xufVxuXG5mdW5jdGlvbiBFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoIXRoaXMucHJvbWlzZVtQUk9NSVNFX0lEXSkge1xuICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG4gIH1cblxuICBpZiAoaXNBcnJheShpbnB1dCkpIHtcbiAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuICAgIHRoaXMubGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7XG5cbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG4gICAgICB0aGlzLl9lbnVtZXJhdGUoKTtcbiAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIF9yZWplY3QodGhpcy5wcm9taXNlLCB2YWxpZGF0aW9uRXJyb3IoKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yKCdBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXknKTtcbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgdmFyIF9pbnB1dCA9IHRoaXMuX2lucHV0O1xuXG4gIGZvciAodmFyIGkgPSAwOyB0aGlzLl9zdGF0ZSA9PT0gUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB0aGlzLl9lYWNoRW50cnkoX2lucHV0W2ldLCBpKTtcbiAgfVxufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uIChlbnRyeSwgaSkge1xuICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG4gIHZhciByZXNvbHZlJCQgPSBjLnJlc29sdmU7XG5cbiAgaWYgKHJlc29sdmUkJCA9PT0gcmVzb2x2ZSkge1xuICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xuXG4gICAgaWYgKF90aGVuID09PSB0aGVuICYmIGVudHJ5Ll9zdGF0ZSAhPT0gUEVORElORykge1xuICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG4gICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKG5vb3ApO1xuICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgX3RoZW4pO1xuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24gKHJlc29sdmUkJCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSQkKGVudHJ5KTtcbiAgICAgIH0pLCBpKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fd2lsbFNldHRsZUF0KHJlc29sdmUkJChlbnRyeSksIGkpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fc2V0dGxlZEF0ID0gZnVuY3Rpb24gKHN0YXRlLCBpLCB2YWx1ZSkge1xuICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcblxuICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICB0aGlzLl9yZW1haW5pbmctLTtcblxuICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24gKHByb21pc2UsIGkpIHtcbiAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG4gIHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoRlVMRklMTEVELCBpLCB2YWx1ZSk7XG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KFJFSkVDVEVELCBpLCByZWFzb24pO1xuICB9KTtcbn07XG5cbi8qKlxuICBgUHJvbWlzZS5hbGxgIGFjY2VwdHMgYW4gYXJyYXkgb2YgcHJvbWlzZXMsIGFuZCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2hcbiAgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgZnVsZmlsbG1lbnQgdmFsdWVzIGZvciB0aGUgcGFzc2VkIHByb21pc2VzLCBvclxuICByZWplY3RlZCB3aXRoIHRoZSByZWFzb24gb2YgdGhlIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIGJlIHJlamVjdGVkLiBJdCBjYXN0cyBhbGxcbiAgZWxlbWVudHMgb2YgdGhlIHBhc3NlZCBpdGVyYWJsZSB0byBwcm9taXNlcyBhcyBpdCBydW5zIHRoaXMgYWxnb3JpdGhtLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZXNvbHZlKDIpO1xuICBsZXQgcHJvbWlzZTMgPSByZXNvbHZlKDMpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07XG4gIH0pO1xuICBgYGBcblxuICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYGFsbGAgYXJlIHJlamVjdGVkLCB0aGUgZmlyc3QgcHJvbWlzZVxuICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2VzJ3NcbiAgcmVqZWN0aW9uIGhhbmRsZXIuIEZvciBleGFtcGxlOlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZWplY3QobmV3IEVycm9yKFwiMlwiKSk7XG4gIGxldCBwcm9taXNlMyA9IHJlamVjdChuZXcgRXJyb3IoXCIzXCIpKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIVxuICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgIC8vIGVycm9yLm1lc3NhZ2UgPT09IFwiMlwiXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIGFsbFxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IGVudHJpZXMgYXJyYXkgb2YgcHJvbWlzZXNcbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlblxuICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC5cbiAgQHN0YXRpY1xuKi9cbmZ1bmN0aW9uIGFsbChlbnRyaWVzKSB7XG4gIHJldHVybiBuZXcgRW51bWVyYXRvcih0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xufVxuXG4vKipcbiAgYFByb21pc2UucmFjZWAgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoIGlzIHNldHRsZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZVxuICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDInKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMVxuICAgIC8vIHdhcyByZXNvbHZlZC5cbiAgfSk7XG4gIGBgYFxuXG4gIGBQcm9taXNlLnJhY2VgIGlzIGRldGVybWluaXN0aWMgaW4gdGhhdCBvbmx5IHRoZSBzdGF0ZSBvZiB0aGUgZmlyc3RcbiAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZVxuICBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50IGFyZSByZXNvbHZlZCwgYnV0IHRoZSBmaXJzdCBzZXR0bGVkIHByb21pc2UgaGFzXG4gIGJlY29tZSByZWplY3RlZCBiZWZvcmUgdGhlIG90aGVyIHByb21pc2VzIGJlY2FtZSBmdWxmaWxsZWQsIHRoZSByZXR1cm5lZFxuICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3Byb21pc2UgMicpKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVuc1xuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlXG4gICAgLy8gcHJvbWlzZSAxIGJlY2FtZSBmdWxmaWxsZWRcbiAgfSk7XG4gIGBgYFxuXG4gIEFuIGV4YW1wbGUgcmVhbC13b3JsZCB1c2UgY2FzZSBpcyBpbXBsZW1lbnRpbmcgdGltZW91dHM6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBQcm9taXNlLnJhY2UoW2FqYXgoJ2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKVxuICBgYGBcblxuICBAbWV0aG9kIHJhY2VcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcyBhcnJheSBvZiBwcm9taXNlcyB0byBvYnNlcnZlXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWRcbiAgcHJvbWlzZSB0byBzZXR0bGUuXG4qL1xuZnVuY3Rpb24gcmFjZShlbnRyaWVzKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKCFpc0FycmF5KGVudHJpZXMpKSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAoXywgcmVqZWN0KSB7XG4gICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZWplY3RgIHJldHVybnMgYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIHBhc3NlZCBgcmVhc29uYC5cbiAgSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVqZWN0XG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHJlYXNvbiB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgZ2l2ZW4gYHJlYXNvbmAuXG4qL1xuZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xufVxuXG5mdW5jdGlvbiBuZWVkc05ldygpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcbn1cblxuLyoqXG4gIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcbiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcbiAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXG4gIFRlcm1pbm9sb2d5XG4gIC0tLS0tLS0tLS0tXG5cbiAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG4gIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblxuICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXG4gIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG4gIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgQmFzaWMgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLVxuXG4gIGBgYGpzXG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLy8gb24gc3VjY2Vzc1xuICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgLy8gb24gZmFpbHVyZVxuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIEFkdmFuY2VkIFVzYWdlOlxuICAtLS0tLS0tLS0tLS0tLS1cblxuICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gIGBYTUxIdHRwUmVxdWVzdGBzLlxuXG4gIGBgYGpzXG4gIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICB4aHIuc2VuZCgpO1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblxuICBgYGBqc1xuICBQcm9taXNlLmFsbChbXG4gICAgZ2V0SlNPTignL3Bvc3RzJyksXG4gICAgZ2V0SlNPTignL2NvbW1lbnRzJylcbiAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cbiAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9KTtcbiAgYGBgXG5cbiAgQGNsYXNzIFByb21pc2VcbiAgQHBhcmFtIHtmdW5jdGlvbn0gcmVzb2x2ZXJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAY29uc3RydWN0b3JcbiovXG5mdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG4gIHRoaXNbUFJPTUlTRV9JRF0gPSBuZXh0SWQoKTtcbiAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cbiAgaWYgKG5vb3AgIT09IHJlc29sdmVyKSB7XG4gICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTtcbiAgICB0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSA/IGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IG5lZWRzTmV3KCk7XG4gIH1cbn1cblxuUHJvbWlzZS5hbGwgPSBhbGw7XG5Qcm9taXNlLnJhY2UgPSByYWNlO1xuUHJvbWlzZS5yZXNvbHZlID0gcmVzb2x2ZTtcblByb21pc2UucmVqZWN0ID0gcmVqZWN0O1xuUHJvbWlzZS5fc2V0U2NoZWR1bGVyID0gc2V0U2NoZWR1bGVyO1xuUHJvbWlzZS5fc2V0QXNhcCA9IHNldEFzYXA7XG5Qcm9taXNlLl9hc2FwID0gYXNhcDtcblxuUHJvbWlzZS5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBQcm9taXNlLFxuXG4gIC8qKlxuICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG4gICAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIENoYWluaW5nXG4gICAgLS0tLS0tLS1cbiAgXG4gICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG4gICAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICByZXR1cm4gdXNlci5uYW1lO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gICAgfSk7XG4gIFxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICAgIH0pO1xuICAgIGBgYFxuICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBBc3NpbWlsYXRpb25cbiAgICAtLS0tLS0tLS0tLS1cbiAgXG4gICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmVcbiAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcbiAgICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgU2ltcGxlIEV4YW1wbGVcbiAgICAtLS0tLS0tLS0tLS0tLVxuICBcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBsZXQgcmVzdWx0O1xuICBcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfVxuICAgIGBgYFxuICBcbiAgICBFcnJiYWNrIEV4YW1wbGVcbiAgXG4gICAgYGBganNcbiAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBQcm9taXNlIEV4YW1wbGU7XG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEFkdmFuY2VkIEV4YW1wbGVcbiAgICAtLS0tLS0tLS0tLS0tLVxuICBcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBsZXQgYXV0aG9yLCBib29rcztcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTtcbiAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEVycmJhY2sgRXhhbXBsZVxuICBcbiAgICBgYGBqc1xuICBcbiAgICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7XG4gIFxuICAgIH1cbiAgXG4gICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcbiAgXG4gICAgfVxuICBcbiAgICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcbiAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFByb21pc2UgRXhhbXBsZTtcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGZpbmRBdXRob3IoKS5cbiAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG4gICAgICAgIC8vIGZvdW5kIGJvb2tzXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgdGhlblxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxuICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuICB0aGVuOiB0aGVuLFxuXG4gIC8qKlxuICAgIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcbiAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuICBcbiAgICBgYGBqc1xuICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xuICAgIH1cbiAgXG4gICAgLy8gc3luY2hyb25vdXNcbiAgICB0cnkge1xuICAgICAgZmluZEF1dGhvcigpO1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH1cbiAgXG4gICAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCBjYXRjaFxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG4gICdjYXRjaCc6IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xuICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICB9XG59O1xuXG5mdW5jdGlvbiBwb2x5ZmlsbCgpIHtcbiAgICB2YXIgbG9jYWwgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbG9jYWwgPSBnbG9iYWw7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbG9jYWwgPSBzZWxmO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cbiAgICBpZiAoUCkge1xuICAgICAgICB2YXIgcHJvbWlzZVRvU3RyaW5nID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHByb21pc2VUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIHNpbGVudGx5IGlnbm9yZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm9taXNlVG9TdHJpbmcgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2NhbC5Qcm9taXNlID0gUHJvbWlzZTtcbn1cblxucG9seWZpbGwoKTtcbi8vIFN0cmFuZ2UgY29tcGF0Li5cblByb21pc2UucG9seWZpbGwgPSBwb2x5ZmlsbDtcblByb21pc2UuUHJvbWlzZSA9IFByb21pc2U7XG5cbnJldHVybiBQcm9taXNlO1xuXG59KSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXM2LXByb21pc2UubWFwIiwiLyogZ2xvYmFsIFRhYnVsYXRvciAqL1xyXG5pbXBvcnQgVGFza1N1cGVydmlzaW9uU2VydmljZSBmcm9tICcuL1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UnO1xyXG5pbXBvcnQgRGF0ZVRpbWVWYWxpZGF0b3IgZnJvbSAnLi4vLi4vLi4vY29tbW9uL3ZhbGlkYXRpb24vRGF0ZVRpbWVWYWxpZGF0b3InO1xyXG5pbXBvcnQgRGF0ZVRpbWVIZWxwZXIgZnJvbSAnLi4vLi4vLi4vY29tbW9uL3V0aWwvRGF0ZVRpbWVIZWxwZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlciB7XHJcblxyXG4gICBjb25zdHJ1Y3RvcihwYXJtcykge1xyXG4gICAgICB0aGlzLnVzZXJJZCA9IHBhcm1zLnVzZXJJZDtcclxuXHJcbiAgICAgIGlmICghdGhpcy51c2VySWQpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1c2VySWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuY3Jld3NGaWVsZElkID0gcGFybXMuY3Jld3NGaWVsZElkO1xyXG5cclxuICAgICAgaWYgKCF0aGlzLmNyZXdzRmllbGRJZCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyZXdzRmllbGRJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IGNyZXdzRmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNyZXdzRmllbGRJZCk7XHJcbiAgICAgIGlmICghY3Jld3NGaWVsZCB8fCBjcmV3c0ZpZWxkLnRhZ05hbWUgIT0gJ1NFTEVDVCcpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjcmV3c0ZpZWxkSWQgbXVzdCBiZSBhIFNFTEVDVCBlbGVtZW50Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuc2VydmljZSA9IHBhcm1zLlRhc2tTdXBlcnZpc2lvblNlcnZpY2UgfHwgbmV3IFRhc2tTdXBlcnZpc2lvblNlcnZpY2UoKTtcclxuICAgICAgdGhpcy5pc0FsbG93ZWRUb1NlYXJjaCA9IHBhcm1zLmlzQWxsb3dlZFRvU2VhcmNoID09PSAndHJ1ZSc7XHJcbiAgICAgIHRoaXMuaXNBbGxvd2VkVG9FZGl0U2NoZWRsZWRIb3VycyA9IHBhcm1zLmlzQWxsb3dlZFRvRWRpdFNjaGVkbGVkSG91cnMgPT09ICd0cnVlJztcclxuICAgICAgdGhpcy5pc0FsbG93ZWRUb0VkaXRBY3R1YWxIb3VycyA9IHBhcm1zLmlzQWxsb3dlZFRvRWRpdEFjdHVhbEhvdXJzID09PSAndHJ1ZSc7XHJcbiAgICAgIHRoaXMuc3RhcnREYXRlV2lkZ2V0SWQgPSBwYXJtcy5zdGFydEZpZWxkSWQ7XHJcbiAgICAgIHRoaXMuZW5kRGF0ZVdpZGdldElkID0gcGFybXMuZW5kRmllbGRJZDtcclxuICAgICAgdGhpcy5zaG93Q29tcGxldGVJZCA9IHBhcm1zLnNob3dDb21wbGV0ZUlkO1xyXG4gICAgICB0aGlzLnNlYXJjaEJ1dHRvbklkID0gcGFybXMuc2VhcmNoQnV0dG9uSWQ7XHJcbiAgICAgIHRoaXMuc2VhcmNoUmVzdWx0c0lkID0gcGFybXMuc2VhcmNoUmVzdWx0c0lkO1xyXG4gICAgICB0aGlzLm5vU2VhcmNoUmVzdWx0c01lc3NhZ2UgPSBwYXJtcy5ub1NlYXJjaFJlc3VsdHNNZXNzYWdlO1xyXG4gICAgICB0aGlzLmxhYm9yUm93RWxhc3BlZFRpbWVUaHJlc2hvbGQgPSBwYXJtcy5sYWJvclJvd0VsYXNwZWRUaW1lVGhyZXNob2xkO1xyXG5cclxuICAgICAgdGhpcy5kZWZhdWx0U2hvd0NvbXBsZXRlID0gdHJ1ZTtcclxuICAgICAgdGhpcy5pc1NjaGVkdWxlZEhvdXJzQ2VsbEVkaXRhYmxlLmJpbmQodGhpcyk7XHJcbiAgICAgIHRoaXMuaGFuZGxlU2NoZWR1bGVIb3Vyc0VkaXQuYmluZCh0aGlzKTtcclxuICAgICAgdGhpcy5oYW5kbGVBY3R1YWxIb3Vyc0VkaXQuYmluZCh0aGlzKTtcclxuICAgICAgdGhpcy5hY3R1YWxIb3VyQ2VsbEZvcm1hdHRlci5iaW5kKHRoaXMpO1xyXG4gICB9XHJcblxyXG4gICBnZXRTZXJ2aWNlSW5zdGFuY2UoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNlcnZpY2U7XHJcbiAgIH1cclxuXHJcbiAgIGluaXQoKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgIHRoaXMuaW5pdFNob3dDb21wbGV0ZVRhc2tzV2lkZ2V0KCk7XHJcbiAgICAgICAgIHRoaXMuaW5pdFJlc3VsdHNUYWJsZSgpO1xyXG4gICAgICAgICB0aGlzLmluaXRTZWFyY2hCdXR0b24oKTtcclxuXHJcbiAgICAgICAgIFByb21pc2UuYWxsKFt0aGlzLmluaXRDcmV3c1dpZGdldCgpLCB0aGlzLmluaXRTdGFydEFuZEVuZFdpZGdldHMoKV0pLnRoZW4oKHJlc3VsdHMpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wb3B1bGF0ZUNyZXdzV2lkZ2V0KHJlc3VsdHNbMF0pO1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXJ0QW5kRW5kV2lkZ2V0cyhyZXN1bHRzWzFdKTtcclxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtU2VhcmNoKCkudGhlbigoKSA9PiByZXNvbHZlKCkpO1xyXG4gICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcclxuICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBpbml0Q3Jld3NXaWRnZXQoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHRoaXMudXNlcklkKTtcclxuICAgfVxyXG5cclxuICAgaW5pdFN0YXJ0QW5kRW5kV2lkZ2V0cygpIHtcclxuICAgICAgaWYgKCF0aGlzLnVzZXJJZCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZXJJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAgdGhpcy52YWxpZGF0ZVN0YXJ0RW5kV2lkZ2V0SWRzKCk7XHJcbiAgICAgICAgIGxldCBzdGFydEZpZWxkSWRzID0gdGhpcy5idWlsZEZpZWxkSWRzRm9yRGF0ZVRpbWVXaWRnZXQodGhpcy5zdGFydERhdGVXaWRnZXRJZCk7XHJcbiAgICAgICAgIGxldCBlbmRGaWVsZElkcyA9IHRoaXMuYnVpbGRGaWVsZElkc0ZvckRhdGVUaW1lV2lkZ2V0KHRoaXMuZW5kRGF0ZVdpZGdldElkKTtcclxuICAgICAgICAgdGhpcy5zZXRTdGFydEVuZEVsZW1BdHRycyhzdGFydEZpZWxkSWRzLCBlbmRGaWVsZElkcyk7XHJcbiAgICAgICAgIHRoaXMudmFsaWRhdGVTdGFydEVuZEVsZW1zKCk7XHJcbiAgICAgIH1cclxuICAgICAgY2F0Y2ggKGV4Y2VwdGlvbikge1xyXG4gICAgICAgICBjb25zb2xlLmVycm9yKFwiaW5pdFN0YXJ0QW5kRW5kV2lkZ2V0c1wiLCBleGNlcHRpb24pO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIFRoZSBkYXRlIGZpZWxkcyBmb3IgdGhlIERhdGVUaW1lIHdpZGdldHNcclxuICAgICAgLy8gZG8gbm90IHByb3ZpZGUgc3VmZmljaWVudCB2YWxpZGF0aW9uIHNvIHdlIHdpbGwgZGlzYWJsZSB0aGVtLlxyXG4gICAgICB0aGlzLnN0YXJ0RGF0ZUVsZW0uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLmVuZERhdGVFbGVtLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLnNlcnZpY2UuZ2V0RGVmYXVsdFN0YXJ0QW5kRW5kRGF0ZXModGhpcy51c2VySWQpO1xyXG4gICB9XHJcblxyXG4gICBpbml0U2hvd0NvbXBsZXRlVGFza3NXaWRnZXQoKSB7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2hvd0NvbXBsZXRlSWQpLmNoZWNrZWQgPSB0aGlzLmRlZmF1bHRTaG93Q29tcGxldGU7XHJcbiAgIH1cclxuXHJcblxyXG4gICBpbml0UmVzdWx0c1RhYmxlKCkge1xyXG4gICAgICAvLyBUaGUgZmllbGQgbmFtZXMgbWF0Y2ggdGhvc2UgaW46XHJcbiAgICAgIC8vICAgIGNvbS5teGkubXgud2ViLnJlc3QudGFzay5DcmV3VGFza0xhYm91clJlc3BvbnNlXHJcbiAgICAgIGNvbnN0IGxpc3RPZkxhYm91ckF0dHJzID0gWyd0ZWNobmljaWFuJywgJ2xhYm91clNraWxsJywgJ2xhYm91clN0YXR1cycsICdqb2JTdG9wUmVhc29uJywgJ2VsYXBzZWRIb3Vyc01pbnV0ZXMnLFxyXG4gICAgICAgICAnc2NoZWR1bGVkSG91cnMnLCAnYWN0dWFsSG91cnMnXHJcbiAgICAgIF07XHJcblxyXG4gICAgICAvLyBOb3RlOiBpdCBhcHBlYXJzIHRoYXQgVGFidWxhdG9yIGhhcyBkaWZmaWN1bHR5IGlmIHZpc2libGU6ZmFsc2UgZmllbGRzIGFyZSBhZnRlciBvdGhlciBmaWVsZHMsXHJcbiAgICAgIC8vIHNvIGNvbmZpZ3VyZSB0aGVtIGZpcnN0Llx0ICBcclxuICAgICAgdGhpcy50YWJsZSA9IG5ldyBUYWJ1bGF0b3IoXCIjXCIgKyB0aGlzLnNlYXJjaFJlc3VsdHNJZCwge1xyXG4gICAgICAgICBjb2x1bW5zOiBbXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdUYXNrIElkJywgZmllbGQ6ICd0YXNrSWQnLCB2aXNpYmxlOiBmYWxzZSB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnTGFib3VyIFJvdyBJZCcsIGZpZWxkOiAnbGFib3VyUm93SWQnLCB2aXNpYmxlOiBmYWxzZSB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnRnJvbSBKb2IgU3RvcCcsIGZpZWxkOiAnaXNGcm9tSm9iU3RvcCcsIHZpc2libGU6IGZhbHNlIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdMaW5lIE5vJywgZmllbGQ6ICdsaW5lTm8nLCBzb3J0ZXI6ICdudW1iZXInLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ1Rhc2snLCBmaWVsZDogJ3Rhc2tOYW1lJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdUYXNrIFN0YXR1cycsIGZpZWxkOiAndGFza1N0YXR1cycsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnVGFzayBDbGFzcyAtIFN1YmNsYXNzJywgZmllbGQ6ICd0YXNrQ2xhc3NTdWJjbGFzcycsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnVGFzayBQcmlvcml0eScsIGZpZWxkOiAndGFza1ByaW9yaXR5Jywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdBaXJjcmFmdCcsIGZpZWxkOiAnYWlyY3JhZnQnLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ1dvcmsgUGFja2FnZScsIGZpZWxkOiAnd29ya3BhY2thZ2UnLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ1dvcmsgTG9jYXRpb24nLCBmaWVsZDogJ3dvcmtMb2NhdGlvbicsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnV29yayBBcmVhJywgZmllbGQ6ICd3b3JrQXJlYScsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnU2NoZWR1bGVkIFN0YXJ0IERhdGUnLCBmaWVsZDogJ3NjaGVkdWxlZFN0YXJ0RGF0ZScsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnQWN0dWFsIFN0YXJ0IERhdGUnLCBmaWVsZDogJ2FjdHVhbFN0YXJ0RGF0ZScsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IGZpZWxkOiAnU2VsZWN0ZWQnLCBhbGlnbjogJ2NlbnRlcicsIHdpZHRoOiA1MCwgaGVhZGVyU29ydDogZmFsc2UsIGZvcm1hdHRlcjogKCkgPT4geyByZXR1cm4gJzxpbnB1dCBpZD1cImNoZWNrQm94XCIgdHlwZT1cImNoZWNrYm94XCI+JzsgfSB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnVGVjaG5pY2lhbicsIGZpZWxkOiAndGVjaG5pY2lhbicsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnU2tpbGwnLCBmaWVsZDogJ2xhYm91clNraWxsJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdMYWJvdXIgUm93IFN0YXR1cycsIGZpZWxkOiAnbGFib3VyU3RhdHVzJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdKb2IgU3RvcCBSZWFzb24nLCBmaWVsZDogJ2pvYlN0b3BSZWFzb24nLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ0VsYXBzZWQgVGltZScsIGZpZWxkOiAnZWxhcHNlZEhvdXJzTWludXRlcycsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJywgZm9ybWF0dGVyOiB0aGlzLmlzRWxhcHNlZFRpbWVHcmVhdGVyVGhhblRocmVzaG9sZC5iaW5kKHRoaXMpIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgdGl0bGU6ICdTY2hlZC4gSG91cnMnLFxyXG4gICAgICAgICAgICAgICBmaWVsZDogJ3NjaGVkdWxlZEhvdXJzJyxcclxuICAgICAgICAgICAgICAgc29ydGVyOiAnc3RyaW5nJyxcclxuICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgICAgICAgICBlZGl0b3I6ICdpbnB1dCcsXHJcbiAgICAgICAgICAgICAgIHZhbGlkYXRvcjogWydtaW46IDAnLCB0aGlzLnZhbGlkYXRlSG91cnNdLFxyXG4gICAgICAgICAgICAgICBlZGl0YWJsZTogdGhpcy5pc1NjaGVkdWxlZEhvdXJzQ2VsbEVkaXRhYmxlLFxyXG4gICAgICAgICAgICAgICBjZWxsRWRpdGVkOiB0aGlzLmhhbmRsZVNjaGVkdWxlSG91cnNFZGl0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgdGl0bGU6ICdBY3R1YWwgSG91cnMnLFxyXG4gICAgICAgICAgICAgICBmaWVsZDogJ2FjdHVhbEhvdXJzJyxcclxuICAgICAgICAgICAgICAgc29ydGVyOiAnc3RyaW5nJyxcclxuICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgICAgICAgICBlZGl0b3I6ICdpbnB1dCcsXHJcbiAgICAgICAgICAgICAgIHZhbGlkYXRvcjogWydtaW46IDAnLCB0aGlzLnZhbGlkYXRlSG91cnNdLFxyXG4gICAgICAgICAgICAgICBlZGl0YWJsZTogdGhpcy5pc0FjdHVhbEhvdXJzQ2VsbEVkaXRhYmxlLFxyXG4gICAgICAgICAgICAgICBjZWxsRWRpdGVkOiB0aGlzLmhhbmRsZUFjdHVhbEhvdXJzRWRpdCxcclxuICAgICAgICAgICAgICAgZm9ybWF0dGVyOiB0aGlzLmFjdHVhbEhvdXJDZWxsRm9ybWF0dGVyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgXSxcclxuICAgICAgICAgZGF0YVNvcnRlZDogKHNvcnRlcnMsIHJvd3MpID0+IHtcclxuICAgICAgICAgICAgLy8gVGhpcyBjaGVjayBpcyBkb25lIGFzIHRoZSBjYWxsYmFjayBpcyBjYWxsZWQgYmVmb3JlIHRoZSB0YWJsZSBoYXMgYmVlbiBjb21wbGV0ZWx5IGluc3RhbnRpYXRlZFxyXG4gICAgICAgICAgICAvLyBBcyBhIHJlc3VsdCwgYW4gdW5kZWZpbmVkIG9iamVjdCBlcnJvciBtZXNzYWdlIHdpbGwgb2NjdXIgYXMgdGhlIHNldEdyb3VwQnkgaXMgYmVpbmcgY2FsbGVkIG9uIGFuIHVuZGVmaW5lZCB0YWJsZVxyXG4gICAgICAgICAgICBpZiAodGhpcy50YWJsZSkge1xyXG4gICAgICAgICAgICAgICBpZiAoc29ydGVycy5zb21lKChhdHRyKSA9PiBsaXN0T2ZMYWJvdXJBdHRycy5pbmRleE9mKGF0dHIuZmllbGQpID49IDApKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudGFibGUuc2V0R3JvdXBCeSgpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnRhYmxlLnNldEdyb3VwQnkoXCJ0YXNrSWRcIik7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9LFxyXG4gICAgICAgICBncm91cEhlYWRlcjogKHZhbHVlLCBjb3VudCwgZGF0YSwgZ3JvdXApID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGFbMF0udGFza05hbWUgKyBcIjxzcGFuIHN0eWxlPSdjb2xvcjojMDAwOyBtYXJnaW4tbGVmdDoxMHB4Oyc+KFwiICsgY291bnQgKyBcIiBpdGVtcyk8L3NwYW4+XCI7XHJcbiAgICAgICAgIH0sXHJcbiAgICAgICAgIGdyb3VwVG9nZ2xlRWxlbWVudDogXCJoZWFkZXJcIixcclxuICAgICAgICAgcGxhY2Vob2xkZXI6IHRoaXMubm9TZWFyY2hSZXN1bHRzTWVzc2FnZVxyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuXHJcbiAgIGFjdHVhbEhvdXJDZWxsRm9ybWF0dGVyKGNlbGwpIHtcclxuXHJcbiAgICAgIGlmICghY2VsbCkge1xyXG4gICAgICAgICByZXR1cm4gY2VsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuYWN0dWFsSG91ckdyZWF0ZXJUaGFuU2NoZWR1bGVkSG91cnMoY2VsbCkpIHtcclxuICAgICAgICAgLy9mb3JtYXQgY2VsbCBiYWNrZ3JvdW5kIHRvIHllbGxvd1xyXG4gICAgICAgICBjZWxsLmdldEVsZW1lbnQoKS5jbGFzc0xpc3QuYWRkKFwiaGlnaGxpZ2h0QWN0dWFsSG91cnNDZWxsXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgdGltZSA9IGNlbGwuZ2V0VmFsdWUoKTtcclxuICAgICAgLy8gUmV0dXJuIGVtcHR5IHN0cmluZyBpZiBBY3R1YWwgSG91ciB2YWx1ZSBpcyBibGFua1xyXG4gICAgICAvLyBvdGhlcndpc2UgcmV0dXJuIEFjdHVhbCBIb3VycyB2YWx1ZS5cclxuICAgICAgcmV0dXJuICh0aW1lID8gdGltZSA6ICcnKTtcclxuICAgfVxyXG5cclxuICAgYWN0dWFsSG91ckdyZWF0ZXJUaGFuU2NoZWR1bGVkSG91cnMoY2VsbCkge1xyXG5cclxuICAgICAgbGV0IGFjdHVhbEhvdXJzID0gY2VsbC5nZXRWYWx1ZSgpO1xyXG4gICAgICBpZiAoIWFjdHVhbEhvdXJzKSB7XHJcbiAgICAgICAgIHJldHVybiBhY3R1YWxIb3VycztcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHNjaGVkdWxlSG91cnMgPSBjZWxsLmdldFJvdygpLmdldERhdGEoKS5zY2hlZHVsZWRIb3VycztcclxuICAgICAgaWYgKCFzY2hlZHVsZUhvdXJzKSB7XHJcbiAgICAgICAgIHJldHVybiBzY2hlZHVsZUhvdXJzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcGFyc2VJbnQoYWN0dWFsSG91cnMpID4gcGFyc2VJbnQoc2NoZWR1bGVIb3Vycyk7XHJcbiAgIH1cclxuXHJcbiAgIGluaXRTZWFyY2hCdXR0b24oKSB7XHJcbiAgICAgIGxldCAkYnV0dG9uID0gJCgnIycgKyB0aGlzLnNlYXJjaEJ1dHRvbklkKTtcclxuICAgICAgaWYgKHRoaXMuaXNBbGxvd2VkVG9TZWFyY2gpIHtcclxuICAgICAgICAgJGJ1dHRvbi5zaG93KCk7XHJcbiAgICAgICAgICRidXR0b24uY2xpY2soKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybVNlYXJjaCgpO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgJGJ1dHRvbi5oaWRlKCk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgcGVyZm9ybVNlYXJjaCgpIHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgaWYgKHRoaXMuaXNBbGxvd2VkVG9TZWFyY2gpIHtcclxuICAgICAgICAgICAgbGV0IGFyZ3MgPSB7XHJcbiAgICAgICAgICAgICAgICdjcmV3SWQnOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNyZXdzRmllbGRJZCkudmFsdWUsXHJcbiAgICAgICAgICAgICAgICdzdGFydERhdGVUaW1lJzogdGhpcy5mb3JtYXREYXRlVGltZSh0aGlzLnN0YXJ0RGF0ZVdpZGdldElkKSxcclxuICAgICAgICAgICAgICAgJ2VuZERhdGVUaW1lJzogdGhpcy5mb3JtYXREYXRlVGltZSh0aGlzLmVuZERhdGVXaWRnZXRJZCksXHJcbiAgICAgICAgICAgICAgICdzaG93Q29tcGxldGVUYXNrcyc6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2hvd0NvbXBsZXRlSWQpLmNoZWNrZWRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlcnZpY2UucGVyZm9ybVNlYXJjaChhcmdzKS50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSZXN1bHRzVGFibGUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICAvL1xyXG4gICAvLyBwcml2YXRlIG1ldGhvZHNcclxuICAgLy9cclxuXHJcbiAgIC8vIEV4cGVjdCBjcmV3cyB0byBiZTogW3tjb2RlLG5hbWUsaWR9XVxyXG4gICBwb3B1bGF0ZUNyZXdzV2lkZ2V0KGNyZXdzKSB7XHJcbiAgICAgIC8vIENsZWFyIGV4aXN0aW5nIG9wdGlvbnMuXHJcbiAgICAgICQoJyMnICsgdGhpcy5jcmV3c0ZpZWxkSWQpLmZpbmQoJ29wdGlvbicpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgLy8gU29ydCB0aGUgY3Jld3MuXHJcbiAgICAgIGNyZXdzLnNvcnQodGhpcy5jb21wYXJlQ3Jld0FscGhhbnVtZXJpY2FsbHkpO1xyXG5cclxuICAgICAgLy8gQWRkIHByb3ZpZGVkIGNyZXdzIGFzIG9wdGlvbnMsIGlmIHByb3ZpZGVkLlxyXG4gICAgICBpZiAoY3Jld3MpIHtcclxuICAgICAgICAgbGV0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY3Jld3NGaWVsZElkKTtcclxuICAgICAgICAgbGV0IHNlbGVjdE9wdGlvbnMgPSBzZWxlY3Qub3B0aW9ucztcclxuICAgICAgICAgY3Jld3MuZm9yRWFjaCgoY3JldywgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICAgICAgICAgIG9wdGlvbi50ZXh0ID0gY3Jldy5sYWJlbDtcclxuICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gY3Jldy5pZDtcclxuICAgICAgICAgICAgc2VsZWN0T3B0aW9ucy5hZGQob3B0aW9uKTtcclxuICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAvLyBTZXQgdGhlIGZpcnN0IGNyZXcgYXMgdGhlIGRlZmF1bHQuXHJcbiAgICAgICAgIHNlbGVjdC5zZWxlY3RlZEluZGV4ID0gMDtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBjb21wYXJlQ3Jld0FscGhhbnVtZXJpY2FsbHkoYSwgYikge1xyXG4gICAgICBpZiAoYS5sYWJlbCA8IGIubGFiZWwpIHJldHVybiAtMTtcclxuICAgICAgaWYgKGEubGFiZWwgPiBiLmxhYmVsKSByZXR1cm4gMTtcclxuICAgICAgcmV0dXJuIDA7XHJcbiAgIH1cclxuXHJcbiAgIC8vIEV4cGVjdCBtZXNzYWdlIHRvIGJlIGEgc3RyaW5nXHJcbiAgIGhhbmRsZUZhaWx1cmVUb0dldENyZXdzRm9yVXNlcihtZXNzYWdlKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgfVxyXG5cclxuICAgdmFsaWRhdGVTdGFydEVuZFdpZGdldElkcygpIHtcclxuICAgICAgaWYgKCF0aGlzLnN0YXJ0RGF0ZVdpZGdldElkKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3RhcnRGaWVsZElkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5zdGFydERhdGVXaWRnZXRJZCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydEZpZWxkSWQgaXMgbm90IGEgc3RyaW5nJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLmVuZERhdGVXaWRnZXRJZCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VuZEZpZWxkSWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmVuZERhdGVXaWRnZXRJZCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlbmRGaWVsZElkIGlzIG5vdCBhIHN0cmluZycpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIGJ1aWxkRmllbGRJZHNGb3JEYXRlVGltZVdpZGdldCh3aWRnZXRJZCkge1xyXG4gICAgICAvLyBUaGVzZSBpZHMgd2VyZSBkZXRlcm1pbmVkIGJ5IGxvb2tpbmcgYXQgdGhlIGN1c3RvbSB0YWcgRGF0ZVRpbWVGaWVsZFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgICBkYXRlRmllbGRJZDogd2lkZ2V0SWQgKyAnXyREQVRFJCcsXHJcbiAgICAgICAgIHRpbWVGaWVsZElkOiB3aWRnZXRJZCArICdfJFRJTUUkJyxcclxuICAgICAgICAgdGltZVpvbmVGaWVsZElkOiB3aWRnZXRJZCArICdfJFRJTUVaT05FX0RJU1BMQVkkJyxcclxuICAgICAgICAgc3RhcnRQaWNrZXJJZDogd2lkZ2V0SWQgKyAnX1NlbGVjdEJ0bidcclxuICAgICAgfTtcclxuICAgfVxyXG5cclxuICAgc2V0U3RhcnRFbmRFbGVtQXR0cnMoc3RhcnREYXRlV2lkZ2V0SWRzLCBlbmREYXRlV2lkZ2V0SWRzKSB7XHJcbiAgICAgIHRoaXMuc3RhcnREYXRlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXJ0RGF0ZVdpZGdldElkcy5kYXRlRmllbGRJZCk7XHJcbiAgICAgIHRoaXMuc3RhcnRUaW1lRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXJ0RGF0ZVdpZGdldElkcy50aW1lRmllbGRJZCk7XHJcbiAgICAgIHRoaXMuc3RhcnRUaW1lWm9uZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGFydERhdGVXaWRnZXRJZHMudGltZVpvbmVGaWVsZElkKTtcclxuICAgICAgdGhpcy5zdGFydFBpY2tlckVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGFydERhdGVXaWRnZXRJZHMuc3RhcnRQaWNrZXJJZCk7XHJcblxyXG4gICAgICB0aGlzLmVuZERhdGVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZW5kRGF0ZVdpZGdldElkcy5kYXRlRmllbGRJZCk7XHJcbiAgICAgIHRoaXMuZW5kVGltZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbmREYXRlV2lkZ2V0SWRzLnRpbWVGaWVsZElkKTtcclxuICAgICAgdGhpcy5lbmRUaW1lWm9uZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbmREYXRlV2lkZ2V0SWRzLnRpbWVab25lRmllbGRJZCk7XHJcbiAgICAgIHRoaXMuZW5kUGlja2VyRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZERhdGVXaWRnZXRJZHMuc3RhcnRQaWNrZXJJZCk7XHJcbiAgIH1cclxuXHJcbiAgIHZhbGlkYXRlU3RhcnRFbmRFbGVtcygpIHtcclxuICAgICAgaWYgKCF0aGlzLnN0YXJ0RGF0ZUVsZW0pIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydCBkYXRlIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIHRoZSBET00uJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLnN0YXJ0VGltZUVsZW0pIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydCB0aW1lIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIHRoZSBET00uJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLnN0YXJ0VGltZVpvbmVFbGVtKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3RhcnQgdGltZSB6b25lIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIHRoZSBET00uJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLnN0YXJ0UGlja2VyRWxlbSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXJ0IGRhdGUgcGlja2VyIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIHRoZSBET00uJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdGhpcy5lbmREYXRlRWxlbSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VuZCBkYXRlIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIHRoZSBET00uJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLmVuZFRpbWVFbGVtKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignZW5kIHRpbWUgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIERPTS4nKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMuZW5kVGltZVpvbmVFbGVtKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignZW5kIHRpbWUgem9uZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgRE9NLicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy5lbmRQaWNrZXJFbGVtKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignZW5kIGRhdGUgcGlja2VyIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIHRoZSBET00uJyk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgc2V0U3RhcnRBbmRFbmRXaWRnZXRzKGRlZmF1bHRTdGFydEVuZFZhbHVlcykge1xyXG4gICAgICB0aGlzLnN0YXJ0RGF0ZUVsZW0udmFsdWUgPSBkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuc3RhcnREYXRlO1xyXG4gICAgICB0aGlzLnN0YXJ0VGltZUVsZW0udmFsdWUgPSBkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuc3RhcnRUaW1lO1xyXG4gICAgICB0aGlzLnN0YXJ0VGltZVpvbmVFbGVtLnZhbHVlID0gZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLnN0YXJ0VGltZVpvbmU7XHJcblxyXG4gICAgICB0aGlzLmVuZERhdGVFbGVtLnZhbHVlID0gZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLmVuZERhdGU7XHJcbiAgICAgIHRoaXMuZW5kVGltZUVsZW0udmFsdWUgPSBkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuZW5kVGltZTtcclxuICAgICAgdGhpcy5lbmRUaW1lWm9uZUVsZW0udmFsdWUgPSBkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuZW5kVGltZVpvbmU7XHJcbiAgIH1cclxuXHJcblxyXG4gICB1cGRhdGVSZXN1bHRzVGFibGUocmVzcG9uc2UpIHtcclxuICAgICAgLy8gVGhlIHJlc3BvbnNlIGlzIGEganNvbiBsaXN0IG9mIG9iamVjdHMgZ2VuZXJhdGVkIGZyb206XHJcbiAgICAgIC8vICAgIGNvbS5teGkubXgud2ViLnJlc3QudGFzay5DcmV3VGFza0xhYm91clJlc3BvbnNlXHJcbiAgICAgIGxldCBhZGRUb1RvcCA9IHRydWU7XHJcbiAgICAgIHRoaXMudGFibGUuY2xlYXJEYXRhKCk7XHJcbiAgICAgIHRoaXMudGFibGUuYWRkRGF0YShyZXNwb25zZSwgYWRkVG9Ub3ApO1xyXG4gICAgICB0aGlzLnRhYmxlLnNldFNvcnQoW3sgY29sdW1uOiAnbGluZU5vJywgZGlyOiAnYXNjJyB9XSk7XHJcbiAgIH1cclxuXHJcblxyXG4gICAvLyBGb3JtYXQgdGhlIGRhdGUgYW5kIHRpbWUgdG8gdGhhdCBleHBlY3RlZCBieSBjb20ubXhpLm14LmNvbW1vbi51dGlscy5EYXRhVHlwZVV0aWxzXHJcbiAgIGZvcm1hdERhdGVUaW1lKGRhdGVUaW1lV2lkZ2V0SWQpIHtcclxuICAgICAgbGV0IGZpZWxkSWRzID0gdGhpcy5idWlsZEZpZWxkSWRzRm9yRGF0ZVRpbWVXaWRnZXQoZGF0ZVRpbWVXaWRnZXRJZCk7XHJcblxyXG4gICAgICBsZXQgZGF0ZVZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGRJZHMuZGF0ZUZpZWxkSWQpLnZhbHVlO1xyXG4gICAgICBsZXQgdGltZVZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGRJZHMudGltZUZpZWxkSWQpLnZhbHVlO1xyXG5cclxuICAgICAgcmV0dXJuIGRhdGVWYWx1ZSArICcgJyArIHRpbWVWYWx1ZTtcclxuICAgfVxyXG5cclxuICAgaXNTY2hlZHVsZWRIb3Vyc0NlbGxFZGl0YWJsZShjZWxsKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzQWxsb3dlZFRvRWRpdFNjaGVkbGVkSG91cnMpIHtcclxuICAgICAgICAgbGV0IHJvd0RhdGEgPSBjZWxsLmdldFJvdygpLmdldERhdGEoKTtcclxuICAgICAgICAgaWYgKHJvd0RhdGEuaXNGcm9tSm9iU3RvcCAmJiByb3dEYXRhLmxhYm91clN0YXR1cyA9PSAnQUNUVicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgIH1cclxuXHJcbiAgIGlzQWN0dWFsSG91cnNDZWxsRWRpdGFibGUoY2VsbCkge1xyXG4gICAgICBpZiAodGhpcy5pc0FsbG93ZWRUb0VkaXRBY3R1YWxIb3Vycykge1xyXG4gICAgICAgICBsZXQgcm93RGF0YSA9IGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpO1xyXG4gICAgICAgICBpZiAocm93RGF0YS5sYWJvdXJTdGF0dXMgPT0gJ0NPTVBMRVRFJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgfVxyXG5cclxuICAgaXNFbGFwc2VkVGltZUdyZWF0ZXJUaGFuVGhyZXNob2xkKGNlbGwpIHtcclxuICAgICAgbGV0IHRpbWUgPSBjZWxsLmdldFZhbHVlKCk7XHJcbiAgICAgIGlmICh0aW1lKSB7XHJcbiAgICAgICAgIGxldCBkZWNpbWFsVGltZSA9IERhdGVUaW1lVmFsaWRhdG9yLmNvbnZlcnRUaW1lVG9EZWNpbWFsKHRpbWUpO1xyXG4gICAgICAgICBpZiAoZGVjaW1hbFRpbWUgPiBwYXJzZUZsb2F0KHRoaXMubGFib3JSb3dFbGFzcGVkVGltZVRocmVzaG9sZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiPHNwYW4gY2xhc3M9J2VsYXBzZWRUaW1lRXhjZWVkc1RocmVzaG9sZCc+XCIgKyB0aW1lICsgXCI8L3NwYW4+XCI7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRpbWU7XHJcbiAgIH1cclxuXHJcbiAgIHZhbGlkYXRlSG91cnMoY2VsbCwgdmFsdWUpIHtcclxuICAgICAgcmV0dXJuIERhdGVUaW1lVmFsaWRhdG9yLnZhbGlkYXRlSG91cnModmFsdWUpO1xyXG4gICB9XHJcblxyXG4gICBoYW5kbGVTY2hlZHVsZUhvdXJzRWRpdChjZWxsKSB7XHJcbiAgICAgIGxldCByb3dEYXRhID0gY2VsbC5nZXRSb3coKS5nZXREYXRhKCk7XHJcbiAgICAgIHRoaXMuc2VydmljZS51cGRhdGVTY2hlZHVsZWRIb3VycyhcclxuICAgICAgICAgcm93RGF0YS50YXNrSWQsXHJcbiAgICAgICAgIHJvd0RhdGEubGFib3VyUm93SWQsXHJcbiAgICAgICAgIGNlbGwuZ2V0VmFsdWUoKSk7XHJcbiAgIH1cclxuXHJcbiAgIGhhbmRsZUFjdHVhbEhvdXJzRWRpdChjZWxsKSB7XHJcbiAgICAgIGxldCByb3dEYXRhID0gY2VsbC5nZXRSb3coKS5nZXREYXRhKCk7XHJcbiAgICAgIHRoaXMuc2VydmljZS51cGRhdGVBY3R1YWxIb3VycyhcclxuICAgICAgICAgcm93RGF0YS50YXNrSWQsXHJcbiAgICAgICAgIHJvd0RhdGEubGFib3VyUm93SWQsXHJcbiAgICAgICAgIGNlbGwuZ2V0VmFsdWUoKSk7XHJcbiAgIH1cclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgZXhwZWN0LCBzcHlPbiwgamFzbWluZSwgc2V0Rml4dHVyZXMgKi9cclxuaW1wb3J0IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIgZnJvbSAnLi9UYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyJztcclxuXHJcbmRlc2NyaWJlKCdUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICBkZXNjcmliZSgnaW5pdENyZXdzV2lkZ2V0JywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICBjb25zdCB0ZXN0Q3Jld0xpc3QgPSBbXHJcbiAgICAgICAgIHsgaWQ6ICcxJywgY29kZTogJ2NyZXcxJywgZGVzY3JpcHRpb246ICdjcmV3IG9uZScgfSxcclxuICAgICAgICAgeyBpZDogJzInLCBjb2RlOiAnY3JldzInLCBkZXNjcmlwdGlvbjogJ2NyZXcgdHdvJyB9LFxyXG4gICAgICAgICB7IGlkOiAnMycsIGNvZGU6ICdjcmV3MycsIGRlc2NyaXB0aW9uOiAnY3JldyB0aHJlZScgfVxyXG4gICAgICBdO1xyXG4gICAgICBjb25zdCB0ZXN0Q3Jld0xpc3RPZk9uZSA9IFtcclxuICAgICAgICAgeyBpZDogJzEnLCBjb2RlOiAnY3JldzEnLCBkZXNjcmlwdGlvbjogJ2NyZXcgb25lJyB9XHJcbiAgICAgIF07XHJcblxyXG4gICAgICBjb25zdCB0ZXN0Q3VycmVudERhdGVUaW1lUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgIHN0YXJ0WWVhcjogJzIwMTknLFxyXG4gICAgICAgICBzdGFydE1vbnRoOiAnMDEnLFxyXG4gICAgICAgICBzdGFydERheU9mTW9udGg6ICcwMScsXHJcbiAgICAgICAgIHN0YXJ0SG91ckluRGF5OiAnMTInLFxyXG4gICAgICAgICBzdGFydEhvdXJJbkRheTogJzAwJyxcclxuICAgICAgICAgc3RhcnRNaW51dGU6ICcwMCcsXHJcbiAgICAgICAgIGVuZFllYXI6ICcyMDE5JyxcclxuICAgICAgICAgZW5kTW9udGg6ICcwMicsXHJcbiAgICAgICAgIGVuZERheU9mTW9udGg6ICcwMScsXHJcbiAgICAgICAgIGVuZEhvdXJJbkRheTogJzEyJyxcclxuICAgICAgICAgZW5kTWludXRlOiAnMDAnLFxyXG4gICAgICAgICBzdGFydFRpbWV6b25lOiBcIkVTVFwiXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBsZXQgdmFsaWRQYXJtcztcclxuICAgICAgbGV0IGZha2VTZXJ2aWNlO1xyXG5cclxuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgamFzbWluZS5BamF4Lmluc3RhbGwoKTtcclxuICAgICAgICAgdGhpcy52YWxpZFBhcm1zID0ge1xyXG4gICAgICAgICAgICB1c2VySWQ6ICd1c2VySWQnLFxyXG4gICAgICAgICAgICBjcmV3c0ZpZWxkSWQ6ICdjcmV3c0ZpZWxkSWQnLFxyXG4gICAgICAgICAgICBzdGFydEZpZWxkSWQ6ICdpZFN0YXJ0RGF0ZVRpbWUnLFxyXG4gICAgICAgICAgICBlbmRGaWVsZElkOiAnaWRFbmREYXRlVGltZScsXHJcbiAgICAgICAgICAgIHNob3dDb21wbGV0ZUlkOiAnaWRTaG93Q29tcGxldGUnLFxyXG4gICAgICAgICAgICBzZWFyY2hCdXR0b25JZDogJ2lkU2VhcmNoQnV0dG9uJyxcclxuICAgICAgICAgICAgc2VhcmNoUmVzdWx0c0lkOiAnaWRTZWFyY2hSZXN1bHRzJyxcclxuICAgICAgICAgICAgaXNBbGxvd2VkVG9TZWFyY2ggOiAndHJ1ZSdcclxuICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgIHNldEZpeHR1cmVzKFxyXG4gICAgICAgICAgICAnPHNlbGVjdCBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuY3Jld3NGaWVsZElkICsgJ1wiPjwvc2VsZWN0PicgK1xyXG4gICAgICAgICAgICAnPGlucHV0IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5zaG93Q29tcGxldGVJZCArICdcIiB0eXBlPVwiY2hlY2tib3hcIi8+JyArXHJcbiAgICAgICAgICAgICc8YnV0dG9uIGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5zZWFyY2hCdXR0b25JZCArICdcIiAvPicgK1xyXG4gICAgICAgICAgICAnPGRpdiBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuc2VhcmNoUmVzdWx0c0lkICsgJ1wiIC8+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5zdGFydEZpZWxkSWQgKyAnXCIgLz4nICtcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLnN0YXJ0RmllbGRJZCArICdfJERBVEUkXCIgLz4nICtcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLnN0YXJ0RmllbGRJZCArICdfJFRJTUUkXCIgLz4nICtcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLnN0YXJ0RmllbGRJZCArICdfJFRJTUVaT05FX0RJU1BMQVkkXCIgLz4nICtcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLnN0YXJ0RmllbGRJZCArICdfU2VsZWN0QnRuXCIgLz4nICtcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLmVuZEZpZWxkSWQgKyAnXCIgLz4nICtcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLmVuZEZpZWxkSWQgKyAnXyREQVRFJFwiIC8+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5lbmRGaWVsZElkICsgJ18kVElNRSRcIiAvPicgK1xyXG4gICAgICAgICAgICAnPGRpdiBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuZW5kRmllbGRJZCArICdfJFRJTUVaT05FX0RJU1BMQVkkXCIgLz4nICtcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLmVuZEZpZWxkSWQgKyAnX1NlbGVjdEJ0blwiIC8+J1xyXG4gICAgICAgICApO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGFmdGVyRWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgamFzbWluZS5BamF4LnVuaW5zdGFsbCgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdUaHJvd3MgZXJyb3Igd2hlbiB1c2VyIGlkIG5vdCBwcm92aWRlZC4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgbGV0IHBhcm1zID0gdGhpcy52YWxpZFBhcm1zO1xyXG4gICAgICAgICBwYXJtcy51c2VySWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcihwYXJtcyk7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuaW5pdENyZXdzV2lkZ2V0KCk7XHJcbiAgICAgICAgIH0pLnRvVGhyb3dFcnJvcigndXNlcklkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdUaHJvd3MgZXJyb3Igd2hlbiB1c2VyIGlkIGlzIGJsYW5rLicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBsZXQgcGFybXMgPSB0aGlzLnZhbGlkUGFybXM7XHJcbiAgICAgICAgIHBhcm1zLnVzZXJJZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHBhcm1zKTtcclxuICAgICAgICAgfSkudG9UaHJvd0Vycm9yKCd1c2VySWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgIGl0KCdUaHJvd3MgZXJyb3Igd2hlbiBjcmV3IGZpZWxkIGlkIG5vdCBwcm92aWRlZC4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgbGV0IHBhcm1zID0gdGhpcy52YWxpZFBhcm1zO1xyXG4gICAgICAgICBwYXJtcy5jcmV3c0ZpZWxkSWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcihwYXJtcyk7XHJcbiAgICAgICAgIH0pLnRvVGhyb3dFcnJvcignY3Jld3NGaWVsZElkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdUaHJvd3MgZXJyb3Igd2hlbiBjcmV3IGZpZWxkIGlkIGlzIGJsYW5rLicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBsZXQgcGFybXMgPSB0aGlzLnZhbGlkUGFybXM7XHJcbiAgICAgICAgIHBhcm1zLmNyZXdzRmllbGRJZCA9ICcnO1xyXG4gICAgICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIocGFybXMpO1xyXG4gICAgICAgICB9KS50b1Rocm93RXJyb3IoJ2NyZXdzRmllbGRJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnVGhyb3dzIGVycm9yIHdoZW4gY3JldyBmaWVsZCBpZCBkb2VzIG5vdCBpZGVudGlmeSBhIHNlbGVjdCBlbGVtZW50LicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBsZXQgcGFybXMgPSB0aGlzLnZhbGlkUGFybXM7XHJcbiAgICAgICAgIHBhcm1zLmNyZXdzRmllbGRJZCA9ICdub24tZXhpc3RpbmctaWQnO1xyXG4gICAgICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIocGFybXMpO1xyXG4gICAgICAgICB9KS50b1Rocm93RXJyb3IoJ2NyZXdzRmllbGRJZCBtdXN0IGJlIGEgU0VMRUNUIGVsZW1lbnQnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnVGhyb3dzIGVycm9yIHdoZW4gY3JldyBmaWVsZCBpZCBpZGVudGlmaWVzIGEgbm9uLXNlbGVjdCBlbGVtZW50LicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBzZXRGaXh0dXJlcygnPGlucHV0IGlkPVwiY3Jld3NGaWVsZElkXCI+PC9pbnB1dD4nKTtcclxuICAgICAgICAgbGV0IHBhcm1zID0gdGhpcy52YWxpZFBhcm1zO1xyXG4gICAgICAgICBwYXJtcy5jcmV3c0ZpZWxkSWQgPSAnY3Jld3NGaWVsZElkJztcclxuICAgICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHBhcm1zKTtcclxuICAgICAgICAgfSkudG9UaHJvd0Vycm9yKCdjcmV3c0ZpZWxkSWQgbXVzdCBiZSBhIFNFTEVDVCBlbGVtZW50Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ0ZldGNoIG9mIGNyZXcgbGlzdCBpcyByZXR1cm5lZCcsIGZ1bmN0aW9uKGRvbmUpIHtcclxuICAgICAgICAgLy8gQXJyYW5nZSBcclxuICAgICAgICAgc2V0Rml4dHVyZXMoJzxzZWxlY3QgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLmNyZXdzRmllbGRJZCArICdcIj48L3NlbGVjdD4nKTtcclxuICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcih0aGlzLnZhbGlkUGFybXMpO1xyXG5cclxuICAgICAgICAgc3B5T24oJCwgJ2FqYXgnKS5hbmQuY2FsbEZha2UoZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZS5zdWNjZXNzKHRlc3RDcmV3TGlzdCk7XHJcbiAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgLy8gQWN0XHJcbiAgICAgICAgIGNvbnRyb2xsZXIuaW5pdENyZXdzV2lkZ2V0KCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAvLyBBc3NlcnRcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlKS50b0JlKHRlc3RDcmV3TGlzdCk7XHJcbiAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ1BvcHVsYXRlcyBDcmV3IGRyb3Bkb3duIHdoZW4gcHJvdmlkZWQgbGlzdCBvZiBjcmV3cy4nLCBmdW5jdGlvbihkb25lKSB7XHJcbiAgICAgICAgIC8vIEFycmFuZ2UgXHJcbiAgICAgICAgIHRoaXMudmFsaWRQYXJtcy5pc0FsbG93ZWRUb1NlYXJjaCA9ICdmYWxzZSc7XHJcbiAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIodGhpcy52YWxpZFBhcm1zKTtcclxuXHJcbiAgICAgICAgIHNweU9uKCQsICdhamF4JykuYW5kLmNhbGxGYWtlKGZ1bmN0aW9uKHJlcXVlc3QpIHtcclxuICAgICAgICAgICAgaWYgKHJlcXVlc3QudXJsID09PSAnL21haW50ZW5peC9yZXN0L2NyZXdzJykge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdC5zdWNjZXNzKHRlc3RDcmV3TGlzdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocmVxdWVzdC51cmwgPT09ICcvbWFpbnRlbml4L3Jlc3QvZGF0ZXRpbWUvZ2V0Q3VycmVudCcpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3Quc3VjY2Vzcyh0ZXN0Q3VycmVudERhdGVUaW1lUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJVbnN1cHBvcnRlZCB1cmw6IFwiLCByZXF1ZXN0LnVybCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICBsZXQgY3Jld3NGaWVsZFNlbGVjdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy52YWxpZFBhcm1zLmNyZXdzRmllbGRJZCk7XHJcbiAgICAgICAgIGxldCBzZWxlY3RPcHRpb25zID0gY3Jld3NGaWVsZFNlbGVjdEVsLm9wdGlvbnM7XHJcblxyXG4gICAgICAgICAvLyBBY3RcclxuICAgICAgICAgY29udHJvbGxlci5pbml0KCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAvLyBBc3NlcnRcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdE9wdGlvbnMubGVuZ3RoKS50b0JlKHRlc3RDcmV3TGlzdC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RPcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgIGxldCBleHBlY3RlZFRleHQgPSB0ZXN0Q3Jld0xpc3RbaV0uY29kZSArIFwiIChcIiArIHRlc3RDcmV3TGlzdFtpXS5kZXNjcmlwdGlvbiArIFwiKVwiO1xyXG4gICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJzZWxlY3RPcHRpb25zOiBcIiwgc2VsZWN0T3B0aW9uc1tpXS50ZXh0LCB0ZXN0Q3Jld0xpc3RbaV0uaWQsIGV4cGVjdGVkVGV4dCk7XHJcbiAgICAgICAgICAgICAgIC8vIGV4cGVjdChzZWxlY3RPcHRpb25zW2ldLnRleHQpLnRvQmUoZXhwZWN0ZWRUZXh0KTtcclxuICAgICAgICAgICAgICAgLy8gZXhwZWN0KHNlbGVjdE9wdGlvbnNbaV0udmFsdWUpLnRvQmUodGVzdENyZXdMaXN0W2ldLmlkKTtcclxuICAgICAgICAgICAgfSAqKi9cclxuXHJcbiAgICAgICAgICAgIC8vIGV4cGVjdChjcmV3c0ZpZWxkU2VsZWN0RWwuc2VsZWN0ZWRJbmRleCkudG9CZSgwKTtcdFx0XHQgXHRcdFx0IFxyXG4gICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlx0XHJcbiAgICAgIGl0KCdDbGVhcnMgY3JldyBkcm9wZG93biBwcmlvciB0byBwb3B1bGF0aW5nIGl0IHdpdGggcHJvdmlkZWQgbGlzdCBvZiBjcmV3cy4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICAgICBzZXRGaXh0dXJlcyggXHJcbiAgICAgICAgICAgICAgICc8c2VsZWN0IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5jcmV3c0ZpZWxkSWQgKyAnXCI+JyArXHJcbiAgICAgICAgICAgICAgICcgICA8b3B0aW9uIGlkPVwiMTBcIj5jcmV3MTA8L29wdGlvbj4nK1xyXG4gICAgICAgICAgICAgICAnICAgPG9wdGlvbiBpZD1cIjIwXCI+Y3JldzIwPC9vcHRpb24+JytcclxuICAgICAgICAgICAgICAgJzwvc2VsZWN0PidcclxuICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgIGxldCBmYWtlU2VydmljZSA9IG5ldyBUYXNrU3VwZXJ2aXNpb25TZXJ2aWNlKCk7XHJcbiAgICAgICAgIHNweU9uKGZha2VTZXJ2aWNlLCAnZ2V0Q3Jld3NGb3JVc2VyJykuYW5kLmNhbGxGYWtlKCBmdW5jdGlvbih1c2VySWQsIHN1Y2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHN1Y2Vzc0hhbmRsZXIodGVzdENyZXdMaXN0KTtcclxuICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICBsZXQgcGFybXMgPSB0aGlzLnZhbGlkUGFybXM7XHJcbiAgICAgICAgIHBhcm1zLlRhc2tTdXBlcnZpc2lvblNlcnZpY2UgPSBmYWtlU2VydmljZTtcclxuICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcihwYXJtcyk7XHJcblxyXG4gICAgICAgICAvLyBBY3RcclxuICAgICAgICAgY29udHJvbGxlci5pbml0Q3Jld3NXaWRnZXQoKTtcclxuXHJcbiAgICAgICAgIC8vIEFzc2VydFxyXG4gICAgICAgICBsZXQgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy52YWxpZFBhcm1zLmNyZXdzRmllbGRJZCk7XHJcbiAgICAgICAgIGxldCBzZWxlY3RPcHRpb25zID0gc2VsZWN0Lm9wdGlvbnM7XHJcbiAgICAgICAgIGV4cGVjdChzZWxlY3RPcHRpb25zLmxlbmd0aCkudG9CZSgzKTtcclxuICAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGVjdE9wdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGV4cGVjdGVkVGV4dCA9IHRlc3RDcmV3TGlzdFtpXS5jb2RlICsgXCIgKFwiICsgdGVzdENyZXdMaXN0W2ldLmRlc2NyaXB0aW9uICtcIilcIjtcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdE9wdGlvbnNbaV0udGV4dCkudG9CZShleHBlY3RlZFRleHQpO1xyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0T3B0aW9uc1tpXS52YWx1ZSkudG9CZSh0ZXN0Q3Jld0xpc3RbaV0uaWQpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGV4cGVjdChzZWxlY3Quc2VsZWN0ZWRJbmRleCkudG9CZSgwKTtcdFx0IFxyXG4gICAgICB9KTtcclxuKiovXHJcbiAgICAgIC8qKlxyXG4gICAgICAgICAgICBpdCgnUG9wdWxhdGVzIENyZXcgZHJvcGRvd24gd2hlbiBwcm92aWRlZCBsaXN0IG9mIGEgc2luZ2xlIGNyZXcuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgICAgICAgICAgbGV0IGZha2VTZXJ2aWNlID0gbmV3IFRhc2tTdXBlcnZpc2lvblNlcnZpY2UoKTtcclxuICAgICAgICAgICAgICAgc3B5T24oZmFrZVNlcnZpY2UsICdnZXRDcmV3c0ZvclVzZXInKS5hbmQuY2FsbEZha2UoIGZ1bmN0aW9uKHVzZXJJZCwgc3VjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgc3VjZXNzSGFuZGxlcih0ZXN0Q3Jld0xpc3RPZk9uZSk7XHJcbiAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgbGV0IHBhcm1zID0gdGhpcy52YWxpZFBhcm1zO1xyXG4gICAgICAgICAgICAgICBwYXJtcy5UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlID0gZmFrZVNlcnZpY2U7XHJcbiAgICAgICAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIocGFybXMpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gQWN0XHJcbiAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuaW5pdENyZXdzV2lkZ2V0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBBc3NlcnRcclxuICAgICAgICAgICAgICAgbGV0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudmFsaWRQYXJtcy5jcmV3c0ZpZWxkSWQpO1xyXG4gICAgICAgICAgICAgICBsZXQgc2VsZWN0T3B0aW9ucyA9IHNlbGVjdC5vcHRpb25zO1xyXG4gICAgICAgICAgICAgICBleHBlY3Qoc2VsZWN0T3B0aW9ucy5sZW5ndGgpLnRvQmUoMSk7XHJcblxyXG4gICAgICAgICAgICAgICBsZXQgZXhwZWN0ZWRUZXh0ID0gdGVzdENyZXdMaXN0T2ZPbmVbMF0uY29kZSArIFwiIChcIiArIHRlc3RDcmV3TGlzdE9mT25lWzBdLmRlc2NyaXB0aW9uICtcIilcIjtcclxuICAgICAgICAgICAgICAgZXhwZWN0KHNlbGVjdE9wdGlvbnNbMF0udGV4dCkudG9CZShleHBlY3RlZFRleHQpO1xyXG4gICAgICAgICAgICAgICBleHBlY3Qoc2VsZWN0T3B0aW9uc1swXS52YWx1ZSkudG9CZSh0ZXN0Q3Jld0xpc3RPZk9uZVswXS5pZCk7XHJcbiAgICAgICAgICAgICAgIGV4cGVjdChzZWxlY3Quc2VsZWN0ZWRJbmRleCkudG9CZSgwKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnRG9lcyBub3QgcG9wdWxhdGUgQ3JldyBkcm9wZG93biB3aGVuIHByb3ZpZGVkIG5vIGxpc3Qgb2YgY3Jld3MuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgICAgICAgICAgbGV0IGNyZXdzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICBsZXQgZmFrZVNlcnZpY2UgPSBuZXcgVGFza1N1cGVydmlzaW9uU2VydmljZSgpO1xyXG4gICAgICAgICAgICAgICBzcHlPbihmYWtlU2VydmljZSwgJ2dldENyZXdzRm9yVXNlcicpLmFuZC5jYWxsRmFrZSggZnVuY3Rpb24odXNlcklkLCBzdWNlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgICBzdWNlc3NIYW5kbGVyKGNyZXdzKTtcclxuICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICBsZXQgcGFybXMgPSB0aGlzLnZhbGlkUGFybXM7XHJcbiAgICAgICAgICAgICAgIHBhcm1zLlRhc2tTdXBlcnZpc2lvblNlcnZpY2UgPSBmYWtlU2VydmljZTtcclxuICAgICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcihwYXJtcyk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBBY3RcclxuICAgICAgICAgICAgICAgY29udHJvbGxlci5pbml0Q3Jld3NXaWRnZXQoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFzc2VydFxyXG4gICAgICAgICAgICAgICBsZXQgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy52YWxpZFBhcm1zLmNyZXdzRmllbGRJZCk7XHJcbiAgICAgICAgICAgICAgIGxldCBzZWxlY3RPcHRpb25zID0gc2VsZWN0Lm9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgIGV4cGVjdChzZWxlY3RPcHRpb25zLmxlbmd0aCkudG9CZSgwKTtcclxuICAgICAgICAgICAgICAgZXhwZWN0KHNlbGVjdC5zZWxlY3RlZEluZGV4KS50b0JlKC0xKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnRG9lcyBub3QgcG9wdWxhdGUgQ3JldyBkcm9wZG93biB3aGVuIHByb3ZpZGVkIGVtcHR5IGxpc3Qgb2YgY3Jld3MuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgICAgICAgICAgbGV0IGNyZXdzID0gW107XHJcbiAgICAgICAgICAgICAgIGxldCBmYWtlU2VydmljZSA9IG5ldyBUYXNrU3VwZXJ2aXNpb25TZXJ2aWNlKCk7XHJcbiAgICAgICAgICAgICAgIHNweU9uKGZha2VTZXJ2aWNlLCAnZ2V0Q3Jld3NGb3JVc2VyJykuYW5kLmNhbGxGYWtlKCBmdW5jdGlvbih1c2VySWQsIHN1Y2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgIHN1Y2Vzc0hhbmRsZXIoY3Jld3MpO1xyXG4gICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIGxldCBwYXJtcyA9IHRoaXMudmFsaWRQYXJtcztcclxuICAgICAgICAgICAgICAgcGFybXMuVGFza1N1cGVydmlzaW9uU2VydmljZSA9IGZha2VTZXJ2aWNlO1xyXG4gICAgICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHBhcm1zKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFjdFxyXG4gICAgICAgICAgICAgICBjb250cm9sbGVyLmluaXRDcmV3c1dpZGdldCgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgICAgICAgICAgIGxldCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnZhbGlkUGFybXMuY3Jld3NGaWVsZElkKTtcclxuICAgICAgICAgICAgICAgbGV0IHNlbGVjdE9wdGlvbnMgPSBzZWxlY3Qub3B0aW9ucztcclxuICAgICAgICAgICAgICAgZXhwZWN0KHNlbGVjdE9wdGlvbnMubGVuZ3RoKS50b0JlKDApO1xyXG4gICAgICAgICAgICAgICBleHBlY3Qoc2VsZWN0LnNlbGVjdGVkSW5kZXgpLnRvQmUoLTEpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdUaHJvd3MgZXJyb3Igd2hlbiB1bmFibGUgdG8gZ2V0IGNyZXdzIGZvciB1c2VyLicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAvLyBBcnJhbmdlXHJcbiAgICAgICAgICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnZXJyb3JNZXNzYWdlJztcclxuICAgICAgICAgICAgICAgbGV0IGZha2VTZXJ2aWNlID0gbmV3IFRhc2tTdXBlcnZpc2lvblNlcnZpY2UoKTtcclxuICAgICAgICAgICAgICAgc3B5T24oZmFrZVNlcnZpY2UsICdnZXRDcmV3c0ZvclVzZXInKS5hbmQuY2FsbEZha2UoIGZ1bmN0aW9uKHVzZXJJZCwgc3VjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgZmFpbHVyZUhhbmRsZXIoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICBsZXQgcGFybXMgPSB0aGlzLnZhbGlkUGFybXM7XHJcbiAgICAgICAgICAgICAgIHBhcm1zLlRhc2tTdXBlcnZpc2lvblNlcnZpY2UgPSBmYWtlU2VydmljZTtcclxuICAgICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcihwYXJtcyk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBBY3QgYW5kIEFzc2VydFxyXG4gICAgICAgICAgICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuaW5pdENyZXdzV2lkZ2V0KCk7XHJcbiAgICAgICAgICAgICAgIH0pLnRvVGhyb3dFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgXHQgICoqL1xyXG5cclxuICAgfSk7XHJcblxyXG59KTtcclxuIiwidmFyIG1hcCA9IHtcblx0XCIuL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyLnNwZWMuanNcIjogMTksXG5cdFwiLi9iYXNlbWFpbnRlbmFuY2UvdGFzay90YXNrc3VwZXJ2aXNpb24vVGFza1N1cGVydmlzaW9uU2VydmljZS5zcGVjLmpzXCI6IDEyLFxuXHRcIi4vZW5naW5lZXJpbmcvcmVxdWlyZW1lbnRkZWZpbml0aW9uL2ZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnLnNwZWMuanNcIjogMTEsXG5cdFwiLi9lbmdpbmVlcmluZy9yZXF1aXJlbWVudGRlZmluaXRpb24vZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyLnNwZWMuanNcIjogMTAsXG5cdFwiLi9lbmdpbmVlcmluZy9yZXF1aXJlbWVudGRlZmluaXRpb24vZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLnNwZWMuanNcIjogOCxcblx0XCIuL3NvbWVGZWF0dXJlL2ZlYXR1cmVNYXRoL2ZlYXR1cmVNYXRoLnNwZWMuanNcIjogN1xufTtcblxuXG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0dmFyIGlkID0gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7XG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcblx0cmV0dXJuIG1vZHVsZTtcbn1cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0dmFyIGlkID0gbWFwW3JlcV07XG5cdGlmKCEoaWQgKyAxKSkgeyAvLyBjaGVjayBmb3IgbnVtYmVyIG9yIHN0cmluZ1xuXHRcdHZhciBlID0gbmV3IEVycm9yKCdDYW5ub3QgZmluZCBtb2R1bGUgXCInICsgcmVxICsgJ1wiLicpO1xuXHRcdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0XHR0aHJvdyBlO1xuXHR9XG5cdHJldHVybiBpZDtcbn1cbndlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0O1xud2VicGFja0NvbnRleHQuaWQgPSAyMDsiLCIvLyB0ZXN0X2luZGV4LmpzXG52YXIgdGVzdHNDb250ZXh0ID0gcmVxdWlyZS5jb250ZXh0KFwiLlwiLCB0cnVlLCAvc3BlYy5qcyQvKTtcbnRlc3RzQ29udGV4dC5rZXlzKCkuZm9yRWFjaCh0ZXN0c0NvbnRleHQpOyJdLCJzb3VyY2VSb290IjoiIn0=