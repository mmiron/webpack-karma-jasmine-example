!function(e){function t(t){for(var n,o,s=t[0],l=t[1],d=t[2],c=0,h=[];c<s.length;c++)o=s[c],r[o]&&h.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);h.length;)h.shift()();return a.push.apply(a,d||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,s=1;s<i.length;s++){var l=i[s];0!==r[l]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var n={},r={0:0},a=[];function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var u=l;a.push([9,1]),i()}([function(e,t){e.exports=jQuery},function(e,t,i){"use strict";(function(e){i.d(t,"a",function(){return l});var n=i(5),r=i.n(n),a=i(3),o=i(6);i(8);function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function t(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.userId=e.userId,!this.userId)throw new Error("userId is mandatory");if(this.crewsFieldId=e.crewsFieldId,!this.crewsFieldId)throw new Error("crewsFieldId is mandatory");var i=document.getElementById(this.crewsFieldId);if(!i||"SELECT"!=i.tagName)throw new Error("crewsFieldId must be a SELECT element");this.service=e.TaskSupervisionService||new a.a,this.isAllowedToSearch="true"===e.isAllowedToSearch,this.isAllowedToEditSchedledHours="true"===e.isAllowedToEditSchedledHours,this.isAllowedToEditActualHours="true"===e.isAllowedToEditActualHours,this.startDateWidgetId=e.startFieldId,this.endDateWidgetId=e.endFieldId,this.showCompleteId=e.showCompleteId,this.searchButtonId=e.searchButtonId,this.searchResultsId=e.searchResultsId,this.noSearchResultsMessage=e.noSearchResultsMessage,this.laborRowElaspedTimeThreshold=e.laborRowElaspedTimeThreshold,this.defaultShowComplete=!0,this.isScheduledHoursCellEditable.bind(this),this.handleScheduleHoursEdit.bind(this),this.handleActualHoursEdit.bind(this),this.actualHourCellFormatter.bind(this)}var i,n,l;return i=t,(n=[{key:"getServiceInstance",value:function(){return this.service}},{key:"init",value:function(){var e=this;return new Promise(function(t,i){try{e.initShowCompleteTasksWidget(),e.initResultsTable()}catch(e){console.error(e)}e.initSearchButton(),Promise.all([e.initCrewsWidget(),e.initStartAndEndWidgets()]).then(function(i){e.populateCrewsWidget(i[0]),e.setStartAndEndWidgets(i[1]),e.performSearch().then(function(){return t()})}).catch(function(e){throw new Error(e)})})}},{key:"initCrewsWidget",value:function(){return this.service.getCrewsForUser(this.userId)}},{key:"initStartAndEndWidgets",value:function(){if(!this.userId)throw new Error("userId is mandatory");try{this.validateStartEndWidgetIds();var e=this.buildFieldIdsForDateTimeWidget(this.startDateWidgetId),t=this.buildFieldIdsForDateTimeWidget(this.endDateWidgetId);this.setStartEndElemAttrs(e,t),this.validateStartEndElems()}catch(e){console.error("initStartAndEndWidgets",e)}return this.startDateElem.disabled=!0,this.endDateElem.disabled=!0,this.service.getDefaultStartAndEndDates(this.userId)}},{key:"initShowCompleteTasksWidget",value:function(){document.getElementById(this.showCompleteId).checked=this.defaultShowComplete}},{key:"initResultsTable",value:function(){var e=this,t=["technician","labourSkill","labourStatus","jobStopReason","elapsedHoursMinutes","scheduledHours","actualHours"];this.table=new r.a("#"+this.searchResultsId,{columns:[{title:"Task Id",field:"taskId",visible:!1},{title:"Labour Row Id",field:"labourRowId",visible:!1},{title:"From Job Stop",field:"isFromJobStop",visible:!1},{title:"Line No",field:"lineNo",sorter:"number",align:"center"},{title:"Task",field:"taskName",sorter:"string",align:"center"},{title:"Task Status",field:"taskStatus",sorter:"string",align:"center"},{title:"Task Class - Subclass",field:"taskClassSubclass",sorter:"string",align:"center"},{title:"Task Priority",field:"taskPriority",sorter:"string",align:"center"},{title:"Aircraft",field:"aircraft",sorter:"string",align:"center"},{title:"Work Package",field:"workpackage",sorter:"string",align:"center"},{title:"Work Location",field:"workLocation",sorter:"string",align:"center"},{title:"Work Area",field:"workArea",sorter:"string",align:"center"},{title:"Scheduled Start Date",field:"scheduledStartDate",sorter:"string",align:"center"},{title:"Actual Start Date",field:"actualStartDate",sorter:"string",align:"center"},{field:"Selected",align:"center",width:50,headerSort:!1,formatter:function(){return'<input id="checkBox" type="checkbox">'}},{title:"Technician",field:"technician",sorter:"string",align:"center"},{title:"Skill",field:"labourSkill",sorter:"string",align:"center"},{title:"Labour Row Status",field:"labourStatus",sorter:"string",align:"center"},{title:"Job Stop Reason",field:"jobStopReason",sorter:"string",align:"center"},{title:"Elapsed Time",field:"elapsedHoursMinutes",sorter:"string",align:"center",formatter:this.isElapsedTimeGreaterThanThreshold.bind(this)},{title:"Sched. Hours",field:"scheduledHours",sorter:"string",align:"center",editor:"input",validator:["min: 0",this.validateHours],editable:this.isScheduledHoursCellEditable,cellEdited:this.handleScheduleHoursEdit},{title:"Actual Hours",field:"actualHours",sorter:"string",align:"center",editor:"input",validator:["min: 0",this.validateHours],editable:this.isActualHoursCellEditable,cellEdited:this.handleActualHoursEdit,formatter:this.actualHourCellFormatter}],dataSorted:function(i,n){e.table&&(i.some(function(e){return t.indexOf(e.field)>=0})?e.table.setGroupBy():e.table.setGroupBy("taskId"))},groupHeader:function(e,t,i,n){return i[0].taskName+"<span style='color:#000; margin-left:10px;'>("+t+" items)</span>"},groupToggleElement:"header",placeholder:this.noSearchResultsMessage})}},{key:"actualHourCellFormatter",value:function(e){if(!e)return e;this.actualHourGreaterThanScheduledHours(e)&&e.getElement().classList.add("highlightActualHoursCell");var t=e.getValue();return t||""}},{key:"actualHourGreaterThanScheduledHours",value:function(e){var t=e.getValue();if(!t)return t;var i=e.getRow().getData().scheduledHours;return i?parseInt(t)>parseInt(i):i}},{key:"initSearchButton",value:function(){var t=this,i=e("#"+this.searchButtonId);this.isAllowedToSearch?(i.show(),i.click(function(e){e.preventDefault(),t.performSearch()})):i.hide()}},{key:"performSearch",value:function(){var e=this;return new Promise(function(t,i){if(e.isAllowedToSearch){var n={crewId:document.getElementById(e.crewsFieldId).value,startDateTime:e.formatDateTime(e.startDateWidgetId),endDateTime:e.formatDateTime(e.endDateWidgetId),showCompleteTasks:document.getElementById(e.showCompleteId).checked};return e.service.performSearch(n).then(function(t){e.updateResultsTable(t)})}t()})}},{key:"populateCrewsWidget",value:function(t){if(e("#"+this.crewsFieldId).find("option").remove(),t.sort(this.compareCrewAlphanumerically),t){var i=document.getElementById(this.crewsFieldId),n=i.options;t.forEach(function(e,t){var i=document.createElement("option");i.text=e.label,i.value=e.id,n.add(i)}),i.selectedIndex=0}}},{key:"compareCrewAlphanumerically",value:function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}},{key:"handleFailureToGetCrewsForUser",value:function(e){throw new Error(e)}},{key:"validateStartEndWidgetIds",value:function(){if(!this.startDateWidgetId)throw new Error("startFieldId is mandatory");if("string"!=typeof this.startDateWidgetId)throw new Error("startFieldId is not a string");if(!this.endDateWidgetId)throw new Error("endFieldId is mandatory");if("string"!=typeof this.endDateWidgetId)throw new Error("endFieldId is not a string")}},{key:"buildFieldIdsForDateTimeWidget",value:function(e){return{dateFieldId:e+"_$DATE$",timeFieldId:e+"_$TIME$",timeZoneFieldId:e+"_$TIMEZONE_DISPLAY$",startPickerId:e+"_SelectBtn"}}},{key:"setStartEndElemAttrs",value:function(e,t){this.startDateElem=document.getElementById(e.dateFieldId),this.startTimeElem=document.getElementById(e.timeFieldId),this.startTimeZoneElem=document.getElementById(e.timeZoneFieldId),this.startPickerElem=document.getElementById(e.startPickerId),this.endDateElem=document.getElementById(t.dateFieldId),this.endTimeElem=document.getElementById(t.timeFieldId),this.endTimeZoneElem=document.getElementById(t.timeZoneFieldId),this.endPickerElem=document.getElementById(t.startPickerId)}},{key:"validateStartEndElems",value:function(){if(!this.startDateElem)throw new Error("start date field does not exist in the DOM.");if(!this.startTimeElem)throw new Error("start time field does not exist in the DOM.");if(!this.startTimeZoneElem)throw new Error("start time zone field does not exist in the DOM.");if(!this.startPickerElem)throw new Error("start date picker field does not exist in the DOM.");if(!this.endDateElem)throw new Error("end date field does not exist in the DOM.");if(!this.endTimeElem)throw new Error("end time field does not exist in the DOM.");if(!this.endTimeZoneElem)throw new Error("end time zone field does not exist in the DOM.");if(!this.endPickerElem)throw new Error("end date picker field does not exist in the DOM.")}},{key:"setStartAndEndWidgets",value:function(e){this.startDateElem.value=e.startDate,this.startTimeElem.value=e.startTime,this.startTimeZoneElem.value=e.startTimeZone,this.endDateElem.value=e.endDate,this.endTimeElem.value=e.endTime,this.endTimeZoneElem.value=e.endTimeZone}},{key:"updateResultsTable",value:function(e){this.table.clearData(),this.table.addData(e,!0),this.table.setSort([{column:"lineNo",dir:"asc"}])}},{key:"formatDateTime",value:function(e){var t=this.buildFieldIdsForDateTimeWidget(e);return document.getElementById(t.dateFieldId).value+" "+document.getElementById(t.timeFieldId).value}},{key:"isScheduledHoursCellEditable",value:function(e){if(this.isAllowedToEditSchedledHours){var t=e.getRow().getData();if(t.isFromJobStop&&"ACTV"==t.labourStatus)return!0}return!1}},{key:"isActualHoursCellEditable",value:function(e){if(this.isAllowedToEditActualHours&&"COMPLETE"==e.getRow().getData().labourStatus)return!0;return!1}},{key:"isElapsedTimeGreaterThanThreshold",value:function(e){var t=e.getValue();if(t&&o.a.convertTimeToDecimal(t)>parseFloat(this.laborRowElaspedTimeThreshold))return"<span class='elapsedTimeExceedsThreshold'>"+t+"</span>";return t}},{key:"validateHours",value:function(e,t){return o.a.validateHours(t)}},{key:"handleScheduleHoursEdit",value:function(e){var t=e.getRow().getData();this.service.updateScheduledHours(t.taskId,t.labourRowId,e.getValue())}},{key:"handleActualHoursEdit",value:function(e){var t=e.getRow().getData();this.service.updateActualHours(t.taskId,t.labourRowId,e.getValue())}}])&&s(i.prototype,n),l&&s(i,l),t}()}).call(this,i(0))},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t&&t instanceof Array))throw new Error("The response data suppose to be in array form");this.data=t,this.name="followOnTaskDefnSearch",this.limit=50,this.minLength=1}},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i(0),r=i.n(n);i(8);function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errorMsgPrefix="Error code =  "}var t,i,n;return t=e,(i=[{key:"getCrewsForUser",value:function(e){var t=this;if(!e)throw new Error("userId is mandatory");var i={userId:e};return new Promise(function(e,n){r.a.ajax({url:"/maintenix/rest/crews",type:"GET",data:i,success:function(t,i,n){e(t)},error:function(e,i,r){var a=t.errorMsgPrefix+e.status;n(a)}})})}},{key:"getDefaultStartAndEndDates",value:function(e){var t=this;if(!e)throw new Error("userId is mandatory");var i={userId:e};return new Promise(function(e,n){r.a.ajax({url:"/maintenix/rest/datetime/getCurrent",type:"GET",data:i,success:function(i,r,a){var o=new Date(i.startYear,i.startMonth-1,i.startDayOfMonth,i.startHourInDay,i.startMinute),s=new Date(i.endYear,i.endMonth-1,i.endDayOfMonth,i.endHourInDay,i.endMinute),l={};l.startDate=t.formatDate(o),l.startTime=t.formatTime(o),l.startTimeZone=i.startTimezone;try{t.validateDateFormat(l.startDate)}catch(e){n("default startDate failed validation: "+e.message)}try{t.validateTimeFormat(l.startTime)}catch(e){n("default startTime failed validation: "+e.message)}l.endDate=t.formatDate(s),l.endTime=t.formatTime(s),l.endTimeZone=i.endTimezone;try{t.validateDateFormat(l.endDate)}catch(e){n("default endDate failed validation: "+e.message)}try{t.validateTimeFormat(l.endTime)}catch(e){n("default endTime failed validation: "+e.message)}e(l)},error:function(e,i,r){var a=t.errorMsgPrefix+e.status;n(a)}})})}},{key:"performSearch",value:function(e){var t=this;return new Promise(function(i,n){var a=1!=e.showCompleteTasks,o={onlyWorkscoped:!0,onlyContainingLabour:!0,assignedToCrewId:e.crewId,minScheduledStartDateTime:e.startDateTime,maxScheduledStartDateTime:e.endDateTime,excludeCompleted:a};r.a.ajax({url:"/maintenix/rest/tasks",data:o,type:"GET",success:function(e,t,n){i(e)},error:function(e,i,r){var a=t.errorMsgPrefix+e.status;n(a)}})})}},{key:"updateScheduledHours",value:function(e,t,i){var n=this,a={scheduledHours:i};r.a.ajax({url:"/maintenix/rest/tasks/"+e+"/labours/"+t,type:"PUT",contentType:"application/json",data:JSON.stringify(a),error:function(e,t,i){var r=n.errorMsgPrefix+e.status;new Error(r)}})}},{key:"updateActualHours",value:function(e,t,i){var n=this,a={actualHours:i};r.a.ajax({url:"/maintenix/rest/tasks/"+e+"/labours/"+t,type:"PUT",contentType:"application/json",data:JSON.stringify(a),error:function(e,t,i){var r=n.errorMsgPrefix+e.status;new Error(r)}})}},{key:"validateDateFormat",value:function(e){if(!e)throw new Error("dateStr is mandatory.");if("string"!=typeof e)throw new Error("dateStr is not a string");if(null==e.match(/^(([0-9])|([0-2][0-9])|([3][0-1]))\-(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\-\d{4}$/))throw new Error("dateStr has invalid format.");return!0}},{key:"validateTimeFormat",value:function(e){if(!e)throw new Error("timeStr is mandatory.");if("string"!=typeof e)throw new Error("timeStr is not a string.");if(null==e.match(/^$|^(([01][0-9])|(2[0-3])):[0-5][0-9]$/))throw new Error("timeStr has invalid format.");return!0}},{key:"addHours",value:function(e,t){return new Date(e.getTime()+60*t*60*1e3)}},{key:"formatDate",value:function(e){return(e.getDate()<10?"0":"")+e.getDate()+"-"+this.getMonthShortStr(e.getMonth()+1)+"-"+e.getFullYear()}},{key:"formatTime",value:function(e){return(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()}},{key:"getMonthShortStr",value:function(e){return 1===e?"JAN":2===e?"FEB":3===e?"MAR":4===e?"APR":5===e?"MAY":6===e?"JUN":7===e?"JUL":8===e?"AUG":9===e?"SEP":10===e?"OCT":11===e?"NOV":12===e?"DEC":""}}])&&a(t.prototype,i),n&&a(t,n),e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i(0),r=i.n(n);function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,n=[{key:"sortTaskDefinitions",value:function(e){if(!(e&&e instanceof Array))throw new Error("taskDefinitions expected to be an Array");return e.sort(function(e,t){var i=e.code>t.code?1:e.code<t.code?-1:0;return 0==i&&(i=e.configSlotCode>t.configSlotCode?1:e.configSlotCode<t.configSlotCode?-1:0),0==i&&(i=e.name>t.name?1:e.name<t.name?-1:0),i})}},{key:"getFollowOnTaskDefinitions",value:function(e){var t=this;return new Promise(function(i,n){return r.a.ajax({type:"GET",url:e,success:function(e){var n=t.sortTaskDefinitions(e);i(n)},error:function(e){i([])}})})}}],(i=null)&&a(t.prototype,i),n&&a(t,n),e}()},,function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.d(t,"a",function(){return r});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,r;return t=e,r=[{key:"validateHours",value:function(e){var t=e.split(".");if(t.length>0){if(t[0].length>4)return!1;if(2==t.length){if(t[1].length>5)return!1}else if(t.length>2)return!1}return!0}},{key:"validateDateFormat",value:function(e){if(!e)throw new Error("dateStr is mandatory.");if("string"!=typeof e)throw new Error("dateStr is not a string");if(null==e.match(/^(([0-9])|([0-2][0-9])|([3][0-1]))\-(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\-\d{4}$/))throw new Error("dateStr has invalid format.");return!0}},{key:"validateTimeFormat",value:function(e){if(!e)throw new Error("timeStr is mandatory.");if("string"!=typeof e)throw new Error("timeStr is not a string.");if(null==e.match(/^$|^(([01][0-9])|(2[0-3])):[0-5][0-9]$/))throw new Error("timeStr has invalid format.");return!0}}],(i=null)&&n(t.prototype,i),r&&n(t,r),e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return l});var n=i(0),r=i.n(n),a=i(2),o=i(4);function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,i,n,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var s=this;this.notFoundMsgEl=r()("#"+n),this.okBtnEl=r()("#"+i),this.typeAheadSearchInputEl=r()("#"+t),this.followOnTaskDefnUuidOuputEl=r()("#"+a);var l=r()("#"+o);if(!this.notFoundMsgEl.length>0)throw new Error("Not found message element required");if(!this.okBtnEl.length>0)throw new Error("Ok button element required");if(!this.typeAheadSearchInputEl.length>0)throw new Error("Typeahead input element required");if(!this.followOnTaskDefnUuidOuputEl.length>0)throw new Error("Output followOn task definition UUI input element required");if(!l.length>0)throw new Error("REST api url element is required");this.apiUrl=l.val(),this.selectedOption="",this.typeAheadSearchInputEl.keydown(function(){setTimeout(function(){s.typeAheadSearchInputEl.val()!=s.selectedOption&&(s.disableOkBtn(),s.clearSelectedTaskDefinition())})}),this.initialize=this.initialize.bind(this)}var t,i,n;return t=e,(i=[{key:"setSelectedTaskDefinition",value:function(e){e&&(this.typeAheadSearchInputEl.val(this.displayFollowOn(null,e)),this.selectedOption=this.typeAheadSearchInputEl.val(),this.followOnTaskDefnUuidOuputEl.attr("value",e.id))}},{key:"clearSelectedTaskDefinition",value:function(){this.followOnTaskDefnUuidOuputEl.attr("value","")}},{key:"initialize",value:function(){var e=this;this.disableOkBtn();try{return o.a.getFollowOnTaskDefinitions(this.apiUrl).then(function(t){e.configureTypeAhead(t),e.typeAheadSearchInputEl.focus()})}catch(e){throw new Error("Error while trying to fetch task definitions.",e)}}},{key:"configureTypeAhead",value:function(e){var t=this,i=new a.a(e);r.a.each(i.data,function(e,i){i.displayValue=t.displayFollowOn(null,i)}),r.a.typeahead({input:t.typeAheadSearchInputEl,highlight:!0,name:i.name,limit:i.limit,minLength:i.minLength,display:["displayValue"],emptyTemplate:'<div class="mx-typeahead-msg-notfound">'+t.notFoundMsgEl.val()+"</div>",source:{data:i.data},callback:{onClick:function(e,i,n,r){r.preventDefault(),t.enableOkBtn(),t.setSelectedTaskDefinition(n),this.hideLayout()}}})}},{key:"displayFollowOn",value:function(e,t){if(t)return t.code+" - "+t.configSlotCode+" - "+t.name}},{key:"enableOkBtn",value:function(){this.okBtnEl&&(this.okBtnEl.attr("originOnClickEvent")&&this.okBtnEl.attr("onclick",this.okBtnEl.attr("originOnClickEvent")),this.okBtnEl.attr("originTitle")&&this.okBtnEl.attr("title",this.okBtnEl.attr("originTitle")),this.okBtnEl.removeClass("disabled"),this.okBtnEl.removeAttr("disabled"),this.okBtnEl.removeAttr("originOnClickEvent"),this.okBtnEl.removeAttr("originTitle"))}},{key:"disableOkBtn",value:function(){this.okBtnEl&&(this.okBtnEl.attr("originOnClickEvent")||this.okBtnEl.attr("originOnClickEvent",this.okBtnEl.attr("onclick")),this.okBtnEl.attr("originTitle")||this.okBtnEl.attr("originTitle",this.okBtnEl.attr("title")),this.okBtnEl.addClass("disabled"),this.okBtnEl.attr("disabled","disabled"),this.okBtnEl.attr("onclick",!1),this.okBtnEl.attr("title",""))}}])&&s(t.prototype,i),n&&s(t,n),e}()},function(e,t,i){"use strict"},function(e,t,i){var n=i(10);n.keys().forEach(n)},function(e,t,i){var n={"./basemaintenance/task/tasksupervision/TaskSupervisionController.spec.js":11,"./basemaintenance/task/tasksupervision/TaskSupervisionService.spec.js":12,"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchConfig.spec.js":13,"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchController.spec.js":14,"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchService.spec.js":15,"./someFeature/featureMath/featureMath.spec.js":16};function r(e){var t=a(e);return i(t)}function a(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=a,e.exports=r,r.id=10},function(e,t,i){"use strict";i.r(t),function(e){var t=i(1);function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}describe("TaskSupervisionController",function(){describe("initCrewsWidget",function(){var i,r=[{id:"1",code:"crew1",description:"crew one"},{id:"2",code:"crew2",description:"crew two"},{id:"3",code:"crew3",description:"crew three"}],a=(n(i={startYear:"2019",startMonth:"01",startDayOfMonth:"01",startHourInDay:"12"},"startHourInDay","00"),n(i,"startMinute","00"),n(i,"endYear","2019"),n(i,"endMonth","02"),n(i,"endDayOfMonth","01"),n(i,"endHourInDay","12"),n(i,"endMinute","00"),n(i,"startTimezone","EST"),i);beforeEach(function(){jasmine.Ajax.install(),this.validParms={userId:"userId",crewsFieldId:"crewsFieldId",startFieldId:"idStartDateTime",endFieldId:"idEndDateTime",showCompleteId:"idShowComplete",searchButtonId:"idSearchButton",searchResultsId:"idSearchResults",isAllowedToSearch:"true"},setFixtures('<select id="'+this.validParms.crewsFieldId+'"></select><input id="'+this.validParms.showCompleteId+'" type="checkbox"/><button id="'+this.validParms.searchButtonId+'" /><div id="'+this.validParms.searchResultsId+'" /><div id="'+this.validParms.startFieldId+'" /><div id="'+this.validParms.startFieldId+'_$DATE$" /><div id="'+this.validParms.startFieldId+'_$TIME$" /><div id="'+this.validParms.startFieldId+'_$TIMEZONE_DISPLAY$" /><div id="'+this.validParms.startFieldId+'_SelectBtn" /><div id="'+this.validParms.endFieldId+'" /><div id="'+this.validParms.endFieldId+'_$DATE$" /><div id="'+this.validParms.endFieldId+'_$TIME$" /><div id="'+this.validParms.endFieldId+'_$TIMEZONE_DISPLAY$" /><div id="'+this.validParms.endFieldId+'_SelectBtn" />')}),afterEach(function(){jasmine.Ajax.uninstall()}),it("Throws error when user id not provided.",function(){var e=this.validParms;e.userId=void 0,expect(function(){new t.a(e).initCrewsWidget()}).toThrowError("userId is mandatory")}),it("Throws error when user id is blank.",function(){var e=this.validParms;e.userId=void 0,expect(function(){new t.a(e)}).toThrowError("userId is mandatory")}),it("Throws error when crew field id not provided.",function(){var e=this.validParms;e.crewsFieldId=void 0,expect(function(){new t.a(e)}).toThrowError("crewsFieldId is mandatory")}),it("Throws error when crew field id is blank.",function(){var e=this.validParms;e.crewsFieldId="",expect(function(){new t.a(e)}).toThrowError("crewsFieldId is mandatory")}),it("Throws error when crew field id does not identify a select element.",function(){var e=this.validParms;e.crewsFieldId="non-existing-id",expect(function(){new t.a(e)}).toThrowError("crewsFieldId must be a SELECT element")}),it("Throws error when crew field id identifies a non-select element.",function(){setFixtures('<input id="crewsFieldId"></input>');var e=this.validParms;e.crewsFieldId="crewsFieldId",expect(function(){new t.a(e)}).toThrowError("crewsFieldId must be a SELECT element")}),it("Fetch of crew list is returned",function(i){setFixtures('<select id="'+this.validParms.crewsFieldId+'"></select>');var n=new t.a(this.validParms);spyOn(e,"ajax").and.callFake(function(e){return e.success(r)}),n.initCrewsWidget().then(function(e){expect(e).toBe(r),i()})}),it("Populates Crew dropdown when provided list of crews.",function(i){this.validParms.isAllowedToSearch="false";var n=new t.a(this.validParms);spyOn(e,"ajax").and.callFake(function(e){return"/maintenix/rest/crews"===e.url?e.success(r):"/maintenix/rest/datetime/getCurrent"===e.url?e.success(a):void console.warn("Unsupported url: ",e.url)});var o=document.getElementById(this.validParms.crewsFieldId).options;n.init().then(function(e){expect(o.length).toBe(r.length),i()})})})})}.call(this,i(0))},function(e,t,i){"use strict";i.r(t);var n=i(0),r=i.n(n),a=i(3);describe("TaskSupervisionService.js",function(){describe("getCrewsForUser",function(){new a.a;beforeEach(function(){jasmine.Ajax.install()}),afterEach(function(){jasmine.Ajax.uninstall()}),it("will call the success handler when the ajax call is successful",function(){spyOn(r.a,"ajax").and.callFake(function(e){e.success({})})})})})},function(e,t,i){"use strict";i.r(t);var n=i(2);describe("FollowOnTaskDefinitionSearchConfig followOnTask/followOnTaskDefinitionSearchConfig.js",function(){it("throws exception on empty data parameter",function(){expect(function(){new n.a}).toThrowError("The response data suppose to be in array form")}),it("throws exception with a object type data parameter instead of array",function(){expect(function(){new n.a({})}).toThrowError("The response data suppose to be in array form")}),it("creates a valid config object",function(){var e=new n.a([]);expect(e.name).toBe("followOnTaskDefnSearch"),expect(e.limit).toBe(50),expect(e.minLength).toBe(1)})})},function(e,t,i){"use strict";i.r(t),function(e){var t=i(7);describe("FollowOnTaskDefinitionSearchController followOnTask/followOnTaskDefinitionSearchController.js",function(){var i="/someRestApi";function n(){return new t.a("followOnTaskSearchQuery","idButtonOk","idTypeaheadNotFoundMessage","idFieldFollowOnTaskDefnUuid","idfollowOnTaskDefinitionRestAPI")}beforeEach(function(){jasmine.Ajax.install(),setFixtures('<form id="form-typeahead-test" name="form-typeahead-test">  <div class="typeahead__container">     <div class="typeahead__field">        <span class="typeahead__query">          <input class= "js-typeahead-test" id="followOnTaskSearchQuery" name="followOnTaskSearchQuery">        </span>     </div>  </div>  <button id="idButtonOk" title="mytitle">Ok</button>  <input type="hidden" name="aFollowOnTaskDefinitionUuid" id="idFieldFollowOnTaskDefnUuid">  <input type="hidden" id="idTypeaheadNotFoundMessage" value="web.msg.MSG_NO_MATCHING_FOLLOWON_TASK_DEFINITIONS">  <input type="hidden" id="idfollowOnTaskDefinitionRestAPI" value="'+i+'"</form>'),this.okButtonEl=e("#idButtonOk"),this.fieldFollowOnTaskDefnUuidEl=e("#idFieldFollowOnTaskDefnUuid")}),afterEach(function(){jasmine.Ajax.uninstall()}),it("Should have a button with OK label",function(){expect(this.okButtonEl).toHaveText("Ok")}),it("Should throw error indicating missing typeaheadId",function(){expect(function(){new t.a("FAKE_followOnTaskSearchQuery","FAKE_idButtonOk","FAKE_idTypeaheadNotFoundMessage","FAKE_idFieldFollowOnTaskDefnUuid","FAKE_idfollowOnTaskDefinitionRestAPI")}).toThrow()}),it("Should have Ok button enabled",function(){n().enableOkBtn(),expect(this.okButtonEl).not.toHaveClass("disabled")}),it("Should have Ok button disabled",function(){n().disableOkBtn(),expect(this.okButtonEl).toHaveClass("disabled")}),it("returns a properly constructed display value",function(){var e=n();expect(e.displayFollowOn(null,{code:5,configSlotCode:3,name:"test"})).toBe("5 - 3 - test")}),it("Should set and clear selected task definition of output element",function(){var e=n();e.setSelectedTaskDefinition({id:"someValue"}),expect(this.fieldFollowOnTaskDefnUuidEl.attr("value")).toBe("someValue"),e.clearSelectedTaskDefinition(),expect(this.fieldFollowOnTaskDefnUuidEl.attr("value")).toBe("")}),it("Fetches task definitions successfully",function(t){var r=n(),a=[{id:"A6AAE18B638740B29B2F34D51CF2CCD5",configSlotCode:"BOM123",name:"ReqWithImpact1",code:"NC14992-REQ1"},{id:"A6AAE18B638740B29B2F34D51CF2CCD6",configSlotCode:"BOM123",name:"ReqWithImpact2",code:"NC14992-REQ2"},{id:"A6AAE18B638740B29B2F34D51CF2CCD7",configSlotCode:"BOM123",name:"ReqWithImpact3",code:"NC14992-REQ3"},{id:"A6AAE18B638740B29B2F34D51CF2CCD8",configSlotCode:"BOM123",name:"ReqWithImpact4",code:"NC14992-REQ4"},{id:"A6AAE18B638740B29B2F34D51CF2CCD9",configSlotCode:"BOM123",name:"ReqWithImpact5",code:"NC14992-REQ5"},{id:"A6AAE18B638740B29B2F34D51CF2CCE3",configSlotCode:"BOM123",name:"ReqWithImpact6",code:"NC14992-REQ6"}];spyOn(e,"ajax").and.callFake(function(e){return e.success(a)});var o=e("#idButtonOk"),s=e("#followOnTaskSearchQuery");r.initialize().then(function(){expect(e.ajax.calls.mostRecent().args[0].url).toEqual(i),expect(o).toHaveClass("disabled"),expect(s).toBeFocused(),t()})})})}.call(this,i(0))},function(e,t,i){"use strict";i.r(t),function(e){var t=i(4);describe("FollowOnTaskDefinitionSearchService followOnTask/followOnTaskDefinitionSearchService.js",function(){var i="https://www.google.com",n=[{code:3,configSlotCode:3,name:"Third"},{code:2,configSlotCode:2,name:"Second"},{code:1,configSlotCode:1,name:"First"}];beforeAll(function(){this.service=t.a}),it("Sorts task definitions",function(){var e=this.service.sortTaskDefinitions(n);expect(e[0].code).toBe(1),expect(e[1].code).toBe(2),expect(e[2].code).toBe(3)}),it("Fetches task definitions with error for invalid response",function(){jasmine.Ajax.install(),spyOn(e,"ajax").and.callFake(function(e){return e.success({})}),expect(function(){this.service.getFollowOnTaskDefinitions(i)}).toThrow(),jasmine.Ajax.uninstall()}),it("Fetches task definitions successfully",function(){jasmine.Ajax.install(),spyOn(e,"ajax").and.callFake(function(e){return e.success(n)}),this.service.getFollowOnTaskDefinitions(i).then(function(e){expect(e).toEqual(n)}),jasmine.Ajax.uninstall()})})}.call(this,i(0))},function(e,t,i){"use strict";i.r(t);describe("[Dummy]",function(){it("[Add] should add two numbers together and return the result",function(){var e,t;expect((e=1,t=2,e+t)).toBe(3)}),it("[Subtract] should subtract second param from first and return the result",function(){var e,t;expect((e=1,t=2,e-t)).toBe(-1)}),it("[Multiply] should multiply two numbers and return the result",function(){var e,t;expect((e=1,t=2,e*t)).toBe(2)})})}]);
//# sourceMappingURL=spec-bundle.js.map