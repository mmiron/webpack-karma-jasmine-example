{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"jQuery\"","webpack:///./src/basemaintenance/task/tasksupervision/TaskSupervisionController.js","webpack:///./src/engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchConfig.js","webpack:///./src/basemaintenance/task/tasksupervision/TaskSupervisionService.js","webpack:///./src/engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchService.js","webpack:///./src/common/validation/DateTimeValidator.js","webpack:///./src/engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchController.js","webpack:///./src/test_index.js","webpack:///./src sync spec.js$","webpack:///./src/basemaintenance/task/tasksupervision/TaskSupervisionController.spec.js","webpack:///./src/basemaintenance/task/tasksupervision/TaskSupervisionService.spec.js","webpack:///./src/engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchConfig.spec.js","webpack:///./src/engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchController.spec.js","webpack:///./src/engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchService.spec.js","webpack:///./src/someFeature/featureMath/featureMath.spec.js","webpack:///./src/someFeature/featureMath/featureMath.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","jQuery","TaskSupervisionController","parms","_classCallCheck","this","userId","Error","crewsFieldId","crewsField","document","getElementById","tagName","service","TaskSupervisionService","isAllowedToSearch","isAllowedToEditSchedledHours","isAllowedToEditActualHours","startDateWidgetId","startFieldId","endDateWidgetId","endFieldId","showCompleteId","searchButtonId","searchResultsId","noSearchResultsMessage","laborRowElaspedTimeThreshold","defaultShowComplete","isScheduledHoursCellEditable","handleScheduleHoursEdit","handleActualHoursEdit","actualHourCellFormatter","_this","Promise","resolve","reject","initShowCompleteTasksWidget","initResultsTable","e","console","error","initSearchButton","all","initCrewsWidget","initStartAndEndWidgets","then","results","populateCrewsWidget","setStartAndEndWidgets","performSearch","catch","getCrewsForUser","validateStartEndWidgetIds","startFieldIds","buildFieldIdsForDateTimeWidget","endFieldIds","setStartEndElemAttrs","validateStartEndElems","exception","startDateElem","disabled","endDateElem","getDefaultStartAndEndDates","checked","_this2","listOfLabourAttrs","table","Tabulator","columns","title","field","visible","sorter","align","width","headerSort","formatter","isElapsedTimeGreaterThanThreshold","editor","validator","validateHours","editable","cellEdited","isActualHoursCellEditable","dataSorted","sorters","rows","some","attr","indexOf","setGroupBy","groupHeader","count","group","taskName","groupToggleElement","placeholder","cell","actualHourGreaterThanScheduledHours","getElement","classList","add","time","getValue","actualHours","scheduleHours","getRow","getData","scheduledHours","parseInt","_this3","$button","$","show","click","event","preventDefault","hide","_this4","args","crewId","startDateTime","formatDateTime","endDateTime","showCompleteTasks","response","updateResultsTable","crews","find","remove","sort","compareCrewAlphanumerically","select","selectOptions","options","forEach","crew","index","option","createElement","text","label","id","selectedIndex","a","b","message","widgetId","dateFieldId","timeFieldId","timeZoneFieldId","startPickerId","startDateWidgetIds","endDateWidgetIds","startTimeElem","startTimeZoneElem","startPickerElem","endTimeElem","endTimeZoneElem","endPickerElem","defaultStartEndValues","startDate","startTime","startTimeZone","endDate","endTime","endTimeZone","clearData","addData","setSort","column","dir","dateTimeWidgetId","fieldIds","rowData","isFromJobStop","labourStatus","DateTimeValidator","convertTimeToDecimal","parseFloat","updateScheduledHours","taskId","labourRowId","updateActualHours","FollowOnTaskDefinitionSearchConfig","Array","limit","minLength","errorMsgPrefix","ajax","url","type","success","crewResponseList","textStatus","jqXHR","errorThrown","status","defaultStart","Date","startYear","startMonth","startDayOfMonth","startHourInDay","startMinute","defaultEnd","endYear","endMonth","endDayOfMonth","endHourInDay","endMinute","formatDate","formatTime","startTimezone","validateDateFormat","validateTimeFormat","endTimezone","excludeComplete","searchData","onlyWorkscoped","onlyContainingLabour","assignedToCrewId","minScheduledStartDateTime","maxScheduledStartDateTime","excludeCompleted","newValue","contentType","JSON","stringify","_this5","dateStr","match","timeStr","date","hours","getTime","getDate","getMonthShortStr","getMonth","getFullYear","getHours","getMinutes","month","FollowOnTaskDefinitionSearchService","taskDefinitions","compareResult","code","configSlotCode","apiUrl","scope","taskDefinitionsResponse","sortedTaskDefinitions","sortTaskDefinitions","err","split","FollowOnTaskDefinitionSearchController","typeAheadId","okButtonId","notFoundMsgId","followOnTaskDefnUuidOuputId","apiUrlId","notFoundMsgEl","okBtnEl","typeAheadSearchInputEl","followOnTaskDefnUuidOuputEl","apiUrlEl","val","selectedOption","keydown","setTimeout","disableOkBtn","clearSelectedTaskDefinition","initialize","suggestion","displayFollowOn","getFollowOnTaskDefinitions","configureTypeAhead","focus","config","each","displayValue","typeahead","input","highlight","display","emptyTemplate","source","callback","onClick","typeAheadInputEl","selectionEl","selectedRecord","enableOkBtn","setSelectedTaskDefinition","hideLayout","query","suggestionObj","removeClass","removeAttr","addClass","testsContext","require","keys","map","./basemaintenance/task/tasksupervision/TaskSupervisionController.spec.js","./basemaintenance/task/tasksupervision/TaskSupervisionService.spec.js","./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchConfig.spec.js","./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchController.spec.js","./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchService.spec.js","./someFeature/featureMath/featureMath.spec.js","webpackContext","req","webpackContextResolve","describe","_testCurrentDateTimeR","testCrewList","description","testCurrentDateTimeResponse","_defineProperty","beforeEach","jasmine","Ajax","install","validParms","setFixtures","afterEach","uninstall","it","undefined","expect","toThrowError","done","controller","spyOn","and","callFake","toBe","request","warn","init","__webpack_exports__","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","_TaskSupervisionService__WEBPACK_IMPORTED_MODULE_1__","ajx","_followOnTaskDefinitionSearchConfig_js__WEBPACK_IMPORTED_MODULE_0__","_followOnTaskDefinitionSearchController_js__WEBPACK_IMPORTED_MODULE_0__","restApiUrl","getGoodController","okButtonEl","fieldFollowOnTaskDefnUuidEl","toHaveText","toThrow","not","toHaveClass","responseTaskDefinitions","nativeEl","calls","mostRecent","toEqual","toBeFocused","_followOnTaskDefinitionSearchService_js__WEBPACK_IMPORTED_MODULE_0__","taskDefinitionResponse","beforeAll","sortedData","fakeData","x","y"],"mappings":"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","file":"spec-bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([9,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = jQuery;","import Tabulator from 'tabulator-tables';\r\nimport TaskSupervisionService from './TaskSupervisionService';\r\nimport DateTimeValidator from '../../../common/validation/DateTimeValidator';\r\nimport DateTimeHelper from '../../../common/util/DateTimeHelper';\r\n\r\nexport default class TaskSupervisionController {\r\n\r\n   constructor(parms) {\r\n      this.userId = parms.userId;\r\n\r\n      if (!this.userId) {\r\n         throw new Error('userId is mandatory');\r\n      }\r\n\r\n      this.crewsFieldId = parms.crewsFieldId;\r\n\r\n      if (!this.crewsFieldId) {\r\n         throw new Error('crewsFieldId is mandatory');\r\n      }\r\n\r\n      let crewsField = document.getElementById(this.crewsFieldId);\r\n      if (!crewsField || crewsField.tagName != 'SELECT') {\r\n         throw new Error('crewsFieldId must be a SELECT element');\r\n      }\r\n\r\n      this.service = parms.TaskSupervisionService || new TaskSupervisionService();\r\n      this.isAllowedToSearch = parms.isAllowedToSearch === 'true';\r\n      this.isAllowedToEditSchedledHours = parms.isAllowedToEditSchedledHours === 'true';\r\n      this.isAllowedToEditActualHours = parms.isAllowedToEditActualHours === 'true';\r\n      this.startDateWidgetId = parms.startFieldId;\r\n      this.endDateWidgetId = parms.endFieldId;\r\n      this.showCompleteId = parms.showCompleteId;\r\n      this.searchButtonId = parms.searchButtonId;\r\n      this.searchResultsId = parms.searchResultsId;\r\n      this.noSearchResultsMessage = parms.noSearchResultsMessage;\r\n      this.laborRowElaspedTimeThreshold = parms.laborRowElaspedTimeThreshold;\r\n\r\n      this.defaultShowComplete = true;\r\n      this.isScheduledHoursCellEditable.bind(this);\r\n      this.handleScheduleHoursEdit.bind(this);\r\n      this.handleActualHoursEdit.bind(this);\r\n      this.actualHourCellFormatter.bind(this);\r\n   }\r\n\r\n   getServiceInstance() {\r\n      return this.service;\r\n   }\r\n\r\n   init() {\r\n      return new Promise((resolve, reject) => {\r\n         try {\r\n            this.initShowCompleteTasksWidget();\r\n            this.initResultsTable();\r\n         }\r\n         catch (e) {\r\n            console.error(e);\r\n         }\r\n\r\n         this.initSearchButton();\r\n\r\n         Promise.all([this.initCrewsWidget(), this.initStartAndEndWidgets()]).then((results) => {\r\n            this.populateCrewsWidget(results[0]);\r\n            this.setStartAndEndWidgets(results[1]);\r\n            this.performSearch().then(() => resolve());\r\n         }).catch((error) => {\r\n            throw new Error(error);\r\n         });\r\n      });\r\n   }\r\n\r\n   initCrewsWidget() {\r\n      return this.service.getCrewsForUser(this.userId);\r\n   }\r\n\r\n   initStartAndEndWidgets() {\r\n      if (!this.userId) {\r\n         throw new Error('userId is mandatory');\r\n      }\r\n\r\n      try {\r\n         this.validateStartEndWidgetIds();\r\n         let startFieldIds = this.buildFieldIdsForDateTimeWidget(this.startDateWidgetId);\r\n         let endFieldIds = this.buildFieldIdsForDateTimeWidget(this.endDateWidgetId);\r\n         this.setStartEndElemAttrs(startFieldIds, endFieldIds);\r\n         this.validateStartEndElems();\r\n      }\r\n      catch (exception) {\r\n         console.error(\"initStartAndEndWidgets\", exception);\r\n      }\r\n      // The date fields for the DateTime widgets\r\n      // do not provide sufficient validation so we will disable them.\r\n      this.startDateElem.disabled = true;\r\n      this.endDateElem.disabled = true;\r\n\r\n      return this.service.getDefaultStartAndEndDates(this.userId);\r\n   }\r\n\r\n   initShowCompleteTasksWidget() {\r\n      document.getElementById(this.showCompleteId).checked = this.defaultShowComplete;\r\n   }\r\n\r\n\r\n   initResultsTable() {\r\n      // The field names match those in:\r\n      //    com.mxi.mx.web.rest.task.CrewTaskLabourResponse\r\n      const listOfLabourAttrs = ['technician', 'labourSkill', 'labourStatus', 'jobStopReason', 'elapsedHoursMinutes',\r\n         'scheduledHours', 'actualHours'\r\n      ];\r\n      \r\n      // Note: it appears that Tabulator has difficulty if visible:false fields are after other fields,\r\n      // so configure them first.\t  \r\n      this.table = new Tabulator(\"#\" + this.searchResultsId, {\r\n         columns: [\r\n            { title: 'Task Id', field: 'taskId', visible: false },\r\n            { title: 'Labour Row Id', field: 'labourRowId', visible: false },\r\n            { title: 'From Job Stop', field: 'isFromJobStop', visible: false },\r\n            { title: 'Line No', field: 'lineNo', sorter: 'number', align: 'center' },\r\n            { title: 'Task', field: 'taskName', sorter: 'string', align: 'center' },\r\n            { title: 'Task Status', field: 'taskStatus', sorter: 'string', align: 'center' },\r\n            { title: 'Task Class - Subclass', field: 'taskClassSubclass', sorter: 'string', align: 'center' },\r\n            { title: 'Task Priority', field: 'taskPriority', sorter: 'string', align: 'center' },\r\n            { title: 'Aircraft', field: 'aircraft', sorter: 'string', align: 'center' },\r\n            { title: 'Work Package', field: 'workpackage', sorter: 'string', align: 'center' },\r\n            { title: 'Work Location', field: 'workLocation', sorter: 'string', align: 'center' },\r\n            { title: 'Work Area', field: 'workArea', sorter: 'string', align: 'center' },\r\n            { title: 'Scheduled Start Date', field: 'scheduledStartDate', sorter: 'string', align: 'center' },\r\n            { title: 'Actual Start Date', field: 'actualStartDate', sorter: 'string', align: 'center' },\r\n            { field: 'Selected', align: 'center', width: 50, headerSort: false, formatter: () => { return '<input id=\"checkBox\" type=\"checkbox\">'; } },\r\n            { title: 'Technician', field: 'technician', sorter: 'string', align: 'center' },\r\n            { title: 'Skill', field: 'labourSkill', sorter: 'string', align: 'center' },\r\n            { title: 'Labour Row Status', field: 'labourStatus', sorter: 'string', align: 'center' },\r\n            { title: 'Job Stop Reason', field: 'jobStopReason', sorter: 'string', align: 'center' },\r\n            { title: 'Elapsed Time', field: 'elapsedHoursMinutes', sorter: 'string', align: 'center', formatter: this.isElapsedTimeGreaterThanThreshold.bind(this) },\r\n            {\r\n               title: 'Sched. Hours',\r\n               field: 'scheduledHours',\r\n               sorter: 'string',\r\n               align: 'center',\r\n               editor: 'input',\r\n               validator: ['min: 0', this.validateHours],\r\n               editable: this.isScheduledHoursCellEditable,\r\n               cellEdited: this.handleScheduleHoursEdit\r\n            },\r\n            {\r\n               title: 'Actual Hours',\r\n               field: 'actualHours',\r\n               sorter: 'string',\r\n               align: 'center',\r\n               editor: 'input',\r\n               validator: ['min: 0', this.validateHours],\r\n               editable: this.isActualHoursCellEditable,\r\n               cellEdited: this.handleActualHoursEdit,\r\n               formatter: this.actualHourCellFormatter\r\n            }\r\n         ],\r\n         dataSorted: (sorters, rows) => {\r\n            // This check is done as the callback is called before the table has been completely instantiated\r\n            // As a result, an undefined object error message will occur as the setGroupBy is being called on an undefined table\r\n            if (this.table) {\r\n               if (sorters.some((attr) => listOfLabourAttrs.indexOf(attr.field) >= 0)) {\r\n                  this.table.setGroupBy();\r\n               }\r\n               else {\r\n                  this.table.setGroupBy(\"taskId\");\r\n               }\r\n            }\r\n         },\r\n         groupHeader: (value, count, data, group) => {\r\n            return data[0].taskName + \"<span style='color:#000; margin-left:10px;'>(\" + count + \" items)</span>\";\r\n         },\r\n         groupToggleElement: \"header\",\r\n         placeholder: this.noSearchResultsMessage\r\n      });\r\n   }\r\n\r\n\r\n   actualHourCellFormatter(cell) {\r\n\r\n      if (!cell) {\r\n         return cell;\r\n      }\r\n\r\n      if (this.actualHourGreaterThanScheduledHours(cell)) {\r\n         //format cell background to yellow\r\n         cell.getElement().classList.add(\"highlightActualHoursCell\");\r\n      }\r\n\r\n      let time = cell.getValue();\r\n      // Return empty string if Actual Hour value is blank\r\n      // otherwise return Actual Hours value.\r\n      return (time ? time : '');\r\n   }\r\n\r\n   actualHourGreaterThanScheduledHours(cell) {\r\n\r\n      let actualHours = cell.getValue();\r\n      if (!actualHours) {\r\n         return actualHours;\r\n      }\r\n\r\n      let scheduleHours = cell.getRow().getData().scheduledHours;\r\n      if (!scheduleHours) {\r\n         return scheduleHours;\r\n      }\r\n\r\n      return parseInt(actualHours) > parseInt(scheduleHours);\r\n   }\r\n\r\n   initSearchButton() {\r\n      let $button = $('#' + this.searchButtonId);\r\n      if (this.isAllowedToSearch) {\r\n         $button.show();\r\n         $button.click((event) => {\r\n            event.preventDefault();\r\n            this.performSearch();\r\n         });\r\n      }\r\n      else {\r\n         $button.hide();\r\n      }\r\n   }\r\n\r\n   performSearch() {\r\n      return new Promise((resolve, reject) => {\r\n         if (this.isAllowedToSearch) {\r\n            let args = {\r\n               'crewId': document.getElementById(this.crewsFieldId).value,\r\n               'startDateTime': this.formatDateTime(this.startDateWidgetId),\r\n               'endDateTime': this.formatDateTime(this.endDateWidgetId),\r\n               'showCompleteTasks': document.getElementById(this.showCompleteId).checked\r\n            };\r\n\r\n            return this.service.performSearch(args).then(response => {\r\n               this.updateResultsTable(response);\r\n            });\r\n         }\r\n         else {\r\n            resolve();\r\n         }\r\n      });\r\n   }\r\n\r\n   //\r\n   // private methods\r\n   //\r\n\r\n   // Expect crews to be: [{code,name,id}]\r\n   populateCrewsWidget(crews) {\r\n      // Clear existing options.\r\n      $('#' + this.crewsFieldId).find('option').remove();\r\n\r\n      // Sort the crews.\r\n      crews.sort(this.compareCrewAlphanumerically);\r\n\r\n      // Add provided crews as options, if provided.\r\n      if (crews) {\r\n         let select = document.getElementById(this.crewsFieldId);\r\n         let selectOptions = select.options;\r\n         crews.forEach((crew, index) => {\r\n            let option = document.createElement(\"option\");\r\n            option.text = crew.label;\r\n            option.value = crew.id;\r\n            selectOptions.add(option);\r\n         });\r\n\r\n         // Set the first crew as the default.\r\n         select.selectedIndex = 0;\r\n      }\r\n   }\r\n\r\n   compareCrewAlphanumerically(a, b) {\r\n      if (a.label < b.label) return -1;\r\n      if (a.label > b.label) return 1;\r\n      return 0;\r\n   }\r\n\r\n   // Expect message to be a string\r\n   handleFailureToGetCrewsForUser(message) {\r\n      throw new Error(message);\r\n   }\r\n\r\n   validateStartEndWidgetIds() {\r\n      if (!this.startDateWidgetId) {\r\n         throw new Error('startFieldId is mandatory');\r\n      }\r\n      if (typeof this.startDateWidgetId !== 'string') {\r\n         throw new Error('startFieldId is not a string');\r\n      }\r\n      if (!this.endDateWidgetId) {\r\n         throw new Error('endFieldId is mandatory');\r\n      }\r\n      if (typeof this.endDateWidgetId !== 'string') {\r\n         throw new Error('endFieldId is not a string');\r\n      }\r\n   }\r\n\r\n   buildFieldIdsForDateTimeWidget(widgetId) {\r\n      // These ids were determined by looking at the custom tag DateTimeField\r\n      return {\r\n         dateFieldId: widgetId + '_$DATE$',\r\n         timeFieldId: widgetId + '_$TIME$',\r\n         timeZoneFieldId: widgetId + '_$TIMEZONE_DISPLAY$',\r\n         startPickerId: widgetId + '_SelectBtn'\r\n      };\r\n   }\r\n\r\n   setStartEndElemAttrs(startDateWidgetIds, endDateWidgetIds) {\r\n      this.startDateElem = document.getElementById(startDateWidgetIds.dateFieldId);\r\n      this.startTimeElem = document.getElementById(startDateWidgetIds.timeFieldId);\r\n      this.startTimeZoneElem = document.getElementById(startDateWidgetIds.timeZoneFieldId);\r\n      this.startPickerElem = document.getElementById(startDateWidgetIds.startPickerId);\r\n\r\n      this.endDateElem = document.getElementById(endDateWidgetIds.dateFieldId);\r\n      this.endTimeElem = document.getElementById(endDateWidgetIds.timeFieldId);\r\n      this.endTimeZoneElem = document.getElementById(endDateWidgetIds.timeZoneFieldId);\r\n      this.endPickerElem = document.getElementById(endDateWidgetIds.startPickerId);\r\n   }\r\n\r\n   validateStartEndElems() {\r\n      if (!this.startDateElem) {\r\n         throw new Error('start date field does not exist in the DOM.');\r\n      }\r\n      if (!this.startTimeElem) {\r\n         throw new Error('start time field does not exist in the DOM.');\r\n      }\r\n      if (!this.startTimeZoneElem) {\r\n         throw new Error('start time zone field does not exist in the DOM.');\r\n      }\r\n      if (!this.startPickerElem) {\r\n         throw new Error('start date picker field does not exist in the DOM.');\r\n      }\r\n\r\n      if (!this.endDateElem) {\r\n         throw new Error('end date field does not exist in the DOM.');\r\n      }\r\n      if (!this.endTimeElem) {\r\n         throw new Error('end time field does not exist in the DOM.');\r\n      }\r\n      if (!this.endTimeZoneElem) {\r\n         throw new Error('end time zone field does not exist in the DOM.');\r\n      }\r\n      if (!this.endPickerElem) {\r\n         throw new Error('end date picker field does not exist in the DOM.');\r\n      }\r\n   }\r\n\r\n   setStartAndEndWidgets(defaultStartEndValues) {\r\n      this.startDateElem.value = defaultStartEndValues.startDate;\r\n      this.startTimeElem.value = defaultStartEndValues.startTime;\r\n      this.startTimeZoneElem.value = defaultStartEndValues.startTimeZone;\r\n\r\n      this.endDateElem.value = defaultStartEndValues.endDate;\r\n      this.endTimeElem.value = defaultStartEndValues.endTime;\r\n      this.endTimeZoneElem.value = defaultStartEndValues.endTimeZone;\r\n   }\r\n\r\n\r\n   updateResultsTable(response) {\r\n      // The response is a json list of objects generated from:\r\n      //    com.mxi.mx.web.rest.task.CrewTaskLabourResponse\r\n      let addToTop = true;\r\n      this.table.clearData();\r\n      this.table.addData(response, addToTop);\r\n      this.table.setSort([{ column: 'lineNo', dir: 'asc' }]);\r\n   }\r\n\r\n\r\n   // Format the date and time to that expected by com.mxi.mx.common.utils.DataTypeUtils\r\n   formatDateTime(dateTimeWidgetId) {\r\n      let fieldIds = this.buildFieldIdsForDateTimeWidget(dateTimeWidgetId);\r\n\r\n      let dateValue = document.getElementById(fieldIds.dateFieldId).value;\r\n      let timeValue = document.getElementById(fieldIds.timeFieldId).value;\r\n\r\n      return dateValue + ' ' + timeValue;\r\n   }\r\n\r\n   isScheduledHoursCellEditable(cell) {\r\n      if (this.isAllowedToEditSchedledHours) {\r\n         let rowData = cell.getRow().getData();\r\n         if (rowData.isFromJobStop && rowData.labourStatus == 'ACTV') {\r\n            return true;\r\n         }\r\n      }\r\n      return false;\r\n   }\r\n\r\n   isActualHoursCellEditable(cell) {\r\n      if (this.isAllowedToEditActualHours) {\r\n         let rowData = cell.getRow().getData();\r\n         if (rowData.labourStatus == 'COMPLETE') {\r\n            return true;\r\n         }\r\n      }\r\n      return false;\r\n   }\r\n\r\n   isElapsedTimeGreaterThanThreshold(cell) {\r\n      let time = cell.getValue();\r\n      if (time) {\r\n         let decimalTime = DateTimeValidator.convertTimeToDecimal(time);\r\n         if (decimalTime > parseFloat(this.laborRowElaspedTimeThreshold)) {\r\n            return \"<span class='elapsedTimeExceedsThreshold'>\" + time + \"</span>\";\r\n         }\r\n      }\r\n\r\n      return time;\r\n   }\r\n\r\n   validateHours(cell, value) {\r\n      return DateTimeValidator.validateHours(value);\r\n   }\r\n\r\n   handleScheduleHoursEdit(cell) {\r\n      let rowData = cell.getRow().getData();\r\n      this.service.updateScheduledHours(\r\n         rowData.taskId,\r\n         rowData.labourRowId,\r\n         cell.getValue());\r\n   }\r\n\r\n   handleActualHoursEdit(cell) {\r\n      let rowData = cell.getRow().getData();\r\n      this.service.updateActualHours(\r\n         rowData.taskId,\r\n         rowData.labourRowId,\r\n         cell.getValue());\r\n   }\r\n}\r\n","/* global $ */\r\n/**\r\n * It contains all configurations for the type ahead search widget\r\n */\r\nexport default class FollowOnTaskDefinitionSearchConfig {\r\n\r\n   constructor(data) {\r\n      if (!data || !(data instanceof Array)) {\r\n         throw new Error(\"The response data suppose to be in array form\");\r\n      }\r\n\r\n      this.data = data;\r\n\r\n      // The name of the dataset.\r\n      // This will be appended to the class name of the filtered result <div>.\r\n      this.name = 'followOnTaskDefnSearch';\r\n\r\n      // The max number of suggestions to be displayed.\r\n      this.limit = 50;\r\n\r\n      // The minimum character length needed before suggestions start getting rendered.\r\n      this.minLength = 1;\r\n   }\r\n}\r\n","import $ from 'jquery';\r\nimport DateTimeHelper from '../../../common/util/DateTimeHelper';\r\n\r\nexport default class TaskSupervisionService {\r\n\r\n   constructor() {\r\n      this.errorMsgPrefix = 'Error code =  ';\r\n   }\r\n\r\n   getCrewsForUser(userId) {\r\n\r\n      if (!userId) {\r\n         throw new Error('userId is mandatory');\r\n      }\r\n\r\n      const crewListRestEndpoint = '/maintenix/rest/crews';\r\n      const args = { 'userId': userId };\r\n      return new Promise((resolve, reject) => {\r\n         $.ajax({\r\n            url: crewListRestEndpoint,\r\n            type: \"GET\",\r\n            data: args,\r\n            success: (crewResponseList, textStatus, jqXHR) => {\r\n               resolve(crewResponseList);\r\n            },\r\n            error: (jqXHR, textStatus, errorThrown) => {\r\n               let message = this.errorMsgPrefix + jqXHR.status;\r\n               reject(message);\r\n            }\r\n         });\r\n      });\r\n   }\r\n\r\n   getDefaultStartAndEndDates(userId) {\r\n      if (!userId) {\r\n         throw new Error('userId is mandatory');\r\n      }\r\n\r\n      const currentDateTimeRestEndpoint = '/maintenix/rest/datetime/getCurrent';\r\n      const args = { 'userId': userId };\r\n\r\n      return new Promise((resolve, reject) => {\r\n         $.ajax({\r\n            url: currentDateTimeRestEndpoint,\r\n            type: \"GET\",\r\n            data: args,\r\n            success: (response, textStatus, jqXHR) => {\r\n               let defaultStart = new Date(\r\n                  response.startYear,\r\n                  response.startMonth - 1,\r\n                  response.startDayOfMonth,\r\n                  response.startHourInDay,\r\n                  response.startMinute\r\n               );\r\n               let defaultEnd = new Date(\r\n                  response.endYear,\r\n                  response.endMonth - 1,\r\n                  response.endDayOfMonth,\r\n                  response.endHourInDay,\r\n                  response.endMinute\r\n               );\r\n\r\n               let defaultStartEndValues = {};\r\n               defaultStartEndValues.startDate = this.formatDate(defaultStart);\r\n               defaultStartEndValues.startTime = this.formatTime(defaultStart);\r\n               defaultStartEndValues.startTimeZone = response.startTimezone;\r\n               try {\r\n                  this.validateDateFormat(defaultStartEndValues.startDate);\r\n               }\r\n               catch (error) {\r\n                  reject('default startDate failed validation: ' + error.message);\r\n               }\r\n\r\n               try {\r\n                  this.validateTimeFormat(defaultStartEndValues.startTime);\r\n               }\r\n               catch (error) {\r\n                  reject('default startTime failed validation: ' + error.message);\r\n               }\r\n\r\n               defaultStartEndValues.endDate = this.formatDate(defaultEnd);\r\n               defaultStartEndValues.endTime = this.formatTime(defaultEnd);\r\n               defaultStartEndValues.endTimeZone = response.endTimezone;\r\n               try {\r\n                  this.validateDateFormat(defaultStartEndValues.endDate);\r\n               }\r\n               catch (error) {\r\n                  reject('default endDate failed validation: ' + error.message);\r\n               }\r\n               try {\r\n                  this.validateTimeFormat(defaultStartEndValues.endTime);\r\n               }\r\n               catch (error) {\r\n                  reject('default endTime failed validation: ' + error.message);\r\n               }\r\n\r\n               resolve(defaultStartEndValues);\r\n            },\r\n            error: (jqXHR, textStatus, errorThrown) => {\r\n               let message = this.errorMsgPrefix + jqXHR.status;\r\n               reject(message);\r\n            }\r\n         });\r\n      });\r\n   }\r\n\r\n   performSearch(args) {\r\n      return new Promise((resolve, reject) => {\r\n         let excludeComplete = ((args.showCompleteTasks == true) ? false : true);\r\n\r\n         let searchData = {\r\n            onlyWorkscoped: true,\r\n            onlyContainingLabour: true,\r\n            assignedToCrewId: args.crewId,\r\n            minScheduledStartDateTime: args.startDateTime,\r\n            maxScheduledStartDateTime: args.endDateTime,\r\n            excludeCompleted: excludeComplete\r\n         };\r\n         \r\n         let listCrewTaskLabourEndpoint = '/maintenix/rest/tasks';\r\n\r\n         $.ajax({\r\n            url: listCrewTaskLabourEndpoint,\r\n            data: searchData,\r\n            type: \"GET\",\r\n            success: (response, textStatus, jqXHR) => {\r\n               // The response is a json list of objects generated from:\r\n               //    com.mxi.mx.web.rest.task.CrewTaskLabourResponse\r\n               resolve(response);\r\n            },\r\n            error: (jqXHR, textStatus, errorThrown) => {\r\n               let message = this.errorMsgPrefix + jqXHR.status;\r\n               reject(message);\r\n            }\r\n         });\r\n      });\r\n   }\r\n\r\n   // validateHours(value) {\r\n   //    // This is based on the NUMBER(9,5) constraint for\r\n   //    // sched_labour_role.sched_hr and sched_labour_role.actual_hr\r\n   //    let split = value.split('.');\r\n   //    if ( split.length > 0 ) {\r\n   //       if ( split[0].length > 4 ) {\r\n   //          return false;\r\n   //       }\r\n   //       if ( split.length == 2 ) {\r\n   //          if ( split[1].length > 5 ) {\r\n   //             return false;\r\n   //          }\r\n   //       } else if (split.length > 2 ) {\r\n   //          return false;\r\n   //       }\r\n   //    }\r\n   //    return true;\r\n   // }\r\n\r\n   updateScheduledHours(taskId, labourRowId, newValue) {\r\n      let data = {\r\n         scheduledHours: newValue\r\n      };\r\n      $.ajax({\r\n         url: '/maintenix/rest/tasks/' + taskId + '/labours/' + labourRowId,\r\n         type: \"PUT\",\r\n         contentType: 'application/json',\r\n         data: JSON.stringify(data),\r\n         error: (jqXHR, textStatus, errorThrown) => {\r\n            let message = this.errorMsgPrefix + jqXHR.status;\r\n            new Error(message);\r\n         }\r\n      });\r\n   }\r\n\r\n   updateActualHours(taskId, labourRowId, newValue) {\r\n      let data = {\r\n         actualHours: newValue\r\n      };\r\n      $.ajax({\r\n         url: '/maintenix/rest/tasks/' + taskId + '/labours/' + labourRowId,\r\n         type: \"PUT\",\r\n         contentType: 'application/json',\r\n         data: JSON.stringify(data),\r\n         error: (jqXHR, textStatus, errorThrown) => {\r\n            let message = this.errorMsgPrefix + jqXHR.status;\r\n            new Error(message);\r\n         }\r\n      });\r\n   }\r\n\r\n\r\n   //\r\n   // private methods\r\n   //\r\n\r\n   validateDateFormat(dateStr) {\r\n      if (!dateStr) {\r\n         throw new Error('dateStr is mandatory.');\r\n      }\r\n      if (typeof dateStr !== 'string') {\r\n         throw new Error('dateStr is not a string');\r\n      }\r\n\r\n      // regex example: dd-MMM-yyyy\r\n      const dateFormat = /^(([0-9])|([0-2][0-9])|([3][0-1]))\\-(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\\-\\d{4}$/;\r\n      const matchArray = dateStr.match(dateFormat);\r\n\r\n      if (matchArray == null) {\r\n         throw new Error('dateStr has invalid format.');\r\n      }\r\n\r\n      return true;\r\n   }\r\n\r\n   validateTimeFormat(timeStr) {\r\n      if (!timeStr) {\r\n         throw new Error('timeStr is mandatory.');\r\n      }\r\n      if (typeof timeStr !== 'string') {\r\n         throw new Error('timeStr is not a string.');\r\n      }\r\n\r\n      // regex example: hh:mm\r\n      const timeFormat = /^$|^(([01][0-9])|(2[0-3])):[0-5][0-9]$/;\r\n      const matchArray = timeStr.match(timeFormat);\r\n\r\n      if (matchArray == null) {\r\n         throw new Error('timeStr has invalid format.');\r\n      }\r\n\r\n      return true;\r\n   }\r\n\r\n   addHours(date, hours) {\r\n      return new Date(date.getTime() + (hours * 60 * 60 * 1000));\r\n   }\r\n\r\n   formatDate(date) {\r\n      let str =\r\n         ((date.getDate() < 10) ? '0' : '') + date.getDate() + '-' +\r\n         this.getMonthShortStr(date.getMonth() + 1) + '-' +\r\n         date.getFullYear();\r\n      return str;\r\n   }\r\n\r\n   formatTime(date) {\r\n      let str =\r\n         ((date.getHours() < 10) ? '0' : '') + date.getHours() + ':' +\r\n         ((date.getMinutes() < 10) ? '0' : '') + date.getMinutes();\r\n      return str;\r\n   }\r\n\r\n   getMonthShortStr(month) {\r\n      if (month === 1) return 'JAN';\r\n      if (month === 2) return 'FEB';\r\n      if (month === 3) return 'MAR';\r\n      if (month === 4) return 'APR';\r\n      if (month === 5) return 'MAY';\r\n      if (month === 6) return 'JUN';\r\n      if (month === 7) return 'JUL';\r\n      if (month === 8) return 'AUG';\r\n      if (month === 9) return 'SEP';\r\n      if (month === 10) return 'OCT';\r\n      if (month === 11) return 'NOV';\r\n      if (month === 12) return 'DEC';\r\n      return \"\";\r\n   }\r\n\r\n}\r\n","import $ from 'jquery';\r\n\r\n/**\r\n * The service layer, it sends REST API call and pass the response data to controller\r\n */\r\nexport default class FollowOnTaskDefinitionSearchService {\r\n\r\n   static sortTaskDefinitions(taskDefinitions) {\r\n      if (!taskDefinitions || !(taskDefinitions instanceof Array)) {\r\n         throw new Error(\"taskDefinitions expected to be an Array\");\r\n      }\r\n\r\n      return taskDefinitions.sort(function(a, b) {\r\n         let compareResult = (a.code > b.code) ? 1 : ((a.code < b.code) ? -1 : 0);\r\n\r\n         if (compareResult == 0) {\r\n            compareResult = (a.configSlotCode > b.configSlotCode) ? 1 : ((a.configSlotCode < b.configSlotCode) ? -1 : 0);\r\n         }\r\n\r\n         if (compareResult == 0) {\r\n            compareResult = (a.name > b.name) ? 1 : ((a.name < b.name) ? -1 : 0);\r\n         }\r\n         return compareResult;\r\n      });\r\n   }\r\n\r\n   static getFollowOnTaskDefinitions(apiUrl) {\r\n      let scope = this;\r\n      return new Promise(function(resolve, reject) {\r\n         return $.ajax({\r\n            type: \"GET\",\r\n            url: apiUrl,\r\n            success: function(taskDefinitionsResponse) {\r\n               // nice to have: postProcessor hook\r\n               let sortedTaskDefinitions = scope.sortTaskDefinitions(taskDefinitionsResponse);\r\n               resolve(sortedTaskDefinitions);\r\n            },\r\n            error: function(err) {\r\n               // if error happens with the API call, initialize the widget with an empty array.\r\n               resolve([]);\r\n            }\r\n         });\r\n      });\r\n   }\r\n\r\n}\r\n","export default class DateTimeValidator {\n\n   constructor() {\n   }\n\n   \n   static validateHours(value) {\n      // This is based on the NUMBER(9,5) constraint for\n      // sched_labour_role.sched_hr and sched_labour_role.actual_hr\n      let split = value.split('.');\n      if ( split.length > 0 ) {\n         if ( split[0].length > 4 ) {\n            return false;\n         }\n         if ( split.length == 2 ) {\n            if ( split[1].length > 5 ) {\n               return false;\n            }\n         } else if (split.length > 2 ) {\n            return false;\n         }\n      }\n      return true;\n   }\n\n  \n   //\n   // private methods\n   //\n\n   static validateDateFormat(dateStr) {\n      if( ! dateStr ) {\n         throw new Error('dateStr is mandatory.');\n      }\n      if (typeof dateStr !== 'string')  {\n         throw new Error('dateStr is not a string');\n      }\n\n      // regex example: dd-MMM-yyyy\n      const dateFormat = /^(([0-9])|([0-2][0-9])|([3][0-1]))\\-(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\\-\\d{4}$/;\n      const matchArray = dateStr.match(dateFormat);\n\n      if( matchArray == null ) {\n          throw new Error('dateStr has invalid format.');\n      }\n\n      return true;\n  }\n\n   static validateTimeFormat(timeStr) {\n      if( ! timeStr ){\n         throw new Error('timeStr is mandatory.');\n      }\n      if (typeof timeStr !== 'string')  {\n         throw new Error('timeStr is not a string.');\n      }\n\n      // regex example: hh:mm\n      const timeFormat = /^$|^(([01][0-9])|(2[0-3])):[0-5][0-9]$/;\n      const matchArray = timeStr.match(timeFormat);\n\n      if( matchArray == null ) {\n          throw new Error('timeStr has invalid format.');\n      }\n\n      return true;\n   }\n\n}","import $ from 'jquery';\r\n// import Typeahead from \"typeahead.js\";\r\n// import Bloodhound from \"bloodhound-js\";\r\n\r\nimport FollowOnTaskDefinitionSearchConfig from './followOnTaskDefinitionSearchConfig.js';\r\nimport FollowOnTaskDefinitionSearchService from './followOnTaskDefinitionSearchService.js';\r\n\r\n/**\r\n * The button controller that handles ui interactions.\r\n */\r\nexport default class FollowOnTaskDefinitionSearchController {\r\n\r\n   constructor(typeAheadId, okButtonId, notFoundMsgId, followOnTaskDefnUuidOuputId, apiUrlId) {\r\n      let scope = this;\r\n      this.notFoundMsgEl = $(\"#\" + notFoundMsgId);\r\n      this.okBtnEl = $('#' + okButtonId);\r\n      this.typeAheadSearchInputEl = $('#' + typeAheadId);\r\n      this.followOnTaskDefnUuidOuputEl = $('#' + followOnTaskDefnUuidOuputId);\r\n      let apiUrlEl = $(\"#\" + apiUrlId);\r\n\r\n      if (!this.notFoundMsgEl.length > 0) {\r\n         throw new Error(\"Not found message element required\");\r\n      }\r\n\r\n      if (!this.okBtnEl.length > 0) {\r\n         throw new Error(\"Ok button element required\");\r\n      }\r\n\r\n      if (!this.typeAheadSearchInputEl.length > 0) {\r\n         throw new Error(\"Typeahead input element required\");\r\n      }\r\n\r\n      if (!this.followOnTaskDefnUuidOuputEl.length > 0) {\r\n         throw new Error(\"Output followOn task definition UUI input element required\");\r\n      }\r\n\r\n      if (!apiUrlEl.length > 0) {\r\n         throw new Error(\"REST api url element is required\");\r\n      }\r\n\r\n      this.apiUrl = apiUrlEl.val();\r\n      this.selectedOption = '';\r\n\r\n      this.typeAheadSearchInputEl.keydown(function() {\r\n         setTimeout(\r\n            function() {\r\n               if (scope.typeAheadSearchInputEl.val() != scope.selectedOption) {\r\n                  scope.disableOkBtn();\r\n                  scope.clearSelectedTaskDefinition();\r\n               }\r\n            });\r\n      });\r\n\r\n      // bind sibling methods to class instance.\r\n      this.initialize = this.initialize.bind(this);\r\n\r\n   }\r\n\r\n   /**\r\n    * set the id value of the selected task definition to our html input element\r\n    */\r\n   setSelectedTaskDefinition(suggestion) {\r\n      if (suggestion) {\r\n         this.typeAheadSearchInputEl.val(this.displayFollowOn(null, suggestion));\r\n         this.selectedOption = this.typeAheadSearchInputEl.val();\r\n         this.followOnTaskDefnUuidOuputEl.attr('value', suggestion.id);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * clear any selected task definition value in our html input element\r\n    */\r\n   clearSelectedTaskDefinition() {\r\n      this.followOnTaskDefnUuidOuputEl.attr('value', '');\r\n   }\r\n\r\n   /**\r\n    * setup UI elements, fetch task definitions and configure type ahead\r\n    */\r\n   initialize() {\r\n      this.disableOkBtn();\r\n\r\n      try {\r\n         return FollowOnTaskDefinitionSearchService.getFollowOnTaskDefinitions(this.apiUrl).then((taskDefinitions) => {\r\n            this.configureTypeAhead(taskDefinitions);\r\n            // once the typeahead input is initialized, the type field will lost focus, have to\r\n            // manually focus it again.\r\n            this.typeAheadSearchInputEl.focus();\r\n         });\r\n\r\n      }\r\n      catch (error) {\r\n         throw new Error(\"Error while trying to fetch task definitions.\", error);\r\n      }\r\n   }\r\n\r\n   /**\r\n    * configure type ahead with data source and default configuration.\r\n    */\r\n   configureTypeAhead(taskDefinitions) {\r\n      let scope = this;\r\n      let config = new FollowOnTaskDefinitionSearchConfig(taskDefinitions);\r\n\r\n      // create a display value that will allow full text search on full value.\r\n      $.each(config.data, function(index, data) {\r\n         data.displayValue = scope.displayFollowOn(null, data);\r\n      });\r\n\r\n      $.typeahead({\r\n         input: scope.typeAheadSearchInputEl,\r\n         highlight: true,\r\n         name: config.name,\r\n         limit: config.limit,\r\n         minLength: config.minLength,\r\n         display: [\"displayValue\"],\r\n         emptyTemplate: '<div class=\"mx-typeahead-msg-notfound\">' + scope.notFoundMsgEl.val() + '</div>',\r\n         source: {\r\n            data: config.data,\r\n         },\r\n         callback: {\r\n            onClick: function(typeAheadInputEl, selectionEl, selectedRecord, event) {\r\n               event.preventDefault();\r\n               scope.enableOkBtn();\r\n\r\n               // save user selection from the search result.\r\n               scope.setSelectedTaskDefinition(selectedRecord);\r\n               this.hideLayout();\r\n            }\r\n         }\r\n      });\r\n   }\r\n\r\n   // Define how the result is displayed in the dropdown.\r\n   // It will display the result in the format of: task code - configslot code - task name\r\n   displayFollowOn(query, suggestionObj) {\r\n      if (suggestionObj) {\r\n         return suggestionObj.code + \" - \" + suggestionObj.configSlotCode + \" - \" + suggestionObj.name;\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Wrapper to enable our OK button\r\n    */\r\n   enableOkBtn() {\r\n      if (this.okBtnEl) {\r\n         if (this.okBtnEl.attr('originOnClickEvent')) {\r\n            this.okBtnEl.attr('onclick', this.okBtnEl.attr('originOnClickEvent'));\r\n         }\r\n\r\n         if (this.okBtnEl.attr('originTitle')) {\r\n            this.okBtnEl.attr('title', this.okBtnEl.attr('originTitle'));\r\n         }\r\n\r\n         this.okBtnEl.removeClass('disabled');\r\n         this.okBtnEl.removeAttr('disabled');\r\n         this.okBtnEl.removeAttr('originOnClickEvent');\r\n         this.okBtnEl.removeAttr('originTitle');\r\n      }\r\n   }\r\n\r\n   /**\r\n    * Wrapper to disable our OK button\r\n    */\r\n   disableOkBtn() {\r\n      if (this.okBtnEl) {\r\n         // store the button onclick handler and title for future restore\r\n         if (!this.okBtnEl.attr('originOnClickEvent')) {\r\n            this.okBtnEl.attr('originOnClickEvent', this.okBtnEl.attr('onclick'));\r\n         }\r\n\r\n         if (!this.okBtnEl.attr('originTitle')) {\r\n            this.okBtnEl.attr('originTitle', this.okBtnEl.attr('title'));\r\n         }\r\n\r\n         this.okBtnEl.addClass('disabled');\r\n         this.okBtnEl.attr('disabled', 'disabled');\r\n         this.okBtnEl.attr('onclick', false);\r\n         this.okBtnEl.attr('title', '');\r\n      }\r\n   }\r\n\r\n}\r\n","// test_index.js\nvar testsContext = require.context(\".\", true, /spec.js$/);\ntestsContext.keys().forEach(testsContext);","var map = {\n\t\"./basemaintenance/task/tasksupervision/TaskSupervisionController.spec.js\": 11,\n\t\"./basemaintenance/task/tasksupervision/TaskSupervisionService.spec.js\": 12,\n\t\"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchConfig.spec.js\": 13,\n\t\"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchController.spec.js\": 14,\n\t\"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchService.spec.js\": 15,\n\t\"./someFeature/featureMath/featureMath.spec.js\": 16\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 10;","/* global $, expect, spyOn, jasmine, setFixtures */\r\nimport TaskSupervisionController from './TaskSupervisionController';\r\n\r\ndescribe('TaskSupervisionController', function() {\r\n\r\n   describe('initCrewsWidget', function() {\r\n\r\n      const testCrewList = [\r\n         { id: '1', code: 'crew1', description: 'crew one' },\r\n         { id: '2', code: 'crew2', description: 'crew two' },\r\n         { id: '3', code: 'crew3', description: 'crew three' }\r\n      ];\r\n      const testCrewListOfOne = [\r\n         { id: '1', code: 'crew1', description: 'crew one' }\r\n      ];\r\n\r\n      const testCurrentDateTimeResponse = {\r\n         startYear: '2019',\r\n         startMonth: '01',\r\n         startDayOfMonth: '01',\r\n         startHourInDay: '12',\r\n         startHourInDay: '00',\r\n         startMinute: '00',\r\n         endYear: '2019',\r\n         endMonth: '02',\r\n         endDayOfMonth: '01',\r\n         endHourInDay: '12',\r\n         endMinute: '00',\r\n         startTimezone: \"EST\"\r\n      };\r\n\r\n      let validParms;\r\n      let fakeService;\r\n\r\n      beforeEach(function() {\r\n         jasmine.Ajax.install();\r\n         this.validParms = {\r\n            userId: 'userId',\r\n            crewsFieldId: 'crewsFieldId',\r\n            startFieldId: 'idStartDateTime',\r\n            endFieldId: 'idEndDateTime',\r\n            showCompleteId: 'idShowComplete',\r\n            searchButtonId: 'idSearchButton',\r\n            searchResultsId: 'idSearchResults',\r\n            isAllowedToSearch: 'true'\r\n         };\r\n\r\n         setFixtures(\r\n            '<select id=\"' + this.validParms.crewsFieldId + '\"></select>' +\r\n            '<input id=\"' + this.validParms.showCompleteId + '\" type=\"checkbox\"/>' +\r\n            '<button id=\"' + this.validParms.searchButtonId + '\" />' +\r\n            '<div id=\"' + this.validParms.searchResultsId + '\" />' +\r\n            '<div id=\"' + this.validParms.startFieldId + '\" />' +\r\n            '<div id=\"' + this.validParms.startFieldId + '_$DATE$\" />' +\r\n            '<div id=\"' + this.validParms.startFieldId + '_$TIME$\" />' +\r\n            '<div id=\"' + this.validParms.startFieldId + '_$TIMEZONE_DISPLAY$\" />' +\r\n            '<div id=\"' + this.validParms.startFieldId + '_SelectBtn\" />' +\r\n            '<div id=\"' + this.validParms.endFieldId + '\" />' +\r\n            '<div id=\"' + this.validParms.endFieldId + '_$DATE$\" />' +\r\n            '<div id=\"' + this.validParms.endFieldId + '_$TIME$\" />' +\r\n            '<div id=\"' + this.validParms.endFieldId + '_$TIMEZONE_DISPLAY$\" />' +\r\n            '<div id=\"' + this.validParms.endFieldId + '_SelectBtn\" />'\r\n         );\r\n      });\r\n\r\n      afterEach(function() {\r\n         jasmine.Ajax.uninstall();\r\n      });\r\n\r\n      it('Throws error when user id not provided.', function() {\r\n         let parms = this.validParms;\r\n         parms.userId = undefined;\r\n         expect(function() {\r\n            let controller = new TaskSupervisionController(parms);\r\n            controller.initCrewsWidget();\r\n         }).toThrowError('userId is mandatory');\r\n      });\r\n\r\n      it('Throws error when user id is blank.', function() {\r\n         let parms = this.validParms;\r\n         parms.userId = undefined;\r\n         expect(function() {\r\n            let controller = new TaskSupervisionController(parms);\r\n         }).toThrowError('userId is mandatory');\r\n      });\r\n\r\n\r\n      it('Throws error when crew field id not provided.', function() {\r\n         let parms = this.validParms;\r\n         parms.crewsFieldId = undefined;\r\n         expect(function() {\r\n            let controller = new TaskSupervisionController(parms);\r\n         }).toThrowError('crewsFieldId is mandatory');\r\n      });\r\n\r\n      it('Throws error when crew field id is blank.', function() {\r\n         let parms = this.validParms;\r\n         parms.crewsFieldId = '';\r\n         expect(function() {\r\n            let controller = new TaskSupervisionController(parms);\r\n         }).toThrowError('crewsFieldId is mandatory');\r\n      });\r\n\r\n      it('Throws error when crew field id does not identify a select element.', function() {\r\n         let parms = this.validParms;\r\n         parms.crewsFieldId = 'non-existing-id';\r\n         expect(function() {\r\n            let controller = new TaskSupervisionController(parms);\r\n         }).toThrowError('crewsFieldId must be a SELECT element');\r\n      });\r\n\r\n      it('Throws error when crew field id identifies a non-select element.', function() {\r\n         setFixtures('<input id=\"crewsFieldId\"></input>');\r\n         let parms = this.validParms;\r\n         parms.crewsFieldId = 'crewsFieldId';\r\n         expect(function() {\r\n            let controller = new TaskSupervisionController(parms);\r\n         }).toThrowError('crewsFieldId must be a SELECT element');\r\n      });\r\n\r\n      it('Fetch of crew list is returned', function(done) {\r\n         // Arrange \r\n         setFixtures('<select id=\"' + this.validParms.crewsFieldId + '\"></select>');\r\n         let controller = new TaskSupervisionController(this.validParms);\r\n\r\n         spyOn($, 'ajax').and.callFake(function(e) {\r\n            return e.success(testCrewList);\r\n         });\r\n\r\n         // Act\r\n         controller.initCrewsWidget().then(function(response) {\r\n            // Assert\r\n            expect(response).toBe(testCrewList);\r\n            done();\r\n         });\r\n      });\r\n\r\n      it('Populates Crew dropdown when provided list of crews.', function(done) {\r\n         // Arrange \r\n         this.validParms.isAllowedToSearch = 'false';\r\n         let controller = new TaskSupervisionController(this.validParms);\r\n\r\n         spyOn($, 'ajax').and.callFake(function(request) {\r\n            if (request.url === '/maintenix/rest/crews') {\r\n               return request.success(testCrewList);\r\n            }\r\n            else if (request.url === '/maintenix/rest/datetime/getCurrent') {\r\n               return request.success(testCurrentDateTimeResponse);\r\n            }\r\n            else {\r\n               console.warn(\"Unsupported url: \", request.url);\r\n            }\r\n         });\r\n\r\n         let crewsFieldSelectEl = document.getElementById(this.validParms.crewsFieldId);\r\n         let selectOptions = crewsFieldSelectEl.options;\r\n\r\n         // Act\r\n         controller.init().then(function(response) {\r\n            // Assert\r\n            expect(selectOptions.length).toBe(testCrewList.length);\r\n            /**\r\n            for (var i = 0; i < selectOptions.length; i++) {\r\n               let expectedText = testCrewList[i].code + \" (\" + testCrewList[i].description + \")\";\r\n               console.warn(\"selectOptions: \", selectOptions[i].text, testCrewList[i].id, expectedText);\r\n               // expect(selectOptions[i].text).toBe(expectedText);\r\n               // expect(selectOptions[i].value).toBe(testCrewList[i].id);\r\n            } **/\r\n\r\n            // expect(crewsFieldSelectEl.selectedIndex).toBe(0);\t\t\t \t\t\t \r\n            done();\r\n         });\r\n      });\r\n\r\n      /**\t\r\n      it('Clears crew dropdown prior to populating it with provided list of crews.', function() {\r\n         // Arrange\r\n         setFixtures( \r\n               '<select id=\"' + this.validParms.crewsFieldId + '\">' +\r\n               '   <option id=\"10\">crew10</option>'+\r\n               '   <option id=\"20\">crew20</option>'+\r\n               '</select>'\r\n         );\r\n\r\n         let fakeService = new TaskSupervisionService();\r\n         spyOn(fakeService, 'getCrewsForUser').and.callFake( function(userId, sucessHandler, failureHandler) {\r\n            sucessHandler(testCrewList);\r\n         });\r\n\r\n         let parms = this.validParms;\r\n         parms.TaskSupervisionService = fakeService;\r\n         let controller = new TaskSupervisionController(parms);\r\n\r\n         // Act\r\n         controller.initCrewsWidget();\r\n\r\n         // Assert\r\n         let select = document.getElementById(this.validParms.crewsFieldId);\r\n         let selectOptions = select.options;\r\n         expect(selectOptions.length).toBe(3);\r\n         for (var i=0; i<selectOptions.length; i++) {\r\n            let expectedText = testCrewList[i].code + \" (\" + testCrewList[i].description +\")\";\r\n            expect(selectOptions[i].text).toBe(expectedText);\r\n            expect(selectOptions[i].value).toBe(testCrewList[i].id);\r\n         }\r\n         expect(select.selectedIndex).toBe(0);\t\t \r\n      });\r\n**/\r\n      /**\r\n            it('Populates Crew dropdown when provided list of a single crew.', function() {\r\n               // Arrange\r\n               let fakeService = new TaskSupervisionService();\r\n               spyOn(fakeService, 'getCrewsForUser').and.callFake( function(userId, sucessHandler, failureHandler) {\r\n                  sucessHandler(testCrewListOfOne);\r\n               });\r\n\r\n               let parms = this.validParms;\r\n               parms.TaskSupervisionService = fakeService;\r\n               let controller = new TaskSupervisionController(parms);\r\n\r\n               // Act\r\n               controller.initCrewsWidget();\r\n\r\n               // Assert\r\n               let select = document.getElementById(this.validParms.crewsFieldId);\r\n               let selectOptions = select.options;\r\n               expect(selectOptions.length).toBe(1);\r\n\r\n               let expectedText = testCrewListOfOne[0].code + \" (\" + testCrewListOfOne[0].description +\")\";\r\n               expect(selectOptions[0].text).toBe(expectedText);\r\n               expect(selectOptions[0].value).toBe(testCrewListOfOne[0].id);\r\n               expect(select.selectedIndex).toBe(0);\r\n            });\r\n\r\n            it('Does not populate Crew dropdown when provided no list of crews.', function() {\r\n               // Arrange\r\n               let crews = undefined;\r\n               let fakeService = new TaskSupervisionService();\r\n               spyOn(fakeService, 'getCrewsForUser').and.callFake( function(userId, sucessHandler, failureHandler) {\r\n                  sucessHandler(crews);\r\n               });\r\n\r\n               let parms = this.validParms;\r\n               parms.TaskSupervisionService = fakeService;\r\n               let controller = new TaskSupervisionController(parms);\r\n\r\n               // Act\r\n               controller.initCrewsWidget();\r\n\r\n               // Assert\r\n               let select = document.getElementById(this.validParms.crewsFieldId);\r\n               let selectOptions = select.options;\r\n               expect(selectOptions.length).toBe(0);\r\n               expect(select.selectedIndex).toBe(-1);\r\n            });\r\n\r\n            it('Does not populate Crew dropdown when provided empty list of crews.', function() {\r\n               // Arrange\r\n               let crews = [];\r\n               let fakeService = new TaskSupervisionService();\r\n               spyOn(fakeService, 'getCrewsForUser').and.callFake( function(userId, sucessHandler, failureHandler) {\r\n                  sucessHandler(crews);\r\n               });\r\n\r\n               let parms = this.validParms;\r\n               parms.TaskSupervisionService = fakeService;\r\n               let controller = new TaskSupervisionController(parms);\r\n\r\n               // Act\r\n               controller.initCrewsWidget();\r\n\r\n               // Assert\r\n               let select = document.getElementById(this.validParms.crewsFieldId);\r\n               let selectOptions = select.options;\r\n               expect(selectOptions.length).toBe(0);\r\n               expect(select.selectedIndex).toBe(-1);\r\n            });\r\n\r\n            it('Throws error when unable to get crews for user.', function() {\r\n               // Arrange\r\n               let errorMessage = 'errorMessage';\r\n               let fakeService = new TaskSupervisionService();\r\n               spyOn(fakeService, 'getCrewsForUser').and.callFake( function(userId, sucessHandler, failureHandler) {\r\n                  failureHandler(errorMessage);\r\n               });\r\n\r\n               let parms = this.validParms;\r\n               parms.TaskSupervisionService = fakeService;\r\n               let controller = new TaskSupervisionController(parms);\r\n\r\n               // Act and Assert\r\n               expect(function() {\r\n                  controller.initCrewsWidget();\r\n               }).toThrowError(errorMessage);\r\n            });\r\n      \t  **/\r\n   });\r\n\r\n});\r\n","import $ from 'jquery';\r\nimport TaskSupervisionService from './TaskSupervisionService';\r\n\r\ndescribe('TaskSupervisionService.js', ()=>{\r\n\r\n   describe('getCrewsForUser', ()=>{\r\n\r\n      const service = new TaskSupervisionService();\r\n\r\n      const userId = 'user';\r\n      const successHandler = function(){};\r\n      const failureHandler = function(){};\r\n\r\n      beforeEach(function() {\r\n         jasmine.Ajax.install();\r\n       });\r\n\r\n      afterEach(function() {\r\n         jasmine.Ajax.uninstall();\r\n       });\r\n\t   \r\n\r\n\t   /** \r\n\t   \r\n      it('throws an error when user is not provided', ()=>{\r\n         let undefinedUserId;\r\n         expect(() => service.getCrewsForUser(undefinedUserId, successHandler, failureHandler ))\r\n            .toThrowError('userId is mandatory');\r\n      });\r\n\r\n      it('throws an error when user is blank string', ()=>{\r\n         const blankUserId = '';\r\n         expect(() => service.getCrewsForUser(blankUserId, successHandler, failureHandler ))\r\n            .toThrowError('userId is mandatory');\r\n      });\r\n\r\n      it('throws an error when success handler is not provided', ()=>{\r\n         let undefinedSuccessHandler;\r\n         expect(() => service.getCrewsForUser(userId, undefinedSuccessHandler, failureHandler ))\r\n            .toThrowError('successHandler is mandatory');\r\n      });\r\n\r\n      it('throws an error when success handler is not a function', ()=>{\r\n         const nonFunctionSuccessHandler = 'hello';\r\n         expect(() => service.getCrewsForUser(userId, nonFunctionSuccessHandler, failureHandler ))\r\n            .toThrowError('successHandler must be a function');\r\n      });\r\n\r\n      it('throws an error when failure handler is not provided', ()=>{\r\n         let undefinedFailureHandler;\r\n         expect(() => service.getCrewsForUser(userId, successHandler, undefinedFailureHandler ))\r\n            .toThrowError('failureHandler is mandatory');\r\n      });\r\n\r\n      it('throws an error when failure handler is not a function', ()=>{\r\n         const nonFunctionFailureHandler = 'hello';\r\n         expect(() => service.getCrewsForUser(userId, successHandler, nonFunctionFailureHandler ))\r\n            .toThrowError('failureHandler must be a function');\r\n      });\r\n\r\n      it('will make an ajax call to the correct url', ()=>{\r\n         spyOn($, 'ajax');\r\n         service.getCrewsForUser(userId, successHandler, failureHandler );\r\n         expect($.ajax.calls.mostRecent().args[0].url).toEqual('/maintenix/rest/crew/list');\r\n      });\r\n\r\n      it('will make an ajax call with the correct type', ()=>{\r\n         spyOn($, 'ajax');\r\n         service.getCrewsForUser(userId, successHandler, failureHandler );\r\n         expect($.ajax.calls.mostRecent().args[0].type).toEqual('GET');\r\n      });\r\n\r\n      it('will make an ajax call with the correct data', ()=>{\r\n         spyOn($, 'ajax');\r\n         service.getCrewsForUser(userId, successHandler, failureHandler );\r\n         let expectedData = {'userId': userId};\r\n         expect($.ajax.calls.mostRecent().args[0].data).toEqual(expectedData);\r\n      });\r\n\t  **/\r\n\r\n      it('will call the success handler when the ajax call is successful', ()=>{\r\n         spyOn($, 'ajax').and.callFake( function(ajx) {\r\n            ajx.success({});\r\n         });\r\n\t\t \r\n         /** const spySuccessHandler = jasmine.createSpy('spySuccessHandler');\r\n         service.getCrewsForUser(userId, spySuccessHandler, failureHandler );\r\n         expect(spySuccessHandler).toHaveBeenCalled(); **/\r\n\t\t \r\n\t\t \r\n\t\t /**\r\n\t\tvar spySuccessHandler = jasmine.createSpy('success222');\r\n\t\tvar spyFailureHandler = jasmine.createSpy('failure');\r\n\t\tjasmine.Ajax.withMock(function() {\r\n\t\t\tservice.getCrewsForUser(userId, spySuccessHandler, spyFailureHandler );\r\n\t\t\texpect(spySuccessHandler).toHaveBeenCalled();\r\n\t\t}); **/\r\n      });\r\n/**\r\n      it('will call the error handler when the ajax call is unsuccessful', ()=>{\r\n         spyOn($, 'ajax').and.callFake( function(ajx) {\r\n            ajx.error({});\r\n         });\r\n         const spyFailureHandler = jasmine.createSpy('spyFailureHandler');\r\n         service.getCrewsForUser(userId, successHandler, spyFailureHandler );\r\n         expect(spyFailureHandler).toHaveBeenCalled();\r\n      });\r\n**/\r\n\r\n//      it('will call the success handler with empty list when user belongs to no crews', ()=>{\r\n//\r\n//         //\r\n//         // the following test does exercise the behaviour but does not really have anything to\r\n//         // do with the list being returned, the ajax call simply calls the success handler with\r\n//         // whatever data it is provided... see test below as proof\r\n//         //\r\n//         // I think this and the behaviours below are all actually behaviours of the endpoint\r\n//         // and not this service\r\n//         //\r\n//         // so instead of this test, maybe we should just be writing a test to \"expect\" that the\r\n//         // successHandler function is called when the ajax call is successful\r\n//         // (already written above)\r\n//         //\r\n//\r\n//         const expectedResult = 'expected';\r\n//\r\n//         spyOn($, 'ajax').and.callFake( (e) => {\r\n//            return e.success( expectedResult, 'fake textStatus', 'fake jqXHR' );\r\n//         });\r\n//\r\n//         let actualResult;\r\n//         const userId = 'user';\r\n//         const successHandler = function(data){ actualResult = data; };\r\n//         const failureHandler = function(){};\r\n//\r\n//         service.getCrewsForUser(userId, successHandler, failureHandler );\r\n//\r\n//         expect(actualResult).toEqual(expectedResult);\r\n//\r\n//      });\r\n//\r\n//\r\n//\r\n//      it('will call the success handler with the list of crews to which user belongs when the user belongs to all crews', ()=>{\r\n//\r\n//      });\r\n//\r\n//      it('will call the success handler with the list of crews to which user belongs when the user belongs to some crews', ()=>{\r\n//\r\n//      });\r\n//\r\n//      it('will call the failure handler with Error msg when rest End Point is not accessible', ()=>{\r\n//\r\n//      });\r\n\r\n   });\r\n\r\n});","/* global expect */\r\nimport FollowOnTaskDefinitionSearchConfig from './followOnTaskDefinitionSearchConfig.js';\r\n\r\ndescribe('FollowOnTaskDefinitionSearchConfig followOnTask/followOnTaskDefinitionSearchConfig.js', function() {\r\n\r\n   it('throws exception on empty data parameter', function() {\r\n      expect(function() {\r\n         let config = new FollowOnTaskDefinitionSearchConfig();\r\n      }).toThrowError(\"The response data suppose to be in array form\");\r\n   });\r\n   \r\n   it('throws exception with a object type data parameter instead of array', function() {\r\n      expect(function() {\r\n         let data = {};\r\n         let config = new FollowOnTaskDefinitionSearchConfig(data);\r\n      }).toThrowError(\"The response data suppose to be in array form\");\r\n   });\r\n   \r\n   it('creates a valid config object', function() {\r\n      let data = [];\r\n      let config = new FollowOnTaskDefinitionSearchConfig(data);\r\n      \r\n      expect(config.name).toBe('followOnTaskDefnSearch');\r\n      expect(config.limit).toBe(50);\r\n      expect(config.minLength).toBe(1);\r\n   });\r\n\r\n});\r\n","/* global $, expect, jasmine, spyOn, $, setFixtures */\r\n/**\r\n * Create Follow-on Task Search Test Suite\r\n **/\r\n\r\nimport FollowOnTaskDefinitionSearchController from './followOnTaskDefinitionSearchController.js';\r\n\r\ndescribe('FollowOnTaskDefinitionSearchController followOnTask/followOnTaskDefinitionSearchController.js', function() {\r\n   let restApiUrl = \"/someRestApi\";\r\n\r\n   function getGoodController() {\r\n      return new FollowOnTaskDefinitionSearchController('followOnTaskSearchQuery',\r\n         'idButtonOk',\r\n         'idTypeaheadNotFoundMessage',\r\n         'idFieldFollowOnTaskDefnUuid',\r\n         'idfollowOnTaskDefinitionRestAPI');\r\n   }\r\n\r\n   function setUpHTMLFixture() {\r\n      setFixtures(\r\n         '<form id=\"form-typeahead-test\" name=\"form-typeahead-test\">' +\r\n         '  <div class=\"typeahead__container\">' +\r\n         '     <div class=\"typeahead__field\">' +\r\n         '        <span class=\"typeahead__query\">' +\r\n         '          <input class= \"js-typeahead-test\" id=\"followOnTaskSearchQuery\" name=\"followOnTaskSearchQuery\">' +\r\n         '        </span>' +\r\n         '     </div>' +\r\n         '  </div>' +\r\n         '  <button id=\"idButtonOk\" title=\"mytitle\">Ok</button>' +\r\n         '  <input type=\"hidden\" name=\"aFollowOnTaskDefinitionUuid\" id=\"idFieldFollowOnTaskDefnUuid\">' +\r\n         '  <input type=\"hidden\" id=\"idTypeaheadNotFoundMessage\" value=\"web.msg.MSG_NO_MATCHING_FOLLOWON_TASK_DEFINITIONS\">' +\r\n         '  <input type=\"hidden\" id=\"idfollowOnTaskDefinitionRestAPI\" value=\"' + restApiUrl + '\"' +\r\n         '</form>');\r\n   }\r\n\r\n   beforeEach(function() {\r\n      jasmine.Ajax.install();\r\n      setUpHTMLFixture();\r\n      this.okButtonEl = $('#idButtonOk');\r\n      this.fieldFollowOnTaskDefnUuidEl = $('#idFieldFollowOnTaskDefnUuid');\r\n   });\r\n\r\n   afterEach(function() {\r\n      jasmine.Ajax.uninstall();\r\n   });\r\n\r\n   it(\"Should have a button with OK label\", function() {\r\n      expect(this.okButtonEl).toHaveText(\"Ok\");\r\n   });\r\n\r\n   it(\"Should throw error indicating missing typeaheadId\", function() {\r\n\r\n      expect(function() {\r\n         new FollowOnTaskDefinitionSearchController('FAKE_followOnTaskSearchQuery',\r\n            'FAKE_idButtonOk',\r\n            'FAKE_idTypeaheadNotFoundMessage',\r\n            'FAKE_idFieldFollowOnTaskDefnUuid',\r\n            'FAKE_idfollowOnTaskDefinitionRestAPI');\r\n      }).toThrow();\r\n   });\r\n\r\n   it(\"Should have Ok button enabled\", function() {\r\n      let controller = getGoodController();\r\n      controller.enableOkBtn();\r\n      expect(this.okButtonEl).not.toHaveClass('disabled');\r\n   });\r\n\r\n   it(\"Should have Ok button disabled\", function() {\r\n      let controller = getGoodController();\r\n      controller.disableOkBtn();\r\n      expect(this.okButtonEl).toHaveClass('disabled');\r\n   });\r\n\r\n\r\n   it('returns a properly constructed display value', function() {\r\n      let data = [{\r\n         code: 5,\r\n         configSlotCode: 3,\r\n         name: 'test'\r\n      }];\r\n\r\n      let controller = getGoodController();\r\n      expect(controller.displayFollowOn(null, data[0])).toBe(\"5 - 3 - test\");\r\n   });\r\n\r\n   it(\"Should set and clear selected task definition of output element\", function() {\r\n      let controller = getGoodController();\r\n      controller.setSelectedTaskDefinition({ id: 'someValue' });\r\n      expect(this.fieldFollowOnTaskDefnUuidEl.attr('value')).toBe('someValue');\r\n\r\n      controller.clearSelectedTaskDefinition();\r\n      expect(this.fieldFollowOnTaskDefnUuidEl.attr('value')).toBe('');\r\n   });\r\n\r\n   it('Fetches task definitions successfully', function(done) {\r\n      let controller = getGoodController();\r\n      let responseTaskDefinitions = [\r\n         { \"id\": \"A6AAE18B638740B29B2F34D51CF2CCD5\", \"configSlotCode\": \"BOM123\", \"name\": \"ReqWithImpact1\", \"code\": \"NC14992-REQ1\" },\r\n         { \"id\": \"A6AAE18B638740B29B2F34D51CF2CCD6\", \"configSlotCode\": \"BOM123\", \"name\": \"ReqWithImpact2\", \"code\": \"NC14992-REQ2\" },\r\n         { \"id\": \"A6AAE18B638740B29B2F34D51CF2CCD7\", \"configSlotCode\": \"BOM123\", \"name\": \"ReqWithImpact3\", \"code\": \"NC14992-REQ3\" },\r\n         { \"id\": \"A6AAE18B638740B29B2F34D51CF2CCD8\", \"configSlotCode\": \"BOM123\", \"name\": \"ReqWithImpact4\", \"code\": \"NC14992-REQ4\" },\r\n         { \"id\": \"A6AAE18B638740B29B2F34D51CF2CCD9\", \"configSlotCode\": \"BOM123\", \"name\": \"ReqWithImpact5\", \"code\": \"NC14992-REQ5\" },\r\n         { \"id\": \"A6AAE18B638740B29B2F34D51CF2CCE3\", \"configSlotCode\": \"BOM123\", \"name\": \"ReqWithImpact6\", \"code\": \"NC14992-REQ6\" },\r\n      ];\r\n\r\n      spyOn($, 'ajax').and.callFake(function(e) {\r\n         \r\n         return e.success(responseTaskDefinitions);\r\n      });\r\n\r\n      let okButtonEl = $('#idButtonOk');\r\n      let nativeEl = $(\"#followOnTaskSearchQuery\");\r\n\r\n      // initialize controller\r\n      controller.initialize().then(function() {\r\n         // check to see if ajax was done with proper url\r\n         expect($.ajax.calls.mostRecent().args[0].url).toEqual(restApiUrl);\r\n\r\n         // check if ok button was disabled\r\n         expect(okButtonEl).toHaveClass('disabled');\r\n\r\n         // check if focus was given to component\r\n         expect(nativeEl).toBeFocused();\r\n         done();\r\n      });\r\n\r\n   });\r\n\r\n});\r\n","/* global expect, jasmine, beforeAll, spyOn, $ */\r\nimport FollowOnTaskDefinitionSearchService from './followOnTaskDefinitionSearchService.js';\r\n\r\ndescribe('FollowOnTaskDefinitionSearchService followOnTask/followOnTaskDefinitionSearchService.js', function() {\r\n   let service;\r\n   let url = \"https://www.google.com\";\r\n   let taskDefinitionResponse = [{\r\n      code: 3,\r\n      configSlotCode: 3,\r\n      name: \"Third\"\r\n   }, {\r\n      code: 2,\r\n      configSlotCode: 2,\r\n      name: \"Second\"\r\n   }, {\r\n      code: 1,\r\n      configSlotCode: 1,\r\n      name: \"First\"\r\n   }];\r\n\r\n   beforeAll(function() {\r\n      this.service = FollowOnTaskDefinitionSearchService;\r\n   });\r\n\r\n   it('Sorts task definitions', function() {\r\n      let sortedData = this.service.sortTaskDefinitions(taskDefinitionResponse);\r\n\r\n      expect(sortedData[0].code).toBe(1);\r\n      expect(sortedData[1].code).toBe(2);\r\n      expect(sortedData[2].code).toBe(3);\r\n   });\r\n\r\n   it('Fetches task definitions with error for invalid response', function() {\r\n      jasmine.Ajax.install();\r\n\r\n      spyOn($, 'ajax').and.callFake(function(e) {\r\n         let invalidResponse = {};\r\n         return e.success(invalidResponse);\r\n      });\r\n\r\n      expect(function() {\r\n         this.service.getFollowOnTaskDefinitions(url);\r\n      }).toThrow();\r\n\r\n      jasmine.Ajax.uninstall();\r\n\r\n   });\r\n\r\n   it('Fetches task definitions successfully', function() {\r\n      jasmine.Ajax.install();\r\n\r\n      spyOn($, 'ajax').and.callFake(function(e) {\r\n         return e.success(taskDefinitionResponse);\r\n      });\r\n\r\n      this.service.getFollowOnTaskDefinitions(url).then(function(fakeData) {\r\n         expect(fakeData).toEqual(taskDefinitionResponse);\r\n      });\r\n\r\n      jasmine.Ajax.uninstall();\r\n\r\n   });\r\n\r\n});\r\n","/*global expect*/\nimport { Add, Subtract, Multiply } from './featureMath.js';\n\ndescribe('[Dummy]', () => {\n\n\tit('[Add] should add two numbers together and return the result', () => {\n\t\texpect(Add(1, 2)).toBe(3);\n\t});\n\n\tit('[Subtract] should subtract second param from first and return the result', () => {\n\t\texpect(Subtract(1, 2)).toBe(-1);\n\t});\n\n\tit('[Multiply] should multiply two numbers and return the result', () => {\n\t\texpect(Multiply(1, 2)).toBe(2);\n\t});\n\n});\n","export const Add = function(x, y) {\n\treturn(x+y);\n}\n\nexport const Subtract = function(x, y) {\n\treturn(x-y);\n}\n\nexport const Multiply = function(x, y) {\n\treturn(x*y);\n}"],"sourceRoot":""}