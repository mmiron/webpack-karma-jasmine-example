(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],[function(e,t){e.exports=jQuery},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(0);var a=l(i);var o=r(5);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function t(){u(this,t);this.errorMsgPrefix="Error code =  "}n(t,[{key:"getCrewsForUser",value:function t(r){var n=this;if(!r){throw new Error("userId is mandatory")}var i="/maintenix/rest/crews";var o={userId:r};return new e(function(e,t){a.default.ajax({url:i,type:"GET",data:o,success:function t(r,n,i){e(r)},error:function e(r,i,a){var o=n.errorMsgPrefix+r.status;t(o)}})})}},{key:"getDefaultStartAndEndDates",value:function t(r){var n=this;if(!r){throw new Error("userId is mandatory")}var i="/maintenix/rest/datetime/getCurrent";var o={userId:r};return new e(function(e,t){a.default.ajax({url:i,type:"GET",data:o,success:function r(i,a,o){var s=new Date(i.startYear,i.startMonth-1,i.startDayOfMonth,i.startHourInDay,i.startMinute);var l=new Date(i.endYear,i.endMonth-1,i.endDayOfMonth,i.endHourInDay,i.endMinute);var u={};u.startDate=n.formatDate(s);u.startTime=n.formatTime(s);u.startTimeZone=i.startTimezone;try{n.validateDateFormat(u.startDate)}catch(e){t("default startDate failed validation: "+e.message)}try{n.validateTimeFormat(u.startTime)}catch(e){t("default startTime failed validation: "+e.message)}u.endDate=n.formatDate(l);u.endTime=n.formatTime(l);u.endTimeZone=i.endTimezone;try{n.validateDateFormat(u.endDate)}catch(e){t("default endDate failed validation: "+e.message)}try{n.validateTimeFormat(u.endTime)}catch(e){t("default endTime failed validation: "+e.message)}e(u)},error:function e(r,i,a){var o=n.errorMsgPrefix+r.status;t(o)}})})}},{key:"performSearch",value:function t(r){var n=this;return new e(function(e,t){var i=r.showCompleteTasks==true?false:true;var o={onlyWorkscoped:true,onlyContainingLabour:true,assignedToCrewId:r.crewId,minScheduledStartDateTime:r.startDateTime,maxScheduledStartDateTime:r.endDateTime,excludeCompleted:i};var s="/maintenix/rest/tasks";a.default.ajax({url:s,data:o,type:"GET",success:function t(r,n,i){e(r)},error:function e(r,i,a){var o=n.errorMsgPrefix+r.status;t(o)}})})}},{key:"updateScheduledHours",value:function e(t,r,n){var i=this;var o={scheduledHours:n};a.default.ajax({url:"/maintenix/rest/tasks/"+t+"/labours/"+r,type:"PUT",contentType:"application/json",data:JSON.stringify(o),error:function e(t,r,n){var a=i.errorMsgPrefix+t.status;new Error(a)}})}},{key:"updateActualHours",value:function e(t,r,n){var i=this;var o={actualHours:n};a.default.ajax({url:"/maintenix/rest/tasks/"+t+"/labours/"+r,type:"PUT",contentType:"application/json",data:JSON.stringify(o),error:function e(t,r,n){var a=i.errorMsgPrefix+t.status;new Error(a)}})}},{key:"validateDateFormat",value:function e(t){if(!t){throw new Error("dateStr is mandatory.")}if(typeof t!=="string"){throw new Error("dateStr is not a string")}var r=/^(([0-9])|([0-2][0-9])|([3][0-1]))\-(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\-\d{4}$/;var n=t.match(r);if(n==null){throw new Error("dateStr has invalid format.")}return true}},{key:"validateTimeFormat",value:function e(t){if(!t){throw new Error("timeStr is mandatory.")}if(typeof t!=="string"){throw new Error("timeStr is not a string.")}var r=/^$|^(([01][0-9])|(2[0-3])):[0-5][0-9]$/;var n=t.match(r);if(n==null){throw new Error("timeStr has invalid format.")}return true}},{key:"addHours",value:function e(t,r){return new Date(t.getTime()+r*60*60*1e3)}},{key:"formatDate",value:function e(t){var r=(t.getDate()<10?"0":"")+t.getDate()+"-"+this.getMonthShortStr(t.getMonth()+1)+"-"+t.getFullYear();return r}},{key:"formatTime",value:function e(t){var r=(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes();return r}},{key:"getMonthShortStr",value:function e(t){if(t===1)return"JAN";if(t===2)return"FEB";if(t===3)return"MAR";if(t===4)return"APR";if(t===5)return"MAY";if(t===6)return"JUN";if(t===7)return"JUL";if(t===8)return"AUG";if(t===9)return"SEP";if(t===10)return"OCT";if(t===11)return"NOV";if(t===12)return"DEC";return""}}]);return t}();t.default=d}).call(this,r(2))},function(e,t,r){"use strict";e.exports=r(17).Promise},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(0);var a=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function t(){s(this,t)}n(t,null,[{key:"sortTaskDefinitions",value:function e(t){if(!t||!(t instanceof Array)){throw new Error("taskDefinitions expected to be an Array")}return t.sort(function(e,t){var r=e.code>t.code?1:e.code<t.code?-1:0;if(r==0){r=e.configSlotCode>t.configSlotCode?1:e.configSlotCode<t.configSlotCode?-1:0}if(r==0){r=e.name>t.name?1:e.name<t.name?-1:0}return r})}},{key:"getFollowOnTaskDefinitions",value:function t(r){var n=this;return new e(function(e,t){return a.default.ajax({type:"GET",url:r,success:function t(r){var i=n.sortTaskDefinitions(r);e(i)},error:function t(r){e([])}})})}}]);return t}();t.default=l}).call(this,r(2))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function e(t){n(this,e);if(!t||!(t instanceof Array)){throw new Error("The response data suppose to be in array form")}this.data=t;this.name="followOnTaskDefnSearch";this.limit=50;this.minLength=1};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){i(this,e)}n(e,null,[{key:"addHours",value:function e(t,r){return new Date(t.getTime()+r*60*60*1e3)}},{key:"formatDate",value:function e(t){var r=(t.getDate()<10?"0":"")+t.getDate()+"-"+this.getMonthShortStr(t.getMonth()+1)+"-"+t.getFullYear();return r}},{key:"formatTime",value:function e(t){var r=(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes();return r}},{key:"convertTimeToDecimal",value:function e(t){var r=t.split(/[.:]/);var n=parseInt(r[0],10);var i=r[1]?parseInt(r[1],10):0;return n+i/60}},{key:"getMonthShortStr",value:function e(t){if(t===1)return"JAN";else if(t===2)return"FEB";else if(t===3)return"MAR";else if(t===4)return"APR";else if(t===5)return"MAY";else if(t===6)return"JUN";else if(t===7)return"JUL";else if(t===8)return"AUG";else if(t===9)return"SEP";else if(t===10)return"OCT";else if(t===11)return"NOV";else if(t===12)return"DEC";else return""}}]);return e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=t.Add=function e(t,r){return t+r};var i=t.Subtract=function e(t,r){return t-r};var a=t.Multiply=function e(t,r){return t*r}},function(e,t,r){"use strict";var n=r(6);describe("[Dummy]",function(){it("[Add] should add two numbers together and return the result",function(){expect((0,n.Add)(1,2)).toBe(3)});it("[Subtract] should subtract second param from first and return the result",function(){expect((0,n.Subtract)(1,2)).toBe(-1)});it("[Multiply] should multiply two numbers and return the result",function(){expect((0,n.Multiply)(1,2)).toBe(2)})})},function(e,t,r){"use strict";(function(e){var t=r(3);var n=i(t);function i(e){return e&&e.__esModule?e:{default:e}}describe("FollowOnTaskDefinitionSearchService followOnTask/followOnTaskDefinitionSearchService.js",function(){var t=void 0;var r="https://www.google.com";var i=[{code:3,configSlotCode:3,name:"Third"},{code:2,configSlotCode:2,name:"Second"},{code:1,configSlotCode:1,name:"First"}];beforeAll(function(){this.service=n.default});it("Sorts task definitions",function(){var e=this.service.sortTaskDefinitions(i);expect(e[0].code).toBe(1);expect(e[1].code).toBe(2);expect(e[2].code).toBe(3)});it("Fetches task definitions with error for invalid response",function(){jasmine.Ajax.install();spyOn(e,"ajax").and.callFake(function(e){var t={};return e.success(t)});expect(function(){this.service.getFollowOnTaskDefinitions(r)}).toThrow();jasmine.Ajax.uninstall()});it("Fetches task definitions successfully",function(){jasmine.Ajax.install();spyOn(e,"ajax").and.callFake(function(e){return e.success(i)});this.service.getFollowOnTaskDefinitions(r).then(function(e){expect(e).toEqual(i)});jasmine.Ajax.uninstall()})})}).call(this,r(0))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(0);var a=d(i);var o=r(4);var s=d(o);var l=r(3);var u=d(l);function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=function(){function e(t,r,n,i,o){c(this,e);var s=this;this.notFoundMsgEl=(0,a.default)("#"+n);this.okBtnEl=(0,a.default)("#"+r);this.typeAheadSearchInputEl=(0,a.default)("#"+t);this.followOnTaskDefnUuidOuputEl=(0,a.default)("#"+i);var l=(0,a.default)("#"+o);if(!this.notFoundMsgEl.length>0){throw new Error("Not found message element required")}if(!this.okBtnEl.length>0){throw new Error("Ok button element required")}if(!this.typeAheadSearchInputEl.length>0){throw new Error("Typeahead input element required")}if(!this.followOnTaskDefnUuidOuputEl.length>0){throw new Error("Output followOn task definition UUI input element required")}if(!l.length>0){throw new Error("REST api url element is required")}this.apiUrl=l.val();this.selectedOption="";this.typeAheadSearchInputEl.keydown(function(){setTimeout(function(){if(s.typeAheadSearchInputEl.val()!=s.selectedOption){s.disableOkBtn();s.clearSelectedTaskDefinition()}})});this.initialize=this.initialize.bind(this)}n(e,[{key:"setSelectedTaskDefinition",value:function e(t){if(t){this.typeAheadSearchInputEl.val(this.displayFollowOn(null,t));this.selectedOption=this.typeAheadSearchInputEl.val();this.followOnTaskDefnUuidOuputEl.attr("value",t.id)}}},{key:"clearSelectedTaskDefinition",value:function e(){this.followOnTaskDefnUuidOuputEl.attr("value","")}},{key:"initialize",value:function e(){var t=this;this.disableOkBtn();try{return u.default.getFollowOnTaskDefinitions(this.apiUrl).then(function(e){t.configureTypeAhead(e);t.typeAheadSearchInputEl.focus()})}catch(e){throw new Error("Error while trying to fetch task definitions.",e)}}},{key:"configureTypeAhead",value:function e(t){var r=this;var n=new s.default(t);a.default.each(n.data,function(e,t){t.displayValue=r.displayFollowOn(null,t)});a.default.typeahead({input:r.typeAheadSearchInputEl,highlight:true,name:n.name,limit:n.limit,minLength:n.minLength,display:["displayValue"],emptyTemplate:'<div class="mx-typeahead-msg-notfound">'+r.notFoundMsgEl.val()+"</div>",source:{data:n.data},callback:{onClick:function e(t,n,i,a){a.preventDefault();r.enableOkBtn();r.setSelectedTaskDefinition(i);this.hideLayout()}}})}},{key:"displayFollowOn",value:function e(t,r){if(r){return r.code+" - "+r.configSlotCode+" - "+r.name}}},{key:"enableOkBtn",value:function e(){if(this.okBtnEl){if(this.okBtnEl.attr("originOnClickEvent")){this.okBtnEl.attr("onclick",this.okBtnEl.attr("originOnClickEvent"))}if(this.okBtnEl.attr("originTitle")){this.okBtnEl.attr("title",this.okBtnEl.attr("originTitle"))}this.okBtnEl.removeClass("disabled");this.okBtnEl.removeAttr("disabled");this.okBtnEl.removeAttr("originOnClickEvent");this.okBtnEl.removeAttr("originTitle")}}},{key:"disableOkBtn",value:function e(){if(this.okBtnEl){if(!this.okBtnEl.attr("originOnClickEvent")){this.okBtnEl.attr("originOnClickEvent",this.okBtnEl.attr("onclick"))}if(!this.okBtnEl.attr("originTitle")){this.okBtnEl.attr("originTitle",this.okBtnEl.attr("title"))}this.okBtnEl.addClass("disabled");this.okBtnEl.attr("disabled","disabled");this.okBtnEl.attr("onclick",false);this.okBtnEl.attr("title","")}}}]);return e}();t.default=f},function(e,t,r){"use strict";(function(e){var t=r(9);var n=i(t);function i(e){return e&&e.__esModule?e:{default:e}}describe("FollowOnTaskDefinitionSearchController followOnTask/followOnTaskDefinitionSearchController.js",function(){var t="/someRestApi";function r(){return new n.default("followOnTaskSearchQuery","idButtonOk","idTypeaheadNotFoundMessage","idFieldFollowOnTaskDefnUuid","idfollowOnTaskDefinitionRestAPI")}function i(){setFixtures('<form id="form-typeahead-test" name="form-typeahead-test">'+'  <div class="typeahead__container">'+'     <div class="typeahead__field">'+'        <span class="typeahead__query">'+'          <input class= "js-typeahead-test" id="followOnTaskSearchQuery" name="followOnTaskSearchQuery">'+"        </span>"+"     </div>"+"  </div>"+'  <button id="idButtonOk" title="mytitle">Ok</button>'+'  <input type="hidden" name="aFollowOnTaskDefinitionUuid" id="idFieldFollowOnTaskDefnUuid">'+'  <input type="hidden" id="idTypeaheadNotFoundMessage" value="web.msg.MSG_NO_MATCHING_FOLLOWON_TASK_DEFINITIONS">'+'  <input type="hidden" id="idfollowOnTaskDefinitionRestAPI" value="'+t+'"'+"</form>")}beforeEach(function(){jasmine.Ajax.install();i();this.okButtonEl=e("#idButtonOk");this.fieldFollowOnTaskDefnUuidEl=e("#idFieldFollowOnTaskDefnUuid")});afterEach(function(){jasmine.Ajax.uninstall()});it("Should have a button with OK label",function(){expect(this.okButtonEl).toHaveText("Ok")});it("Should throw error indicating missing typeaheadId",function(){expect(function(){new n.default("FAKE_followOnTaskSearchQuery","FAKE_idButtonOk","FAKE_idTypeaheadNotFoundMessage","FAKE_idFieldFollowOnTaskDefnUuid","FAKE_idfollowOnTaskDefinitionRestAPI")}).toThrow()});it("Should have Ok button enabled",function(){var e=r();e.enableOkBtn();expect(this.okButtonEl).not.toHaveClass("disabled")});it("Should have Ok button disabled",function(){var e=r();e.disableOkBtn();expect(this.okButtonEl).toHaveClass("disabled")});it("returns a properly constructed display value",function(){var e=[{code:5,configSlotCode:3,name:"test"}];var t=r();expect(t.displayFollowOn(null,e[0])).toBe("5 - 3 - test")});it("Should set and clear selected task definition of output element",function(){var e=r();e.setSelectedTaskDefinition({id:"someValue"});expect(this.fieldFollowOnTaskDefnUuidEl.attr("value")).toBe("someValue");e.clearSelectedTaskDefinition();expect(this.fieldFollowOnTaskDefnUuidEl.attr("value")).toBe("")});it("Fetches task definitions successfully",function(n){var i=r();var a=[{id:"A6AAE18B638740B29B2F34D51CF2CCD5",configSlotCode:"BOM123",name:"ReqWithImpact1",code:"NC14992-REQ1"},{id:"A6AAE18B638740B29B2F34D51CF2CCD6",configSlotCode:"BOM123",name:"ReqWithImpact2",code:"NC14992-REQ2"},{id:"A6AAE18B638740B29B2F34D51CF2CCD7",configSlotCode:"BOM123",name:"ReqWithImpact3",code:"NC14992-REQ3"},{id:"A6AAE18B638740B29B2F34D51CF2CCD8",configSlotCode:"BOM123",name:"ReqWithImpact4",code:"NC14992-REQ4"},{id:"A6AAE18B638740B29B2F34D51CF2CCD9",configSlotCode:"BOM123",name:"ReqWithImpact5",code:"NC14992-REQ5"},{id:"A6AAE18B638740B29B2F34D51CF2CCE3",configSlotCode:"BOM123",name:"ReqWithImpact6",code:"NC14992-REQ6"}];spyOn(e,"ajax").and.callFake(function(e){return e.success(a)});var o=e("#idButtonOk");var s=e("#followOnTaskSearchQuery");i.initialize().then(function(){expect(e.ajax.calls.mostRecent().args[0].url).toEqual(t);expect(o).toHaveClass("disabled");expect(s).toBeFocused();n()})})})}).call(this,r(0))},function(e,t,r){"use strict";var n=r(4);var i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}describe("FollowOnTaskDefinitionSearchConfig followOnTask/followOnTaskDefinitionSearchConfig.js",function(){it("throws exception on empty data parameter",function(){expect(function(){var e=new i.default}).toThrowError("The response data suppose to be in array form")});it("throws exception with a object type data parameter instead of array",function(){expect(function(){var e={};var t=new i.default(e)}).toThrowError("The response data suppose to be in array form")});it("creates a valid config object",function(){var e=[];var t=new i.default(e);expect(t.name).toBe("followOnTaskDefnSearch");expect(t.limit).toBe(50);expect(t.minLength).toBe(1)})})},function(e,t,r){"use strict";var n=r(0);var i=s(n);var a=r(1);var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}describe("TaskSupervisionService.js",function(){describe("getCrewsForUser",function(){var e=new o.default;var t="user";var r=function e(){};var n=function e(){};beforeEach(function(){jasmine.Ajax.install()});afterEach(function(){jasmine.Ajax.uninstall()});it("will call the success handler when the ajax call is successful",function(){spyOn(i.default,"ajax").and.callFake(function(e){e.success({})})})})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){i(this,e)}n(e,null,[{key:"validateHours",value:function e(t){var r=t.split(".");if(r.length>0){if(r[0].length>4){return false}if(r.length==2){if(r[1].length>5){return false}}else if(r.length>2){return false}}return true}},{key:"validateDateFormat",value:function e(t){if(!t){throw new Error("dateStr is mandatory.")}if(typeof t!=="string"){throw new Error("dateStr is not a string")}var r=/^(([0-9])|([0-2][0-9])|([3][0-1]))\-(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\-\d{4}$/;var n=t.match(r);if(n==null){throw new Error("dateStr has invalid format.")}return true}},{key:"validateTimeFormat",value:function e(t){if(!t){throw new Error("timeStr is mandatory.")}if(typeof t!=="string"){throw new Error("timeStr is not a string.")}var r=/^$|^(([01][0-9])|(2[0-3])):[0-5][0-9]$/;var n=t.match(r);if(n==null){throw new Error("timeStr has invalid format.")}return true}}]);return e}();t.default=a},function(e,t){},function(e,t,r){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i;i=function(){return this}();try{i=i||Function("return this")()||(1,eval)("this")}catch(e){if((typeof window==="undefined"?"undefined":n(window))==="object")i=window}e.exports=i},function(e,t,r){"use strict";var n=e.exports={};var i;var a;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){i=setTimeout}else{i=o}}catch(e){i=o}try{if(typeof clearTimeout==="function"){a=clearTimeout}else{a=s}}catch(e){a=s}})();function l(e){if(i===setTimeout){return setTimeout(e,0)}if((i===o||!i)&&setTimeout){i=setTimeout;return setTimeout(e,0)}try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function u(e){if(a===clearTimeout){return clearTimeout(e)}if((a===s||!a)&&clearTimeout){a=clearTimeout;return clearTimeout(e)}try{return a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}var d=[];var c=false;var f;var h=-1;function v(){if(!c||!f){return}c=false;if(f.length){d=f.concat(d)}else{h=-1}if(d.length){m()}}function m(){if(c){return}var e=l(v);c=true;var t=d.length;while(t){f=d;d=[];while(++h<t){if(f){f[h].run()}}h=-1;t=d.length}f=null;c=false;u(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}d.push(new p(e,t));if(d.length===1&&!c){l(m)}};function p(e,t){this.fun=e;this.array=t}p.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function w(){}n.on=w;n.addListener=w;n.once=w;n.off=w;n.removeListener=w;n.removeAllListeners=w;n.emit=w;n.prependListener=w;n.prependOnceListener=w;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},function(e,t,r){"use strict";(function(n,i){var a,o;var s;var l=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */
(function(n,i){(false?undefined:l(t))==="object"&&typeof e!=="undefined"?e.exports=i():true?!(a=i,o=typeof a==="function"?a.call(t,r,t,e):a,o!==undefined&&(e.exports=o)):undefined})(undefined,function(){"use strict";function e(e){return typeof e==="function"||(typeof e==="undefined"?"undefined":l(e))==="object"&&e!==null}function t(e){return typeof e==="function"}var a=undefined;if(!Array.isArray){a=function e(t){return Object.prototype.toString.call(t)==="[object Array]"}}else{a=Array.isArray}var o=a;var u=0;var d=undefined;var c=undefined;var f=function e(t,r){I[u]=t;I[u+1]=r;u+=2;if(u===2){if(c){c(D)}else{A()}}};function h(e){c=e}function v(e){f=e}var m=typeof window!=="undefined"?window:undefined;var p=m||{};var w=p.MutationObserver||p.WebKitMutationObserver;var y=typeof self==="undefined"&&typeof n!=="undefined"&&{}.toString.call(n)==="[object process]";var g=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function E(){return function(){return n.nextTick(D)}}function T(){return function(){d(D)}}function k(){var e=0;var t=new w(D);var r=document.createTextNode("");t.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function b(){var e=new MessageChannel;e.port1.onmessage=D;return function(){return e.port2.postMessage(0)}}function S(){var e=setTimeout;return function(){return e(D,1)}}var I=new Array(1e3);function D(){for(var e=0;e<u;e+=2){var t=I[e];var r=I[e+1];t(r);I[e]=undefined;I[e+1]=undefined}u=0}function F(){try{var e=s;var t=r(14);d=t.runOnLoop||t.runOnContext;return T()}catch(e){return S()}}var A=undefined;if(y){A=E()}else if(w){A=k()}else if(g){A=b()}else if(m===undefined&&"function"==="function"){A=F()}else{A=S()}function O(e,t){var r=arguments;var n=this;var i=new this.constructor(B);if(i[C]===undefined){ne(i)}var a=n._state;if(a){(function(){var e=r[a-1];f(function(){return X(a,i,e,n._result)})})()}else{Z(n,i,e,t)}return i}function _(e){var t=this;if(e&&(typeof e==="undefined"?"undefined":l(e))==="object"&&e.constructor===t){return e}var r=new t(B);J(r,e);return r}var C=Math.random().toString(36).substring(16);function B(){}var x=void 0;var M=1;var P=2;var j=new Q;function H(){return new TypeError("You cannot resolve a promise with itself")}function R(){return new TypeError("A promises callback cannot return that same promise.")}function W(e){try{return e.then}catch(e){j.error=e;return j}}function N(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function U(e,t,r){f(function(e){var n=false;var i=N(r,t,function(r){if(n){return}n=true;if(t!==r){J(e,r)}else{G(e,r)}},function(t){if(n){return}n=true;Y(e,t)},"Settle: "+(e._label||" unknown promise"));if(!n&&i){n=true;Y(e,i)}},e)}function L(e,t){if(t._state===M){G(e,t._result)}else if(t._state===P){Y(e,t._result)}else{Z(t,undefined,function(t){return J(e,t)},function(t){return Y(e,t)})}}function $(e,r,n){if(r.constructor===e.constructor&&n===O&&r.constructor.resolve===_){L(e,r)}else{if(n===j){Y(e,j.error)}else if(n===undefined){G(e,r)}else if(t(n)){U(e,r,n)}else{G(e,r)}}}function J(t,r){if(t===r){Y(t,H())}else if(e(r)){$(t,r,W(r))}else{G(t,r)}}function q(e){if(e._onerror){e._onerror(e._result)}V(e)}function G(e,t){if(e._state!==x){return}e._result=t;e._state=M;if(e._subscribers.length!==0){f(V,e)}}function Y(e,t){if(e._state!==x){return}e._state=P;e._result=t;f(q,e)}function Z(e,t,r,n){var i=e._subscribers;var a=i.length;e._onerror=null;i[a]=t;i[a+M]=r;i[a+P]=n;if(a===0&&e._state){f(V,e)}}function V(e){var t=e._subscribers;var r=e._state;if(t.length===0){return}var n=undefined,i=undefined,a=e._result;for(var o=0;o<t.length;o+=3){n=t[o];i=t[o+r];if(n){X(r,n,i,a)}else{i(a)}}e._subscribers.length=0}function Q(){this.error=null}var z=new Q;function K(e,t){try{return e(t)}catch(e){z.error=e;return z}}function X(e,r,n,i){var a=t(n),o=undefined,s=undefined,l=undefined,u=undefined;if(a){o=K(n,i);if(o===z){u=true;s=o.error;o=null}else{l=true}if(r===o){Y(r,R());return}}else{o=i;l=true}if(r._state!==x){}else if(a&&l){J(r,o)}else if(u){Y(r,s)}else if(e===M){G(r,o)}else if(e===P){Y(r,o)}}function ee(e,t){try{t(function t(r){J(e,r)},function t(r){Y(e,r)})}catch(t){Y(e,t)}}var te=0;function re(){return te++}function ne(e){e[C]=te++;e._state=undefined;e._result=undefined;e._subscribers=[]}function ie(e,t){this._instanceConstructor=e;this.promise=new e(B);if(!this.promise[C]){ne(this.promise)}if(o(t)){this._input=t;this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0){G(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){G(this.promise,this._result)}}}else{Y(this.promise,ae())}}function ae(){return new Error("Array Methods must be provided an Array")}ie.prototype._enumerate=function(){var e=this.length;var t=this._input;for(var r=0;this._state===x&&r<e;r++){this._eachEntry(t[r],r)}};ie.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;var n=r.resolve;if(n===_){var i=W(e);if(i===O&&e._state!==x){this._settledAt(e._state,t,e._result)}else if(typeof i!=="function"){this._remaining--;this._result[t]=e}else if(r===ce){var a=new r(B);$(a,e,i);this._willSettleAt(a,t)}else{this._willSettleAt(new r(function(t){return t(e)}),t)}}else{this._willSettleAt(n(e),t)}};ie.prototype._settledAt=function(e,t,r){var n=this.promise;if(n._state===x){this._remaining--;if(e===P){Y(n,r)}else{this._result[t]=r}}if(this._remaining===0){G(n,this._result)}};ie.prototype._willSettleAt=function(e,t){var r=this;Z(e,undefined,function(e){return r._settledAt(M,t,e)},function(e){return r._settledAt(P,t,e)})};function oe(e){return new ie(this,e).promise}function se(e){var t=this;if(!o(e)){return new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}else{return new t(function(r,n){var i=e.length;for(var a=0;a<i;a++){t.resolve(e[a]).then(r,n)}})}}function le(e){var t=this;var r=new t(B);Y(r,e);return r}function ue(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function de(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function ce(e){this[C]=re();this._result=this._state=undefined;this._subscribers=[];if(B!==e){typeof e!=="function"&&ue();this instanceof ce?ee(this,e):de()}}ce.all=oe;ce.race=se;ce.resolve=_;ce.reject=le;ce._setScheduler=h;ce._setAsap=v;ce._asap=f;ce.prototype={constructor:ce,then:O,catch:function e(t){return this.then(null,t)}};function fe(){var e=undefined;if(typeof i!=="undefined"){e=i}else if(typeof self!=="undefined"){e=self}else{try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if(r==="[object Promise]"&&!t.cast){return}}e.Promise=ce}fe();ce.polyfill=fe;ce.Promise=ce;return ce})}).call(this,r(16),r(15))},function(e,t,r){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a=r(1);var o=c(a);var s=r(13);var l=c(s);var u=r(5);var d=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var h=function(){function t(e){f(this,t);this.userId=e.userId;if(!this.userId){throw new Error("userId is mandatory")}this.crewsFieldId=e.crewsFieldId;if(!this.crewsFieldId){throw new Error("crewsFieldId is mandatory")}var r=document.getElementById(this.crewsFieldId);if(!r||r.tagName!="SELECT"){throw new Error("crewsFieldId must be a SELECT element")}this.service=e.TaskSupervisionService||new o.default;this.isAllowedToSearch=e.isAllowedToSearch==="true";this.isAllowedToEditSchedledHours=e.isAllowedToEditSchedledHours==="true";this.isAllowedToEditActualHours=e.isAllowedToEditActualHours==="true";this.startDateWidgetId=e.startFieldId;this.endDateWidgetId=e.endFieldId;this.showCompleteId=e.showCompleteId;this.searchButtonId=e.searchButtonId;this.searchResultsId=e.searchResultsId;this.noSearchResultsMessage=e.noSearchResultsMessage;this.laborRowElaspedTimeThreshold=e.laborRowElaspedTimeThreshold;this.defaultShowComplete=true;this.isScheduledHoursCellEditable.bind(this);this.handleScheduleHoursEdit.bind(this);this.handleActualHoursEdit.bind(this);this.actualHourCellFormatter.bind(this)}i(t,[{key:"getServiceInstance",value:function e(){return this.service}},{key:"init",value:function t(){var r=this;return new e(function(t,n){r.initShowCompleteTasksWidget();r.initResultsTable();r.initSearchButton();e.all([r.initCrewsWidget(),r.initStartAndEndWidgets()]).then(function(e){r.populateCrewsWidget(e[0]);r.setStartAndEndWidgets(e[1]);r.performSearch().then(function(){return t()})}).catch(function(e){throw new Error(e)})})}},{key:"initCrewsWidget",value:function e(){return this.service.getCrewsForUser(this.userId)}},{key:"initStartAndEndWidgets",value:function e(){if(!this.userId){throw new Error("userId is mandatory")}try{this.validateStartEndWidgetIds();var t=this.buildFieldIdsForDateTimeWidget(this.startDateWidgetId);var r=this.buildFieldIdsForDateTimeWidget(this.endDateWidgetId);this.setStartEndElemAttrs(t,r);this.validateStartEndElems()}catch(e){console.error("initStartAndEndWidgets",e)}this.startDateElem.disabled=true;this.endDateElem.disabled=true;return this.service.getDefaultStartAndEndDates(this.userId)}},{key:"initShowCompleteTasksWidget",value:function e(){document.getElementById(this.showCompleteId).checked=this.defaultShowComplete}},{key:"initResultsTable",value:function e(){var t=this;var r=["technician","labourSkill","labourStatus","jobStopReason","elapsedHoursMinutes","scheduledHours","actualHours"];this.table=new Tabulator("#"+this.searchResultsId,{columns:[{title:"Task Id",field:"taskId",visible:false},{title:"Labour Row Id",field:"labourRowId",visible:false},{title:"From Job Stop",field:"isFromJobStop",visible:false},{title:"Line No",field:"lineNo",sorter:"number",align:"center"},{title:"Task",field:"taskName",sorter:"string",align:"center"},{title:"Task Status",field:"taskStatus",sorter:"string",align:"center"},{title:"Task Class - Subclass",field:"taskClassSubclass",sorter:"string",align:"center"},{title:"Task Priority",field:"taskPriority",sorter:"string",align:"center"},{title:"Aircraft",field:"aircraft",sorter:"string",align:"center"},{title:"Work Package",field:"workpackage",sorter:"string",align:"center"},{title:"Work Location",field:"workLocation",sorter:"string",align:"center"},{title:"Work Area",field:"workArea",sorter:"string",align:"center"},{title:"Scheduled Start Date",field:"scheduledStartDate",sorter:"string",align:"center"},{title:"Actual Start Date",field:"actualStartDate",sorter:"string",align:"center"},{field:"Selected",align:"center",width:50,headerSort:false,formatter:function e(){return'<input id="checkBox" type="checkbox">'}},{title:"Technician",field:"technician",sorter:"string",align:"center"},{title:"Skill",field:"labourSkill",sorter:"string",align:"center"},{title:"Labour Row Status",field:"labourStatus",sorter:"string",align:"center"},{title:"Job Stop Reason",field:"jobStopReason",sorter:"string",align:"center"},{title:"Elapsed Time",field:"elapsedHoursMinutes",sorter:"string",align:"center",formatter:this.isElapsedTimeGreaterThanThreshold.bind(this)},{title:"Sched. Hours",field:"scheduledHours",sorter:"string",align:"center",editor:"input",validator:["min: 0",this.validateHours],editable:this.isScheduledHoursCellEditable,cellEdited:this.handleScheduleHoursEdit},{title:"Actual Hours",field:"actualHours",sorter:"string",align:"center",editor:"input",validator:["min: 0",this.validateHours],editable:this.isActualHoursCellEditable,cellEdited:this.handleActualHoursEdit,formatter:this.actualHourCellFormatter}],dataSorted:function e(n,i){if(t.table){if(n.some(function(e){return r.indexOf(e.field)>=0})){t.table.setGroupBy()}else{t.table.setGroupBy("taskId")}}},groupHeader:function e(t,r,n,i){return n[0].taskName+"<span style='color:#000; margin-left:10px;'>("+r+" items)</span>"},groupToggleElement:"header",placeholder:this.noSearchResultsMessage})}},{key:"actualHourCellFormatter",value:function e(t){if(!t){return t}if(this.actualHourGreaterThanScheduledHours(t)){t.getElement().classList.add("highlightActualHoursCell")}var r=t.getValue();return r?r:""}},{key:"actualHourGreaterThanScheduledHours",value:function e(t){var r=t.getValue();if(!r){return r}var n=t.getRow().getData().scheduledHours;if(!n){return n}return parseInt(r)>parseInt(n)}},{key:"initSearchButton",value:function e(){var t=this;var r=n("#"+this.searchButtonId);if(this.isAllowedToSearch){r.show();r.click(function(e){e.preventDefault();t.performSearch()})}else{r.hide()}}},{key:"performSearch",value:function t(){var r=this;return new e(function(e,t){if(r.isAllowedToSearch){var n={crewId:document.getElementById(r.crewsFieldId).value,startDateTime:r.formatDateTime(r.startDateWidgetId),endDateTime:r.formatDateTime(r.endDateWidgetId),showCompleteTasks:document.getElementById(r.showCompleteId).checked};return r.service.performSearch(n).then(function(e){r.updateResultsTable(e)})}else{e()}})}},{key:"populateCrewsWidget",value:function e(t){n("#"+this.crewsFieldId).find("option").remove();t.sort(this.compareCrewAlphanumerically);if(t){var r=document.getElementById(this.crewsFieldId);var i=r.options;t.forEach(function(e,t){var r=document.createElement("option");r.text=e.label;r.value=e.id;i.add(r)});r.selectedIndex=0}}},{key:"compareCrewAlphanumerically",value:function e(t,r){if(t.label<r.label)return-1;if(t.label>r.label)return 1;return 0}},{key:"handleFailureToGetCrewsForUser",value:function e(t){throw new Error(t)}},{key:"validateStartEndWidgetIds",value:function e(){if(!this.startDateWidgetId){throw new Error("startFieldId is mandatory")}if(typeof this.startDateWidgetId!=="string"){throw new Error("startFieldId is not a string")}if(!this.endDateWidgetId){throw new Error("endFieldId is mandatory")}if(typeof this.endDateWidgetId!=="string"){throw new Error("endFieldId is not a string")}}},{key:"buildFieldIdsForDateTimeWidget",value:function e(t){return{dateFieldId:t+"_$DATE$",timeFieldId:t+"_$TIME$",timeZoneFieldId:t+"_$TIMEZONE_DISPLAY$",startPickerId:t+"_SelectBtn"}}},{key:"setStartEndElemAttrs",value:function e(t,r){this.startDateElem=document.getElementById(t.dateFieldId);this.startTimeElem=document.getElementById(t.timeFieldId);this.startTimeZoneElem=document.getElementById(t.timeZoneFieldId);this.startPickerElem=document.getElementById(t.startPickerId);this.endDateElem=document.getElementById(r.dateFieldId);this.endTimeElem=document.getElementById(r.timeFieldId);this.endTimeZoneElem=document.getElementById(r.timeZoneFieldId);this.endPickerElem=document.getElementById(r.startPickerId)}},{key:"validateStartEndElems",value:function e(){if(!this.startDateElem){throw new Error("start date field does not exist in the DOM.")}if(!this.startTimeElem){throw new Error("start time field does not exist in the DOM.")}if(!this.startTimeZoneElem){throw new Error("start time zone field does not exist in the DOM.")}if(!this.startPickerElem){throw new Error("start date picker field does not exist in the DOM.")}if(!this.endDateElem){throw new Error("end date field does not exist in the DOM.")}if(!this.endTimeElem){throw new Error("end time field does not exist in the DOM.")}if(!this.endTimeZoneElem){throw new Error("end time zone field does not exist in the DOM.")}if(!this.endPickerElem){throw new Error("end date picker field does not exist in the DOM.")}}},{key:"setStartAndEndWidgets",value:function e(t){this.startDateElem.value=t.startDate;this.startTimeElem.value=t.startTime;this.startTimeZoneElem.value=t.startTimeZone;this.endDateElem.value=t.endDate;this.endTimeElem.value=t.endTime;this.endTimeZoneElem.value=t.endTimeZone}},{key:"updateResultsTable",value:function e(t){var r=true;this.table.clearData();this.table.addData(t,r);this.table.setSort([{column:"lineNo",dir:"asc"}])}},{key:"formatDateTime",value:function e(t){var r=this.buildFieldIdsForDateTimeWidget(t);var n=document.getElementById(r.dateFieldId).value;var i=document.getElementById(r.timeFieldId).value;return n+" "+i}},{key:"isScheduledHoursCellEditable",value:function e(t){if(this.isAllowedToEditSchedledHours){var r=t.getRow().getData();if(r.isFromJobStop&&r.labourStatus=="ACTV"){return true}}return false}},{key:"isActualHoursCellEditable",value:function e(t){if(this.isAllowedToEditActualHours){var r=t.getRow().getData();if(r.labourStatus=="COMPLETE"){return true}}return false}},{key:"isElapsedTimeGreaterThanThreshold",value:function e(t){var r=t.getValue();if(r){var n=l.default.convertTimeToDecimal(r);if(n>parseFloat(this.laborRowElaspedTimeThreshold)){return"<span class='elapsedTimeExceedsThreshold'>"+r+"</span>"}}return r}},{key:"validateHours",value:function e(t,r){return l.default.validateHours(r)}},{key:"handleScheduleHoursEdit",value:function e(t){var r=t.getRow().getData();this.service.updateScheduledHours(r.taskId,r.labourRowId,t.getValue())}},{key:"handleActualHoursEdit",value:function e(t){var r=t.getRow().getData();this.service.updateActualHours(r.taskId,r.labourRowId,t.getValue())}}]);return t}();t.default=h}).call(this,r(2),r(0))},function(e,t,r){"use strict";(function(e){var t=r(18);var n=o(t);var i=r(1);var a=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}describe("TaskSupervisionController",function(){describe("initCrewsWidget",function(){var t;var r=[{id:"1",code:"crew1",description:"crew one"},{id:"2",code:"crew2",description:"crew two"},{id:"3",code:"crew3",description:"crew three"}];var i=[{id:"1",code:"crew1",description:"crew one"}];var a=(t={startYear:"2019",startMonth:"01",startDayOfMonth:"01",startHourInDay:"12"},s(t,"startHourInDay","00"),s(t,"startMinute","00"),s(t,"endYear","2019"),s(t,"endMonth","02"),s(t,"endDayOfMonth","01"),s(t,"endHourInDay","12"),s(t,"endMinute","00"),s(t,"startTimezone","EST"),t);var o=void 0;var l=void 0;beforeEach(function(){jasmine.Ajax.install();this.validParms={userId:"userId",crewsFieldId:"crewsFieldId",startFieldId:"idStartDateTime",endFieldId:"idEndDateTime",showCompleteId:"idShowComplete",searchButtonId:"idSearchButton",searchResultsId:"idSearchResults",isAllowedToSearch:"true"};setFixtures('<select id="'+this.validParms.crewsFieldId+'"></select>'+'<input id="'+this.validParms.showCompleteId+'" type="checkbox"/>'+'<button id="'+this.validParms.searchButtonId+'" />'+'<div id="'+this.validParms.searchResultsId+'" />'+'<div id="'+this.validParms.startFieldId+'" />'+'<div id="'+this.validParms.startFieldId+'_$DATE$" />'+'<div id="'+this.validParms.startFieldId+'_$TIME$" />'+'<div id="'+this.validParms.startFieldId+'_$TIMEZONE_DISPLAY$" />'+'<div id="'+this.validParms.startFieldId+'_SelectBtn" />'+'<div id="'+this.validParms.endFieldId+'" />'+'<div id="'+this.validParms.endFieldId+'_$DATE$" />'+'<div id="'+this.validParms.endFieldId+'_$TIME$" />'+'<div id="'+this.validParms.endFieldId+'_$TIMEZONE_DISPLAY$" />'+'<div id="'+this.validParms.endFieldId+'_SelectBtn" />')});afterEach(function(){jasmine.Ajax.uninstall()});it("Throws error when user id not provided.",function(){var e=this.validParms;e.userId=undefined;expect(function(){var t=new n.default(e);t.initCrewsWidget()}).toThrowError("userId is mandatory")});it("Throws error when user id is blank.",function(){var e=this.validParms;e.userId=undefined;expect(function(){var t=new n.default(e)}).toThrowError("userId is mandatory")});it("Throws error when crew field id not provided.",function(){var e=this.validParms;e.crewsFieldId=undefined;expect(function(){var t=new n.default(e)}).toThrowError("crewsFieldId is mandatory")});it("Throws error when crew field id is blank.",function(){var e=this.validParms;e.crewsFieldId="";expect(function(){var t=new n.default(e)}).toThrowError("crewsFieldId is mandatory")});it("Throws error when crew field id does not identify a select element.",function(){var e=this.validParms;e.crewsFieldId="non-existing-id";expect(function(){var t=new n.default(e)}).toThrowError("crewsFieldId must be a SELECT element")});it("Throws error when crew field id identifies a non-select element.",function(){setFixtures('<input id="crewsFieldId"></input>');var e=this.validParms;e.crewsFieldId="crewsFieldId";expect(function(){var t=new n.default(e)}).toThrowError("crewsFieldId must be a SELECT element")});it("Fetch of crew list is returned",function(t){setFixtures('<select id="'+this.validParms.crewsFieldId+'"></select>');var i=new n.default(this.validParms);spyOn(e,"ajax").and.callFake(function(e){return e.success(r)});i.initCrewsWidget().then(function(e){expect(e).toBe(r);t()})});it("Populates Crew dropdown when provided list of crews.",function(t){this.validParms.isAllowedToSearch="false";var i=new n.default(this.validParms);spyOn(e,"ajax").and.callFake(function(e){if(e.url==="/maintenix/rest/crews"){return e.success(r)}else if(e.url==="/maintenix/rest/datetime/getCurrent"){return e.success(a)}else{console.warn("Unsupported url: ",e.url)}});var o=document.getElementById(this.validParms.crewsFieldId);var s=o.options;i.init().then(function(e){expect(s.length).toBe(r.length);t()})})})})}).call(this,r(0))},function(e,t,r){var n={"./basemaintenance/task/tasksupervision/TaskSupervisionController.spec.js":19,"./basemaintenance/task/tasksupervision/TaskSupervisionService.spec.js":12,"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchConfig.spec.js":11,"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchController.spec.js":10,"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchService.spec.js":8,"./someFeature/featureMath/featureMath.spec.js":7};function i(e){var t=a(e);var n=r(t);return n}function a(e){var t=n[e];if(!(t+1)){var r=new Error('Cannot find module "'+e+'".');r.code="MODULE_NOT_FOUND";throw r}return t}i.keys=function e(){return Object.keys(n)};i.resolve=a;e.exports=i;i.id=20},function(e,t,r){"use strict";var n=r(20);n.keys().forEach(n)}],[[21,0]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqUXVlcnlcIiIsIndlYnBhY2s6Ly8vLi9zcmMvYmFzZW1haW50ZW5hbmNlL3Rhc2svdGFza3N1cGVydmlzaW9uL1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlLXByb21pc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3V0aWwvRGF0ZVRpbWVIZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NvbWVGZWF0dXJlL2ZlYXR1cmVNYXRoL2ZlYXR1cmVNYXRoLmpzIiwid2VicGFjazovLy8uL3NyYy9zb21lRmVhdHVyZS9mZWF0dXJlTWF0aC9mZWF0dXJlTWF0aC5zcGVjLmpzIiwid2VicGFjazovLy8uL3NyYy9lbmdpbmVlcmluZy9yZXF1aXJlbWVudGRlZmluaXRpb24vZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIuc3BlYy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5naW5lZXJpbmcvcmVxdWlyZW1lbnRkZWZpbml0aW9uL2ZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi92YWxpZGF0aW9uL0RhdGVUaW1lVmFsaWRhdG9yLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZXM2LXByb21pc2UtcHJvbWlzZS9ub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYmFzZW1haW50ZW5hbmNlL3Rhc2svdGFza3N1cGVydmlzaW9uL1Rhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjIHN5bmMgc3BlYy5qcyQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rlc3RfaW5kZXguanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsImpRdWVyeSIsIl9qcXVlcnkiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX0RhdGVUaW1lSGVscGVyIiwiVGFza1N1cGVydmlzaW9uU2VydmljZSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJlcnJvck1zZ1ByZWZpeCIsInVzZXJJZCIsIl90aGlzIiwiRXJyb3IiLCJjcmV3TGlzdFJlc3RFbmRwb2ludCIsImFyZ3MiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIiQiLCJ1cmwiLCJ0eXBlIiwiZGF0YSIsInN1Y2Nlc3MiLCJjcmV3UmVzcG9uc2VMaXN0IiwidGV4dFN0YXR1cyIsImpxWEhSIiwiZXJyb3IiLCJlcnJvclRocm93biIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJfdGhpczIiLCJjdXJyZW50RGF0ZVRpbWVSZXN0RW5kcG9pbnQiLCJyZXNwb25zZSIsImRlZmF1bHRTdGFydCIsIkRhdGUiLCJzdGFydFllYXIiLCJzdGFydERheU9mTW9udGgiLCJzdGFydEhvdXJJbkRheSIsInN0YXJ0TWludXRlIiwiZGVmYXVsdEVuZCIsImVuZFllYXIiLCJlbmREYXlPZk1vbnRoIiwiZW5kSG91ckluRGF5IiwiZW5kTWludXRlIiwiZGVmYXVsdFN0YXJ0RW5kVmFsdWVzIiwiZm9ybWF0RGF0ZSIsImZvcm1hdFRpbWUiLCJ2YWxpZGF0ZURhdGVGb3JtYXQiLCJzdGFydERhdGUiLCJ2YWxpZGF0ZVRpbWVGb3JtYXQiLCJzdGFydFRpbWUiLCJlbmREYXRlIiwiZW5kVGltZSIsIl90aGlzMyIsImV4Y2x1ZGVDb21wbGV0ZSIsInNlYXJjaERhdGEiLCJvbmx5V29ya3Njb3BlZCIsIm9ubHlDb250YWluaW5nTGFib3VyIiwiYXNzaWduZWRUb0NyZXdJZCIsImNyZXdJZCIsIm1pblNjaGVkdWxlZFN0YXJ0RGF0ZVRpbWUiLCJzdGFydERhdGVUaW1lIiwibWF4U2NoZWR1bGVkU3RhcnREYXRlVGltZSIsImVuZERhdGVUaW1lIiwiZXhjbHVkZUNvbXBsZXRlZCIsImxpc3RDcmV3VGFza0xhYm91ckVuZHBvaW50IiwidGFza0lkIiwibGFib3VyUm93SWQiLCJuZXdWYWx1ZSIsIl90aGlzNCIsInNjaGVkdWxlZEhvdXJzIiwiY29udGVudFR5cGUiLCJKU09OIiwiX3RoaXM1IiwiYWN0dWFsSG91cnMiLCJkYXRlU3RyIiwiZGF0ZUZvcm1hdCIsIm1hdGNoQXJyYXkiLCJ0aW1lU3RyIiwidGltZUZvcm1hdCIsImRhdGUiLCJob3VycyIsInN0ciIsImdldERhdGUiLCJnZXRNb250aFNob3J0U3RyIiwiZ2V0RnVsbFllYXIiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJtb250aCIsIkZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlIiwidGFza0RlZmluaXRpb25zIiwiQXJyYXkiLCJzb3J0IiwiYSIsImIiLCJjb21wYXJlUmVzdWx0IiwiY29kZSIsImNvbmZpZ1Nsb3RDb2RlIiwibmFtZSIsImFwaVVybCIsInNjb3BlIiwiX2pxdWVyeTIiLCJkZWZhdWx0IiwiYWpheCIsInRhc2tEZWZpbml0aW9uc1Jlc3BvbnNlIiwic29ydGVkVGFza0RlZmluaXRpb25zIiwiZXJyIiwiRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyIsImxpbWl0IiwibWluTGVuZ3RoIiwiRGF0ZVRpbWVIZWxwZXIiLCJ0aW1lIiwiaG91cnNNaW51dGVzIiwicGFyc2VJbnQiLCJtaW51dGVzIiwiQWRkIiwieCIsInkiLCJTdWJ0cmFjdCIsIk11bHRpcGx5IiwiX2ZlYXR1cmVNYXRoIiwiZGVzY3JpYmUiLCJpdCIsImV4cGVjdCIsIl9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZSIsInNlcnZpY2UiLCJ0YXNrRGVmaW5pdGlvblJlc3BvbnNlIiwiYmVmb3JlQWxsIiwic29ydGVkRGF0YSIsInNvcnRUYXNrRGVmaW5pdGlvbnMiLCJqYXNtaW5lIiwic3B5T24iLCJlIiwiaW52YWxpZFJlc3BvbnNlIiwiZ2V0Rm9sbG93T25UYXNrRGVmaW5pdGlvbnMiLCJ0aGVuIiwiZmFrZURhdGEiLCJfZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyIsIkZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyIiwidHlwZUFoZWFkSWQiLCJva0J1dHRvbklkIiwibm90Rm91bmRNc2dJZCIsImZvbGxvd09uVGFza0RlZm5VdWlkT3VwdXRJZCIsImFwaVVybElkIiwibm90Rm91bmRNc2dFbCIsIm9rQnRuRWwiLCJ0eXBlQWhlYWRTZWFyY2hJbnB1dEVsIiwiZm9sbG93T25UYXNrRGVmblV1aWRPdXB1dEVsIiwiYXBpVXJsRWwiLCJsZW5ndGgiLCJ2YWwiLCJzZWxlY3RlZE9wdGlvbiIsImtleWRvd24iLCJzZXRUaW1lb3V0IiwiaW5pdGlhbGl6ZSIsImJpbmQiLCJzdWdnZXN0aW9uIiwiZGlzcGxheUZvbGxvd09uIiwiYXR0ciIsImlkIiwiZGlzYWJsZU9rQnRuIiwiX2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlMiIsImNvbmZpZ3VyZVR5cGVBaGVhZCIsImZvY3VzIiwiY29uZmlnIiwiaW5kZXgiLCJpbnB1dCIsImhpZ2hsaWdodCIsImRpc3BsYXkiLCJlbXB0eVRlbXBsYXRlIiwic291cmNlIiwiY2FsbGJhY2siLCJvbkNsaWNrIiwidHlwZUFoZWFkSW5wdXRFbCIsInNlbGVjdGlvbkVsIiwic2VsZWN0ZWRSZWNvcmQiLCJldmVudCIsImhpZGVMYXlvdXQiLCJxdWVyeSIsInN1Z2dlc3Rpb25PYmoiLCJyZW1vdmVDbGFzcyIsInJlbW92ZUF0dHIiLCJhZGRDbGFzcyIsIl9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29udHJvbGxlciIsInJlc3RBcGlVcmwiLCJnZXRHb29kQ29udHJvbGxlciIsInNldFVwSFRNTEZpeHR1cmUiLCJzZXRGaXh0dXJlcyIsImJlZm9yZUVhY2giLCJva0J1dHRvbkVsIiwiZmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZEVsIiwiYWZ0ZXJFYWNoIiwiY29udHJvbGxlciIsImRvbmUiLCJyZXNwb25zZVRhc2tEZWZpbml0aW9ucyIsIm5hdGl2ZUVsIiwiX1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UiLCJzdWNjZXNzSGFuZGxlciIsImZhaWx1cmVIYW5kbGVyIiwiYWp4IiwiRGF0ZVRpbWVWYWxpZGF0b3IiLCJ2YWx1ZSIsInNwbGl0IiwiZyIsIkZ1bmN0aW9uIiwiZXZhbCIsIndpbmRvdyIsIl90eXBlb2YiLCJwcm9jZXNzIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhbGwiLCJydW5DbGVhclRpbWVvdXQiLCJtYXJrZXIiLCJxdWV1ZSIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImNvbmNhdCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibGVuIiwicnVuIiwibmV4dFRpY2siLCJhcmd1bWVudHMiLCJpIiwicHVzaCIsIkl0ZW0iLCJhcnJheSIsInByb3RvdHlwZSIsImFwcGx5IiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm5vb3AiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsImdsb2JhbCIsImZhY3RvcnkiLCJ1bmRlZmluZWQiLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsIm9iamVjdE9yRnVuY3Rpb24iLCJpc0Z1bmN0aW9uIiwiX2lzQXJyYXkiLCJpc0FycmF5IiwiT2JqZWN0IiwidG9TdHJpbmciLCJ2ZXJ0eE5leHQiLCJjdXN0b21TY2hlZHVsZXJGbiIsImFzYXAiLCJhcmciLCJmbHVzaCIsInNjaGVkdWxlRmx1c2giLCJzZXRTY2hlZHVsZXIiLCJzY2hlZHVsZUZuIiwic2V0QXNhcCIsImFzYXBGbiIsImJyb3dzZXJXaW5kb3ciLCJicm93c2VyR2xvYmFsIiwiQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwiV2ViS2l0TXV0YXRpb25PYnNlcnZlciIsImlzTm9kZSIsInNlbGYiLCJpc1dvcmtlciIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwiaW1wb3J0U2NyaXB0cyIsIk1lc3NhZ2VDaGFubmVsIiwidXNlTmV4dFRpY2siLCJ1c2VWZXJ0eFRpbWVyIiwidXNlTXV0YXRpb25PYnNlcnZlciIsIml0ZXJhdGlvbnMiLCJvYnNlcnZlciIsIm5vZGUiLCJkb2N1bWVudCIsImNyZWF0ZVRleHROb2RlIiwib2JzZXJ2ZSIsImNoYXJhY3RlckRhdGEiLCJ1c2VNZXNzYWdlQ2hhbm5lbCIsImNoYW5uZWwiLCJwb3J0MSIsIm9ubWVzc2FnZSIsInBvcnQyIiwicG9zdE1lc3NhZ2UiLCJ1c2VTZXRUaW1lb3V0IiwiZ2xvYmFsU2V0VGltZW91dCIsImF0dGVtcHRWZXJ0eCIsInIiLCJyZXF1aXJlIiwidmVydHgiLCJydW5Pbkxvb3AiLCJydW5PbkNvbnRleHQiLCJvbkZ1bGZpbGxtZW50Iiwib25SZWplY3Rpb24iLCJfYXJndW1lbnRzIiwicGFyZW50IiwiY2hpbGQiLCJjb25zdHJ1Y3RvciIsIlBST01JU0VfSUQiLCJtYWtlUHJvbWlzZSIsIl9zdGF0ZSIsImludm9rZUNhbGxiYWNrIiwiX3Jlc3VsdCIsInN1YnNjcmliZSIsIm9iamVjdCIsIkNvbnN0cnVjdG9yIiwicHJvbWlzZSIsIl9yZXNvbHZlIiwiTWF0aCIsInJhbmRvbSIsInN1YnN0cmluZyIsIlBFTkRJTkciLCJGVUxGSUxMRUQiLCJSRUpFQ1RFRCIsIkdFVF9USEVOX0VSUk9SIiwiRXJyb3JPYmplY3QiLCJzZWxmRnVsZmlsbG1lbnQiLCJUeXBlRXJyb3IiLCJjYW5ub3RSZXR1cm5Pd24iLCJnZXRUaGVuIiwidHJ5VGhlbiIsImZ1bGZpbGxtZW50SGFuZGxlciIsInJlamVjdGlvbkhhbmRsZXIiLCJoYW5kbGVGb3JlaWduVGhlbmFibGUiLCJ0aGVuYWJsZSIsInNlYWxlZCIsImZ1bGZpbGwiLCJyZWFzb24iLCJfcmVqZWN0IiwiX2xhYmVsIiwiaGFuZGxlT3duVGhlbmFibGUiLCJoYW5kbGVNYXliZVRoZW5hYmxlIiwibWF5YmVUaGVuYWJsZSIsInRoZW4kJCIsInB1Ymxpc2hSZWplY3Rpb24iLCJfb25lcnJvciIsInB1Ymxpc2giLCJfc3Vic2NyaWJlcnMiLCJzdWJzY3JpYmVycyIsInNldHRsZWQiLCJkZXRhaWwiLCJUUllfQ0FUQ0hfRVJST1IiLCJ0cnlDYXRjaCIsImhhc0NhbGxiYWNrIiwic3VjY2VlZGVkIiwiZmFpbGVkIiwiaW5pdGlhbGl6ZVByb21pc2UiLCJyZXNvbHZlciIsInJlc29sdmVQcm9taXNlIiwicmVqZWN0UHJvbWlzZSIsIm5leHRJZCIsIkVudW1lcmF0b3IiLCJfaW5zdGFuY2VDb25zdHJ1Y3RvciIsIl9pbnB1dCIsIl9yZW1haW5pbmciLCJfZW51bWVyYXRlIiwidmFsaWRhdGlvbkVycm9yIiwiX2VhY2hFbnRyeSIsImVudHJ5IiwiYyIsInJlc29sdmUkJCIsIl90aGVuIiwiX3NldHRsZWRBdCIsIl93aWxsU2V0dGxlQXQiLCJzdGF0ZSIsImVudW1lcmF0b3IiLCJhbGwiLCJlbnRyaWVzIiwicmFjZSIsIl8iLCJuZWVkc1Jlc29sdmVyIiwibmVlZHNOZXciLCJfc2V0U2NoZWR1bGVyIiwiX3NldEFzYXAiLCJfYXNhcCIsImNhdGNoIiwiX2NhdGNoIiwicG9seWZpbGwiLCJsb2NhbCIsIlAiLCJwcm9taXNlVG9TdHJpbmciLCJjYXN0IiwiX0RhdGVUaW1lVmFsaWRhdG9yIiwiVGFza1N1cGVydmlzaW9uQ29udHJvbGxlciIsInBhcm1zIiwiY3Jld3NGaWVsZElkIiwiY3Jld3NGaWVsZCIsImlzQWxsb3dlZFRvU2VhcmNoIiwiaXNBbGxvd2VkVG9FZGl0U2NoZWRsZWRIb3VycyIsImlzQWxsb3dlZFRvRWRpdEFjdHVhbEhvdXJzIiwic3RhcnREYXRlV2lkZ2V0SWQiLCJzdGFydEZpZWxkSWQiLCJlbmREYXRlV2lkZ2V0SWQiLCJlbmRGaWVsZElkIiwic2hvd0NvbXBsZXRlSWQiLCJzZWFyY2hCdXR0b25JZCIsInNlYXJjaFJlc3VsdHNJZCIsIm5vU2VhcmNoUmVzdWx0c01lc3NhZ2UiLCJsYWJvclJvd0VsYXNwZWRUaW1lVGhyZXNob2xkIiwiZGVmYXVsdFNob3dDb21wbGV0ZSIsImlzU2NoZWR1bGVkSG91cnNDZWxsRWRpdGFibGUiLCJoYW5kbGVTY2hlZHVsZUhvdXJzRWRpdCIsImhhbmRsZUFjdHVhbEhvdXJzRWRpdCIsImFjdHVhbEhvdXJDZWxsRm9ybWF0dGVyIiwiaW5pdFNob3dDb21wbGV0ZVRhc2tzV2lkZ2V0IiwiaW5pdFJlc3VsdHNUYWJsZSIsImluaXRTZWFyY2hCdXR0b24iLCJpbml0Q3Jld3NXaWRnZXQiLCJyZXN1bHRzIiwicG9wdWxhdGVDcmV3c1dpZGdldCIsInNldFN0YXJ0QW5kRW5kV2lkZ2V0cyIsInBlcmZvcm1TZWFyY2giLCJnZXRDcmV3c0ZvclVzZXIiLCJ2YWxpZGF0ZVN0YXJ0RW5kV2lkZ2V0SWRzIiwic3RhcnRGaWVsZElkcyIsImJ1aWxkRmllbGRJZHNGb3JEYXRlVGltZVdpZGdldCIsImVuZEZpZWxkSWRzIiwic2V0U3RhcnRFbmRFbGVtQXR0cnMiLCJ2YWxpZGF0ZVN0YXJ0RW5kRWxlbXMiLCJleGNlcHRpb24iLCJjb25zb2xlIiwic3RhcnREYXRlRWxlbSIsImRpc2FibGVkIiwiZW5kRGF0ZUVsZW0iLCJnZXREZWZhdWx0U3RhcnRBbmRFbmREYXRlcyIsImxpc3RPZkxhYm91ckF0dHJzIiwidGFibGUiLCJUYWJ1bGF0b3IiLCJjb2x1bW5zIiwiZmllbGQiLCJ2aXNpYmxlIiwic29ydGVyIiwiYWxpZ24iLCJ3aWR0aCIsImhlYWRlclNvcnQiLCJmb3JtYXR0ZXIiLCJpc0VsYXBzZWRUaW1lR3JlYXRlclRoYW5UaHJlc2hvbGQiLCJlZGl0b3IiLCJ2YWxpZGF0b3IiLCJ2YWxpZGF0ZUhvdXJzIiwiZWRpdGFibGUiLCJjZWxsRWRpdGVkIiwiaXNBY3R1YWxIb3Vyc0NlbGxFZGl0YWJsZSIsImRhdGFTb3J0ZWQiLCJzb3J0ZXJzIiwicm93cyIsInNvbWUiLCJzZXRHcm91cEJ5IiwiZ3JvdXBIZWFkZXIiLCJjb3VudCIsImdyb3VwIiwiZ3JvdXBUb2dnbGVFbGVtZW50IiwicGxhY2Vob2xkZXIiLCJjZWxsIiwiYWN0dWFsSG91ckdyZWF0ZXJUaGFuU2NoZWR1bGVkSG91cnMiLCJnZXRWYWx1ZSIsInNjaGVkdWxlSG91cnMiLCIkYnV0dG9uIiwiZm9ybWF0RGF0ZVRpbWUiLCJzaG93Q29tcGxldGVUYXNrcyIsImNoZWNrZWQiLCJ1cGRhdGVSZXN1bHRzVGFibGUiLCJjcmV3cyIsInNlbGVjdCIsInNlbGVjdE9wdGlvbnMiLCJvcHRpb25zIiwiY3JldyIsIm9wdGlvbiIsImxhYmVsIiwid2lkZ2V0SWQiLCJkYXRlRmllbGRJZCIsInRpbWVGaWVsZElkIiwidGltZVpvbmVGaWVsZElkIiwic3RhcnRQaWNrZXJJZCIsInN0YXJ0RGF0ZVdpZGdldElkcyIsImVuZERhdGVXaWRnZXRJZHMiLCJzdGFydFRpbWVFbGVtIiwic3RhcnRUaW1lWm9uZUVsZW0iLCJzdGFydFBpY2tlckVsZW0iLCJlbmRUaW1lRWxlbSIsImVuZFRpbWVab25lRWxlbSIsImVuZFBpY2tlckVsZW0iLCJzdGFydFRpbWVab25lIiwiZW5kVGltZVpvbmUiLCJhZGRUb1RvcCIsImNsZWFyRGF0YSIsImFkZERhdGEiLCJzZXRTb3J0IiwiY29sdW1uIiwiZGF0ZVRpbWVXaWRnZXRJZCIsImZpZWxkSWRzIiwiZGF0ZVZhbHVlIiwidGltZVZhbHVlIiwicm93RGF0YSIsImdldERhdGEiLCJkZWNpbWFsVGltZSIsInBhcnNlRmxvYXQiLCJ1cGRhdGVTY2hlZHVsZWRIb3VycyIsInVwZGF0ZUFjdHVhbEhvdXJzIiwiX1Rhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIiLCJfdGVzdEN1cnJlbnREYXRlVGltZVIiLCJ0ZXN0Q3Jld0xpc3QiLCJkZXNjcmlwdGlvbiIsInRlc3RDcmV3TGlzdE9mT25lIiwidGVzdEN1cnJlbnREYXRlVGltZVJlc3BvbnNlIiwic3RhcnRNb250aCIsIl9kZWZpbmVQcm9wZXJ0eSIsInZhbGlkUGFybXMiLCJmYWtlU2VydmljZSIsInJlcXVlc3QiLCJjcmV3c0ZpZWxkU2VsZWN0RWwiLCJtYXAiLCIuL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyLnNwZWMuanMiLCIuL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlLnNwZWMuanMiLCIuL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5zcGVjLmpzIiwiLi9lbmdpbmVlcmluZy9yZXF1aXJlbWVudGRlZmluaXRpb24vZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyLnNwZWMuanMiLCIuL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2Uuc3BlYy5qcyIsIi4vc29tZUZlYXR1cmUvZmVhdHVyZU1hdGgvZmVhdHVyZU1hdGguc3BlYy5qcyIsIndlYnBhY2tDb250ZXh0IiwicmVxIiwid2VicGFja0NvbnRleHRSZXNvbHZlIiwia2V5cyIsIndlYnBhY2tDb250ZXh0S2V5cyIsInRlc3RzQ29udGV4dCJdLCJtYXBwaW5ncyI6IjZFQUFBQSxFQUFBQyxRQUFBQyx5V0NBQSxJQUFBQyxFQUFBQyxFQUFBLGNBQ0EsSUFBQUMsRUFBQUQsRUFBQSxxS0FFcUJFLGFBRWxCLFNBQUFBLElBQWNDLEVBQUFDLEtBQUFGLEdBQ1hFLEtBQUFDLGVBQUEsOERBR2FDLEdBQVEsSUFBQUMsRUFBQUgsS0FFckIsSUFBQUUsRUFBYSxDQUNWLE1BQU0sSUFBQUUsTUFBTix1QkFHSCxJQUFNQyxFQUFOLHdCQUNBLElBQU1DLEdBQVNKLE9BQWZBLEdBQ0EsT0FBTyxJQUFBSyxFQUFZLFNBQUFDLEVBQUFDLEdBQ2hCQyxnQkFDR0MsSUFESU4sRUFFSk8sS0FGSSxNQUdKQyxLQUhJ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Z0IsUUFBQStnQixFQUNBL2hCLEVBQUFDLFFBQUE0aEIsRUFDQUEsRUFBQTlYLEdBQUEsaUNDNUJBLElBQUltWSxFQUFlOWhCLEVBQUEsSUFDbkI4aEIiLCJmaWxlIjoic3JjL3Rlc3QvamF2YXNjcmlwdC8xLnNwZWMtYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBqUXVlcnk7IiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IERhdGVUaW1lSGVscGVyIGZyb20gJy4uLy4uLy4uL2NvbW1vbi91dGlsL0RhdGVUaW1lSGVscGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2tTdXBlcnZpc2lvblNlcnZpY2Uge1xyXG5cclxuICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHRoaXMuZXJyb3JNc2dQcmVmaXggPSAnRXJyb3IgY29kZSA9ICAnO1xyXG4gICB9XHJcblxyXG4gICBnZXRDcmV3c0ZvclVzZXIodXNlcklkKSB7XHJcblxyXG4gICAgICBpZiAoIXVzZXJJZCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZXJJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY3Jld0xpc3RSZXN0RW5kcG9pbnQgPSAnL21haW50ZW5peC9yZXN0L2NyZXdzJztcclxuICAgICAgY29uc3QgYXJncyA9IHsgJ3VzZXJJZCc6IHVzZXJJZCB9O1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IGNyZXdMaXN0UmVzdEVuZHBvaW50LFxyXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBhcmdzLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiAoY3Jld1Jlc3BvbnNlTGlzdCwgdGV4dFN0YXR1cywganFYSFIpID0+IHtcclxuICAgICAgICAgICAgICAgcmVzb2x2ZShjcmV3UmVzcG9uc2VMaXN0KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pID0+IHtcclxuICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSB0aGlzLmVycm9yTXNnUHJlZml4ICsganFYSFIuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICByZWplY3QobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBnZXREZWZhdWx0U3RhcnRBbmRFbmREYXRlcyh1c2VySWQpIHtcclxuICAgICAgaWYgKCF1c2VySWQpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1c2VySWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGN1cnJlbnREYXRlVGltZVJlc3RFbmRwb2ludCA9ICcvbWFpbnRlbml4L3Jlc3QvZGF0ZXRpbWUvZ2V0Q3VycmVudCc7XHJcbiAgICAgIGNvbnN0IGFyZ3MgPSB7ICd1c2VySWQnOiB1c2VySWQgfTtcclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogY3VycmVudERhdGVUaW1lUmVzdEVuZHBvaW50LFxyXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBhcmdzLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiAocmVzcG9uc2UsIHRleHRTdGF0dXMsIGpxWEhSKSA9PiB7XHJcbiAgICAgICAgICAgICAgIGxldCBkZWZhdWx0U3RhcnQgPSBuZXcgRGF0ZShcclxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhcnRZZWFyLFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGFydE1vbnRoIC0gMSxcclxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhcnREYXlPZk1vbnRoLFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGFydEhvdXJJbkRheSxcclxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhcnRNaW51dGVcclxuICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgbGV0IGRlZmF1bHRFbmQgPSBuZXcgRGF0ZShcclxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZW5kWWVhcixcclxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZW5kTW9udGggLSAxLFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5lbmREYXlPZk1vbnRoLFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5lbmRIb3VySW5EYXksXHJcbiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmVuZE1pbnV0ZVxyXG4gICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgbGV0IGRlZmF1bHRTdGFydEVuZFZhbHVlcyA9IHt9O1xyXG4gICAgICAgICAgICAgICBkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuc3RhcnREYXRlID0gdGhpcy5mb3JtYXREYXRlKGRlZmF1bHRTdGFydCk7XHJcbiAgICAgICAgICAgICAgIGRlZmF1bHRTdGFydEVuZFZhbHVlcy5zdGFydFRpbWUgPSB0aGlzLmZvcm1hdFRpbWUoZGVmYXVsdFN0YXJ0KTtcclxuICAgICAgICAgICAgICAgZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLnN0YXJ0VGltZVpvbmUgPSByZXNwb25zZS5zdGFydFRpbWV6b25lO1xyXG4gICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlRGF0ZUZvcm1hdChkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuc3RhcnREYXRlKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgcmVqZWN0KCdkZWZhdWx0IHN0YXJ0RGF0ZSBmYWlsZWQgdmFsaWRhdGlvbjogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlVGltZUZvcm1hdChkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuc3RhcnRUaW1lKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgcmVqZWN0KCdkZWZhdWx0IHN0YXJ0VGltZSBmYWlsZWQgdmFsaWRhdGlvbjogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICBkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuZW5kRGF0ZSA9IHRoaXMuZm9ybWF0RGF0ZShkZWZhdWx0RW5kKTtcclxuICAgICAgICAgICAgICAgZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLmVuZFRpbWUgPSB0aGlzLmZvcm1hdFRpbWUoZGVmYXVsdEVuZCk7XHJcbiAgICAgICAgICAgICAgIGRlZmF1bHRTdGFydEVuZFZhbHVlcy5lbmRUaW1lWm9uZSA9IHJlc3BvbnNlLmVuZFRpbWV6b25lO1xyXG4gICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlRGF0ZUZvcm1hdChkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuZW5kRGF0ZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlamVjdCgnZGVmYXVsdCBlbmREYXRlIGZhaWxlZCB2YWxpZGF0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVRpbWVGb3JtYXQoZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLmVuZFRpbWUpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICByZWplY3QoJ2RlZmF1bHQgZW5kVGltZSBmYWlsZWQgdmFsaWRhdGlvbjogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICByZXNvbHZlKGRlZmF1bHRTdGFydEVuZFZhbHVlcyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSA9PiB7XHJcbiAgICAgICAgICAgICAgIGxldCBtZXNzYWdlID0gdGhpcy5lcnJvck1zZ1ByZWZpeCArIGpxWEhSLnN0YXR1cztcclxuICAgICAgICAgICAgICAgcmVqZWN0KG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgcGVyZm9ybVNlYXJjaChhcmdzKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgIGxldCBleGNsdWRlQ29tcGxldGUgPSAoKGFyZ3Muc2hvd0NvbXBsZXRlVGFza3MgPT0gdHJ1ZSkgPyBmYWxzZSA6IHRydWUpO1xyXG5cclxuICAgICAgICAgbGV0IHNlYXJjaERhdGEgPSB7XHJcbiAgICAgICAgICAgIG9ubHlXb3Jrc2NvcGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBvbmx5Q29udGFpbmluZ0xhYm91cjogdHJ1ZSxcclxuICAgICAgICAgICAgYXNzaWduZWRUb0NyZXdJZDogYXJncy5jcmV3SWQsXHJcbiAgICAgICAgICAgIG1pblNjaGVkdWxlZFN0YXJ0RGF0ZVRpbWU6IGFyZ3Muc3RhcnREYXRlVGltZSxcclxuICAgICAgICAgICAgbWF4U2NoZWR1bGVkU3RhcnREYXRlVGltZTogYXJncy5lbmREYXRlVGltZSxcclxuICAgICAgICAgICAgZXhjbHVkZUNvbXBsZXRlZDogZXhjbHVkZUNvbXBsZXRlXHJcbiAgICAgICAgIH07XHJcbiAgICAgICAgIFxyXG4gICAgICAgICBsZXQgbGlzdENyZXdUYXNrTGFib3VyRW5kcG9pbnQgPSAnL21haW50ZW5peC9yZXN0L3Rhc2tzJztcclxuXHJcbiAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogbGlzdENyZXdUYXNrTGFib3VyRW5kcG9pbnQsXHJcbiAgICAgICAgICAgIGRhdGE6IHNlYXJjaERhdGEsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IChyZXNwb25zZSwgdGV4dFN0YXR1cywganFYSFIpID0+IHtcclxuICAgICAgICAgICAgICAgLy8gVGhlIHJlc3BvbnNlIGlzIGEganNvbiBsaXN0IG9mIG9iamVjdHMgZ2VuZXJhdGVkIGZyb206XHJcbiAgICAgICAgICAgICAgIC8vICAgIGNvbS5teGkubXgud2ViLnJlc3QudGFzay5DcmV3VGFza0xhYm91clJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgPT4ge1xyXG4gICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IHRoaXMuZXJyb3JNc2dQcmVmaXggKyBqcVhIUi5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgIHJlamVjdChtZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIC8vIHZhbGlkYXRlSG91cnModmFsdWUpIHtcclxuICAgLy8gICAgLy8gVGhpcyBpcyBiYXNlZCBvbiB0aGUgTlVNQkVSKDksNSkgY29uc3RyYWludCBmb3JcclxuICAgLy8gICAgLy8gc2NoZWRfbGFib3VyX3JvbGUuc2NoZWRfaHIgYW5kIHNjaGVkX2xhYm91cl9yb2xlLmFjdHVhbF9oclxyXG4gICAvLyAgICBsZXQgc3BsaXQgPSB2YWx1ZS5zcGxpdCgnLicpO1xyXG4gICAvLyAgICBpZiAoIHNwbGl0Lmxlbmd0aCA+IDAgKSB7XHJcbiAgIC8vICAgICAgIGlmICggc3BsaXRbMF0ubGVuZ3RoID4gNCApIHtcclxuICAgLy8gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAvLyAgICAgICB9XHJcbiAgIC8vICAgICAgIGlmICggc3BsaXQubGVuZ3RoID09IDIgKSB7XHJcbiAgIC8vICAgICAgICAgIGlmICggc3BsaXRbMV0ubGVuZ3RoID4gNSApIHtcclxuICAgLy8gICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAvLyAgICAgICAgICB9XHJcbiAgIC8vICAgICAgIH0gZWxzZSBpZiAoc3BsaXQubGVuZ3RoID4gMiApIHtcclxuICAgLy8gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAvLyAgICAgICB9XHJcbiAgIC8vICAgIH1cclxuICAgLy8gICAgcmV0dXJuIHRydWU7XHJcbiAgIC8vIH1cclxuXHJcbiAgIHVwZGF0ZVNjaGVkdWxlZEhvdXJzKHRhc2tJZCwgbGFib3VyUm93SWQsIG5ld1ZhbHVlKSB7XHJcbiAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICBzY2hlZHVsZWRIb3VyczogbmV3VmFsdWVcclxuICAgICAgfTtcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICAgdXJsOiAnL21haW50ZW5peC9yZXN0L3Rhc2tzLycgKyB0YXNrSWQgKyAnL2xhYm91cnMvJyArIGxhYm91clJvd0lkLFxyXG4gICAgICAgICB0eXBlOiBcIlBVVFwiLFxyXG4gICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgICAgZXJyb3I6IChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pID0+IHtcclxuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSB0aGlzLmVycm9yTXNnUHJlZml4ICsganFYSFIuc3RhdHVzO1xyXG4gICAgICAgICAgICBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIHVwZGF0ZUFjdHVhbEhvdXJzKHRhc2tJZCwgbGFib3VyUm93SWQsIG5ld1ZhbHVlKSB7XHJcbiAgICAgIGxldCBkYXRhID0ge1xyXG4gICAgICAgICBhY3R1YWxIb3VyczogbmV3VmFsdWVcclxuICAgICAgfTtcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICAgdXJsOiAnL21haW50ZW5peC9yZXN0L3Rhc2tzLycgKyB0YXNrSWQgKyAnL2xhYm91cnMvJyArIGxhYm91clJvd0lkLFxyXG4gICAgICAgICB0eXBlOiBcIlBVVFwiLFxyXG4gICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgICAgZXJyb3I6IChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pID0+IHtcclxuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSB0aGlzLmVycm9yTXNnUHJlZml4ICsganFYSFIuc3RhdHVzO1xyXG4gICAgICAgICAgICBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcblxyXG4gICAvL1xyXG4gICAvLyBwcml2YXRlIG1ldGhvZHNcclxuICAgLy9cclxuXHJcbiAgIHZhbGlkYXRlRGF0ZUZvcm1hdChkYXRlU3RyKSB7XHJcbiAgICAgIGlmICghZGF0ZVN0cikge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGVTdHIgaXMgbWFuZGF0b3J5LicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgZGF0ZVN0ciAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRlU3RyIGlzIG5vdCBhIHN0cmluZycpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyByZWdleCBleGFtcGxlOiBkZC1NTU0teXl5eVxyXG4gICAgICBjb25zdCBkYXRlRm9ybWF0ID0gL14oKFswLTldKXwoWzAtMl1bMC05XSl8KFszXVswLTFdKSlcXC0oSkFOfEZFQnxNQVJ8QVBSfE1BWXxKVU58SlVMfEFVR3xTRVB8T0NUfE5PVnxERUMpXFwtXFxkezR9JC87XHJcbiAgICAgIGNvbnN0IG1hdGNoQXJyYXkgPSBkYXRlU3RyLm1hdGNoKGRhdGVGb3JtYXQpO1xyXG5cclxuICAgICAgaWYgKG1hdGNoQXJyYXkgPT0gbnVsbCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGVTdHIgaGFzIGludmFsaWQgZm9ybWF0LicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgfVxyXG5cclxuICAgdmFsaWRhdGVUaW1lRm9ybWF0KHRpbWVTdHIpIHtcclxuICAgICAgaWYgKCF0aW1lU3RyKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcigndGltZVN0ciBpcyBtYW5kYXRvcnkuJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVvZiB0aW1lU3RyICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RpbWVTdHIgaXMgbm90IGEgc3RyaW5nLicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyByZWdleCBleGFtcGxlOiBoaDptbVxyXG4gICAgICBjb25zdCB0aW1lRm9ybWF0ID0gL14kfF4oKFswMV1bMC05XSl8KDJbMC0zXSkpOlswLTVdWzAtOV0kLztcclxuICAgICAgY29uc3QgbWF0Y2hBcnJheSA9IHRpbWVTdHIubWF0Y2godGltZUZvcm1hdCk7XHJcblxyXG4gICAgICBpZiAobWF0Y2hBcnJheSA9PSBudWxsKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcigndGltZVN0ciBoYXMgaW52YWxpZCBmb3JtYXQuJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICB9XHJcblxyXG4gICBhZGRIb3VycyhkYXRlLCBob3Vycykge1xyXG4gICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgKyAoaG91cnMgKiA2MCAqIDYwICogMTAwMCkpO1xyXG4gICB9XHJcblxyXG4gICBmb3JtYXREYXRlKGRhdGUpIHtcclxuICAgICAgbGV0IHN0ciA9XHJcbiAgICAgICAgICgoZGF0ZS5nZXREYXRlKCkgPCAxMCkgPyAnMCcgOiAnJykgKyBkYXRlLmdldERhdGUoKSArICctJyArXHJcbiAgICAgICAgIHRoaXMuZ2V0TW9udGhTaG9ydFN0cihkYXRlLmdldE1vbnRoKCkgKyAxKSArICctJyArXHJcbiAgICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgcmV0dXJuIHN0cjtcclxuICAgfVxyXG5cclxuICAgZm9ybWF0VGltZShkYXRlKSB7XHJcbiAgICAgIGxldCBzdHIgPVxyXG4gICAgICAgICAoKGRhdGUuZ2V0SG91cnMoKSA8IDEwKSA/ICcwJyA6ICcnKSArIGRhdGUuZ2V0SG91cnMoKSArICc6JyArXHJcbiAgICAgICAgICgoZGF0ZS5nZXRNaW51dGVzKCkgPCAxMCkgPyAnMCcgOiAnJykgKyBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgcmV0dXJuIHN0cjtcclxuICAgfVxyXG5cclxuICAgZ2V0TW9udGhTaG9ydFN0cihtb250aCkge1xyXG4gICAgICBpZiAobW9udGggPT09IDEpIHJldHVybiAnSkFOJztcclxuICAgICAgaWYgKG1vbnRoID09PSAyKSByZXR1cm4gJ0ZFQic7XHJcbiAgICAgIGlmIChtb250aCA9PT0gMykgcmV0dXJuICdNQVInO1xyXG4gICAgICBpZiAobW9udGggPT09IDQpIHJldHVybiAnQVBSJztcclxuICAgICAgaWYgKG1vbnRoID09PSA1KSByZXR1cm4gJ01BWSc7XHJcbiAgICAgIGlmIChtb250aCA9PT0gNikgcmV0dXJuICdKVU4nO1xyXG4gICAgICBpZiAobW9udGggPT09IDcpIHJldHVybiAnSlVMJztcclxuICAgICAgaWYgKG1vbnRoID09PSA4KSByZXR1cm4gJ0FVRyc7XHJcbiAgICAgIGlmIChtb250aCA9PT0gOSkgcmV0dXJuICdTRVAnO1xyXG4gICAgICBpZiAobW9udGggPT09IDEwKSByZXR1cm4gJ09DVCc7XHJcbiAgICAgIGlmIChtb250aCA9PT0gMTEpIHJldHVybiAnTk9WJztcclxuICAgICAgaWYgKG1vbnRoID09PSAxMikgcmV0dXJuICdERUMnO1xyXG4gICAgICByZXR1cm4gXCJcIjtcclxuICAgfVxyXG5cclxufVxyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XHJcblxyXG4vKipcclxuICogVGhlIHNlcnZpY2UgbGF5ZXIsIGl0IHNlbmRzIFJFU1QgQVBJIGNhbGwgYW5kIHBhc3MgdGhlIHJlc3BvbnNlIGRhdGEgdG8gY29udHJvbGxlclxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2Uge1xyXG5cclxuICAgc3RhdGljIHNvcnRUYXNrRGVmaW5pdGlvbnModGFza0RlZmluaXRpb25zKSB7XHJcbiAgICAgIGlmICghdGFza0RlZmluaXRpb25zIHx8ICEodGFza0RlZmluaXRpb25zIGluc3RhbmNlb2YgQXJyYXkpKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRhc2tEZWZpbml0aW9ucyBleHBlY3RlZCB0byBiZSBhbiBBcnJheVwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRhc2tEZWZpbml0aW9ucy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgbGV0IGNvbXBhcmVSZXN1bHQgPSAoYS5jb2RlID4gYi5jb2RlKSA/IDEgOiAoKGEuY29kZSA8IGIuY29kZSkgPyAtMSA6IDApO1xyXG5cclxuICAgICAgICAgaWYgKGNvbXBhcmVSZXN1bHQgPT0gMCkge1xyXG4gICAgICAgICAgICBjb21wYXJlUmVzdWx0ID0gKGEuY29uZmlnU2xvdENvZGUgPiBiLmNvbmZpZ1Nsb3RDb2RlKSA/IDEgOiAoKGEuY29uZmlnU2xvdENvZGUgPCBiLmNvbmZpZ1Nsb3RDb2RlKSA/IC0xIDogMCk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGlmIChjb21wYXJlUmVzdWx0ID09IDApIHtcclxuICAgICAgICAgICAgY29tcGFyZVJlc3VsdCA9IChhLm5hbWUgPiBiLm5hbWUpID8gMSA6ICgoYS5uYW1lIDwgYi5uYW1lKSA/IC0xIDogMCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgcmV0dXJuIGNvbXBhcmVSZXN1bHQ7XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBzdGF0aWMgZ2V0Rm9sbG93T25UYXNrRGVmaW5pdGlvbnMoYXBpVXJsKSB7XHJcbiAgICAgIGxldCBzY29wZSA9IHRoaXM7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIHVybDogYXBpVXJsLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbih0YXNrRGVmaW5pdGlvbnNSZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAvLyBuaWNlIHRvIGhhdmU6IHBvc3RQcm9jZXNzb3IgaG9va1xyXG4gICAgICAgICAgICAgICBsZXQgc29ydGVkVGFza0RlZmluaXRpb25zID0gc2NvcGUuc29ydFRhc2tEZWZpbml0aW9ucyh0YXNrRGVmaW5pdGlvbnNSZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgIHJlc29sdmUoc29ydGVkVGFza0RlZmluaXRpb25zKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAvLyBpZiBlcnJvciBoYXBwZW5zIHdpdGggdGhlIEFQSSBjYWxsLCBpbml0aWFsaXplIHRoZSB3aWRnZXQgd2l0aCBhbiBlbXB0eSBhcnJheS5cclxuICAgICAgICAgICAgICAgcmVzb2x2ZShbXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG59XHJcbiIsIi8qIGdsb2JhbCAkICovXHJcbi8qKlxyXG4gKiBJdCBjb250YWlucyBhbGwgY29uZmlndXJhdGlvbnMgZm9yIHRoZSB0eXBlIGFoZWFkIHNlYXJjaCB3aWRnZXRcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcge1xyXG5cclxuICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICBpZiAoIWRhdGEgfHwgIShkYXRhIGluc3RhbmNlb2YgQXJyYXkpKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSByZXNwb25zZSBkYXRhIHN1cHBvc2UgdG8gYmUgaW4gYXJyYXkgZm9ybVwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuXHJcbiAgICAgIC8vIFRoZSBuYW1lIG9mIHRoZSBkYXRhc2V0LlxyXG4gICAgICAvLyBUaGlzIHdpbGwgYmUgYXBwZW5kZWQgdG8gdGhlIGNsYXNzIG5hbWUgb2YgdGhlIGZpbHRlcmVkIHJlc3VsdCA8ZGl2Pi5cclxuICAgICAgdGhpcy5uYW1lID0gJ2ZvbGxvd09uVGFza0RlZm5TZWFyY2gnO1xyXG5cclxuICAgICAgLy8gVGhlIG1heCBudW1iZXIgb2Ygc3VnZ2VzdGlvbnMgdG8gYmUgZGlzcGxheWVkLlxyXG4gICAgICB0aGlzLmxpbWl0ID0gNTA7XHJcblxyXG4gICAgICAvLyBUaGUgbWluaW11bSBjaGFyYWN0ZXIgbGVuZ3RoIG5lZWRlZCBiZWZvcmUgc3VnZ2VzdGlvbnMgc3RhcnQgZ2V0dGluZyByZW5kZXJlZC5cclxuICAgICAgdGhpcy5taW5MZW5ndGggPSAxO1xyXG4gICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0ZVRpbWVIZWxwZXIge1xuXG4gICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgIHN0YXRpYyBhZGRIb3VycyhkYXRlLCBob3Vycykge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpICsgKGhvdXJzICogNjAgKiA2MCAqIDEwMDApKTtcbiAgIH1cblxuICAgc3RhdGljIGZvcm1hdERhdGUoZGF0ZSkge1xuICAgICAgbGV0IHN0ciA9XG4gICAgICAgICAoKGRhdGUuZ2V0RGF0ZSgpIDwgMTApID8gJzAnIDogJycpICsgZGF0ZS5nZXREYXRlKCkgKyAnLScgK1xuICAgICAgICAgdGhpcy5nZXRNb250aFNob3J0U3RyKGRhdGUuZ2V0TW9udGgoKSArIDEpICsgJy0nICtcbiAgICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgIHJldHVybiBzdHI7XG4gICB9XG5cbiAgIHN0YXRpYyBmb3JtYXRUaW1lKGRhdGUpIHtcbiAgICAgIGxldCBzdHIgPVxuICAgICAgICAgKChkYXRlLmdldEhvdXJzKCkgPCAxMCkgPyAnMCcgOiAnJykgKyBkYXRlLmdldEhvdXJzKCkgKyAnOicgK1xuICAgICAgICAgKChkYXRlLmdldE1pbnV0ZXMoKSA8IDEwKSA/ICcwJyA6ICcnKSArIGRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgcmV0dXJuIHN0cjtcbiAgIH1cblxuICAgLy8gQ29udmVydHMgYSB0aW1lIGluIHRoZSBmb3JtYXQgaGg6bW0gaW50byBpdHMgY29ycmVzcG9uZGluZyBkZWNpbWFsIHZhbHVlXG4gICBzdGF0aWMgY29udmVydFRpbWVUb0RlY2ltYWwodGltZSkge1xuICAgICAgbGV0IGhvdXJzTWludXRlcyA9IHRpbWUuc3BsaXQoL1suOl0vKTtcbiAgICAgIGxldCBob3VycyA9IHBhcnNlSW50KGhvdXJzTWludXRlc1swXSwgMTApO1xuICAgICAgbGV0IG1pbnV0ZXMgPSBob3Vyc01pbnV0ZXNbMV0gPyBwYXJzZUludChob3Vyc01pbnV0ZXNbMV0sIDEwKSA6IDA7XG4gICAgICByZXR1cm4gaG91cnMgKyBtaW51dGVzIC8gNjA7XG4gICB9XG5cbiAgIHN0YXRpYyBnZXRNb250aFNob3J0U3RyKG1vbnRoKSB7XG4gICAgICBpZiAobW9udGggPT09IDEpIHJldHVybiAnSkFOJztcbiAgICAgIGVsc2UgaWYgKG1vbnRoID09PSAyKSByZXR1cm4gJ0ZFQic7XG4gICAgICBlbHNlIGlmIChtb250aCA9PT0gMykgcmV0dXJuICdNQVInO1xuICAgICAgZWxzZSBpZiAobW9udGggPT09IDQpIHJldHVybiAnQVBSJztcbiAgICAgIGVsc2UgaWYgKG1vbnRoID09PSA1KSByZXR1cm4gJ01BWSc7XG4gICAgICBlbHNlIGlmIChtb250aCA9PT0gNikgcmV0dXJuICdKVU4nO1xuICAgICAgZWxzZSBpZiAobW9udGggPT09IDcpIHJldHVybiAnSlVMJztcbiAgICAgIGVsc2UgaWYgKG1vbnRoID09PSA4KSByZXR1cm4gJ0FVRyc7XG4gICAgICBlbHNlIGlmIChtb250aCA9PT0gOSkgcmV0dXJuICdTRVAnO1xuICAgICAgZWxzZSBpZiAobW9udGggPT09IDEwKSByZXR1cm4gJ09DVCc7XG4gICAgICBlbHNlIGlmIChtb250aCA9PT0gMTEpIHJldHVybiAnTk9WJztcbiAgICAgIGVsc2UgaWYgKG1vbnRoID09PSAxMikgcmV0dXJuICdERUMnO1xuICAgICAgZWxzZSByZXR1cm4gXCJcIjtcbiAgIH1cblxufVxuIiwiZXhwb3J0IGNvbnN0IEFkZCA9IGZ1bmN0aW9uKHgsIHkpIHtcblx0cmV0dXJuKHgreSk7XG59XG5cbmV4cG9ydCBjb25zdCBTdWJ0cmFjdCA9IGZ1bmN0aW9uKHgsIHkpIHtcblx0cmV0dXJuKHgteSk7XG59XG5cbmV4cG9ydCBjb25zdCBNdWx0aXBseSA9IGZ1bmN0aW9uKHgsIHkpIHtcblx0cmV0dXJuKHgqeSk7XG59IiwiLypnbG9iYWwgZXhwZWN0Ki9cbmltcG9ydCB7IEFkZCwgU3VidHJhY3QsIE11bHRpcGx5IH0gZnJvbSAnLi9mZWF0dXJlTWF0aC5qcyc7XG5cbmRlc2NyaWJlKCdbRHVtbXldJywgKCkgPT4ge1xuXHRcblx0aXQoJ1tBZGRdIHNob3VsZCBhZGQgdHdvIG51bWJlcnMgdG9nZXRoZXIgYW5kIHJldHVybiB0aGUgcmVzdWx0JywgKCkgPT4ge1xuXHRcdGV4cGVjdChBZGQoMSwgMikpLnRvQmUoMyk7XG5cdH0pO1xuXG5cdGl0KCdbU3VidHJhY3RdIHNob3VsZCBzdWJ0cmFjdCBzZWNvbmQgcGFyYW0gZnJvbSBmaXJzdCBhbmQgcmV0dXJuIHRoZSByZXN1bHQnLCAoKSA9PiB7XG5cdFx0ZXhwZWN0KFN1YnRyYWN0KDEsIDIpKS50b0JlKC0xKTtcblx0fSk7XG5cblx0aXQoJ1tNdWx0aXBseV0gc2hvdWxkIG11bHRpcGx5IHR3byBudW1iZXJzIGFuZCByZXR1cm4gdGhlIHJlc3VsdCcsICgpID0+IHtcblx0XHRleHBlY3QoTXVsdGlwbHkoMSwgMikpLnRvQmUoMik7XG5cdH0pO1xuXG59KTsgXG4iLCIvKiBnbG9iYWwgZXhwZWN0LCBqYXNtaW5lLCBiZWZvcmVBbGwsIHNweU9uLCAkICovXHJcbmltcG9ydCBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZSBmcm9tICcuL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLmpzJztcclxuXHJcbmRlc2NyaWJlKCdGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZSBmb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UuanMnLCBmdW5jdGlvbigpIHtcclxuICAgbGV0IHNlcnZpY2U7XHJcbiAgIGxldCB1cmwgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jb21cIjtcclxuICAgbGV0IHRhc2tEZWZpbml0aW9uUmVzcG9uc2UgPSBbe1xyXG4gICAgICBjb2RlOiAzLFxyXG4gICAgICBjb25maWdTbG90Q29kZTogMyxcclxuICAgICAgbmFtZTogXCJUaGlyZFwiXHJcbiAgIH0sIHtcclxuICAgICAgY29kZTogMixcclxuICAgICAgY29uZmlnU2xvdENvZGU6IDIsXHJcbiAgICAgIG5hbWU6IFwiU2Vjb25kXCJcclxuICAgfSwge1xyXG4gICAgICBjb2RlOiAxLFxyXG4gICAgICBjb25maWdTbG90Q29kZTogMSxcclxuICAgICAgbmFtZTogXCJGaXJzdFwiXHJcbiAgIH1dO1xyXG5cclxuICAgYmVmb3JlQWxsKGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aGlzLnNlcnZpY2UgPSBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZTtcclxuICAgfSk7XHJcblxyXG4gICBpdCgnU29ydHMgdGFzayBkZWZpbml0aW9ucycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgc29ydGVkRGF0YSA9IHRoaXMuc2VydmljZS5zb3J0VGFza0RlZmluaXRpb25zKHRhc2tEZWZpbml0aW9uUmVzcG9uc2UpO1xyXG5cclxuICAgICAgZXhwZWN0KHNvcnRlZERhdGFbMF0uY29kZSkudG9CZSgxKTtcclxuICAgICAgZXhwZWN0KHNvcnRlZERhdGFbMV0uY29kZSkudG9CZSgyKTtcclxuICAgICAgZXhwZWN0KHNvcnRlZERhdGFbMl0uY29kZSkudG9CZSgzKTtcclxuICAgfSk7XHJcblxyXG4gICBpdCgnRmV0Y2hlcyB0YXNrIGRlZmluaXRpb25zIHdpdGggZXJyb3IgZm9yIGludmFsaWQgcmVzcG9uc2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgamFzbWluZS5BamF4Lmluc3RhbGwoKTtcclxuXHJcbiAgICAgIHNweU9uKCQsICdhamF4JykuYW5kLmNhbGxGYWtlKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgbGV0IGludmFsaWRSZXNwb25zZSA9IHt9O1xyXG4gICAgICAgICByZXR1cm4gZS5zdWNjZXNzKGludmFsaWRSZXNwb25zZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICB0aGlzLnNlcnZpY2UuZ2V0Rm9sbG93T25UYXNrRGVmaW5pdGlvbnModXJsKTtcclxuICAgICAgfSkudG9UaHJvdygpO1xyXG5cclxuICAgICAgamFzbWluZS5BamF4LnVuaW5zdGFsbCgpO1xyXG5cclxuICAgfSk7XHJcblxyXG4gICBpdCgnRmV0Y2hlcyB0YXNrIGRlZmluaXRpb25zIHN1Y2Nlc3NmdWxseScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBqYXNtaW5lLkFqYXguaW5zdGFsbCgpO1xyXG5cclxuICAgICAgc3B5T24oJCwgJ2FqYXgnKS5hbmQuY2FsbEZha2UoZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICByZXR1cm4gZS5zdWNjZXNzKHRhc2tEZWZpbml0aW9uUmVzcG9uc2UpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuc2VydmljZS5nZXRGb2xsb3dPblRhc2tEZWZpbml0aW9ucyh1cmwpLnRoZW4oZnVuY3Rpb24oZmFrZURhdGEpIHtcclxuICAgICAgICAgZXhwZWN0KGZha2VEYXRhKS50b0VxdWFsKHRhc2tEZWZpbml0aW9uUmVzcG9uc2UpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGphc21pbmUuQWpheC51bmluc3RhbGwoKTtcclxuXHJcbiAgIH0pO1xyXG5cclxufSk7XHJcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XHJcbi8vIGltcG9ydCBUeXBlYWhlYWQgZnJvbSBcInR5cGVhaGVhZC5qc1wiO1xyXG4vLyBpbXBvcnQgQmxvb2Rob3VuZCBmcm9tIFwiYmxvb2Rob3VuZC1qc1wiO1xyXG5cclxuaW1wb3J0IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcgZnJvbSAnLi9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnLmpzJztcclxuaW1wb3J0IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlIGZyb20gJy4vZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UuanMnO1xyXG5cclxuLyoqXHJcbiAqIFRoZSBidXR0b24gY29udHJvbGxlciB0aGF0IGhhbmRsZXMgdWkgaW50ZXJhY3Rpb25zLlxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIge1xyXG5cclxuICAgY29uc3RydWN0b3IodHlwZUFoZWFkSWQsIG9rQnV0dG9uSWQsIG5vdEZvdW5kTXNnSWQsIGZvbGxvd09uVGFza0RlZm5VdWlkT3VwdXRJZCwgYXBpVXJsSWQpIHtcclxuICAgICAgbGV0IHNjb3BlID0gdGhpcztcclxuICAgICAgdGhpcy5ub3RGb3VuZE1zZ0VsID0gJChcIiNcIiArIG5vdEZvdW5kTXNnSWQpO1xyXG4gICAgICB0aGlzLm9rQnRuRWwgPSAkKCcjJyArIG9rQnV0dG9uSWQpO1xyXG4gICAgICB0aGlzLnR5cGVBaGVhZFNlYXJjaElucHV0RWwgPSAkKCcjJyArIHR5cGVBaGVhZElkKTtcclxuICAgICAgdGhpcy5mb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0RWwgPSAkKCcjJyArIGZvbGxvd09uVGFza0RlZm5VdWlkT3VwdXRJZCk7XHJcbiAgICAgIGxldCBhcGlVcmxFbCA9ICQoXCIjXCIgKyBhcGlVcmxJZCk7XHJcblxyXG4gICAgICBpZiAoIXRoaXMubm90Rm91bmRNc2dFbC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBmb3VuZCBtZXNzYWdlIGVsZW1lbnQgcmVxdWlyZWRcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdGhpcy5va0J0bkVsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT2sgYnV0dG9uIGVsZW1lbnQgcmVxdWlyZWRcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdGhpcy50eXBlQWhlYWRTZWFyY2hJbnB1dEVsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHlwZWFoZWFkIGlucHV0IGVsZW1lbnQgcmVxdWlyZWRcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdGhpcy5mb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0RWwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPdXRwdXQgZm9sbG93T24gdGFzayBkZWZpbml0aW9uIFVVSSBpbnB1dCBlbGVtZW50IHJlcXVpcmVkXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWFwaVVybEVsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUkVTVCBhcGkgdXJsIGVsZW1lbnQgaXMgcmVxdWlyZWRcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuYXBpVXJsID0gYXBpVXJsRWwudmFsKCk7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPSAnJztcclxuXHJcbiAgICAgIHRoaXMudHlwZUFoZWFkU2VhcmNoSW5wdXRFbC5rZXlkb3duKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgaWYgKHNjb3BlLnR5cGVBaGVhZFNlYXJjaElucHV0RWwudmFsKCkgIT0gc2NvcGUuc2VsZWN0ZWRPcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgc2NvcGUuZGlzYWJsZU9rQnRuKCk7XHJcbiAgICAgICAgICAgICAgICAgIHNjb3BlLmNsZWFyU2VsZWN0ZWRUYXNrRGVmaW5pdGlvbigpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIGJpbmQgc2libGluZyBtZXRob2RzIHRvIGNsYXNzIGluc3RhbmNlLlxyXG4gICAgICB0aGlzLmluaXRpYWxpemUgPSB0aGlzLmluaXRpYWxpemUuYmluZCh0aGlzKTtcclxuXHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBzZXQgdGhlIGlkIHZhbHVlIG9mIHRoZSBzZWxlY3RlZCB0YXNrIGRlZmluaXRpb24gdG8gb3VyIGh0bWwgaW5wdXQgZWxlbWVudFxyXG4gICAgKi9cclxuICAgc2V0U2VsZWN0ZWRUYXNrRGVmaW5pdGlvbihzdWdnZXN0aW9uKSB7XHJcbiAgICAgIGlmIChzdWdnZXN0aW9uKSB7XHJcbiAgICAgICAgIHRoaXMudHlwZUFoZWFkU2VhcmNoSW5wdXRFbC52YWwodGhpcy5kaXNwbGF5Rm9sbG93T24obnVsbCwgc3VnZ2VzdGlvbikpO1xyXG4gICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uID0gdGhpcy50eXBlQWhlYWRTZWFyY2hJbnB1dEVsLnZhbCgpO1xyXG4gICAgICAgICB0aGlzLmZvbGxvd09uVGFza0RlZm5VdWlkT3VwdXRFbC5hdHRyKCd2YWx1ZScsIHN1Z2dlc3Rpb24uaWQpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBjbGVhciBhbnkgc2VsZWN0ZWQgdGFzayBkZWZpbml0aW9uIHZhbHVlIGluIG91ciBodG1sIGlucHV0IGVsZW1lbnRcclxuICAgICovXHJcbiAgIGNsZWFyU2VsZWN0ZWRUYXNrRGVmaW5pdGlvbigpIHtcclxuICAgICAgdGhpcy5mb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0RWwuYXR0cigndmFsdWUnLCAnJyk7XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBzZXR1cCBVSSBlbGVtZW50cywgZmV0Y2ggdGFzayBkZWZpbml0aW9ucyBhbmQgY29uZmlndXJlIHR5cGUgYWhlYWRcclxuICAgICovXHJcbiAgIGluaXRpYWxpemUoKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZU9rQnRuKCk7XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgICByZXR1cm4gRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UuZ2V0Rm9sbG93T25UYXNrRGVmaW5pdGlvbnModGhpcy5hcGlVcmwpLnRoZW4oKHRhc2tEZWZpbml0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyZVR5cGVBaGVhZCh0YXNrRGVmaW5pdGlvbnMpO1xyXG4gICAgICAgICAgICAvLyBvbmNlIHRoZSB0eXBlYWhlYWQgaW5wdXQgaXMgaW5pdGlhbGl6ZWQsIHRoZSB0eXBlIGZpZWxkIHdpbGwgbG9zdCBmb2N1cywgaGF2ZSB0b1xyXG4gICAgICAgICAgICAvLyBtYW51YWxseSBmb2N1cyBpdCBhZ2Fpbi5cclxuICAgICAgICAgICAgdGhpcy50eXBlQWhlYWRTZWFyY2hJbnB1dEVsLmZvY3VzKCk7XHJcbiAgICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG4gICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIGZldGNoIHRhc2sgZGVmaW5pdGlvbnMuXCIsIGVycm9yKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogY29uZmlndXJlIHR5cGUgYWhlYWQgd2l0aCBkYXRhIHNvdXJjZSBhbmQgZGVmYXVsdCBjb25maWd1cmF0aW9uLlxyXG4gICAgKi9cclxuICAgY29uZmlndXJlVHlwZUFoZWFkKHRhc2tEZWZpbml0aW9ucykge1xyXG4gICAgICBsZXQgc2NvcGUgPSB0aGlzO1xyXG4gICAgICBsZXQgY29uZmlnID0gbmV3IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcodGFza0RlZmluaXRpb25zKTtcclxuXHJcbiAgICAgIC8vIGNyZWF0ZSBhIGRpc3BsYXkgdmFsdWUgdGhhdCB3aWxsIGFsbG93IGZ1bGwgdGV4dCBzZWFyY2ggb24gZnVsbCB2YWx1ZS5cclxuICAgICAgJC5lYWNoKGNvbmZpZy5kYXRhLCBmdW5jdGlvbihpbmRleCwgZGF0YSkge1xyXG4gICAgICAgICBkYXRhLmRpc3BsYXlWYWx1ZSA9IHNjb3BlLmRpc3BsYXlGb2xsb3dPbihudWxsLCBkYXRhKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAkLnR5cGVhaGVhZCh7XHJcbiAgICAgICAgIGlucHV0OiBzY29wZS50eXBlQWhlYWRTZWFyY2hJbnB1dEVsLFxyXG4gICAgICAgICBoaWdobGlnaHQ6IHRydWUsXHJcbiAgICAgICAgIG5hbWU6IGNvbmZpZy5uYW1lLFxyXG4gICAgICAgICBsaW1pdDogY29uZmlnLmxpbWl0LFxyXG4gICAgICAgICBtaW5MZW5ndGg6IGNvbmZpZy5taW5MZW5ndGgsXHJcbiAgICAgICAgIGRpc3BsYXk6IFtcImRpc3BsYXlWYWx1ZVwiXSxcclxuICAgICAgICAgZW1wdHlUZW1wbGF0ZTogJzxkaXYgY2xhc3M9XCJteC10eXBlYWhlYWQtbXNnLW5vdGZvdW5kXCI+JyArIHNjb3BlLm5vdEZvdW5kTXNnRWwudmFsKCkgKyAnPC9kaXY+JyxcclxuICAgICAgICAgc291cmNlOiB7XHJcbiAgICAgICAgICAgIGRhdGE6IGNvbmZpZy5kYXRhLFxyXG4gICAgICAgICB9LFxyXG4gICAgICAgICBjYWxsYmFjazoge1xyXG4gICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbih0eXBlQWhlYWRJbnB1dEVsLCBzZWxlY3Rpb25FbCwgc2VsZWN0ZWRSZWNvcmQsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgIHNjb3BlLmVuYWJsZU9rQnRuKCk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBzYXZlIHVzZXIgc2VsZWN0aW9uIGZyb20gdGhlIHNlYXJjaCByZXN1bHQuXHJcbiAgICAgICAgICAgICAgIHNjb3BlLnNldFNlbGVjdGVkVGFza0RlZmluaXRpb24oc2VsZWN0ZWRSZWNvcmQpO1xyXG4gICAgICAgICAgICAgICB0aGlzLmhpZGVMYXlvdXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICAvLyBEZWZpbmUgaG93IHRoZSByZXN1bHQgaXMgZGlzcGxheWVkIGluIHRoZSBkcm9wZG93bi5cclxuICAgLy8gSXQgd2lsbCBkaXNwbGF5IHRoZSByZXN1bHQgaW4gdGhlIGZvcm1hdCBvZjogdGFzayBjb2RlIC0gY29uZmlnc2xvdCBjb2RlIC0gdGFzayBuYW1lXHJcbiAgIGRpc3BsYXlGb2xsb3dPbihxdWVyeSwgc3VnZ2VzdGlvbk9iaikge1xyXG4gICAgICBpZiAoc3VnZ2VzdGlvbk9iaikge1xyXG4gICAgICAgICByZXR1cm4gc3VnZ2VzdGlvbk9iai5jb2RlICsgXCIgLSBcIiArIHN1Z2dlc3Rpb25PYmouY29uZmlnU2xvdENvZGUgKyBcIiAtIFwiICsgc3VnZ2VzdGlvbk9iai5uYW1lO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBXcmFwcGVyIHRvIGVuYWJsZSBvdXIgT0sgYnV0dG9uXHJcbiAgICAqL1xyXG4gICBlbmFibGVPa0J0bigpIHtcclxuICAgICAgaWYgKHRoaXMub2tCdG5FbCkge1xyXG4gICAgICAgICBpZiAodGhpcy5va0J0bkVsLmF0dHIoJ29yaWdpbk9uQ2xpY2tFdmVudCcpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2tCdG5FbC5hdHRyKCdvbmNsaWNrJywgdGhpcy5va0J0bkVsLmF0dHIoJ29yaWdpbk9uQ2xpY2tFdmVudCcpKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgaWYgKHRoaXMub2tCdG5FbC5hdHRyKCdvcmlnaW5UaXRsZScpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2tCdG5FbC5hdHRyKCd0aXRsZScsIHRoaXMub2tCdG5FbC5hdHRyKCdvcmlnaW5UaXRsZScpKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgdGhpcy5va0J0bkVsLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICB0aGlzLm9rQnRuRWwucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgICAgdGhpcy5va0J0bkVsLnJlbW92ZUF0dHIoJ29yaWdpbk9uQ2xpY2tFdmVudCcpO1xyXG4gICAgICAgICB0aGlzLm9rQnRuRWwucmVtb3ZlQXR0cignb3JpZ2luVGl0bGUnKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogV3JhcHBlciB0byBkaXNhYmxlIG91ciBPSyBidXR0b25cclxuICAgICovXHJcbiAgIGRpc2FibGVPa0J0bigpIHtcclxuICAgICAgaWYgKHRoaXMub2tCdG5FbCkge1xyXG4gICAgICAgICAvLyBzdG9yZSB0aGUgYnV0dG9uIG9uY2xpY2sgaGFuZGxlciBhbmQgdGl0bGUgZm9yIGZ1dHVyZSByZXN0b3JlXHJcbiAgICAgICAgIGlmICghdGhpcy5va0J0bkVsLmF0dHIoJ29yaWdpbk9uQ2xpY2tFdmVudCcpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2tCdG5FbC5hdHRyKCdvcmlnaW5PbkNsaWNrRXZlbnQnLCB0aGlzLm9rQnRuRWwuYXR0cignb25jbGljaycpKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgaWYgKCF0aGlzLm9rQnRuRWwuYXR0cignb3JpZ2luVGl0bGUnKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9rQnRuRWwuYXR0cignb3JpZ2luVGl0bGUnLCB0aGlzLm9rQnRuRWwuYXR0cigndGl0bGUnKSk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIHRoaXMub2tCdG5FbC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgdGhpcy5va0J0bkVsLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgIHRoaXMub2tCdG5FbC5hdHRyKCdvbmNsaWNrJywgZmFsc2UpO1xyXG4gICAgICAgICB0aGlzLm9rQnRuRWwuYXR0cigndGl0bGUnLCAnJyk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxufVxyXG4iLCIvKiBnbG9iYWwgJCwgZXhwZWN0LCBqYXNtaW5lLCBzcHlPbiwgJCwgc2V0Rml4dHVyZXMgKi9cclxuLyoqXHJcbiAqIENyZWF0ZSBGb2xsb3ctb24gVGFzayBTZWFyY2ggVGVzdCBTdWl0ZVxyXG4gKiovXHJcblxyXG5pbXBvcnQgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIgZnJvbSAnLi9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29udHJvbGxlci5qcyc7XHJcblxyXG5kZXNjcmliZSgnRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIgZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyLmpzJywgZnVuY3Rpb24oKSB7XHJcbiAgIGxldCByZXN0QXBpVXJsID0gXCIvc29tZVJlc3RBcGlcIjtcclxuXHJcbiAgIGZ1bmN0aW9uIGdldEdvb2RDb250cm9sbGVyKCkge1xyXG4gICAgICByZXR1cm4gbmV3IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyKCdmb2xsb3dPblRhc2tTZWFyY2hRdWVyeScsXHJcbiAgICAgICAgICdpZEJ1dHRvbk9rJyxcclxuICAgICAgICAgJ2lkVHlwZWFoZWFkTm90Rm91bmRNZXNzYWdlJyxcclxuICAgICAgICAgJ2lkRmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZCcsXHJcbiAgICAgICAgICdpZGZvbGxvd09uVGFza0RlZmluaXRpb25SZXN0QVBJJyk7XHJcbiAgIH1cclxuXHJcbiAgIGZ1bmN0aW9uIHNldFVwSFRNTEZpeHR1cmUoKSB7XHJcbiAgICAgIHNldEZpeHR1cmVzKFxyXG4gICAgICAgICAnPGZvcm0gaWQ9XCJmb3JtLXR5cGVhaGVhZC10ZXN0XCIgbmFtZT1cImZvcm0tdHlwZWFoZWFkLXRlc3RcIj4nICtcclxuICAgICAgICAgJyAgPGRpdiBjbGFzcz1cInR5cGVhaGVhZF9fY29udGFpbmVyXCI+JyArXHJcbiAgICAgICAgICcgICAgIDxkaXYgY2xhc3M9XCJ0eXBlYWhlYWRfX2ZpZWxkXCI+JyArXHJcbiAgICAgICAgICcgICAgICAgIDxzcGFuIGNsYXNzPVwidHlwZWFoZWFkX19xdWVyeVwiPicgK1xyXG4gICAgICAgICAnICAgICAgICAgIDxpbnB1dCBjbGFzcz0gXCJqcy10eXBlYWhlYWQtdGVzdFwiIGlkPVwiZm9sbG93T25UYXNrU2VhcmNoUXVlcnlcIiBuYW1lPVwiZm9sbG93T25UYXNrU2VhcmNoUXVlcnlcIj4nICtcclxuICAgICAgICAgJyAgICAgICAgPC9zcGFuPicgK1xyXG4gICAgICAgICAnICAgICA8L2Rpdj4nICtcclxuICAgICAgICAgJyAgPC9kaXY+JyArXHJcbiAgICAgICAgICcgIDxidXR0b24gaWQ9XCJpZEJ1dHRvbk9rXCIgdGl0bGU9XCJteXRpdGxlXCI+T2s8L2J1dHRvbj4nICtcclxuICAgICAgICAgJyAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiYUZvbGxvd09uVGFza0RlZmluaXRpb25VdWlkXCIgaWQ9XCJpZEZpZWxkRm9sbG93T25UYXNrRGVmblV1aWRcIj4nICtcclxuICAgICAgICAgJyAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBpZD1cImlkVHlwZWFoZWFkTm90Rm91bmRNZXNzYWdlXCIgdmFsdWU9XCJ3ZWIubXNnLk1TR19OT19NQVRDSElOR19GT0xMT1dPTl9UQVNLX0RFRklOSVRJT05TXCI+JyArXHJcbiAgICAgICAgICcgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgaWQ9XCJpZGZvbGxvd09uVGFza0RlZmluaXRpb25SZXN0QVBJXCIgdmFsdWU9XCInICsgcmVzdEFwaVVybCArICdcIicgK1xyXG4gICAgICAgICAnPC9mb3JtPicpO1xyXG4gICB9XHJcblxyXG4gICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBqYXNtaW5lLkFqYXguaW5zdGFsbCgpO1xyXG4gICAgICBzZXRVcEhUTUxGaXh0dXJlKCk7XHJcbiAgICAgIHRoaXMub2tCdXR0b25FbCA9ICQoJyNpZEJ1dHRvbk9rJyk7XHJcbiAgICAgIHRoaXMuZmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZEVsID0gJCgnI2lkRmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZCcpO1xyXG4gICB9KTtcclxuXHJcbiAgIGFmdGVyRWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgamFzbWluZS5BamF4LnVuaW5zdGFsbCgpO1xyXG4gICB9KTtcclxuXHJcbiAgIGl0KFwiU2hvdWxkIGhhdmUgYSBidXR0b24gd2l0aCBPSyBsYWJlbFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgZXhwZWN0KHRoaXMub2tCdXR0b25FbCkudG9IYXZlVGV4dChcIk9rXCIpO1xyXG4gICB9KTtcclxuXHJcbiAgIGl0KFwiU2hvdWxkIHRocm93IGVycm9yIGluZGljYXRpbmcgbWlzc2luZyB0eXBlYWhlYWRJZFwiLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgbmV3IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyKCdGQUtFX2ZvbGxvd09uVGFza1NlYXJjaFF1ZXJ5JyxcclxuICAgICAgICAgICAgJ0ZBS0VfaWRCdXR0b25PaycsXHJcbiAgICAgICAgICAgICdGQUtFX2lkVHlwZWFoZWFkTm90Rm91bmRNZXNzYWdlJyxcclxuICAgICAgICAgICAgJ0ZBS0VfaWRGaWVsZEZvbGxvd09uVGFza0RlZm5VdWlkJyxcclxuICAgICAgICAgICAgJ0ZBS0VfaWRmb2xsb3dPblRhc2tEZWZpbml0aW9uUmVzdEFQSScpO1xyXG4gICAgICB9KS50b1Rocm93KCk7XHJcbiAgIH0pO1xyXG5cclxuICAgaXQoXCJTaG91bGQgaGF2ZSBPayBidXR0b24gZW5hYmxlZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgbGV0IGNvbnRyb2xsZXIgPSBnZXRHb29kQ29udHJvbGxlcigpO1xyXG4gICAgICBjb250cm9sbGVyLmVuYWJsZU9rQnRuKCk7XHJcbiAgICAgIGV4cGVjdCh0aGlzLm9rQnV0dG9uRWwpLm5vdC50b0hhdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgfSk7XHJcblxyXG4gICBpdChcIlNob3VsZCBoYXZlIE9rIGJ1dHRvbiBkaXNhYmxlZFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgbGV0IGNvbnRyb2xsZXIgPSBnZXRHb29kQ29udHJvbGxlcigpO1xyXG4gICAgICBjb250cm9sbGVyLmRpc2FibGVPa0J0bigpO1xyXG4gICAgICBleHBlY3QodGhpcy5va0J1dHRvbkVsKS50b0hhdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgfSk7XHJcblxyXG5cclxuICAgaXQoJ3JldHVybnMgYSBwcm9wZXJseSBjb25zdHJ1Y3RlZCBkaXNwbGF5IHZhbHVlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGxldCBkYXRhID0gW3tcclxuICAgICAgICAgY29kZTogNSxcclxuICAgICAgICAgY29uZmlnU2xvdENvZGU6IDMsXHJcbiAgICAgICAgIG5hbWU6ICd0ZXN0J1xyXG4gICAgICB9XTtcclxuXHJcbiAgICAgIGxldCBjb250cm9sbGVyID0gZ2V0R29vZENvbnRyb2xsZXIoKTtcclxuICAgICAgZXhwZWN0KGNvbnRyb2xsZXIuZGlzcGxheUZvbGxvd09uKG51bGwsIGRhdGFbMF0pKS50b0JlKFwiNSAtIDMgLSB0ZXN0XCIpO1xyXG4gICB9KTtcclxuXHJcbiAgIGl0KFwiU2hvdWxkIHNldCBhbmQgY2xlYXIgc2VsZWN0ZWQgdGFzayBkZWZpbml0aW9uIG9mIG91dHB1dCBlbGVtZW50XCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgY29udHJvbGxlciA9IGdldEdvb2RDb250cm9sbGVyKCk7XHJcbiAgICAgIGNvbnRyb2xsZXIuc2V0U2VsZWN0ZWRUYXNrRGVmaW5pdGlvbih7IGlkOiAnc29tZVZhbHVlJyB9KTtcclxuICAgICAgZXhwZWN0KHRoaXMuZmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZEVsLmF0dHIoJ3ZhbHVlJykpLnRvQmUoJ3NvbWVWYWx1ZScpO1xyXG5cclxuICAgICAgY29udHJvbGxlci5jbGVhclNlbGVjdGVkVGFza0RlZmluaXRpb24oKTtcclxuICAgICAgZXhwZWN0KHRoaXMuZmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZEVsLmF0dHIoJ3ZhbHVlJykpLnRvQmUoJycpO1xyXG4gICB9KTtcclxuXHJcbiAgIGl0KCdGZXRjaGVzIHRhc2sgZGVmaW5pdGlvbnMgc3VjY2Vzc2Z1bGx5JywgZnVuY3Rpb24oZG9uZSkge1xyXG4gICAgICBsZXQgY29udHJvbGxlciA9IGdldEdvb2RDb250cm9sbGVyKCk7XHJcbiAgICAgIGxldCByZXNwb25zZVRhc2tEZWZpbml0aW9ucyA9IFtcclxuICAgICAgICAgeyBcImlkXCI6IFwiQTZBQUUxOEI2Mzg3NDBCMjlCMkYzNEQ1MUNGMkNDRDVcIiwgXCJjb25maWdTbG90Q29kZVwiOiBcIkJPTTEyM1wiLCBcIm5hbWVcIjogXCJSZXFXaXRoSW1wYWN0MVwiLCBcImNvZGVcIjogXCJOQzE0OTkyLVJFUTFcIiB9LFxyXG4gICAgICAgICB7IFwiaWRcIjogXCJBNkFBRTE4QjYzODc0MEIyOUIyRjM0RDUxQ0YyQ0NENlwiLCBcImNvbmZpZ1Nsb3RDb2RlXCI6IFwiQk9NMTIzXCIsIFwibmFtZVwiOiBcIlJlcVdpdGhJbXBhY3QyXCIsIFwiY29kZVwiOiBcIk5DMTQ5OTItUkVRMlwiIH0sXHJcbiAgICAgICAgIHsgXCJpZFwiOiBcIkE2QUFFMThCNjM4NzQwQjI5QjJGMzRENTFDRjJDQ0Q3XCIsIFwiY29uZmlnU2xvdENvZGVcIjogXCJCT00xMjNcIiwgXCJuYW1lXCI6IFwiUmVxV2l0aEltcGFjdDNcIiwgXCJjb2RlXCI6IFwiTkMxNDk5Mi1SRVEzXCIgfSxcclxuICAgICAgICAgeyBcImlkXCI6IFwiQTZBQUUxOEI2Mzg3NDBCMjlCMkYzNEQ1MUNGMkNDRDhcIiwgXCJjb25maWdTbG90Q29kZVwiOiBcIkJPTTEyM1wiLCBcIm5hbWVcIjogXCJSZXFXaXRoSW1wYWN0NFwiLCBcImNvZGVcIjogXCJOQzE0OTkyLVJFUTRcIiB9LFxyXG4gICAgICAgICB7IFwiaWRcIjogXCJBNkFBRTE4QjYzODc0MEIyOUIyRjM0RDUxQ0YyQ0NEOVwiLCBcImNvbmZpZ1Nsb3RDb2RlXCI6IFwiQk9NMTIzXCIsIFwibmFtZVwiOiBcIlJlcVdpdGhJbXBhY3Q1XCIsIFwiY29kZVwiOiBcIk5DMTQ5OTItUkVRNVwiIH0sXHJcbiAgICAgICAgIHsgXCJpZFwiOiBcIkE2QUFFMThCNjM4NzQwQjI5QjJGMzRENTFDRjJDQ0UzXCIsIFwiY29uZmlnU2xvdENvZGVcIjogXCJCT00xMjNcIiwgXCJuYW1lXCI6IFwiUmVxV2l0aEltcGFjdDZcIiwgXCJjb2RlXCI6IFwiTkMxNDk5Mi1SRVE2XCIgfSxcclxuICAgICAgXTtcclxuXHJcbiAgICAgIHNweU9uKCQsICdhamF4JykuYW5kLmNhbGxGYWtlKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgcmV0dXJuIGUuc3VjY2VzcyhyZXNwb25zZVRhc2tEZWZpbml0aW9ucyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgbGV0IG9rQnV0dG9uRWwgPSAkKCcjaWRCdXR0b25PaycpO1xyXG4gICAgICBsZXQgbmF0aXZlRWwgPSAkKFwiI2ZvbGxvd09uVGFza1NlYXJjaFF1ZXJ5XCIpO1xyXG5cclxuICAgICAgLy8gaW5pdGlhbGl6ZSBjb250cm9sbGVyXHJcbiAgICAgIGNvbnRyb2xsZXIuaW5pdGlhbGl6ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiBhamF4IHdhcyBkb25lIHdpdGggcHJvcGVyIHVybFxyXG4gICAgICAgICBleHBlY3QoJC5hamF4LmNhbGxzLm1vc3RSZWNlbnQoKS5hcmdzWzBdLnVybCkudG9FcXVhbChyZXN0QXBpVXJsKTtcclxuXHJcbiAgICAgICAgIC8vIGNoZWNrIGlmIG9rIGJ1dHRvbiB3YXMgZGlzYWJsZWRcclxuICAgICAgICAgZXhwZWN0KG9rQnV0dG9uRWwpLnRvSGF2ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG5cclxuICAgICAgICAgLy8gY2hlY2sgaWYgZm9jdXMgd2FzIGdpdmVuIHRvIGNvbXBvbmVudFxyXG4gICAgICAgICBleHBlY3QobmF0aXZlRWwpLnRvQmVGb2N1c2VkKCk7XHJcbiAgICAgICAgIGRvbmUoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICB9KTtcclxuXHJcbn0pO1xyXG4iLCIvKiBnbG9iYWwgZXhwZWN0ICovXHJcbmltcG9ydCBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnIGZyb20gJy4vZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5qcyc7XHJcblxyXG5kZXNjcmliZSgnRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyBmb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5qcycsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgaXQoJ3Rocm93cyBleGNlcHRpb24gb24gZW1wdHkgZGF0YSBwYXJhbWV0ZXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBsZXQgY29uZmlnID0gbmV3IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcoKTtcclxuICAgICAgfSkudG9UaHJvd0Vycm9yKFwiVGhlIHJlc3BvbnNlIGRhdGEgc3VwcG9zZSB0byBiZSBpbiBhcnJheSBmb3JtXCIpO1xyXG4gICB9KTtcclxuICAgXHJcbiAgIGl0KCd0aHJvd3MgZXhjZXB0aW9uIHdpdGggYSBvYmplY3QgdHlwZSBkYXRhIHBhcmFtZXRlciBpbnN0ZWFkIG9mIGFycmF5JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgbGV0IGRhdGEgPSB7fTtcclxuICAgICAgICAgbGV0IGNvbmZpZyA9IG5ldyBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnKGRhdGEpO1xyXG4gICAgICB9KS50b1Rocm93RXJyb3IoXCJUaGUgcmVzcG9uc2UgZGF0YSBzdXBwb3NlIHRvIGJlIGluIGFycmF5IGZvcm1cIik7XHJcbiAgIH0pO1xyXG4gICBcclxuICAgaXQoJ2NyZWF0ZXMgYSB2YWxpZCBjb25maWcgb2JqZWN0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGxldCBkYXRhID0gW107XHJcbiAgICAgIGxldCBjb25maWcgPSBuZXcgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyhkYXRhKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChjb25maWcubmFtZSkudG9CZSgnZm9sbG93T25UYXNrRGVmblNlYXJjaCcpO1xyXG4gICAgICBleHBlY3QoY29uZmlnLmxpbWl0KS50b0JlKDUwKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5taW5MZW5ndGgpLnRvQmUoMSk7XHJcbiAgIH0pO1xyXG5cclxufSk7XHJcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XHJcbmltcG9ydCBUYXNrU3VwZXJ2aXNpb25TZXJ2aWNlIGZyb20gJy4vVGFza1N1cGVydmlzaW9uU2VydmljZSc7XHJcblxyXG5kZXNjcmliZSgnVGFza1N1cGVydmlzaW9uU2VydmljZS5qcycsICgpPT57XHJcblxyXG4gICBkZXNjcmliZSgnZ2V0Q3Jld3NGb3JVc2VyJywgKCk9PntcclxuXHJcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgVGFza1N1cGVydmlzaW9uU2VydmljZSgpO1xyXG5cclxuICAgICAgY29uc3QgdXNlcklkID0gJ3VzZXInO1xyXG4gICAgICBjb25zdCBzdWNjZXNzSGFuZGxlciA9IGZ1bmN0aW9uKCl7fTtcclxuICAgICAgY29uc3QgZmFpbHVyZUhhbmRsZXIgPSBmdW5jdGlvbigpe307XHJcblxyXG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBqYXNtaW5lLkFqYXguaW5zdGFsbCgpO1xyXG4gICAgICAgfSk7XHJcblxyXG4gICAgICBhZnRlckVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGphc21pbmUuQWpheC51bmluc3RhbGwoKTtcclxuICAgICAgIH0pO1xyXG5cdCAgIFxyXG5cclxuXHQgICAvKiogXHJcblx0ICAgXHJcbiAgICAgIGl0KCd0aHJvd3MgYW4gZXJyb3Igd2hlbiB1c2VyIGlzIG5vdCBwcm92aWRlZCcsICgpPT57XHJcbiAgICAgICAgIGxldCB1bmRlZmluZWRVc2VySWQ7XHJcbiAgICAgICAgIGV4cGVjdCgoKSA9PiBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1bmRlZmluZWRVc2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlciApKVxyXG4gICAgICAgICAgICAudG9UaHJvd0Vycm9yKCd1c2VySWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Rocm93cyBhbiBlcnJvciB3aGVuIHVzZXIgaXMgYmxhbmsgc3RyaW5nJywgKCk9PntcclxuICAgICAgICAgY29uc3QgYmxhbmtVc2VySWQgPSAnJztcclxuICAgICAgICAgZXhwZWN0KCgpID0+IHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKGJsYW5rVXNlcklkLCBzdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKSlcclxuICAgICAgICAgICAgLnRvVGhyb3dFcnJvcigndXNlcklkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCd0aHJvd3MgYW4gZXJyb3Igd2hlbiBzdWNjZXNzIGhhbmRsZXIgaXMgbm90IHByb3ZpZGVkJywgKCk9PntcclxuICAgICAgICAgbGV0IHVuZGVmaW5lZFN1Y2Nlc3NIYW5kbGVyO1xyXG4gICAgICAgICBleHBlY3QoKCkgPT4gc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCB1bmRlZmluZWRTdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKSlcclxuICAgICAgICAgICAgLnRvVGhyb3dFcnJvcignc3VjY2Vzc0hhbmRsZXIgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Rocm93cyBhbiBlcnJvciB3aGVuIHN1Y2Nlc3MgaGFuZGxlciBpcyBub3QgYSBmdW5jdGlvbicsICgpPT57XHJcbiAgICAgICAgIGNvbnN0IG5vbkZ1bmN0aW9uU3VjY2Vzc0hhbmRsZXIgPSAnaGVsbG8nO1xyXG4gICAgICAgICBleHBlY3QoKCkgPT4gc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCBub25GdW5jdGlvblN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlciApKVxyXG4gICAgICAgICAgICAudG9UaHJvd0Vycm9yKCdzdWNjZXNzSGFuZGxlciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgndGhyb3dzIGFuIGVycm9yIHdoZW4gZmFpbHVyZSBoYW5kbGVyIGlzIG5vdCBwcm92aWRlZCcsICgpPT57XHJcbiAgICAgICAgIGxldCB1bmRlZmluZWRGYWlsdXJlSGFuZGxlcjtcclxuICAgICAgICAgZXhwZWN0KCgpID0+IHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgc3VjY2Vzc0hhbmRsZXIsIHVuZGVmaW5lZEZhaWx1cmVIYW5kbGVyICkpXHJcbiAgICAgICAgICAgIC50b1Rocm93RXJyb3IoJ2ZhaWx1cmVIYW5kbGVyIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCd0aHJvd3MgYW4gZXJyb3Igd2hlbiBmYWlsdXJlIGhhbmRsZXIgaXMgbm90IGEgZnVuY3Rpb24nLCAoKT0+e1xyXG4gICAgICAgICBjb25zdCBub25GdW5jdGlvbkZhaWx1cmVIYW5kbGVyID0gJ2hlbGxvJztcclxuICAgICAgICAgZXhwZWN0KCgpID0+IHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgc3VjY2Vzc0hhbmRsZXIsIG5vbkZ1bmN0aW9uRmFpbHVyZUhhbmRsZXIgKSlcclxuICAgICAgICAgICAgLnRvVGhyb3dFcnJvcignZmFpbHVyZUhhbmRsZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3dpbGwgbWFrZSBhbiBhamF4IGNhbGwgdG8gdGhlIGNvcnJlY3QgdXJsJywgKCk9PntcclxuICAgICAgICAgc3B5T24oJCwgJ2FqYXgnKTtcclxuICAgICAgICAgc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCBzdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKTtcclxuICAgICAgICAgZXhwZWN0KCQuYWpheC5jYWxscy5tb3N0UmVjZW50KCkuYXJnc1swXS51cmwpLnRvRXF1YWwoJy9tYWludGVuaXgvcmVzdC9jcmV3L2xpc3QnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnd2lsbCBtYWtlIGFuIGFqYXggY2FsbCB3aXRoIHRoZSBjb3JyZWN0IHR5cGUnLCAoKT0+e1xyXG4gICAgICAgICBzcHlPbigkLCAnYWpheCcpO1xyXG4gICAgICAgICBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlciApO1xyXG4gICAgICAgICBleHBlY3QoJC5hamF4LmNhbGxzLm1vc3RSZWNlbnQoKS5hcmdzWzBdLnR5cGUpLnRvRXF1YWwoJ0dFVCcpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCd3aWxsIG1ha2UgYW4gYWpheCBjYWxsIHdpdGggdGhlIGNvcnJlY3QgZGF0YScsICgpPT57XHJcbiAgICAgICAgIHNweU9uKCQsICdhamF4Jyk7XHJcbiAgICAgICAgIHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgc3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICk7XHJcbiAgICAgICAgIGxldCBleHBlY3RlZERhdGEgPSB7J3VzZXJJZCc6IHVzZXJJZH07XHJcbiAgICAgICAgIGV4cGVjdCgkLmFqYXguY2FsbHMubW9zdFJlY2VudCgpLmFyZ3NbMF0uZGF0YSkudG9FcXVhbChleHBlY3RlZERhdGEpO1xyXG4gICAgICB9KTtcclxuXHQgICoqL1xyXG5cclxuICAgICAgaXQoJ3dpbGwgY2FsbCB0aGUgc3VjY2VzcyBoYW5kbGVyIHdoZW4gdGhlIGFqYXggY2FsbCBpcyBzdWNjZXNzZnVsJywgKCk9PntcclxuICAgICAgICAgc3B5T24oJCwgJ2FqYXgnKS5hbmQuY2FsbEZha2UoIGZ1bmN0aW9uKGFqeCkge1xyXG4gICAgICAgICAgICBhanguc3VjY2Vzcyh7fSk7XHJcbiAgICAgICAgIH0pO1xyXG5cdFx0IFxyXG4gICAgICAgICAvKiogY29uc3Qgc3B5U3VjY2Vzc0hhbmRsZXIgPSBqYXNtaW5lLmNyZWF0ZVNweSgnc3B5U3VjY2Vzc0hhbmRsZXInKTtcclxuICAgICAgICAgc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCBzcHlTdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKTtcclxuICAgICAgICAgZXhwZWN0KHNweVN1Y2Nlc3NIYW5kbGVyKS50b0hhdmVCZWVuQ2FsbGVkKCk7ICoqL1xyXG5cdFx0IFxyXG5cdFx0IFxyXG5cdFx0IC8qKlxyXG5cdFx0dmFyIHNweVN1Y2Nlc3NIYW5kbGVyID0gamFzbWluZS5jcmVhdGVTcHkoJ3N1Y2Nlc3MyMjInKTtcclxuXHRcdHZhciBzcHlGYWlsdXJlSGFuZGxlciA9IGphc21pbmUuY3JlYXRlU3B5KCdmYWlsdXJlJyk7XHJcblx0XHRqYXNtaW5lLkFqYXgud2l0aE1vY2soZnVuY3Rpb24oKSB7XHJcblx0XHRcdHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgc3B5U3VjY2Vzc0hhbmRsZXIsIHNweUZhaWx1cmVIYW5kbGVyICk7XHJcblx0XHRcdGV4cGVjdChzcHlTdWNjZXNzSGFuZGxlcikudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG5cdFx0fSk7ICoqL1xyXG4gICAgICB9KTtcclxuLyoqXHJcbiAgICAgIGl0KCd3aWxsIGNhbGwgdGhlIGVycm9yIGhhbmRsZXIgd2hlbiB0aGUgYWpheCBjYWxsIGlzIHVuc3VjY2Vzc2Z1bCcsICgpPT57XHJcbiAgICAgICAgIHNweU9uKCQsICdhamF4JykuYW5kLmNhbGxGYWtlKCBmdW5jdGlvbihhangpIHtcclxuICAgICAgICAgICAgYWp4LmVycm9yKHt9KTtcclxuICAgICAgICAgfSk7XHJcbiAgICAgICAgIGNvbnN0IHNweUZhaWx1cmVIYW5kbGVyID0gamFzbWluZS5jcmVhdGVTcHkoJ3NweUZhaWx1cmVIYW5kbGVyJyk7XHJcbiAgICAgICAgIHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgc3VjY2Vzc0hhbmRsZXIsIHNweUZhaWx1cmVIYW5kbGVyICk7XHJcbiAgICAgICAgIGV4cGVjdChzcHlGYWlsdXJlSGFuZGxlcikudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICB9KTtcclxuKiovXHJcblxyXG4vLyAgICAgIGl0KCd3aWxsIGNhbGwgdGhlIHN1Y2Nlc3MgaGFuZGxlciB3aXRoIGVtcHR5IGxpc3Qgd2hlbiB1c2VyIGJlbG9uZ3MgdG8gbm8gY3Jld3MnLCAoKT0+e1xyXG4vL1xyXG4vLyAgICAgICAgIC8vXHJcbi8vICAgICAgICAgLy8gdGhlIGZvbGxvd2luZyB0ZXN0IGRvZXMgZXhlcmNpc2UgdGhlIGJlaGF2aW91ciBidXQgZG9lcyBub3QgcmVhbGx5IGhhdmUgYW55dGhpbmcgdG9cclxuLy8gICAgICAgICAvLyBkbyB3aXRoIHRoZSBsaXN0IGJlaW5nIHJldHVybmVkLCB0aGUgYWpheCBjYWxsIHNpbXBseSBjYWxscyB0aGUgc3VjY2VzcyBoYW5kbGVyIHdpdGhcclxuLy8gICAgICAgICAvLyB3aGF0ZXZlciBkYXRhIGl0IGlzIHByb3ZpZGVkLi4uIHNlZSB0ZXN0IGJlbG93IGFzIHByb29mXHJcbi8vICAgICAgICAgLy9cclxuLy8gICAgICAgICAvLyBJIHRoaW5rIHRoaXMgYW5kIHRoZSBiZWhhdmlvdXJzIGJlbG93IGFyZSBhbGwgYWN0dWFsbHkgYmVoYXZpb3VycyBvZiB0aGUgZW5kcG9pbnRcclxuLy8gICAgICAgICAvLyBhbmQgbm90IHRoaXMgc2VydmljZVxyXG4vLyAgICAgICAgIC8vXHJcbi8vICAgICAgICAgLy8gc28gaW5zdGVhZCBvZiB0aGlzIHRlc3QsIG1heWJlIHdlIHNob3VsZCBqdXN0IGJlIHdyaXRpbmcgYSB0ZXN0IHRvIFwiZXhwZWN0XCIgdGhhdCB0aGVcclxuLy8gICAgICAgICAvLyBzdWNjZXNzSGFuZGxlciBmdW5jdGlvbiBpcyBjYWxsZWQgd2hlbiB0aGUgYWpheCBjYWxsIGlzIHN1Y2Nlc3NmdWxcclxuLy8gICAgICAgICAvLyAoYWxyZWFkeSB3cml0dGVuIGFib3ZlKVxyXG4vLyAgICAgICAgIC8vXHJcbi8vXHJcbi8vICAgICAgICAgY29uc3QgZXhwZWN0ZWRSZXN1bHQgPSAnZXhwZWN0ZWQnO1xyXG4vL1xyXG4vLyAgICAgICAgIHNweU9uKCQsICdhamF4JykuYW5kLmNhbGxGYWtlKCAoZSkgPT4ge1xyXG4vLyAgICAgICAgICAgIHJldHVybiBlLnN1Y2Nlc3MoIGV4cGVjdGVkUmVzdWx0LCAnZmFrZSB0ZXh0U3RhdHVzJywgJ2Zha2UganFYSFInICk7XHJcbi8vICAgICAgICAgfSk7XHJcbi8vXHJcbi8vICAgICAgICAgbGV0IGFjdHVhbFJlc3VsdDtcclxuLy8gICAgICAgICBjb25zdCB1c2VySWQgPSAndXNlcic7XHJcbi8vICAgICAgICAgY29uc3Qgc3VjY2Vzc0hhbmRsZXIgPSBmdW5jdGlvbihkYXRhKXsgYWN0dWFsUmVzdWx0ID0gZGF0YTsgfTtcclxuLy8gICAgICAgICBjb25zdCBmYWlsdXJlSGFuZGxlciA9IGZ1bmN0aW9uKCl7fTtcclxuLy9cclxuLy8gICAgICAgICBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlciApO1xyXG4vL1xyXG4vLyAgICAgICAgIGV4cGVjdChhY3R1YWxSZXN1bHQpLnRvRXF1YWwoZXhwZWN0ZWRSZXN1bHQpO1xyXG4vL1xyXG4vLyAgICAgIH0pO1xyXG4vL1xyXG4vL1xyXG4vL1xyXG4vLyAgICAgIGl0KCd3aWxsIGNhbGwgdGhlIHN1Y2Nlc3MgaGFuZGxlciB3aXRoIHRoZSBsaXN0IG9mIGNyZXdzIHRvIHdoaWNoIHVzZXIgYmVsb25ncyB3aGVuIHRoZSB1c2VyIGJlbG9uZ3MgdG8gYWxsIGNyZXdzJywgKCk9PntcclxuLy9cclxuLy8gICAgICB9KTtcclxuLy9cclxuLy8gICAgICBpdCgnd2lsbCBjYWxsIHRoZSBzdWNjZXNzIGhhbmRsZXIgd2l0aCB0aGUgbGlzdCBvZiBjcmV3cyB0byB3aGljaCB1c2VyIGJlbG9uZ3Mgd2hlbiB0aGUgdXNlciBiZWxvbmdzIHRvIHNvbWUgY3Jld3MnLCAoKT0+e1xyXG4vL1xyXG4vLyAgICAgIH0pO1xyXG4vL1xyXG4vLyAgICAgIGl0KCd3aWxsIGNhbGwgdGhlIGZhaWx1cmUgaGFuZGxlciB3aXRoIEVycm9yIG1zZyB3aGVuIHJlc3QgRW5kIFBvaW50IGlzIG5vdCBhY2Nlc3NpYmxlJywgKCk9PntcclxuLy9cclxuLy8gICAgICB9KTtcclxuXHJcbiAgIH0pO1xyXG5cclxufSk7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0ZVRpbWVWYWxpZGF0b3Ige1xuXG4gICBjb25zdHJ1Y3RvcigpIHtcbiAgIH1cblxuICAgXG4gICBzdGF0aWMgdmFsaWRhdGVIb3Vycyh2YWx1ZSkge1xuICAgICAgLy8gVGhpcyBpcyBiYXNlZCBvbiB0aGUgTlVNQkVSKDksNSkgY29uc3RyYWludCBmb3JcbiAgICAgIC8vIHNjaGVkX2xhYm91cl9yb2xlLnNjaGVkX2hyIGFuZCBzY2hlZF9sYWJvdXJfcm9sZS5hY3R1YWxfaHJcbiAgICAgIGxldCBzcGxpdCA9IHZhbHVlLnNwbGl0KCcuJyk7XG4gICAgICBpZiAoIHNwbGl0Lmxlbmd0aCA+IDAgKSB7XG4gICAgICAgICBpZiAoIHNwbGl0WzBdLmxlbmd0aCA+IDQgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICB9XG4gICAgICAgICBpZiAoIHNwbGl0Lmxlbmd0aCA9PSAyICkge1xuICAgICAgICAgICAgaWYgKCBzcGxpdFsxXS5sZW5ndGggPiA1ICkge1xuICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgfSBlbHNlIGlmIChzcGxpdC5sZW5ndGggPiAyICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICB9XG5cbiAgXG4gICAvL1xuICAgLy8gcHJpdmF0ZSBtZXRob2RzXG4gICAvL1xuXG4gICBzdGF0aWMgdmFsaWRhdGVEYXRlRm9ybWF0KGRhdGVTdHIpIHtcbiAgICAgIGlmKCAhIGRhdGVTdHIgKSB7XG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGVTdHIgaXMgbWFuZGF0b3J5LicpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBkYXRlU3RyICE9PSAnc3RyaW5nJykgIHtcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignZGF0ZVN0ciBpcyBub3QgYSBzdHJpbmcnKTtcbiAgICAgIH1cblxuICAgICAgLy8gcmVnZXggZXhhbXBsZTogZGQtTU1NLXl5eXlcbiAgICAgIGNvbnN0IGRhdGVGb3JtYXQgPSAvXigoWzAtOV0pfChbMC0yXVswLTldKXwoWzNdWzAtMV0pKVxcLShKQU58RkVCfE1BUnxBUFJ8TUFZfEpVTnxKVUx8QVVHfFNFUHxPQ1R8Tk9WfERFQylcXC1cXGR7NH0kLztcbiAgICAgIGNvbnN0IG1hdGNoQXJyYXkgPSBkYXRlU3RyLm1hdGNoKGRhdGVGb3JtYXQpO1xuXG4gICAgICBpZiggbWF0Y2hBcnJheSA9PSBudWxsICkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZGF0ZVN0ciBoYXMgaW52YWxpZCBmb3JtYXQuJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgIHN0YXRpYyB2YWxpZGF0ZVRpbWVGb3JtYXQodGltZVN0cikge1xuICAgICAgaWYoICEgdGltZVN0ciApe1xuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd0aW1lU3RyIGlzIG1hbmRhdG9yeS4nKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdGltZVN0ciAhPT0gJ3N0cmluZycpICB7XG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RpbWVTdHIgaXMgbm90IGEgc3RyaW5nLicpO1xuICAgICAgfVxuXG4gICAgICAvLyByZWdleCBleGFtcGxlOiBoaDptbVxuICAgICAgY29uc3QgdGltZUZvcm1hdCA9IC9eJHxeKChbMDFdWzAtOV0pfCgyWzAtM10pKTpbMC01XVswLTldJC87XG4gICAgICBjb25zdCBtYXRjaEFycmF5ID0gdGltZVN0ci5tYXRjaCh0aW1lRm9ybWF0KTtcblxuICAgICAgaWYoIG1hdGNoQXJyYXkgPT0gbnVsbCApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RpbWVTdHIgaGFzIGludmFsaWQgZm9ybWF0LicpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgIH1cblxufSIsInZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLCBldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2ggKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsIi8qIVxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zdGVmYW5wZW5uZXIvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcbiAqIEB2ZXJzaW9uICAgMy4zLjFcbiAqL1xuXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAgIChnbG9iYWwuRVM2UHJvbWlzZSA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgeCAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxudmFyIF9pc0FycmF5ID0gdW5kZWZpbmVkO1xuaWYgKCFBcnJheS5pc0FycmF5KSB7XG4gIF9pc0FycmF5ID0gZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xufSBlbHNlIHtcbiAgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xufVxuXG52YXIgaXNBcnJheSA9IF9pc0FycmF5O1xuXG52YXIgbGVuID0gMDtcbnZhciB2ZXJ0eE5leHQgPSB1bmRlZmluZWQ7XG52YXIgY3VzdG9tU2NoZWR1bGVyRm4gPSB1bmRlZmluZWQ7XG5cbnZhciBhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XG4gIHF1ZXVlW2xlbl0gPSBjYWxsYmFjaztcbiAgcXVldWVbbGVuICsgMV0gPSBhcmc7XG4gIGxlbiArPSAyO1xuICBpZiAobGVuID09PSAyKSB7XG4gICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuICAgIGlmIChjdXN0b21TY2hlZHVsZXJGbikge1xuICAgICAgY3VzdG9tU2NoZWR1bGVyRm4oZmx1c2gpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2hlZHVsZUZsdXNoKCk7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiBzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuICBjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG59XG5cbmZ1bmN0aW9uIHNldEFzYXAoYXNhcEZuKSB7XG4gIGFzYXAgPSBhc2FwRm47XG59XG5cbnZhciBicm93c2VyV2luZG93ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG52YXIgYnJvd3Nlckdsb2JhbCA9IGJyb3dzZXJXaW5kb3cgfHwge307XG52YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xudmFyIGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHt9KS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cbi8vIHRlc3QgZm9yIHdlYiB3b3JrZXIgYnV0IG5vdCBpbiBJRTEwXG52YXIgaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXG4vLyBub2RlXG5mdW5jdGlvbiB1c2VOZXh0VGljaygpIHtcbiAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcbiAgfTtcbn1cblxuLy8gdmVydHhcbmZ1bmN0aW9uIHVzZVZlcnR4VGltZXIoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmVydHhOZXh0KGZsdXNoKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBub2RlLmRhdGEgPSBpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMjtcbiAgfTtcbn1cblxuLy8gd2ViIHdvcmtlclxuZnVuY3Rpb24gdXNlTWVzc2FnZUNoYW5uZWwoKSB7XG4gIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKSB7XG4gIC8vIFN0b3JlIHNldFRpbWVvdXQgcmVmZXJlbmNlIHNvIGVzNi1wcm9taXNlIHdpbGwgYmUgdW5hZmZlY3RlZCBieVxuICAvLyBvdGhlciBjb2RlIG1vZGlmeWluZyBzZXRUaW1lb3V0IChsaWtlIHNpbm9uLnVzZUZha2VUaW1lcnMoKSlcbiAgdmFyIGdsb2JhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBnbG9iYWxTZXRUaW1lb3V0KGZsdXNoLCAxKTtcbiAgfTtcbn1cblxudmFyIHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuZnVuY3Rpb24gZmx1c2goKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBxdWV1ZVtpXTtcbiAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xuXG4gICAgY2FsbGJhY2soYXJnKTtcblxuICAgIHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuICAgIHF1ZXVlW2kgKyAxXSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGxlbiA9IDA7XG59XG5cbmZ1bmN0aW9uIGF0dGVtcHRWZXJ0eCgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgciA9IHJlcXVpcmU7XG4gICAgdmFyIHZlcnR4ID0gcigndmVydHgnKTtcbiAgICB2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0O1xuICAgIHJldHVybiB1c2VWZXJ0eFRpbWVyKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xuICB9XG59XG5cbnZhciBzY2hlZHVsZUZsdXNoID0gdW5kZWZpbmVkO1xuLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcbmlmIChpc05vZGUpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU5leHRUaWNrKCk7XG59IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG59IGVsc2UgaWYgKGlzV29ya2VyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNZXNzYWdlQ2hhbm5lbCgpO1xufSBlbHNlIGlmIChicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IGF0dGVtcHRWZXJ0eCgpO1xufSBlbHNlIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cztcblxuICB2YXIgcGFyZW50ID0gdGhpcztcblxuICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoY2hpbGRbUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkge1xuICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcbiAgfVxuXG4gIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG4gIGlmIChfc3RhdGUpIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNhbGxiYWNrID0gX2FyZ3VtZW50c1tfc3RhdGUgLSAxXTtcbiAgICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaW52b2tlQ2FsbGJhY2soX3N0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pKCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZDtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlc29sdmVgIHJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgcmVzb2x2ZWQgd2l0aCB0aGVcbiAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZXNvbHZlKDEpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgxKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIHZhbHVlID09PSAxXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlc29sdmVcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSBmdWxmaWxsZWQgd2l0aCB0aGUgZ2l2ZW5cbiAgYHZhbHVlYFxuKi9cbmZ1bmN0aW9uIHJlc29sdmUob2JqZWN0KSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuXG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICBfcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMTYpO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxudmFyIFBFTkRJTkcgPSB2b2lkIDA7XG52YXIgRlVMRklMTEVEID0gMTtcbnZhciBSRUpFQ1RFRCA9IDI7XG5cbnZhciBHRVRfVEhFTl9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5mdW5jdGlvbiBzZWxmRnVsZmlsbG1lbnQoKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcbn1cblxuZnVuY3Rpb24gY2Fubm90UmV0dXJuT3duKCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xufVxuXG5mdW5jdGlvbiBnZXRUaGVuKHByb21pc2UpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XG4gICAgcmV0dXJuIEdFVF9USEVOX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyeVRoZW4odGhlbiwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuICB0cnkge1xuICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbikge1xuICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuICAgIHZhciBlcnJvciA9IHRyeVRoZW4odGhlbiwgdGhlbmFibGUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9XG4gIH0sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBGVUxGSUxMRUQpIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJCkge1xuICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQgPT09IHRoZW4gJiYgbWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3Rvci5yZXNvbHZlID09PSByZXNvbHZlKSB7XG4gICAgaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoZW4kJCA9PT0gR0VUX1RIRU5fRVJST1IpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgR0VUX1RIRU5fRVJST1IuZXJyb3IpO1xuICAgIH0gZWxzZSBpZiAodGhlbiQkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJCkpIHtcbiAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcbiAgfSBlbHNlIGlmIChvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGdldFRoZW4odmFsdWUpKTtcbiAgfSBlbHNlIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gIH1cblxuICBwdWJsaXNoKHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblxuICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwcm9taXNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXG4gIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX3N1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcbiAgdmFyIGxlbmd0aCA9IF9zdWJzY3JpYmVycy5sZW5ndGg7XG5cbiAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblxuICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBSRUpFQ1RFRF0gPSBvblJlamVjdGlvbjtcblxuICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcbiAgICBhc2FwKHB1Ymxpc2gsIHBhcmVudCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaChwcm9taXNlKSB7XG4gIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXG4gIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY2hpbGQgPSB1bmRlZmluZWQsXG4gICAgICBjYWxsYmFjayA9IHVuZGVmaW5lZCxcbiAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuICAgIGlmIChjaGlsZCkge1xuICAgICAgaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhkZXRhaWwpO1xuICAgIH1cbiAgfVxuXG4gIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG59XG5cbmZ1bmN0aW9uIEVycm9yT2JqZWN0KCkge1xuICB0aGlzLmVycm9yID0gbnVsbDtcbn1cblxudmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5mdW5jdGlvbiB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICB2YXIgaGFzQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgIHZhbHVlID0gdW5kZWZpbmVkLFxuICAgICAgZXJyb3IgPSB1bmRlZmluZWQsXG4gICAgICBzdWNjZWVkZWQgPSB1bmRlZmluZWQsXG4gICAgICBmYWlsZWQgPSB1bmRlZmluZWQ7XG5cbiAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgdmFsdWUgPSB0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgIGlmICh2YWx1ZSA9PT0gVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgIHZhbHVlID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgY2Fubm90UmV0dXJuT3duKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IGRldGFpbDtcbiAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgLy8gbm9vcFxuICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBSRUpFQ1RFRCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuICB0cnkge1xuICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7XG4gICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIF9yZWplY3QocHJvbWlzZSwgZSk7XG4gIH1cbn1cblxudmFyIGlkID0gMDtcbmZ1bmN0aW9uIG5leHRJZCgpIHtcbiAgcmV0dXJuIGlkKys7XG59XG5cbmZ1bmN0aW9uIG1ha2VQcm9taXNlKHByb21pc2UpIHtcbiAgcHJvbWlzZVtQUk9NSVNFX0lEXSA9IGlkKys7XG4gIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107XG59XG5cbmZ1bmN0aW9uIEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG4gIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcbiAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXG4gIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7XG4gICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KGlucHV0KSkge1xuICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7XG4gICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcblxuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcbiAgICAgIHRoaXMuX2VudW1lcmF0ZSgpO1xuICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgX3JlamVjdCh0aGlzLnByb21pc2UsIHZhbGlkYXRpb25FcnJvcigpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0aW9uRXJyb3IoKSB7XG4gIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICB2YXIgX2lucHV0ID0gdGhpcy5faW5wdXQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHRoaXMuX2VhY2hFbnRyeShfaW5wdXRbaV0sIGkpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBpKSB7XG4gIHZhciBjID0gdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcbiAgdmFyIHJlc29sdmUkJCA9IGMucmVzb2x2ZTtcblxuICBpZiAocmVzb2x2ZSQkID09PSByZXNvbHZlKSB7XG4gICAgdmFyIF90aGVuID0gZ2V0VGhlbihlbnRyeSk7XG5cbiAgICBpZiAoX3RoZW4gPT09IHRoZW4gJiYgZW50cnkuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgICB0aGlzLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLCBpLCBlbnRyeS5fcmVzdWx0KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UpIHtcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobm9vcCk7XG4gICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbiAocmVzb2x2ZSQkKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlJCQoZW50cnkpO1xuICAgICAgfSksIGkpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkKGVudHJ5KSwgaSk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiAoc3RhdGUsIGksIHZhbHVlKSB7XG4gIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gUEVORElORykge1xuICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXG4gICAgaWYgKHN0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiAocHJvbWlzZSwgaSkge1xuICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XG4gIH0pO1xufTtcblxuLyoqXG4gIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaFxuICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yXG4gIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7XG4gIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcbiAgfSk7XG4gIGBgYFxuXG4gIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcbiAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhXG4gIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgYWxsXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlc1xuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuXG4gIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLlxuICBAc3RhdGljXG4qL1xuZnVuY3Rpb24gYWxsKGVudHJpZXMpIHtcbiAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlXG4gIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIHNldHRsZS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHJlc3VsdCA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxXG4gICAgLy8gd2FzIHJlc29sdmVkLlxuICB9KTtcbiAgYGBgXG5cbiAgYFByb21pc2UucmFjZWAgaXMgZGV0ZXJtaW5pc3RpYyBpbiB0aGF0IG9ubHkgdGhlIHN0YXRlIG9mIHRoZSBmaXJzdFxuICBzZXR0bGVkIHByb21pc2UgbWF0dGVycy4gRm9yIGV4YW1wbGUsIGV2ZW4gaWYgb3RoZXIgcHJvbWlzZXMgZ2l2ZW4gdG8gdGhlXG4gIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXNcbiAgYmVjb21lIHJlamVjdGVkIGJlZm9yZSB0aGUgb3RoZXIgcHJvbWlzZXMgYmVjYW1lIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXG4gIHByb21pc2Ugd2lsbCBiZWNvbWUgcmVqZWN0ZWQ6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcigncHJvbWlzZSAyJykpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgcHJvbWlzZSAyIGJlY2FtZSByZWplY3RlZCBiZWZvcmVcbiAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZFxuICB9KTtcbiAgYGBgXG5cbiAgQW4gZXhhbXBsZSByZWFsLXdvcmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czpcblxuICBgYGBqYXZhc2NyaXB0XG4gIFByb21pc2UucmFjZShbYWpheCgnZm9vLmpzb24nKSwgdGltZW91dCg1MDAwKV0pXG4gIGBgYFxuXG4gIEBtZXRob2QgcmFjZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugd2hpY2ggc2V0dGxlcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGZpcnN0IHBhc3NlZFxuICBwcm9taXNlIHRvIHNldHRsZS5cbiovXG5mdW5jdGlvbiByYWNlKGVudHJpZXMpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZWplY3RcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cbiovXG5mdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBuZWVkc1Jlc29sdmVyKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG59XG5cbmZ1bmN0aW9uIG5lZWRzTmV3KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xufVxuXG4vKipcbiAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZVxuICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cbiAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgVGVybWlub2xvZ3lcbiAgLS0tLS0tLS0tLS1cblxuICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cbiAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG4gIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cbiAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXG4gIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcbiAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cbiAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcbiAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG4gIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgaXRzZWxmIGZ1bGZpbGwuXG5cblxuICBCYXNpYyBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tXG5cbiAgYGBganNcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAvLyBvbiBzdWNjZXNzXG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG5cbiAgICAvLyBvbiBmYWlsdXJlXG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgQWR2YW5jZWQgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLS0tLVxuXG4gIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcbiAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cbiAgYGBganNcbiAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXG4gIGBgYGpzXG4gIFByb21pc2UuYWxsKFtcbiAgICBnZXRKU09OKCcvcG9zdHMnKSxcbiAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG4gICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH0pO1xuICBgYGBcblxuICBAY2xhc3MgUHJvbWlzZVxuICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlclxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEBjb25zdHJ1Y3RvclxuKi9cbmZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcbiAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xuICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcbiAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbmVlZHNSZXNvbHZlcigpO1xuICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcbiAgfVxufVxuXG5Qcm9taXNlLmFsbCA9IGFsbDtcblByb21pc2UucmFjZSA9IHJhY2U7XG5Qcm9taXNlLnJlc29sdmUgPSByZXNvbHZlO1xuUHJvbWlzZS5yZWplY3QgPSByZWplY3Q7XG5Qcm9taXNlLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7XG5Qcm9taXNlLl9zZXRBc2FwID0gc2V0QXNhcDtcblByb21pc2UuX2FzYXAgPSBhc2FwO1xuXG5Qcm9taXNlLnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IFByb21pc2UsXG5cbiAgLyoqXG4gICAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXG4gICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uKHVzZXIpe1xuICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcbiAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gdXNlciBpcyB1bmF2YWlsYWJsZSwgYW5kIHlvdSBhcmUgZ2l2ZW4gdGhlIHJlYXNvbiB3aHlcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQ2hhaW5pbmdcbiAgICAtLS0tLS0tLVxuICBcbiAgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xuICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiB1c2VyLm5hbWU7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuICdkZWZhdWx0IG5hbWUnO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG4gICAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG4gICAgICAvLyB3aWxsIGJlIGAnZGVmYXVsdCBuYW1lJ2BcbiAgICB9KTtcbiAgXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG4gICAgfSk7XG4gICAgYGBgXG4gICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEFzc2ltaWxhdGlvblxuICAgIC0tLS0tLS0tLS0tLVxuICBcbiAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcbiAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBTaW1wbGUgRXhhbXBsZVxuICAgIC0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCByZXN1bHQ7XG4gIFxuICAgIHRyeSB7XG4gICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEVycmJhY2sgRXhhbXBsZVxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgICAgaWYgKGVycikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFByb21pc2UgRXhhbXBsZTtcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGZpbmRSZXN1bHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQWR2YW5jZWQgRXhhbXBsZVxuICAgIC0tLS0tLS0tLS0tLS0tXG4gIFxuICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGxldCBhdXRob3IsIGJvb2tzO1xuICBcbiAgICB0cnkge1xuICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH1cbiAgICBgYGBcbiAgXG4gICAgRXJyYmFjayBFeGFtcGxlXG4gIFxuICAgIGBgYGpzXG4gIFxuICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcbiAgXG4gICAgfVxuICBcbiAgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuICBcbiAgICB9XG4gIFxuICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH1cbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgUHJvbWlzZSBFeGFtcGxlO1xuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgZmluZEF1dGhvcigpLlxuICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG4gICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgICAgLy8gZm91bmQgYm9va3NcbiAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCB0aGVuXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG4gIHRoZW46IHRoZW4sXG5cbiAgLyoqXG4gICAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZVxuICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG4gIFxuICAgIGBgYGpzXG4gICAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG4gICAgfVxuICBcbiAgICAvLyBzeW5jaHJvbm91c1xuICAgIHRyeSB7XG4gICAgICBmaW5kQXV0aG9yKCk7XG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfVxuICBcbiAgICAvLyBhc3luYyB3aXRoIHByb21pc2VzXG4gICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBAbWV0aG9kIGNhdGNoXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cbiAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cbiAgJ2NhdGNoJzogZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHBvbHlmaWxsKCkge1xuICAgIHZhciBsb2NhbCA9IHVuZGVmaW5lZDtcblxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbCA9IGdsb2JhbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbCA9IHNlbGY7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBQID0gbG9jYWwuUHJvbWlzZTtcblxuICAgIGlmIChQKSB7XG4gICAgICAgIHZhciBwcm9taXNlVG9TdHJpbmcgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJvbWlzZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb21pc2VUb1N0cmluZyA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxvY2FsLlByb21pc2UgPSBQcm9taXNlO1xufVxuXG5wb2x5ZmlsbCgpO1xuLy8gU3RyYW5nZSBjb21wYXQuLlxuUHJvbWlzZS5wb2x5ZmlsbCA9IHBvbHlmaWxsO1xuUHJvbWlzZS5Qcm9taXNlID0gUHJvbWlzZTtcblxucmV0dXJuIFByb21pc2U7XG5cbn0pKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lczYtcHJvbWlzZS5tYXAiLCIvKiBnbG9iYWwgVGFidWxhdG9yICovXHJcbmltcG9ydCBUYXNrU3VwZXJ2aXNpb25TZXJ2aWNlIGZyb20gJy4vVGFza1N1cGVydmlzaW9uU2VydmljZSc7XHJcbmltcG9ydCBEYXRlVGltZVZhbGlkYXRvciBmcm9tICcuLi8uLi8uLi9jb21tb24vdmFsaWRhdGlvbi9EYXRlVGltZVZhbGlkYXRvcic7XHJcbmltcG9ydCBEYXRlVGltZUhlbHBlciBmcm9tICcuLi8uLi8uLi9jb21tb24vdXRpbC9EYXRlVGltZUhlbHBlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyIHtcclxuXHJcbiAgIGNvbnN0cnVjdG9yKHBhcm1zKSB7XHJcbiAgICAgIHRoaXMudXNlcklkID0gcGFybXMudXNlcklkO1xyXG5cclxuICAgICAgaWYgKCF0aGlzLnVzZXJJZCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZXJJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5jcmV3c0ZpZWxkSWQgPSBwYXJtcy5jcmV3c0ZpZWxkSWQ7XHJcblxyXG4gICAgICBpZiAoIXRoaXMuY3Jld3NGaWVsZElkKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignY3Jld3NGaWVsZElkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgY3Jld3NGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY3Jld3NGaWVsZElkKTtcclxuICAgICAgaWYgKCFjcmV3c0ZpZWxkIHx8IGNyZXdzRmllbGQudGFnTmFtZSAhPSAnU0VMRUNUJykge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyZXdzRmllbGRJZCBtdXN0IGJlIGEgU0VMRUNUIGVsZW1lbnQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5zZXJ2aWNlID0gcGFybXMuVGFza1N1cGVydmlzaW9uU2VydmljZSB8fCBuZXcgVGFza1N1cGVydmlzaW9uU2VydmljZSgpO1xyXG4gICAgICB0aGlzLmlzQWxsb3dlZFRvU2VhcmNoID0gcGFybXMuaXNBbGxvd2VkVG9TZWFyY2ggPT09ICd0cnVlJztcclxuICAgICAgdGhpcy5pc0FsbG93ZWRUb0VkaXRTY2hlZGxlZEhvdXJzID0gcGFybXMuaXNBbGxvd2VkVG9FZGl0U2NoZWRsZWRIb3VycyA9PT0gJ3RydWUnO1xyXG4gICAgICB0aGlzLmlzQWxsb3dlZFRvRWRpdEFjdHVhbEhvdXJzID0gcGFybXMuaXNBbGxvd2VkVG9FZGl0QWN0dWFsSG91cnMgPT09ICd0cnVlJztcclxuICAgICAgdGhpcy5zdGFydERhdGVXaWRnZXRJZCA9IHBhcm1zLnN0YXJ0RmllbGRJZDtcclxuICAgICAgdGhpcy5lbmREYXRlV2lkZ2V0SWQgPSBwYXJtcy5lbmRGaWVsZElkO1xyXG4gICAgICB0aGlzLnNob3dDb21wbGV0ZUlkID0gcGFybXMuc2hvd0NvbXBsZXRlSWQ7XHJcbiAgICAgIHRoaXMuc2VhcmNoQnV0dG9uSWQgPSBwYXJtcy5zZWFyY2hCdXR0b25JZDtcclxuICAgICAgdGhpcy5zZWFyY2hSZXN1bHRzSWQgPSBwYXJtcy5zZWFyY2hSZXN1bHRzSWQ7XHJcbiAgICAgIHRoaXMubm9TZWFyY2hSZXN1bHRzTWVzc2FnZSA9IHBhcm1zLm5vU2VhcmNoUmVzdWx0c01lc3NhZ2U7XHJcbiAgICAgIHRoaXMubGFib3JSb3dFbGFzcGVkVGltZVRocmVzaG9sZCA9IHBhcm1zLmxhYm9yUm93RWxhc3BlZFRpbWVUaHJlc2hvbGQ7XHJcblxyXG4gICAgICB0aGlzLmRlZmF1bHRTaG93Q29tcGxldGUgPSB0cnVlO1xyXG4gICAgICB0aGlzLmlzU2NoZWR1bGVkSG91cnNDZWxsRWRpdGFibGUuYmluZCh0aGlzKTtcclxuICAgICAgdGhpcy5oYW5kbGVTY2hlZHVsZUhvdXJzRWRpdC5iaW5kKHRoaXMpO1xyXG4gICAgICB0aGlzLmhhbmRsZUFjdHVhbEhvdXJzRWRpdC5iaW5kKHRoaXMpO1xyXG4gICAgICB0aGlzLmFjdHVhbEhvdXJDZWxsRm9ybWF0dGVyLmJpbmQodGhpcyk7XHJcbiAgIH1cclxuXHJcbiAgIGdldFNlcnZpY2VJbnN0YW5jZSgpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2VydmljZTtcclxuICAgfVxyXG5cclxuICAgaW5pdCgpIHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgdGhpcy5pbml0U2hvd0NvbXBsZXRlVGFza3NXaWRnZXQoKTtcclxuICAgICAgICAgdGhpcy5pbml0UmVzdWx0c1RhYmxlKCk7XHJcbiAgICAgICAgIHRoaXMuaW5pdFNlYXJjaEJ1dHRvbigpO1xyXG5cclxuICAgICAgICAgUHJvbWlzZS5hbGwoW3RoaXMuaW5pdENyZXdzV2lkZ2V0KCksIHRoaXMuaW5pdFN0YXJ0QW5kRW5kV2lkZ2V0cygpXSkudGhlbigocmVzdWx0cykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBvcHVsYXRlQ3Jld3NXaWRnZXQocmVzdWx0c1swXSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhcnRBbmRFbmRXaWRnZXRzKHJlc3VsdHNbMV0pO1xyXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1TZWFyY2goKS50aGVuKCgpID0+IHJlc29sdmUoKSk7XHJcbiAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIGluaXRDcmV3c1dpZGdldCgpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodGhpcy51c2VySWQpO1xyXG4gICB9XHJcblxyXG4gICBpbml0U3RhcnRBbmRFbmRXaWRnZXRzKCkge1xyXG4gICAgICBpZiAoIXRoaXMudXNlcklkKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcigndXNlcklkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgICB0aGlzLnZhbGlkYXRlU3RhcnRFbmRXaWRnZXRJZHMoKTtcclxuICAgICAgICAgbGV0IHN0YXJ0RmllbGRJZHMgPSB0aGlzLmJ1aWxkRmllbGRJZHNGb3JEYXRlVGltZVdpZGdldCh0aGlzLnN0YXJ0RGF0ZVdpZGdldElkKTtcclxuICAgICAgICAgbGV0IGVuZEZpZWxkSWRzID0gdGhpcy5idWlsZEZpZWxkSWRzRm9yRGF0ZVRpbWVXaWRnZXQodGhpcy5lbmREYXRlV2lkZ2V0SWQpO1xyXG4gICAgICAgICB0aGlzLnNldFN0YXJ0RW5kRWxlbUF0dHJzKHN0YXJ0RmllbGRJZHMsIGVuZEZpZWxkSWRzKTtcclxuICAgICAgICAgdGhpcy52YWxpZGF0ZVN0YXJ0RW5kRWxlbXMoKTtcclxuICAgICAgfVxyXG4gICAgICBjYXRjaCAoZXhjZXB0aW9uKSB7XHJcbiAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJpbml0U3RhcnRBbmRFbmRXaWRnZXRzXCIsIGV4Y2VwdGlvbik7XHJcbiAgICAgIH1cclxuICAgICAgLy8gVGhlIGRhdGUgZmllbGRzIGZvciB0aGUgRGF0ZVRpbWUgd2lkZ2V0c1xyXG4gICAgICAvLyBkbyBub3QgcHJvdmlkZSBzdWZmaWNpZW50IHZhbGlkYXRpb24gc28gd2Ugd2lsbCBkaXNhYmxlIHRoZW0uXHJcbiAgICAgIHRoaXMuc3RhcnREYXRlRWxlbS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIHRoaXMuZW5kRGF0ZUVsZW0uZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuc2VydmljZS5nZXREZWZhdWx0U3RhcnRBbmRFbmREYXRlcyh0aGlzLnVzZXJJZCk7XHJcbiAgIH1cclxuXHJcbiAgIGluaXRTaG93Q29tcGxldGVUYXNrc1dpZGdldCgpIHtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zaG93Q29tcGxldGVJZCkuY2hlY2tlZCA9IHRoaXMuZGVmYXVsdFNob3dDb21wbGV0ZTtcclxuICAgfVxyXG5cclxuXHJcbiAgIGluaXRSZXN1bHRzVGFibGUoKSB7XHJcbiAgICAgIC8vIFRoZSBmaWVsZCBuYW1lcyBtYXRjaCB0aG9zZSBpbjpcclxuICAgICAgLy8gICAgY29tLm14aS5teC53ZWIucmVzdC50YXNrLkNyZXdUYXNrTGFib3VyUmVzcG9uc2VcclxuICAgICAgY29uc3QgbGlzdE9mTGFib3VyQXR0cnMgPSBbJ3RlY2huaWNpYW4nLCAnbGFib3VyU2tpbGwnLCAnbGFib3VyU3RhdHVzJywgJ2pvYlN0b3BSZWFzb24nLCAnZWxhcHNlZEhvdXJzTWludXRlcycsXHJcbiAgICAgICAgICdzY2hlZHVsZWRIb3VycycsICdhY3R1YWxIb3VycydcclxuICAgICAgXTtcclxuXHJcbiAgICAgIC8vIE5vdGU6IGl0IGFwcGVhcnMgdGhhdCBUYWJ1bGF0b3IgaGFzIGRpZmZpY3VsdHkgaWYgdmlzaWJsZTpmYWxzZSBmaWVsZHMgYXJlIGFmdGVyIG90aGVyIGZpZWxkcyxcclxuICAgICAgLy8gc28gY29uZmlndXJlIHRoZW0gZmlyc3QuXHQgIFxyXG4gICAgICB0aGlzLnRhYmxlID0gbmV3IFRhYnVsYXRvcihcIiNcIiArIHRoaXMuc2VhcmNoUmVzdWx0c0lkLCB7XHJcbiAgICAgICAgIGNvbHVtbnM6IFtcclxuICAgICAgICAgICAgeyB0aXRsZTogJ1Rhc2sgSWQnLCBmaWVsZDogJ3Rhc2tJZCcsIHZpc2libGU6IGZhbHNlIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdMYWJvdXIgUm93IElkJywgZmllbGQ6ICdsYWJvdXJSb3dJZCcsIHZpc2libGU6IGZhbHNlIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdGcm9tIEpvYiBTdG9wJywgZmllbGQ6ICdpc0Zyb21Kb2JTdG9wJywgdmlzaWJsZTogZmFsc2UgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ0xpbmUgTm8nLCBmaWVsZDogJ2xpbmVObycsIHNvcnRlcjogJ251bWJlcicsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnVGFzaycsIGZpZWxkOiAndGFza05hbWUnLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ1Rhc2sgU3RhdHVzJywgZmllbGQ6ICd0YXNrU3RhdHVzJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdUYXNrIENsYXNzIC0gU3ViY2xhc3MnLCBmaWVsZDogJ3Rhc2tDbGFzc1N1YmNsYXNzJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdUYXNrIFByaW9yaXR5JywgZmllbGQ6ICd0YXNrUHJpb3JpdHknLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ0FpcmNyYWZ0JywgZmllbGQ6ICdhaXJjcmFmdCcsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnV29yayBQYWNrYWdlJywgZmllbGQ6ICd3b3JrcGFja2FnZScsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnV29yayBMb2NhdGlvbicsIGZpZWxkOiAnd29ya0xvY2F0aW9uJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdXb3JrIEFyZWEnLCBmaWVsZDogJ3dvcmtBcmVhJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdTY2hlZHVsZWQgU3RhcnQgRGF0ZScsIGZpZWxkOiAnc2NoZWR1bGVkU3RhcnREYXRlJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdBY3R1YWwgU3RhcnQgRGF0ZScsIGZpZWxkOiAnYWN0dWFsU3RhcnREYXRlJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgZmllbGQ6ICdTZWxlY3RlZCcsIGFsaWduOiAnY2VudGVyJywgd2lkdGg6IDUwLCBoZWFkZXJTb3J0OiBmYWxzZSwgZm9ybWF0dGVyOiAoKSA9PiB7IHJldHVybiAnPGlucHV0IGlkPVwiY2hlY2tCb3hcIiB0eXBlPVwiY2hlY2tib3hcIj4nOyB9IH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdUZWNobmljaWFuJywgZmllbGQ6ICd0ZWNobmljaWFuJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdTa2lsbCcsIGZpZWxkOiAnbGFib3VyU2tpbGwnLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ0xhYm91ciBSb3cgU3RhdHVzJywgZmllbGQ6ICdsYWJvdXJTdGF0dXMnLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ0pvYiBTdG9wIFJlYXNvbicsIGZpZWxkOiAnam9iU3RvcFJlYXNvbicsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnRWxhcHNlZCBUaW1lJywgZmllbGQ6ICdlbGFwc2VkSG91cnNNaW51dGVzJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInLCBmb3JtYXR0ZXI6IHRoaXMuaXNFbGFwc2VkVGltZUdyZWF0ZXJUaGFuVGhyZXNob2xkLmJpbmQodGhpcykgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICB0aXRsZTogJ1NjaGVkLiBIb3VycycsXHJcbiAgICAgICAgICAgICAgIGZpZWxkOiAnc2NoZWR1bGVkSG91cnMnLFxyXG4gICAgICAgICAgICAgICBzb3J0ZXI6ICdzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgIGVkaXRvcjogJ2lucHV0JyxcclxuICAgICAgICAgICAgICAgdmFsaWRhdG9yOiBbJ21pbjogMCcsIHRoaXMudmFsaWRhdGVIb3Vyc10sXHJcbiAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0aGlzLmlzU2NoZWR1bGVkSG91cnNDZWxsRWRpdGFibGUsXHJcbiAgICAgICAgICAgICAgIGNlbGxFZGl0ZWQ6IHRoaXMuaGFuZGxlU2NoZWR1bGVIb3Vyc0VkaXRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICB0aXRsZTogJ0FjdHVhbCBIb3VycycsXHJcbiAgICAgICAgICAgICAgIGZpZWxkOiAnYWN0dWFsSG91cnMnLFxyXG4gICAgICAgICAgICAgICBzb3J0ZXI6ICdzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgIGVkaXRvcjogJ2lucHV0JyxcclxuICAgICAgICAgICAgICAgdmFsaWRhdG9yOiBbJ21pbjogMCcsIHRoaXMudmFsaWRhdGVIb3Vyc10sXHJcbiAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0aGlzLmlzQWN0dWFsSG91cnNDZWxsRWRpdGFibGUsXHJcbiAgICAgICAgICAgICAgIGNlbGxFZGl0ZWQ6IHRoaXMuaGFuZGxlQWN0dWFsSG91cnNFZGl0LFxyXG4gICAgICAgICAgICAgICBmb3JtYXR0ZXI6IHRoaXMuYWN0dWFsSG91ckNlbGxGb3JtYXR0ZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICBdLFxyXG4gICAgICAgICBkYXRhU29ydGVkOiAoc29ydGVycywgcm93cykgPT4ge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGNoZWNrIGlzIGRvbmUgYXMgdGhlIGNhbGxiYWNrIGlzIGNhbGxlZCBiZWZvcmUgdGhlIHRhYmxlIGhhcyBiZWVuIGNvbXBsZXRlbHkgaW5zdGFudGlhdGVkXHJcbiAgICAgICAgICAgIC8vIEFzIGEgcmVzdWx0LCBhbiB1bmRlZmluZWQgb2JqZWN0IGVycm9yIG1lc3NhZ2Ugd2lsbCBvY2N1ciBhcyB0aGUgc2V0R3JvdXBCeSBpcyBiZWluZyBjYWxsZWQgb24gYW4gdW5kZWZpbmVkIHRhYmxlXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgIGlmIChzb3J0ZXJzLnNvbWUoKGF0dHIpID0+IGxpc3RPZkxhYm91ckF0dHJzLmluZGV4T2YoYXR0ci5maWVsZCkgPj0gMCkpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZS5zZXRHcm91cEJ5KCk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudGFibGUuc2V0R3JvdXBCeShcInRhc2tJZFwiKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH0sXHJcbiAgICAgICAgIGdyb3VwSGVhZGVyOiAodmFsdWUsIGNvdW50LCBkYXRhLCBncm91cCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YVswXS50YXNrTmFtZSArIFwiPHNwYW4gc3R5bGU9J2NvbG9yOiMwMDA7IG1hcmdpbi1sZWZ0OjEwcHg7Jz4oXCIgKyBjb3VudCArIFwiIGl0ZW1zKTwvc3Bhbj5cIjtcclxuICAgICAgICAgfSxcclxuICAgICAgICAgZ3JvdXBUb2dnbGVFbGVtZW50OiBcImhlYWRlclwiLFxyXG4gICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5ub1NlYXJjaFJlc3VsdHNNZXNzYWdlXHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG5cclxuICAgYWN0dWFsSG91ckNlbGxGb3JtYXR0ZXIoY2VsbCkge1xyXG5cclxuICAgICAgaWYgKCFjZWxsKSB7XHJcbiAgICAgICAgIHJldHVybiBjZWxsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5hY3R1YWxIb3VyR3JlYXRlclRoYW5TY2hlZHVsZWRIb3VycyhjZWxsKSkge1xyXG4gICAgICAgICAvL2Zvcm1hdCBjZWxsIGJhY2tncm91bmQgdG8geWVsbG93XHJcbiAgICAgICAgIGNlbGwuZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5hZGQoXCJoaWdobGlnaHRBY3R1YWxIb3Vyc0NlbGxcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB0aW1lID0gY2VsbC5nZXRWYWx1ZSgpO1xyXG4gICAgICAvLyBSZXR1cm4gZW1wdHkgc3RyaW5nIGlmIEFjdHVhbCBIb3VyIHZhbHVlIGlzIGJsYW5rXHJcbiAgICAgIC8vIG90aGVyd2lzZSByZXR1cm4gQWN0dWFsIEhvdXJzIHZhbHVlLlxyXG4gICAgICByZXR1cm4gKHRpbWUgPyB0aW1lIDogJycpO1xyXG4gICB9XHJcblxyXG4gICBhY3R1YWxIb3VyR3JlYXRlclRoYW5TY2hlZHVsZWRIb3VycyhjZWxsKSB7XHJcblxyXG4gICAgICBsZXQgYWN0dWFsSG91cnMgPSBjZWxsLmdldFZhbHVlKCk7XHJcbiAgICAgIGlmICghYWN0dWFsSG91cnMpIHtcclxuICAgICAgICAgcmV0dXJuIGFjdHVhbEhvdXJzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgc2NoZWR1bGVIb3VycyA9IGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLnNjaGVkdWxlZEhvdXJzO1xyXG4gICAgICBpZiAoIXNjaGVkdWxlSG91cnMpIHtcclxuICAgICAgICAgcmV0dXJuIHNjaGVkdWxlSG91cnM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBwYXJzZUludChhY3R1YWxIb3VycykgPiBwYXJzZUludChzY2hlZHVsZUhvdXJzKTtcclxuICAgfVxyXG5cclxuICAgaW5pdFNlYXJjaEJ1dHRvbigpIHtcclxuICAgICAgbGV0ICRidXR0b24gPSAkKCcjJyArIHRoaXMuc2VhcmNoQnV0dG9uSWQpO1xyXG4gICAgICBpZiAodGhpcy5pc0FsbG93ZWRUb1NlYXJjaCkge1xyXG4gICAgICAgICAkYnV0dG9uLnNob3coKTtcclxuICAgICAgICAgJGJ1dHRvbi5jbGljaygoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5wZXJmb3JtU2VhcmNoKCk7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgICAkYnV0dG9uLmhpZGUoKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBwZXJmb3JtU2VhcmNoKCkge1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICBpZiAodGhpcy5pc0FsbG93ZWRUb1NlYXJjaCkge1xyXG4gICAgICAgICAgICBsZXQgYXJncyA9IHtcclxuICAgICAgICAgICAgICAgJ2NyZXdJZCc6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY3Jld3NGaWVsZElkKS52YWx1ZSxcclxuICAgICAgICAgICAgICAgJ3N0YXJ0RGF0ZVRpbWUnOiB0aGlzLmZvcm1hdERhdGVUaW1lKHRoaXMuc3RhcnREYXRlV2lkZ2V0SWQpLFxyXG4gICAgICAgICAgICAgICAnZW5kRGF0ZVRpbWUnOiB0aGlzLmZvcm1hdERhdGVUaW1lKHRoaXMuZW5kRGF0ZVdpZGdldElkKSxcclxuICAgICAgICAgICAgICAgJ3Nob3dDb21wbGV0ZVRhc2tzJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zaG93Q29tcGxldGVJZCkuY2hlY2tlZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZS5wZXJmb3JtU2VhcmNoKGFyZ3MpLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJlc3VsdHNUYWJsZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIC8vXHJcbiAgIC8vIHByaXZhdGUgbWV0aG9kc1xyXG4gICAvL1xyXG5cclxuICAgLy8gRXhwZWN0IGNyZXdzIHRvIGJlOiBbe2NvZGUsbmFtZSxpZH1dXHJcbiAgIHBvcHVsYXRlQ3Jld3NXaWRnZXQoY3Jld3MpIHtcclxuICAgICAgLy8gQ2xlYXIgZXhpc3Rpbmcgb3B0aW9ucy5cclxuICAgICAgJCgnIycgKyB0aGlzLmNyZXdzRmllbGRJZCkuZmluZCgnb3B0aW9uJykucmVtb3ZlKCk7XHJcblxyXG4gICAgICAvLyBTb3J0IHRoZSBjcmV3cy5cclxuICAgICAgY3Jld3Muc29ydCh0aGlzLmNvbXBhcmVDcmV3QWxwaGFudW1lcmljYWxseSk7XHJcblxyXG4gICAgICAvLyBBZGQgcHJvdmlkZWQgY3Jld3MgYXMgb3B0aW9ucywgaWYgcHJvdmlkZWQuXHJcbiAgICAgIGlmIChjcmV3cykge1xyXG4gICAgICAgICBsZXQgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jcmV3c0ZpZWxkSWQpO1xyXG4gICAgICAgICBsZXQgc2VsZWN0T3B0aW9ucyA9IHNlbGVjdC5vcHRpb25zO1xyXG4gICAgICAgICBjcmV3cy5mb3JFYWNoKChjcmV3LCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgICAgICAgb3B0aW9uLnRleHQgPSBjcmV3LmxhYmVsO1xyXG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBjcmV3LmlkO1xyXG4gICAgICAgICAgICBzZWxlY3RPcHRpb25zLmFkZChvcHRpb24pO1xyXG4gICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgIC8vIFNldCB0aGUgZmlyc3QgY3JldyBhcyB0aGUgZGVmYXVsdC5cclxuICAgICAgICAgc2VsZWN0LnNlbGVjdGVkSW5kZXggPSAwO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIGNvbXBhcmVDcmV3QWxwaGFudW1lcmljYWxseShhLCBiKSB7XHJcbiAgICAgIGlmIChhLmxhYmVsIDwgYi5sYWJlbCkgcmV0dXJuIC0xO1xyXG4gICAgICBpZiAoYS5sYWJlbCA+IGIubGFiZWwpIHJldHVybiAxO1xyXG4gICAgICByZXR1cm4gMDtcclxuICAgfVxyXG5cclxuICAgLy8gRXhwZWN0IG1lc3NhZ2UgdG8gYmUgYSBzdHJpbmdcclxuICAgaGFuZGxlRmFpbHVyZVRvR2V0Q3Jld3NGb3JVc2VyKG1lc3NhZ2UpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICB9XHJcblxyXG4gICB2YWxpZGF0ZVN0YXJ0RW5kV2lkZ2V0SWRzKCkge1xyXG4gICAgICBpZiAoIXRoaXMuc3RhcnREYXRlV2lkZ2V0SWQpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydEZpZWxkSWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnN0YXJ0RGF0ZVdpZGdldElkICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXJ0RmllbGRJZCBpcyBub3QgYSBzdHJpbmcnKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMuZW5kRGF0ZVdpZGdldElkKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignZW5kRmllbGRJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZW9mIHRoaXMuZW5kRGF0ZVdpZGdldElkICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VuZEZpZWxkSWQgaXMgbm90IGEgc3RyaW5nJyk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgYnVpbGRGaWVsZElkc0ZvckRhdGVUaW1lV2lkZ2V0KHdpZGdldElkKSB7XHJcbiAgICAgIC8vIFRoZXNlIGlkcyB3ZXJlIGRldGVybWluZWQgYnkgbG9va2luZyBhdCB0aGUgY3VzdG9tIHRhZyBEYXRlVGltZUZpZWxkXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgIGRhdGVGaWVsZElkOiB3aWRnZXRJZCArICdfJERBVEUkJyxcclxuICAgICAgICAgdGltZUZpZWxkSWQ6IHdpZGdldElkICsgJ18kVElNRSQnLFxyXG4gICAgICAgICB0aW1lWm9uZUZpZWxkSWQ6IHdpZGdldElkICsgJ18kVElNRVpPTkVfRElTUExBWSQnLFxyXG4gICAgICAgICBzdGFydFBpY2tlcklkOiB3aWRnZXRJZCArICdfU2VsZWN0QnRuJ1xyXG4gICAgICB9O1xyXG4gICB9XHJcblxyXG4gICBzZXRTdGFydEVuZEVsZW1BdHRycyhzdGFydERhdGVXaWRnZXRJZHMsIGVuZERhdGVXaWRnZXRJZHMpIHtcclxuICAgICAgdGhpcy5zdGFydERhdGVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RhcnREYXRlV2lkZ2V0SWRzLmRhdGVGaWVsZElkKTtcclxuICAgICAgdGhpcy5zdGFydFRpbWVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RhcnREYXRlV2lkZ2V0SWRzLnRpbWVGaWVsZElkKTtcclxuICAgICAgdGhpcy5zdGFydFRpbWVab25lRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXJ0RGF0ZVdpZGdldElkcy50aW1lWm9uZUZpZWxkSWQpO1xyXG4gICAgICB0aGlzLnN0YXJ0UGlja2VyRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXJ0RGF0ZVdpZGdldElkcy5zdGFydFBpY2tlcklkKTtcclxuXHJcbiAgICAgIHRoaXMuZW5kRGF0ZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbmREYXRlV2lkZ2V0SWRzLmRhdGVGaWVsZElkKTtcclxuICAgICAgdGhpcy5lbmRUaW1lRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZERhdGVXaWRnZXRJZHMudGltZUZpZWxkSWQpO1xyXG4gICAgICB0aGlzLmVuZFRpbWVab25lRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZERhdGVXaWRnZXRJZHMudGltZVpvbmVGaWVsZElkKTtcclxuICAgICAgdGhpcy5lbmRQaWNrZXJFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZW5kRGF0ZVdpZGdldElkcy5zdGFydFBpY2tlcklkKTtcclxuICAgfVxyXG5cclxuICAgdmFsaWRhdGVTdGFydEVuZEVsZW1zKCkge1xyXG4gICAgICBpZiAoIXRoaXMuc3RhcnREYXRlRWxlbSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXJ0IGRhdGUgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIERPTS4nKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMuc3RhcnRUaW1lRWxlbSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXJ0IHRpbWUgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIERPTS4nKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMuc3RhcnRUaW1lWm9uZUVsZW0pIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydCB0aW1lIHpvbmUgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIERPTS4nKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMuc3RhcnRQaWNrZXJFbGVtKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3RhcnQgZGF0ZSBwaWNrZXIgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIERPTS4nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCF0aGlzLmVuZERhdGVFbGVtKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignZW5kIGRhdGUgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIERPTS4nKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMuZW5kVGltZUVsZW0pIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlbmQgdGltZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgRE9NLicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy5lbmRUaW1lWm9uZUVsZW0pIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlbmQgdGltZSB6b25lIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIHRoZSBET00uJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLmVuZFBpY2tlckVsZW0pIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlbmQgZGF0ZSBwaWNrZXIgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIERPTS4nKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBzZXRTdGFydEFuZEVuZFdpZGdldHMoZGVmYXVsdFN0YXJ0RW5kVmFsdWVzKSB7XHJcbiAgICAgIHRoaXMuc3RhcnREYXRlRWxlbS52YWx1ZSA9IGRlZmF1bHRTdGFydEVuZFZhbHVlcy5zdGFydERhdGU7XHJcbiAgICAgIHRoaXMuc3RhcnRUaW1lRWxlbS52YWx1ZSA9IGRlZmF1bHRTdGFydEVuZFZhbHVlcy5zdGFydFRpbWU7XHJcbiAgICAgIHRoaXMuc3RhcnRUaW1lWm9uZUVsZW0udmFsdWUgPSBkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuc3RhcnRUaW1lWm9uZTtcclxuXHJcbiAgICAgIHRoaXMuZW5kRGF0ZUVsZW0udmFsdWUgPSBkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuZW5kRGF0ZTtcclxuICAgICAgdGhpcy5lbmRUaW1lRWxlbS52YWx1ZSA9IGRlZmF1bHRTdGFydEVuZFZhbHVlcy5lbmRUaW1lO1xyXG4gICAgICB0aGlzLmVuZFRpbWVab25lRWxlbS52YWx1ZSA9IGRlZmF1bHRTdGFydEVuZFZhbHVlcy5lbmRUaW1lWm9uZTtcclxuICAgfVxyXG5cclxuXHJcbiAgIHVwZGF0ZVJlc3VsdHNUYWJsZShyZXNwb25zZSkge1xyXG4gICAgICAvLyBUaGUgcmVzcG9uc2UgaXMgYSBqc29uIGxpc3Qgb2Ygb2JqZWN0cyBnZW5lcmF0ZWQgZnJvbTpcclxuICAgICAgLy8gICAgY29tLm14aS5teC53ZWIucmVzdC50YXNrLkNyZXdUYXNrTGFib3VyUmVzcG9uc2VcclxuICAgICAgbGV0IGFkZFRvVG9wID0gdHJ1ZTtcclxuICAgICAgdGhpcy50YWJsZS5jbGVhckRhdGEoKTtcclxuICAgICAgdGhpcy50YWJsZS5hZGREYXRhKHJlc3BvbnNlLCBhZGRUb1RvcCk7XHJcbiAgICAgIHRoaXMudGFibGUuc2V0U29ydChbeyBjb2x1bW46ICdsaW5lTm8nLCBkaXI6ICdhc2MnIH1dKTtcclxuICAgfVxyXG5cclxuXHJcbiAgIC8vIEZvcm1hdCB0aGUgZGF0ZSBhbmQgdGltZSB0byB0aGF0IGV4cGVjdGVkIGJ5IGNvbS5teGkubXguY29tbW9uLnV0aWxzLkRhdGFUeXBlVXRpbHNcclxuICAgZm9ybWF0RGF0ZVRpbWUoZGF0ZVRpbWVXaWRnZXRJZCkge1xyXG4gICAgICBsZXQgZmllbGRJZHMgPSB0aGlzLmJ1aWxkRmllbGRJZHNGb3JEYXRlVGltZVdpZGdldChkYXRlVGltZVdpZGdldElkKTtcclxuXHJcbiAgICAgIGxldCBkYXRlVmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaWVsZElkcy5kYXRlRmllbGRJZCkudmFsdWU7XHJcbiAgICAgIGxldCB0aW1lVmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaWVsZElkcy50aW1lRmllbGRJZCkudmFsdWU7XHJcblxyXG4gICAgICByZXR1cm4gZGF0ZVZhbHVlICsgJyAnICsgdGltZVZhbHVlO1xyXG4gICB9XHJcblxyXG4gICBpc1NjaGVkdWxlZEhvdXJzQ2VsbEVkaXRhYmxlKGNlbGwpIHtcclxuICAgICAgaWYgKHRoaXMuaXNBbGxvd2VkVG9FZGl0U2NoZWRsZWRIb3Vycykge1xyXG4gICAgICAgICBsZXQgcm93RGF0YSA9IGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpO1xyXG4gICAgICAgICBpZiAocm93RGF0YS5pc0Zyb21Kb2JTdG9wICYmIHJvd0RhdGEubGFib3VyU3RhdHVzID09ICdBQ1RWJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgfVxyXG5cclxuICAgaXNBY3R1YWxIb3Vyc0NlbGxFZGl0YWJsZShjZWxsKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzQWxsb3dlZFRvRWRpdEFjdHVhbEhvdXJzKSB7XHJcbiAgICAgICAgIGxldCByb3dEYXRhID0gY2VsbC5nZXRSb3coKS5nZXREYXRhKCk7XHJcbiAgICAgICAgIGlmIChyb3dEYXRhLmxhYm91clN0YXR1cyA9PSAnQ09NUExFVEUnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICB9XHJcblxyXG4gICBpc0VsYXBzZWRUaW1lR3JlYXRlclRoYW5UaHJlc2hvbGQoY2VsbCkge1xyXG4gICAgICBsZXQgdGltZSA9IGNlbGwuZ2V0VmFsdWUoKTtcclxuICAgICAgaWYgKHRpbWUpIHtcclxuICAgICAgICAgbGV0IGRlY2ltYWxUaW1lID0gRGF0ZVRpbWVWYWxpZGF0b3IuY29udmVydFRpbWVUb0RlY2ltYWwodGltZSk7XHJcbiAgICAgICAgIGlmIChkZWNpbWFsVGltZSA+IHBhcnNlRmxvYXQodGhpcy5sYWJvclJvd0VsYXNwZWRUaW1lVGhyZXNob2xkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCI8c3BhbiBjbGFzcz0nZWxhcHNlZFRpbWVFeGNlZWRzVGhyZXNob2xkJz5cIiArIHRpbWUgKyBcIjwvc3Bhbj5cIjtcclxuICAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGltZTtcclxuICAgfVxyXG5cclxuICAgdmFsaWRhdGVIb3VycyhjZWxsLCB2YWx1ZSkge1xyXG4gICAgICByZXR1cm4gRGF0ZVRpbWVWYWxpZGF0b3IudmFsaWRhdGVIb3Vycyh2YWx1ZSk7XHJcbiAgIH1cclxuXHJcbiAgIGhhbmRsZVNjaGVkdWxlSG91cnNFZGl0KGNlbGwpIHtcclxuICAgICAgbGV0IHJvd0RhdGEgPSBjZWxsLmdldFJvdygpLmdldERhdGEoKTtcclxuICAgICAgdGhpcy5zZXJ2aWNlLnVwZGF0ZVNjaGVkdWxlZEhvdXJzKFxyXG4gICAgICAgICByb3dEYXRhLnRhc2tJZCxcclxuICAgICAgICAgcm93RGF0YS5sYWJvdXJSb3dJZCxcclxuICAgICAgICAgY2VsbC5nZXRWYWx1ZSgpKTtcclxuICAgfVxyXG5cclxuICAgaGFuZGxlQWN0dWFsSG91cnNFZGl0KGNlbGwpIHtcclxuICAgICAgbGV0IHJvd0RhdGEgPSBjZWxsLmdldFJvdygpLmdldERhdGEoKTtcclxuICAgICAgdGhpcy5zZXJ2aWNlLnVwZGF0ZUFjdHVhbEhvdXJzKFxyXG4gICAgICAgICByb3dEYXRhLnRhc2tJZCxcclxuICAgICAgICAgcm93RGF0YS5sYWJvdXJSb3dJZCxcclxuICAgICAgICAgY2VsbC5nZXRWYWx1ZSgpKTtcclxuICAgfVxyXG59XHJcbiIsIi8qIGdsb2JhbCAkLCBleHBlY3QsIHNweU9uLCBqYXNtaW5lLCBzZXRGaXh0dXJlcyAqL1xyXG5pbXBvcnQgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlciBmcm9tICcuL1Rhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXInO1xyXG5pbXBvcnQgVGFza1N1cGVydmlzaW9uU2VydmljZSBmcm9tICcuL1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UnO1xyXG5cclxuZGVzY3JpYmUoJ1Rhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXInLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgIGRlc2NyaWJlKCdpbml0Q3Jld3NXaWRnZXQnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgIGNvbnN0IHRlc3RDcmV3TGlzdCA9IFtcclxuICAgICAgICAgeyBpZDogJzEnLCBjb2RlOiAnY3JldzEnLCBkZXNjcmlwdGlvbjogJ2NyZXcgb25lJyB9LFxyXG4gICAgICAgICB7IGlkOiAnMicsIGNvZGU6ICdjcmV3MicsIGRlc2NyaXB0aW9uOiAnY3JldyB0d28nIH0sXHJcbiAgICAgICAgIHsgaWQ6ICczJywgY29kZTogJ2NyZXczJywgZGVzY3JpcHRpb246ICdjcmV3IHRocmVlJyB9XHJcbiAgICAgIF07XHJcbiAgICAgIGNvbnN0IHRlc3RDcmV3TGlzdE9mT25lID0gW1xyXG4gICAgICAgICB7IGlkOiAnMScsIGNvZGU6ICdjcmV3MScsIGRlc2NyaXB0aW9uOiAnY3JldyBvbmUnIH1cclxuICAgICAgXTtcclxuXHJcbiAgICAgIGNvbnN0IHRlc3RDdXJyZW50RGF0ZVRpbWVSZXNwb25zZSA9IHtcclxuICAgICAgICAgc3RhcnRZZWFyOiAnMjAxOScsXHJcbiAgICAgICAgIHN0YXJ0TW9udGg6ICcwMScsXHJcbiAgICAgICAgIHN0YXJ0RGF5T2ZNb250aDogJzAxJyxcclxuICAgICAgICAgc3RhcnRIb3VySW5EYXk6ICcxMicsXHJcbiAgICAgICAgIHN0YXJ0SG91ckluRGF5OiAnMDAnLFxyXG4gICAgICAgICBzdGFydE1pbnV0ZTogJzAwJyxcclxuICAgICAgICAgZW5kWWVhcjogJzIwMTknLFxyXG4gICAgICAgICBlbmRNb250aDogJzAyJyxcclxuICAgICAgICAgZW5kRGF5T2ZNb250aDogJzAxJyxcclxuICAgICAgICAgZW5kSG91ckluRGF5OiAnMTInLFxyXG4gICAgICAgICBlbmRNaW51dGU6ICcwMCcsXHJcbiAgICAgICAgIHN0YXJ0VGltZXpvbmU6IFwiRVNUXCJcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGxldCB2YWxpZFBhcm1zO1xyXG4gICAgICBsZXQgZmFrZVNlcnZpY2U7XHJcblxyXG4gICAgICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBqYXNtaW5lLkFqYXguaW5zdGFsbCgpO1xyXG4gICAgICAgICB0aGlzLnZhbGlkUGFybXMgPSB7XHJcbiAgICAgICAgICAgIHVzZXJJZDogJ3VzZXJJZCcsXHJcbiAgICAgICAgICAgIGNyZXdzRmllbGRJZDogJ2NyZXdzRmllbGRJZCcsXHJcbiAgICAgICAgICAgIHN0YXJ0RmllbGRJZDogJ2lkU3RhcnREYXRlVGltZScsXHJcbiAgICAgICAgICAgIGVuZEZpZWxkSWQ6ICdpZEVuZERhdGVUaW1lJyxcclxuICAgICAgICAgICAgc2hvd0NvbXBsZXRlSWQ6ICdpZFNob3dDb21wbGV0ZScsXHJcbiAgICAgICAgICAgIHNlYXJjaEJ1dHRvbklkOiAnaWRTZWFyY2hCdXR0b24nLFxyXG4gICAgICAgICAgICBzZWFyY2hSZXN1bHRzSWQ6ICdpZFNlYXJjaFJlc3VsdHMnLFxyXG4gICAgICAgICAgICBpc0FsbG93ZWRUb1NlYXJjaCA6ICd0cnVlJ1xyXG4gICAgICAgICB9O1xyXG5cclxuICAgICAgICAgc2V0Rml4dHVyZXMoXHJcbiAgICAgICAgICAgICc8c2VsZWN0IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5jcmV3c0ZpZWxkSWQgKyAnXCI+PC9zZWxlY3Q+JyArXHJcbiAgICAgICAgICAgICc8aW5wdXQgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLnNob3dDb21wbGV0ZUlkICsgJ1wiIHR5cGU9XCJjaGVja2JveFwiLz4nICtcclxuICAgICAgICAgICAgJzxidXR0b24gaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLnNlYXJjaEJ1dHRvbklkICsgJ1wiIC8+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5zZWFyY2hSZXN1bHRzSWQgKyAnXCIgLz4nICtcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLnN0YXJ0RmllbGRJZCArICdcIiAvPicgK1xyXG4gICAgICAgICAgICAnPGRpdiBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuc3RhcnRGaWVsZElkICsgJ18kREFURSRcIiAvPicgK1xyXG4gICAgICAgICAgICAnPGRpdiBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuc3RhcnRGaWVsZElkICsgJ18kVElNRSRcIiAvPicgK1xyXG4gICAgICAgICAgICAnPGRpdiBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuc3RhcnRGaWVsZElkICsgJ18kVElNRVpPTkVfRElTUExBWSRcIiAvPicgK1xyXG4gICAgICAgICAgICAnPGRpdiBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuc3RhcnRGaWVsZElkICsgJ19TZWxlY3RCdG5cIiAvPicgK1xyXG4gICAgICAgICAgICAnPGRpdiBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuZW5kRmllbGRJZCArICdcIiAvPicgK1xyXG4gICAgICAgICAgICAnPGRpdiBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuZW5kRmllbGRJZCArICdfJERBVEUkXCIgLz4nICtcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLmVuZEZpZWxkSWQgKyAnXyRUSU1FJFwiIC8+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5lbmRGaWVsZElkICsgJ18kVElNRVpPTkVfRElTUExBWSRcIiAvPicgK1xyXG4gICAgICAgICAgICAnPGRpdiBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuZW5kRmllbGRJZCArICdfU2VsZWN0QnRuXCIgLz4nXHJcbiAgICAgICAgICk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBqYXNtaW5lLkFqYXgudW5pbnN0YWxsKCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ1Rocm93cyBlcnJvciB3aGVuIHVzZXIgaWQgbm90IHByb3ZpZGVkLicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBsZXQgcGFybXMgPSB0aGlzLnZhbGlkUGFybXM7XHJcbiAgICAgICAgIHBhcm1zLnVzZXJJZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHBhcm1zKTtcclxuICAgICAgICAgICAgY29udHJvbGxlci5pbml0Q3Jld3NXaWRnZXQoKTtcclxuICAgICAgICAgfSkudG9UaHJvd0Vycm9yKCd1c2VySWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ1Rocm93cyBlcnJvciB3aGVuIHVzZXIgaWQgaXMgYmxhbmsuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGxldCBwYXJtcyA9IHRoaXMudmFsaWRQYXJtcztcclxuICAgICAgICAgcGFybXMudXNlcklkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIocGFybXMpO1xyXG4gICAgICAgICB9KS50b1Rocm93RXJyb3IoJ3VzZXJJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgaXQoJ1Rocm93cyBlcnJvciB3aGVuIGNyZXcgZmllbGQgaWQgbm90IHByb3ZpZGVkLicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBsZXQgcGFybXMgPSB0aGlzLnZhbGlkUGFybXM7XHJcbiAgICAgICAgIHBhcm1zLmNyZXdzRmllbGRJZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHBhcm1zKTtcclxuICAgICAgICAgfSkudG9UaHJvd0Vycm9yKCdjcmV3c0ZpZWxkSWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ1Rocm93cyBlcnJvciB3aGVuIGNyZXcgZmllbGQgaWQgaXMgYmxhbmsuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGxldCBwYXJtcyA9IHRoaXMudmFsaWRQYXJtcztcclxuICAgICAgICAgcGFybXMuY3Jld3NGaWVsZElkID0gJyc7XHJcbiAgICAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcihwYXJtcyk7XHJcbiAgICAgICAgIH0pLnRvVGhyb3dFcnJvcignY3Jld3NGaWVsZElkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdUaHJvd3MgZXJyb3Igd2hlbiBjcmV3IGZpZWxkIGlkIGRvZXMgbm90IGlkZW50aWZ5IGEgc2VsZWN0IGVsZW1lbnQuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGxldCBwYXJtcyA9IHRoaXMudmFsaWRQYXJtcztcclxuICAgICAgICAgcGFybXMuY3Jld3NGaWVsZElkID0gJ25vbi1leGlzdGluZy1pZCc7XHJcbiAgICAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcihwYXJtcyk7XHJcbiAgICAgICAgIH0pLnRvVGhyb3dFcnJvcignY3Jld3NGaWVsZElkIG11c3QgYmUgYSBTRUxFQ1QgZWxlbWVudCcpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdUaHJvd3MgZXJyb3Igd2hlbiBjcmV3IGZpZWxkIGlkIGlkZW50aWZpZXMgYSBub24tc2VsZWN0IGVsZW1lbnQuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIHNldEZpeHR1cmVzKCc8aW5wdXQgaWQ9XCJjcmV3c0ZpZWxkSWRcIj48L2lucHV0PicpO1xyXG4gICAgICAgICBsZXQgcGFybXMgPSB0aGlzLnZhbGlkUGFybXM7XHJcbiAgICAgICAgIHBhcm1zLmNyZXdzRmllbGRJZCA9ICdjcmV3c0ZpZWxkSWQnO1xyXG4gICAgICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIocGFybXMpO1xyXG4gICAgICAgICB9KS50b1Rocm93RXJyb3IoJ2NyZXdzRmllbGRJZCBtdXN0IGJlIGEgU0VMRUNUIGVsZW1lbnQnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnRmV0Y2ggb2YgY3JldyBsaXN0IGlzIHJldHVybmVkJywgZnVuY3Rpb24oZG9uZSkge1xyXG4gICAgICAgICAvLyBBcnJhbmdlIFxyXG4gICAgICAgICBzZXRGaXh0dXJlcygnPHNlbGVjdCBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuY3Jld3NGaWVsZElkICsgJ1wiPjwvc2VsZWN0PicpO1xyXG4gICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHRoaXMudmFsaWRQYXJtcyk7XHJcblxyXG4gICAgICAgICBzcHlPbigkLCAnYWpheCcpLmFuZC5jYWxsRmFrZShmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlLnN1Y2Nlc3ModGVzdENyZXdMaXN0KTtcclxuICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAvLyBBY3RcclxuICAgICAgICAgY29udHJvbGxlci5pbml0Q3Jld3NXaWRnZXQoKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIC8vIEFzc2VydFxyXG4gICAgICAgICAgICBleHBlY3QocmVzcG9uc2UpLnRvQmUodGVzdENyZXdMaXN0KTtcclxuICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnUG9wdWxhdGVzIENyZXcgZHJvcGRvd24gd2hlbiBwcm92aWRlZCBsaXN0IG9mIGNyZXdzLicsIGZ1bmN0aW9uKGRvbmUpIHtcclxuICAgICAgICAgLy8gQXJyYW5nZSBcclxuICAgICAgICAgdGhpcy52YWxpZFBhcm1zLmlzQWxsb3dlZFRvU2VhcmNoID0gJ2ZhbHNlJztcclxuICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcih0aGlzLnZhbGlkUGFybXMpO1xyXG5cclxuICAgICAgICAgc3B5T24oJCwgJ2FqYXgnKS5hbmQuY2FsbEZha2UoZnVuY3Rpb24ocmVxdWVzdCkge1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdC51cmwgPT09ICcvbWFpbnRlbml4L3Jlc3QvY3Jld3MnKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0LnN1Y2Nlc3ModGVzdENyZXdMaXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChyZXF1ZXN0LnVybCA9PT0gJy9tYWludGVuaXgvcmVzdC9kYXRldGltZS9nZXRDdXJyZW50Jykge1xyXG4gICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdC5zdWNjZXNzKHRlc3RDdXJyZW50RGF0ZVRpbWVSZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlVuc3VwcG9ydGVkIHVybDogXCIsIHJlcXVlc3QudXJsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgIGxldCBjcmV3c0ZpZWxkU2VsZWN0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnZhbGlkUGFybXMuY3Jld3NGaWVsZElkKTtcclxuICAgICAgICAgbGV0IHNlbGVjdE9wdGlvbnMgPSBjcmV3c0ZpZWxkU2VsZWN0RWwub3B0aW9ucztcclxuXHJcbiAgICAgICAgIC8vIEFjdFxyXG4gICAgICAgICBjb250cm9sbGVyLmluaXQoKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIC8vIEFzc2VydFxyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0T3B0aW9ucy5sZW5ndGgpLnRvQmUodGVzdENyZXdMaXN0Lmxlbmd0aCk7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdE9wdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgbGV0IGV4cGVjdGVkVGV4dCA9IHRlc3RDcmV3TGlzdFtpXS5jb2RlICsgXCIgKFwiICsgdGVzdENyZXdMaXN0W2ldLmRlc2NyaXB0aW9uICsgXCIpXCI7XHJcbiAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcInNlbGVjdE9wdGlvbnM6IFwiLCBzZWxlY3RPcHRpb25zW2ldLnRleHQsIHRlc3RDcmV3TGlzdFtpXS5pZCwgZXhwZWN0ZWRUZXh0KTtcclxuICAgICAgICAgICAgICAgLy8gZXhwZWN0KHNlbGVjdE9wdGlvbnNbaV0udGV4dCkudG9CZShleHBlY3RlZFRleHQpO1xyXG4gICAgICAgICAgICAgICAvLyBleHBlY3Qoc2VsZWN0T3B0aW9uc1tpXS52YWx1ZSkudG9CZSh0ZXN0Q3Jld0xpc3RbaV0uaWQpO1xyXG4gICAgICAgICAgICB9ICoqL1xyXG5cclxuICAgICAgICAgICAgLy8gZXhwZWN0KGNyZXdzRmllbGRTZWxlY3RFbC5zZWxlY3RlZEluZGV4KS50b0JlKDApO1x0XHRcdCBcdFx0XHQgXHJcbiAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHRcclxuICAgICAgaXQoJ0NsZWFycyBjcmV3IGRyb3Bkb3duIHByaW9yIHRvIHBvcHVsYXRpbmcgaXQgd2l0aCBwcm92aWRlZCBsaXN0IG9mIGNyZXdzLicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAvLyBBcnJhbmdlXHJcbiAgICAgICAgIHNldEZpeHR1cmVzKCBcclxuICAgICAgICAgICAgICAgJzxzZWxlY3QgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLmNyZXdzRmllbGRJZCArICdcIj4nICtcclxuICAgICAgICAgICAgICAgJyAgIDxvcHRpb24gaWQ9XCIxMFwiPmNyZXcxMDwvb3B0aW9uPicrXHJcbiAgICAgICAgICAgICAgICcgICA8b3B0aW9uIGlkPVwiMjBcIj5jcmV3MjA8L29wdGlvbj4nK1xyXG4gICAgICAgICAgICAgICAnPC9zZWxlY3Q+J1xyXG4gICAgICAgICApO1xyXG5cclxuICAgICAgICAgbGV0IGZha2VTZXJ2aWNlID0gbmV3IFRhc2tTdXBlcnZpc2lvblNlcnZpY2UoKTtcclxuICAgICAgICAgc3B5T24oZmFrZVNlcnZpY2UsICdnZXRDcmV3c0ZvclVzZXInKS5hbmQuY2FsbEZha2UoIGZ1bmN0aW9uKHVzZXJJZCwgc3VjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgc3VjZXNzSGFuZGxlcih0ZXN0Q3Jld0xpc3QpO1xyXG4gICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgIGxldCBwYXJtcyA9IHRoaXMudmFsaWRQYXJtcztcclxuICAgICAgICAgcGFybXMuVGFza1N1cGVydmlzaW9uU2VydmljZSA9IGZha2VTZXJ2aWNlO1xyXG4gICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHBhcm1zKTtcclxuXHJcbiAgICAgICAgIC8vIEFjdFxyXG4gICAgICAgICBjb250cm9sbGVyLmluaXRDcmV3c1dpZGdldCgpO1xyXG5cclxuICAgICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgICAgIGxldCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnZhbGlkUGFybXMuY3Jld3NGaWVsZElkKTtcclxuICAgICAgICAgbGV0IHNlbGVjdE9wdGlvbnMgPSBzZWxlY3Qub3B0aW9ucztcclxuICAgICAgICAgZXhwZWN0KHNlbGVjdE9wdGlvbnMubGVuZ3RoKS50b0JlKDMpO1xyXG4gICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZWN0T3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZXhwZWN0ZWRUZXh0ID0gdGVzdENyZXdMaXN0W2ldLmNvZGUgKyBcIiAoXCIgKyB0ZXN0Q3Jld0xpc3RbaV0uZGVzY3JpcHRpb24gK1wiKVwiO1xyXG4gICAgICAgICAgICBleHBlY3Qoc2VsZWN0T3B0aW9uc1tpXS50ZXh0KS50b0JlKGV4cGVjdGVkVGV4dCk7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RPcHRpb25zW2ldLnZhbHVlKS50b0JlKHRlc3RDcmV3TGlzdFtpXS5pZCk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZXhwZWN0KHNlbGVjdC5zZWxlY3RlZEluZGV4KS50b0JlKDApO1x0XHQgXHJcbiAgICAgIH0pO1xyXG4qKi9cclxuICAgICAgLyoqXHJcbiAgICAgICAgICAgIGl0KCdQb3B1bGF0ZXMgQ3JldyBkcm9wZG93biB3aGVuIHByb3ZpZGVkIGxpc3Qgb2YgYSBzaW5nbGUgY3Jldy4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICAgICAgICAgICBsZXQgZmFrZVNlcnZpY2UgPSBuZXcgVGFza1N1cGVydmlzaW9uU2VydmljZSgpO1xyXG4gICAgICAgICAgICAgICBzcHlPbihmYWtlU2VydmljZSwgJ2dldENyZXdzRm9yVXNlcicpLmFuZC5jYWxsRmFrZSggZnVuY3Rpb24odXNlcklkLCBzdWNlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgICBzdWNlc3NIYW5kbGVyKHRlc3RDcmV3TGlzdE9mT25lKTtcclxuICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICBsZXQgcGFybXMgPSB0aGlzLnZhbGlkUGFybXM7XHJcbiAgICAgICAgICAgICAgIHBhcm1zLlRhc2tTdXBlcnZpc2lvblNlcnZpY2UgPSBmYWtlU2VydmljZTtcclxuICAgICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcihwYXJtcyk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBBY3RcclxuICAgICAgICAgICAgICAgY29udHJvbGxlci5pbml0Q3Jld3NXaWRnZXQoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFzc2VydFxyXG4gICAgICAgICAgICAgICBsZXQgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy52YWxpZFBhcm1zLmNyZXdzRmllbGRJZCk7XHJcbiAgICAgICAgICAgICAgIGxldCBzZWxlY3RPcHRpb25zID0gc2VsZWN0Lm9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgIGV4cGVjdChzZWxlY3RPcHRpb25zLmxlbmd0aCkudG9CZSgxKTtcclxuXHJcbiAgICAgICAgICAgICAgIGxldCBleHBlY3RlZFRleHQgPSB0ZXN0Q3Jld0xpc3RPZk9uZVswXS5jb2RlICsgXCIgKFwiICsgdGVzdENyZXdMaXN0T2ZPbmVbMF0uZGVzY3JpcHRpb24gK1wiKVwiO1xyXG4gICAgICAgICAgICAgICBleHBlY3Qoc2VsZWN0T3B0aW9uc1swXS50ZXh0KS50b0JlKGV4cGVjdGVkVGV4dCk7XHJcbiAgICAgICAgICAgICAgIGV4cGVjdChzZWxlY3RPcHRpb25zWzBdLnZhbHVlKS50b0JlKHRlc3RDcmV3TGlzdE9mT25lWzBdLmlkKTtcclxuICAgICAgICAgICAgICAgZXhwZWN0KHNlbGVjdC5zZWxlY3RlZEluZGV4KS50b0JlKDApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdEb2VzIG5vdCBwb3B1bGF0ZSBDcmV3IGRyb3Bkb3duIHdoZW4gcHJvdmlkZWQgbm8gbGlzdCBvZiBjcmV3cy4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICAgICAgICAgICBsZXQgY3Jld3MgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgIGxldCBmYWtlU2VydmljZSA9IG5ldyBUYXNrU3VwZXJ2aXNpb25TZXJ2aWNlKCk7XHJcbiAgICAgICAgICAgICAgIHNweU9uKGZha2VTZXJ2aWNlLCAnZ2V0Q3Jld3NGb3JVc2VyJykuYW5kLmNhbGxGYWtlKCBmdW5jdGlvbih1c2VySWQsIHN1Y2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgIHN1Y2Vzc0hhbmRsZXIoY3Jld3MpO1xyXG4gICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIGxldCBwYXJtcyA9IHRoaXMudmFsaWRQYXJtcztcclxuICAgICAgICAgICAgICAgcGFybXMuVGFza1N1cGVydmlzaW9uU2VydmljZSA9IGZha2VTZXJ2aWNlO1xyXG4gICAgICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHBhcm1zKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFjdFxyXG4gICAgICAgICAgICAgICBjb250cm9sbGVyLmluaXRDcmV3c1dpZGdldCgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgICAgICAgICAgIGxldCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnZhbGlkUGFybXMuY3Jld3NGaWVsZElkKTtcclxuICAgICAgICAgICAgICAgbGV0IHNlbGVjdE9wdGlvbnMgPSBzZWxlY3Qub3B0aW9ucztcclxuICAgICAgICAgICAgICAgZXhwZWN0KHNlbGVjdE9wdGlvbnMubGVuZ3RoKS50b0JlKDApO1xyXG4gICAgICAgICAgICAgICBleHBlY3Qoc2VsZWN0LnNlbGVjdGVkSW5kZXgpLnRvQmUoLTEpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGl0KCdEb2VzIG5vdCBwb3B1bGF0ZSBDcmV3IGRyb3Bkb3duIHdoZW4gcHJvdmlkZWQgZW1wdHkgbGlzdCBvZiBjcmV3cy4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICAgICAgICAgICBsZXQgY3Jld3MgPSBbXTtcclxuICAgICAgICAgICAgICAgbGV0IGZha2VTZXJ2aWNlID0gbmV3IFRhc2tTdXBlcnZpc2lvblNlcnZpY2UoKTtcclxuICAgICAgICAgICAgICAgc3B5T24oZmFrZVNlcnZpY2UsICdnZXRDcmV3c0ZvclVzZXInKS5hbmQuY2FsbEZha2UoIGZ1bmN0aW9uKHVzZXJJZCwgc3VjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgc3VjZXNzSGFuZGxlcihjcmV3cyk7XHJcbiAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgbGV0IHBhcm1zID0gdGhpcy52YWxpZFBhcm1zO1xyXG4gICAgICAgICAgICAgICBwYXJtcy5UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlID0gZmFrZVNlcnZpY2U7XHJcbiAgICAgICAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIocGFybXMpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gQWN0XHJcbiAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuaW5pdENyZXdzV2lkZ2V0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBBc3NlcnRcclxuICAgICAgICAgICAgICAgbGV0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudmFsaWRQYXJtcy5jcmV3c0ZpZWxkSWQpO1xyXG4gICAgICAgICAgICAgICBsZXQgc2VsZWN0T3B0aW9ucyA9IHNlbGVjdC5vcHRpb25zO1xyXG4gICAgICAgICAgICAgICBleHBlY3Qoc2VsZWN0T3B0aW9ucy5sZW5ndGgpLnRvQmUoMCk7XHJcbiAgICAgICAgICAgICAgIGV4cGVjdChzZWxlY3Quc2VsZWN0ZWRJbmRleCkudG9CZSgtMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ1Rocm93cyBlcnJvciB3aGVuIHVuYWJsZSB0byBnZXQgY3Jld3MgZm9yIHVzZXIuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgICAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9ICdlcnJvck1lc3NhZ2UnO1xyXG4gICAgICAgICAgICAgICBsZXQgZmFrZVNlcnZpY2UgPSBuZXcgVGFza1N1cGVydmlzaW9uU2VydmljZSgpO1xyXG4gICAgICAgICAgICAgICBzcHlPbihmYWtlU2VydmljZSwgJ2dldENyZXdzRm9yVXNlcicpLmFuZC5jYWxsRmFrZSggZnVuY3Rpb24odXNlcklkLCBzdWNlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgICBmYWlsdXJlSGFuZGxlcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIGxldCBwYXJtcyA9IHRoaXMudmFsaWRQYXJtcztcclxuICAgICAgICAgICAgICAgcGFybXMuVGFza1N1cGVydmlzaW9uU2VydmljZSA9IGZha2VTZXJ2aWNlO1xyXG4gICAgICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHBhcm1zKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFjdCBhbmQgQXNzZXJ0XHJcbiAgICAgICAgICAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5pbml0Q3Jld3NXaWRnZXQoKTtcclxuICAgICAgICAgICAgICAgfSkudG9UaHJvd0Vycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICBcdCAgKiovXHJcblxyXG4gICB9KTtcclxuXHJcbn0pO1xyXG4iLCJ2YXIgbWFwID0ge1xuXHRcIi4vYmFzZW1haW50ZW5hbmNlL3Rhc2svdGFza3N1cGVydmlzaW9uL1Rhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIuc3BlYy5qc1wiOiAxOSxcblx0XCIuL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlLnNwZWMuanNcIjogMTIsXG5cdFwiLi9lbmdpbmVlcmluZy9yZXF1aXJlbWVudGRlZmluaXRpb24vZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcuc3BlYy5qc1wiOiAxMSxcblx0XCIuL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIuc3BlYy5qc1wiOiAxMCxcblx0XCIuL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2Uuc3BlYy5qc1wiOiA4LFxuXHRcIi4vc29tZUZlYXR1cmUvZmVhdHVyZU1hdGgvZmVhdHVyZU1hdGguc3BlYy5qc1wiOiA3XG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xuXHRyZXR1cm4gbW9kdWxlO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHR2YXIgaWQgPSBtYXBbcmVxXTtcblx0aWYoIShpZCArIDEpKSB7IC8vIGNoZWNrIGZvciBudW1iZXIgb3Igc3RyaW5nXG5cdFx0dmFyIGUgPSBuZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIG1vZHVsZSBcIicgKyByZXEgKyAnXCIuJyk7XG5cdFx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHRcdHRocm93IGU7XG5cdH1cblx0cmV0dXJuIGlkO1xufVxud2VicGFja0NvbnRleHQua2V5cyA9IGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0S2V5cygpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7XG59O1xud2VicGFja0NvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZTtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0NvbnRleHQ7XG53ZWJwYWNrQ29udGV4dC5pZCA9IDIwOyIsIi8vIHRlc3RfaW5kZXguanNcbnZhciB0ZXN0c0NvbnRleHQgPSByZXF1aXJlLmNvbnRleHQoXCIuXCIsIHRydWUsIC9zcGVjLmpzJC8pO1xudGVzdHNDb250ZXh0LmtleXMoKS5mb3JFYWNoKHRlc3RzQ29udGV4dCk7Il0sInNvdXJjZVJvb3QiOiIifQ==