(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],[function(e,t){e.exports=jQuery},function(e,t,r){"use strict";e.exports=r(17).Promise},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(0);var a=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var l=function(){function t(){s(this,t)}n(t,null,[{key:"sortTaskDefinitions",value:function e(t){if(!t||!(t instanceof Array)){throw new Error("taskDefinitions expected to be an Array")}return t.sort(function(e,t){var r=e.code>t.code?1:e.code<t.code?-1:0;if(r==0){r=e.configSlotCode>t.configSlotCode?1:e.configSlotCode<t.configSlotCode?-1:0}if(r==0){r=e.name>t.name?1:e.name<t.name?-1:0}return r})}},{key:"getFollowOnTaskDefinitions",value:function t(r){var n=this;return new e(function(e,t){return a.default.ajax({type:"GET",url:r,success:function t(r){var i=n.sortTaskDefinitions(r);e(i)},error:function t(r){e([])}})})}}]);return t}();t.default=l}).call(this,r(1))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var i=function e(t){n(this,e);if(!t||!(t instanceof Array)){throw new Error("The response data suppose to be in array form")}this.data=t;this.name="followOnTaskDefnSearch";this.limit=50;this.minLength=1};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){i(this,e)}n(e,null,[{key:"addHours",value:function e(t,r){return new Date(t.getTime()+r*60*60*1e3)}},{key:"formatDate",value:function e(t){var r=(t.getDate()<10?"0":"")+t.getDate()+"-"+this.getMonthShortStr(t.getMonth()+1)+"-"+t.getFullYear();return r}},{key:"formatTime",value:function e(t){var r=(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes();return r}},{key:"convertTimeToDecimal",value:function e(t){var r=t.split(/[.:]/);var n=parseInt(r[0],10);var i=r[1]?parseInt(r[1],10):0;return n+i/60}},{key:"getMonthShortStr",value:function e(t){if(t===1)return"JAN";else if(t===2)return"FEB";else if(t===3)return"MAR";else if(t===4)return"APR";else if(t===5)return"MAY";else if(t===6)return"JUN";else if(t===7)return"JUL";else if(t===8)return"AUG";else if(t===9)return"SEP";else if(t===10)return"OCT";else if(t===11)return"NOV";else if(t===12)return"DEC";else return""}}]);return e}();t.default=a},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(0);var a=l(i);var o=r(4);var s=l(o);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function t(){u(this,t);this.errorMsgPrefix="Error code =  "}n(t,[{key:"getCrewsForUser",value:function t(r){var n=this;if(!r){throw new Error("userId is mandatory")}var i="/maintenix/rest/crews";var o={userId:r};return new e(function(e,t){a.default.ajax({url:i,type:"GET",data:o,success:function t(r,n,i){e(r)},error:function e(r,i,a){var o=n.errorMsgPrefix+r.status;t(o)}})})}},{key:"getDefaultStartAndEndDates",value:function t(r){var n=this;if(!r){throw new Error("userId is mandatory")}var i="/maintenix/rest/datetime/getCurrent";var o={userId:r};return new e(function(e,t){a.default.ajax({url:i,type:"GET",data:o,success:function r(i,a,o){var s=new Date(i.startYear,i.startMonth-1,i.startDayOfMonth,i.startHourInDay,i.startMinute);var l=new Date(i.endYear,i.endMonth-1,i.endDayOfMonth,i.endHourInDay,i.endMinute);var u={};u.startDate=n.formatDate(s);u.startTime=n.formatTime(s);u.startTimeZone=i.startTimezone;try{n.validateDateFormat(u.startDate)}catch(e){t("default startDate failed validation: "+e.message)}try{n.validateTimeFormat(u.startTime)}catch(e){t("default startTime failed validation: "+e.message)}u.endDate=n.formatDate(l);u.endTime=n.formatTime(l);u.endTimeZone=i.endTimezone;try{n.validateDateFormat(u.endDate)}catch(e){t("default endDate failed validation: "+e.message)}try{n.validateTimeFormat(u.endTime)}catch(e){t("default endTime failed validation: "+e.message)}e(u)},error:function e(r,i,a){var o=n.errorMsgPrefix+r.status;t(o)}})})}},{key:"performSearch",value:function t(r){var n=this;return new e(function(e,t){var i=r.showCompleteTasks==true?false:true;var o={onlyWorkscoped:true,onlyContainingLabour:true,assignedToCrewId:r.crewId,minScheduledStartDateTime:r.startDateTime,maxScheduledStartDateTime:r.endDateTime,excludeCompleted:i};var s="/maintenix/rest/tasks";a.default.ajax({url:s,data:o,type:"GET",success:function t(r,n,i){e(r)},error:function e(r,i,a){var o=n.errorMsgPrefix+r.status;t(o)}})})}},{key:"updateScheduledHours",value:function e(t,r,n){var i=this;var o={scheduledHours:n};a.default.ajax({url:"/maintenix/rest/tasks/"+t+"/labours/"+r,type:"PUT",contentType:"application/json",data:JSON.stringify(o),error:function e(t,r,n){var a=i.errorMsgPrefix+t.status;new Error(a)}})}},{key:"updateActualHours",value:function e(t,r,n){var i=this;var o={actualHours:n};a.default.ajax({url:"/maintenix/rest/tasks/"+t+"/labours/"+r,type:"PUT",contentType:"application/json",data:JSON.stringify(o),error:function e(t,r,n){var a=i.errorMsgPrefix+t.status;new Error(a)}})}},{key:"validateDateFormat",value:function e(t){if(!t){throw new Error("dateStr is mandatory.")}if(typeof t!=="string"){throw new Error("dateStr is not a string")}var r=/^(([0-9])|([0-2][0-9])|([3][0-1]))\-(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\-\d{4}$/;var n=t.match(r);if(n==null){throw new Error("dateStr has invalid format.")}return true}},{key:"validateTimeFormat",value:function e(t){if(!t){throw new Error("timeStr is mandatory.")}if(typeof t!=="string"){throw new Error("timeStr is not a string.")}var r=/^$|^(([01][0-9])|(2[0-3])):[0-5][0-9]$/;var n=t.match(r);if(n==null){throw new Error("timeStr has invalid format.")}return true}},{key:"addHours",value:function e(t,r){return new Date(t.getTime()+r*60*60*1e3)}},{key:"formatDate",value:function e(t){var r=(t.getDate()<10?"0":"")+t.getDate()+"-"+this.getMonthShortStr(t.getMonth()+1)+"-"+t.getFullYear();return r}},{key:"formatTime",value:function e(t){var r=(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes();return r}},{key:"getMonthShortStr",value:function e(t){if(t===1)return"JAN";if(t===2)return"FEB";if(t===3)return"MAR";if(t===4)return"APR";if(t===5)return"MAY";if(t===6)return"JUN";if(t===7)return"JUL";if(t===8)return"AUG";if(t===9)return"SEP";if(t===10)return"OCT";if(t===11)return"NOV";if(t===12)return"DEC";return""}}]);return t}();t.default=d}).call(this,r(1))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=t.Add=function e(t,r){return t+r};var i=t.Subtract=function e(t,r){return t-r};var a=t.Multiply=function e(t,r){return t*r}},function(e,t,r){"use strict";var n=r(6);describe("[Dummy]",function(){it("[Add] should add two numbers together and return the result",function(){expect((0,n.Add)(1,2)).toBe(3)});it("[Subtract] should subtract second param from first and return the result",function(){expect((0,n.Subtract)(1,2)).toBe(-1)});it("[Multiply] should multiply two numbers and return the result",function(){expect((0,n.Multiply)(1,2)).toBe(2)})})},function(e,t,r){"use strict";(function(e){var t=r(2);var n=i(t);function i(e){return e&&e.__esModule?e:{default:e}}describe("FollowOnTaskDefinitionSearchService followOnTask/followOnTaskDefinitionSearchService.js",function(){var t=void 0;var r="https://www.google.com";var i=[{code:3,configSlotCode:3,name:"Third"},{code:2,configSlotCode:2,name:"Second"},{code:1,configSlotCode:1,name:"First"}];beforeAll(function(){this.service=n.default});it("Sorts task definitions",function(){var e=this.service.sortTaskDefinitions(i);expect(e[0].code).toBe(1);expect(e[1].code).toBe(2);expect(e[2].code).toBe(3)});it("Fetches task definitions with error for invalid response",function(){jasmine.Ajax.install();spyOn(e,"ajax").and.callFake(function(e){var t={};return e.success(t)});expect(function(){this.service.getFollowOnTaskDefinitions(r)}).toThrow();jasmine.Ajax.uninstall()});it("Fetches task definitions successfully",function(){jasmine.Ajax.install();spyOn(e,"ajax").and.callFake(function(e){return e.success(i)});this.service.getFollowOnTaskDefinitions(r).then(function(e){expect(e).toEqual(i)});jasmine.Ajax.uninstall()})})}).call(this,r(0))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=r(0);var a=d(i);var o=r(3);var s=d(o);var l=r(2);var u=d(l);function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var f=function(){function e(t,r,n,i,o){c(this,e);var s=this;this.notFoundMsgEl=(0,a.default)("#"+n);this.okBtnEl=(0,a.default)("#"+r);this.typeAheadSearchInputEl=(0,a.default)("#"+t);this.followOnTaskDefnUuidOuputEl=(0,a.default)("#"+i);var l=(0,a.default)("#"+o);if(!this.notFoundMsgEl.length>0){throw new Error("Not found message element required")}if(!this.okBtnEl.length>0){throw new Error("Ok button element required")}if(!this.typeAheadSearchInputEl.length>0){throw new Error("Typeahead input element required")}if(!this.followOnTaskDefnUuidOuputEl.length>0){throw new Error("Output followOn task definition UUI input element required")}if(!l.length>0){throw new Error("REST api url element is required")}this.apiUrl=l.val();this.selectedOption="";this.typeAheadSearchInputEl.keydown(function(){setTimeout(function(){if(s.typeAheadSearchInputEl.val()!=s.selectedOption){s.disableOkBtn();s.clearSelectedTaskDefinition()}})});this.initialize=this.initialize.bind(this)}n(e,[{key:"setSelectedTaskDefinition",value:function e(t){if(t){this.typeAheadSearchInputEl.val(this.displayFollowOn(null,t));this.selectedOption=this.typeAheadSearchInputEl.val();this.followOnTaskDefnUuidOuputEl.attr("value",t.id)}}},{key:"clearSelectedTaskDefinition",value:function e(){this.followOnTaskDefnUuidOuputEl.attr("value","")}},{key:"initialize",value:function e(){var t=this;this.disableOkBtn();try{return u.default.getFollowOnTaskDefinitions(this.apiUrl).then(function(e){t.configureTypeAhead(e);t.typeAheadSearchInputEl.focus()})}catch(e){throw new Error("Error while trying to fetch task definitions.",e)}}},{key:"configureTypeAhead",value:function e(t){var r=this;var n=new s.default(t);a.default.each(n.data,function(e,t){t.displayValue=r.displayFollowOn(null,t)});a.default.typeahead({input:r.typeAheadSearchInputEl,highlight:true,name:n.name,limit:n.limit,minLength:n.minLength,display:["displayValue"],emptyTemplate:'<div class="mx-typeahead-msg-notfound">'+r.notFoundMsgEl.val()+"</div>",source:{data:n.data},callback:{onClick:function e(t,n,i,a){a.preventDefault();r.enableOkBtn();r.setSelectedTaskDefinition(i);this.hideLayout()}}})}},{key:"displayFollowOn",value:function e(t,r){if(r){return r.code+" - "+r.configSlotCode+" - "+r.name}}},{key:"enableOkBtn",value:function e(){if(this.okBtnEl){if(this.okBtnEl.attr("originOnClickEvent")){this.okBtnEl.attr("onclick",this.okBtnEl.attr("originOnClickEvent"))}if(this.okBtnEl.attr("originTitle")){this.okBtnEl.attr("title",this.okBtnEl.attr("originTitle"))}this.okBtnEl.removeClass("disabled");this.okBtnEl.removeAttr("disabled");this.okBtnEl.removeAttr("originOnClickEvent");this.okBtnEl.removeAttr("originTitle")}}},{key:"disableOkBtn",value:function e(){if(this.okBtnEl){if(!this.okBtnEl.attr("originOnClickEvent")){this.okBtnEl.attr("originOnClickEvent",this.okBtnEl.attr("onclick"))}if(!this.okBtnEl.attr("originTitle")){this.okBtnEl.attr("originTitle",this.okBtnEl.attr("title"))}this.okBtnEl.addClass("disabled");this.okBtnEl.attr("disabled","disabled");this.okBtnEl.attr("onclick",false);this.okBtnEl.attr("title","")}}}]);return e}();t.default=f},function(e,t,r){"use strict";(function(e){var t=r(9);var n=i(t);function i(e){return e&&e.__esModule?e:{default:e}}describe("FollowOnTaskDefinitionSearchController followOnTask/followOnTaskDefinitionSearchController.js",function(){var t="/someRestApi";function r(){return new n.default("followOnTaskSearchQuery","idButtonOk","idTypeaheadNotFoundMessage","idFieldFollowOnTaskDefnUuid","idfollowOnTaskDefinitionRestAPI")}function i(){setFixtures('<form id="form-typeahead-test" name="form-typeahead-test">'+'  <div class="typeahead__container">'+'     <div class="typeahead__field">'+'        <span class="typeahead__query">'+'          <input class= "js-typeahead-test" id="followOnTaskSearchQuery" name="followOnTaskSearchQuery">'+"        </span>"+"     </div>"+"  </div>"+'  <button id="idButtonOk" title="mytitle">Ok</button>'+'  <input type="hidden" name="aFollowOnTaskDefinitionUuid" id="idFieldFollowOnTaskDefnUuid">'+'  <input type="hidden" id="idTypeaheadNotFoundMessage" value="web.msg.MSG_NO_MATCHING_FOLLOWON_TASK_DEFINITIONS">'+'  <input type="hidden" id="idfollowOnTaskDefinitionRestAPI" value="'+t+'"'+"</form>")}beforeEach(function(){jasmine.Ajax.install();i();this.okButtonEl=e("#idButtonOk");this.fieldFollowOnTaskDefnUuidEl=e("#idFieldFollowOnTaskDefnUuid")});afterEach(function(){jasmine.Ajax.uninstall()});it("Should have a button with OK label",function(){expect(this.okButtonEl).toHaveText("Ok")});it("Should throw error indicating missing typeaheadId",function(){expect(function(){new n.default("FAKE_followOnTaskSearchQuery","FAKE_idButtonOk","FAKE_idTypeaheadNotFoundMessage","FAKE_idFieldFollowOnTaskDefnUuid","FAKE_idfollowOnTaskDefinitionRestAPI")}).toThrow()});it("Should have Ok button enabled",function(){var e=r();e.enableOkBtn();expect(this.okButtonEl).not.toHaveClass("disabled")});it("Should have Ok button disabled",function(){var e=r();e.disableOkBtn();expect(this.okButtonEl).toHaveClass("disabled")});it("returns a properly constructed display value",function(){var e=[{code:5,configSlotCode:3,name:"test"}];var t=r();expect(t.displayFollowOn(null,e[0])).toBe("5 - 3 - test")});it("Should set and clear selected task definition of output element",function(){var e=r();e.setSelectedTaskDefinition({id:"someValue"});expect(this.fieldFollowOnTaskDefnUuidEl.attr("value")).toBe("someValue");e.clearSelectedTaskDefinition();expect(this.fieldFollowOnTaskDefnUuidEl.attr("value")).toBe("")});it("Fetches task definitions successfully",function(n){var i=r();var a=[{id:"A6AAE18B638740B29B2F34D51CF2CCD5",configSlotCode:"BOM123",name:"ReqWithImpact1",code:"NC14992-REQ1"},{id:"A6AAE18B638740B29B2F34D51CF2CCD6",configSlotCode:"BOM123",name:"ReqWithImpact2",code:"NC14992-REQ2"},{id:"A6AAE18B638740B29B2F34D51CF2CCD7",configSlotCode:"BOM123",name:"ReqWithImpact3",code:"NC14992-REQ3"},{id:"A6AAE18B638740B29B2F34D51CF2CCD8",configSlotCode:"BOM123",name:"ReqWithImpact4",code:"NC14992-REQ4"},{id:"A6AAE18B638740B29B2F34D51CF2CCD9",configSlotCode:"BOM123",name:"ReqWithImpact5",code:"NC14992-REQ5"},{id:"A6AAE18B638740B29B2F34D51CF2CCE3",configSlotCode:"BOM123",name:"ReqWithImpact6",code:"NC14992-REQ6"}];spyOn(e,"ajax").and.callFake(function(e){return e.success(a)});var o=e("#idButtonOk");var s=e("#followOnTaskSearchQuery");i.initialize().then(function(){expect(e.ajax.calls.mostRecent().args[0].url).toEqual(t);expect(o).toHaveClass("disabled");expect(s).toBeFocused();n()})})})}).call(this,r(0))},function(e,t,r){"use strict";var n=r(3);var i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}describe("FollowOnTaskDefinitionSearchConfig followOnTask/followOnTaskDefinitionSearchConfig.js",function(){it("throws exception on empty data parameter",function(){expect(function(){var e=new i.default}).toThrowError("The response data suppose to be in array form")});it("throws exception with a object type data parameter instead of array",function(){expect(function(){var e={};var t=new i.default(e)}).toThrowError("The response data suppose to be in array form")});it("creates a valid config object",function(){var e=[];var t=new i.default(e);expect(t.name).toBe("followOnTaskDefnSearch");expect(t.limit).toBe(50);expect(t.minLength).toBe(1)})})},function(e,t,r){"use strict";var n=r(0);var i=s(n);var a=r(5);var o=s(a);function s(e){return e&&e.__esModule?e:{default:e}}describe("TaskSupervisionService.js",function(){describe("getCrewsForUser",function(){var e=new o.default;var t="user";var r=function e(){};var n=function e(){};beforeEach(function(){jasmine.Ajax.install()});afterEach(function(){jasmine.Ajax.uninstall()});it("will call the success handler when the ajax call is successful",function(){spyOn(i.default,"ajax").and.callFake(function(e){e.success({})})})})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(){i(this,e)}n(e,null,[{key:"validateHours",value:function e(t){var r=t.split(".");if(r.length>0){if(r[0].length>4){return false}if(r.length==2){if(r[1].length>5){return false}}else if(r.length>2){return false}}return true}},{key:"validateDateFormat",value:function e(t){if(!t){throw new Error("dateStr is mandatory.")}if(typeof t!=="string"){throw new Error("dateStr is not a string")}var r=/^(([0-9])|([0-2][0-9])|([3][0-1]))\-(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)\-\d{4}$/;var n=t.match(r);if(n==null){throw new Error("dateStr has invalid format.")}return true}},{key:"validateTimeFormat",value:function e(t){if(!t){throw new Error("timeStr is mandatory.")}if(typeof t!=="string"){throw new Error("timeStr is not a string.")}var r=/^$|^(([01][0-9])|(2[0-3])):[0-5][0-9]$/;var n=t.match(r);if(n==null){throw new Error("timeStr has invalid format.")}return true}}]);return e}();t.default=a},function(e,t){},function(e,t,r){"use strict";var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i;i=function(){return this}();try{i=i||Function("return this")()||(1,eval)("this")}catch(e){if((typeof window==="undefined"?"undefined":n(window))==="object")i=window}e.exports=i},function(e,t,r){"use strict";var n=e.exports={};var i;var a;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){i=setTimeout}else{i=o}}catch(e){i=o}try{if(typeof clearTimeout==="function"){a=clearTimeout}else{a=s}}catch(e){a=s}})();function l(e){if(i===setTimeout){return setTimeout(e,0)}if((i===o||!i)&&setTimeout){i=setTimeout;return setTimeout(e,0)}try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function u(e){if(a===clearTimeout){return clearTimeout(e)}if((a===s||!a)&&clearTimeout){a=clearTimeout;return clearTimeout(e)}try{return a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}var d=[];var c=false;var f;var h=-1;function v(){if(!c||!f){return}c=false;if(f.length){d=f.concat(d)}else{h=-1}if(d.length){m()}}function m(){if(c){return}var e=l(v);c=true;var t=d.length;while(t){f=d;d=[];while(++h<t){if(f){f[h].run()}}h=-1;t=d.length}f=null;c=false;u(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}d.push(new p(e,t));if(d.length===1&&!c){l(m)}};function p(e,t){this.fun=e;this.array=t}p.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function w(){}n.on=w;n.addListener=w;n.once=w;n.off=w;n.removeListener=w;n.removeAllListeners=w;n.emit=w;n.prependListener=w;n.prependOnceListener=w;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},function(e,t,r){"use strict";(function(n,i){var a,o;var s;var l=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   3.3.1
 */
(function(n,i){(false?undefined:l(t))==="object"&&typeof e!=="undefined"?e.exports=i():true?!(a=i,o=typeof a==="function"?a.call(t,r,t,e):a,o!==undefined&&(e.exports=o)):undefined})(undefined,function(){"use strict";function e(e){return typeof e==="function"||(typeof e==="undefined"?"undefined":l(e))==="object"&&e!==null}function t(e){return typeof e==="function"}var a=undefined;if(!Array.isArray){a=function e(t){return Object.prototype.toString.call(t)==="[object Array]"}}else{a=Array.isArray}var o=a;var u=0;var d=undefined;var c=undefined;var f=function e(t,r){I[u]=t;I[u+1]=r;u+=2;if(u===2){if(c){c(D)}else{A()}}};function h(e){c=e}function v(e){f=e}var m=typeof window!=="undefined"?window:undefined;var p=m||{};var w=p.MutationObserver||p.WebKitMutationObserver;var y=typeof self==="undefined"&&typeof n!=="undefined"&&{}.toString.call(n)==="[object process]";var g=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function E(){return function(){return n.nextTick(D)}}function T(){return function(){d(D)}}function k(){var e=0;var t=new w(D);var r=document.createTextNode("");t.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function b(){var e=new MessageChannel;e.port1.onmessage=D;return function(){return e.port2.postMessage(0)}}function S(){var e=setTimeout;return function(){return e(D,1)}}var I=new Array(1e3);function D(){for(var e=0;e<u;e+=2){var t=I[e];var r=I[e+1];t(r);I[e]=undefined;I[e+1]=undefined}u=0}function F(){try{var e=s;var t=r(14);d=t.runOnLoop||t.runOnContext;return T()}catch(e){return S()}}var A=undefined;if(y){A=E()}else if(w){A=k()}else if(g){A=b()}else if(m===undefined&&"function"==="function"){A=F()}else{A=S()}function O(e,t){var r=arguments;var n=this;var i=new this.constructor(B);if(i[C]===undefined){ne(i)}var a=n._state;if(a){(function(){var e=r[a-1];f(function(){return X(a,i,e,n._result)})})()}else{Z(n,i,e,t)}return i}function _(e){var t=this;if(e&&(typeof e==="undefined"?"undefined":l(e))==="object"&&e.constructor===t){return e}var r=new t(B);J(r,e);return r}var C=Math.random().toString(36).substring(16);function B(){}var x=void 0;var M=1;var P=2;var j=new Q;function H(){return new TypeError("You cannot resolve a promise with itself")}function R(){return new TypeError("A promises callback cannot return that same promise.")}function W(e){try{return e.then}catch(e){j.error=e;return j}}function N(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function U(e,t,r){f(function(e){var n=false;var i=N(r,t,function(r){if(n){return}n=true;if(t!==r){J(e,r)}else{G(e,r)}},function(t){if(n){return}n=true;Y(e,t)},"Settle: "+(e._label||" unknown promise"));if(!n&&i){n=true;Y(e,i)}},e)}function L(e,t){if(t._state===M){G(e,t._result)}else if(t._state===P){Y(e,t._result)}else{Z(t,undefined,function(t){return J(e,t)},function(t){return Y(e,t)})}}function $(e,r,n){if(r.constructor===e.constructor&&n===O&&r.constructor.resolve===_){L(e,r)}else{if(n===j){Y(e,j.error)}else if(n===undefined){G(e,r)}else if(t(n)){U(e,r,n)}else{G(e,r)}}}function J(t,r){if(t===r){Y(t,H())}else if(e(r)){$(t,r,W(r))}else{G(t,r)}}function q(e){if(e._onerror){e._onerror(e._result)}V(e)}function G(e,t){if(e._state!==x){return}e._result=t;e._state=M;if(e._subscribers.length!==0){f(V,e)}}function Y(e,t){if(e._state!==x){return}e._state=P;e._result=t;f(q,e)}function Z(e,t,r,n){var i=e._subscribers;var a=i.length;e._onerror=null;i[a]=t;i[a+M]=r;i[a+P]=n;if(a===0&&e._state){f(V,e)}}function V(e){var t=e._subscribers;var r=e._state;if(t.length===0){return}var n=undefined,i=undefined,a=e._result;for(var o=0;o<t.length;o+=3){n=t[o];i=t[o+r];if(n){X(r,n,i,a)}else{i(a)}}e._subscribers.length=0}function Q(){this.error=null}var z=new Q;function K(e,t){try{return e(t)}catch(e){z.error=e;return z}}function X(e,r,n,i){var a=t(n),o=undefined,s=undefined,l=undefined,u=undefined;if(a){o=K(n,i);if(o===z){u=true;s=o.error;o=null}else{l=true}if(r===o){Y(r,R());return}}else{o=i;l=true}if(r._state!==x){}else if(a&&l){J(r,o)}else if(u){Y(r,s)}else if(e===M){G(r,o)}else if(e===P){Y(r,o)}}function ee(e,t){try{t(function t(r){J(e,r)},function t(r){Y(e,r)})}catch(t){Y(e,t)}}var te=0;function re(){return te++}function ne(e){e[C]=te++;e._state=undefined;e._result=undefined;e._subscribers=[]}function ie(e,t){this._instanceConstructor=e;this.promise=new e(B);if(!this.promise[C]){ne(this.promise)}if(o(t)){this._input=t;this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0){G(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){G(this.promise,this._result)}}}else{Y(this.promise,ae())}}function ae(){return new Error("Array Methods must be provided an Array")}ie.prototype._enumerate=function(){var e=this.length;var t=this._input;for(var r=0;this._state===x&&r<e;r++){this._eachEntry(t[r],r)}};ie.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;var n=r.resolve;if(n===_){var i=W(e);if(i===O&&e._state!==x){this._settledAt(e._state,t,e._result)}else if(typeof i!=="function"){this._remaining--;this._result[t]=e}else if(r===ce){var a=new r(B);$(a,e,i);this._willSettleAt(a,t)}else{this._willSettleAt(new r(function(t){return t(e)}),t)}}else{this._willSettleAt(n(e),t)}};ie.prototype._settledAt=function(e,t,r){var n=this.promise;if(n._state===x){this._remaining--;if(e===P){Y(n,r)}else{this._result[t]=r}}if(this._remaining===0){G(n,this._result)}};ie.prototype._willSettleAt=function(e,t){var r=this;Z(e,undefined,function(e){return r._settledAt(M,t,e)},function(e){return r._settledAt(P,t,e)})};function oe(e){return new ie(this,e).promise}function se(e){var t=this;if(!o(e)){return new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}else{return new t(function(r,n){var i=e.length;for(var a=0;a<i;a++){t.resolve(e[a]).then(r,n)}})}}function le(e){var t=this;var r=new t(B);Y(r,e);return r}function ue(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function de(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function ce(e){this[C]=re();this._result=this._state=undefined;this._subscribers=[];if(B!==e){typeof e!=="function"&&ue();this instanceof ce?ee(this,e):de()}}ce.all=oe;ce.race=se;ce.resolve=_;ce.reject=le;ce._setScheduler=h;ce._setAsap=v;ce._asap=f;ce.prototype={constructor:ce,then:O,catch:function e(t){return this.then(null,t)}};function fe(){var e=undefined;if(typeof i!=="undefined"){e=i}else if(typeof self!=="undefined"){e=self}else{try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if(r==="[object Promise]"&&!t.cast){return}}e.Promise=ce}fe();ce.polyfill=fe;ce.Promise=ce;return ce})}).call(this,r(16),r(15))},function(e,t,r){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:true});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a=r(5);var o=c(a);var s=r(13);var l=c(s);var u=r(4);var d=c(u);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var h=function(){function t(e){f(this,t);this.userId=e.userId;if(!this.userId){throw new Error("userId is mandatory")}this.crewsFieldId=e.crewsFieldId;if(!this.crewsFieldId){throw new Error("crewsFieldId is mandatory")}var r=document.getElementById(this.crewsFieldId);if(!r||r.tagName!="SELECT"){throw new Error("crewsFieldId must be a SELECT element")}this.service=e.TaskSupervisionService||new o.default;this.isAllowedToSearch=e.isAllowedToSearch==="true";this.isAllowedToEditSchedledHours=e.isAllowedToEditSchedledHours==="true";this.isAllowedToEditActualHours=e.isAllowedToEditActualHours==="true";this.startDateWidgetId=e.startFieldId;this.endDateWidgetId=e.endFieldId;this.showCompleteId=e.showCompleteId;this.searchButtonId=e.searchButtonId;this.searchResultsId=e.searchResultsId;this.noSearchResultsMessage=e.noSearchResultsMessage;this.laborRowElaspedTimeThreshold=e.laborRowElaspedTimeThreshold;this.defaultShowComplete=true;this.isScheduledHoursCellEditable.bind(this);this.handleScheduleHoursEdit.bind(this);this.handleActualHoursEdit.bind(this);this.actualHourCellFormatter.bind(this)}i(t,[{key:"getServiceInstance",value:function e(){return this.service}},{key:"init",value:function t(){var r=this;return new e(function(t,n){r.initShowCompleteTasksWidget();r.initResultsTable();r.initSearchButton();e.all([r.initCrewsWidget(),r.initStartAndEndWidgets()]).then(function(e){r.populateCrewsWidget(e[0]);r.setStartAndEndWidgets(e[1]);r.performSearch().then(function(){return t()})}).catch(function(e){throw new Error(e)})})}},{key:"initCrewsWidget",value:function e(){return this.service.getCrewsForUser(this.userId)}},{key:"initStartAndEndWidgets",value:function e(){if(!this.userId){throw new Error("userId is mandatory")}try{this.validateStartEndWidgetIds();var t=this.buildFieldIdsForDateTimeWidget(this.startDateWidgetId);var r=this.buildFieldIdsForDateTimeWidget(this.endDateWidgetId);this.setStartEndElemAttrs(t,r);this.validateStartEndElems()}catch(e){console.error("initStartAndEndWidgets",e)}this.startDateElem.disabled=true;this.endDateElem.disabled=true;return this.service.getDefaultStartAndEndDates(this.userId)}},{key:"initShowCompleteTasksWidget",value:function e(){document.getElementById(this.showCompleteId).checked=this.defaultShowComplete}},{key:"initResultsTable",value:function e(){var t=this;var r=["technician","labourSkill","labourStatus","jobStopReason","elapsedHoursMinutes","scheduledHours","actualHours"];this.table=new Tabulator("#"+this.searchResultsId,{columns:[{title:"Task Id",field:"taskId",visible:false},{title:"Labour Row Id",field:"labourRowId",visible:false},{title:"From Job Stop",field:"isFromJobStop",visible:false},{title:"Line No",field:"lineNo",sorter:"number",align:"center"},{title:"Task",field:"taskName",sorter:"string",align:"center"},{title:"Task Status",field:"taskStatus",sorter:"string",align:"center"},{title:"Task Class - Subclass",field:"taskClassSubclass",sorter:"string",align:"center"},{title:"Task Priority",field:"taskPriority",sorter:"string",align:"center"},{title:"Aircraft",field:"aircraft",sorter:"string",align:"center"},{title:"Work Package",field:"workpackage",sorter:"string",align:"center"},{title:"Work Location",field:"workLocation",sorter:"string",align:"center"},{title:"Work Area",field:"workArea",sorter:"string",align:"center"},{title:"Scheduled Start Date",field:"scheduledStartDate",sorter:"string",align:"center"},{title:"Actual Start Date",field:"actualStartDate",sorter:"string",align:"center"},{field:"Selected",align:"center",width:50,headerSort:false,formatter:function e(){return'<input id="checkBox" type="checkbox">'}},{title:"Technician",field:"technician",sorter:"string",align:"center"},{title:"Skill",field:"labourSkill",sorter:"string",align:"center"},{title:"Labour Row Status",field:"labourStatus",sorter:"string",align:"center"},{title:"Job Stop Reason",field:"jobStopReason",sorter:"string",align:"center"},{title:"Elapsed Time",field:"elapsedHoursMinutes",sorter:"string",align:"center",formatter:this.isElapsedTimeGreaterThanThreshold.bind(this)},{title:"Sched. Hours",field:"scheduledHours",sorter:"string",align:"center",editor:"input",validator:["min: 0",this.validateHours],editable:this.isScheduledHoursCellEditable,cellEdited:this.handleScheduleHoursEdit},{title:"Actual Hours",field:"actualHours",sorter:"string",align:"center",editor:"input",validator:["min: 0",this.validateHours],editable:this.isActualHoursCellEditable,cellEdited:this.handleActualHoursEdit,formatter:this.actualHourCellFormatter}],dataSorted:function e(n,i){if(t.table){if(n.some(function(e){return r.indexOf(e.field)>=0})){t.table.setGroupBy()}else{t.table.setGroupBy("taskId")}}},groupHeader:function e(t,r,n,i){return n[0].taskName+"<span style='color:#000; margin-left:10px;'>("+r+" items)</span>"},groupToggleElement:"header",placeholder:this.noSearchResultsMessage})}},{key:"actualHourCellFormatter",value:function e(t){if(!t){return t}if(this.actualHourGreaterThanScheduledHours(t)){t.getElement().classList.add("highlightActualHoursCell")}var r=t.getValue();return r?r:""}},{key:"actualHourGreaterThanScheduledHours",value:function e(t){var r=t.getValue();if(!r){return r}var n=t.getRow().getData().scheduledHours;if(!n){return n}return parseInt(r)>parseInt(n)}},{key:"initSearchButton",value:function e(){var t=this;var r=n("#"+this.searchButtonId);if(this.isAllowedToSearch){r.show();r.click(function(e){e.preventDefault();t.performSearch()})}else{r.hide()}}},{key:"performSearch",value:function t(){var r=this;return new e(function(e,t){if(r.isAllowedToSearch){var n={crewId:document.getElementById(r.crewsFieldId).value,startDateTime:r.formatDateTime(r.startDateWidgetId),endDateTime:r.formatDateTime(r.endDateWidgetId),showCompleteTasks:document.getElementById(r.showCompleteId).checked};return r.service.performSearch(n).then(function(e){r.updateResultsTable(e)})}else{e()}})}},{key:"populateCrewsWidget",value:function e(t){n("#"+this.crewsFieldId).find("option").remove();t.sort(this.compareCrewAlphanumerically);if(t){var r=document.getElementById(this.crewsFieldId);var i=r.options;t.forEach(function(e,t){var r=document.createElement("option");r.text=e.label;r.value=e.id;i.add(r)});r.selectedIndex=0}}},{key:"compareCrewAlphanumerically",value:function e(t,r){if(t.label<r.label)return-1;if(t.label>r.label)return 1;return 0}},{key:"handleFailureToGetCrewsForUser",value:function e(t){throw new Error(t)}},{key:"validateStartEndWidgetIds",value:function e(){if(!this.startDateWidgetId){throw new Error("startFieldId is mandatory")}if(typeof this.startDateWidgetId!=="string"){throw new Error("startFieldId is not a string")}if(!this.endDateWidgetId){throw new Error("endFieldId is mandatory")}if(typeof this.endDateWidgetId!=="string"){throw new Error("endFieldId is not a string")}}},{key:"buildFieldIdsForDateTimeWidget",value:function e(t){return{dateFieldId:t+"_$DATE$",timeFieldId:t+"_$TIME$",timeZoneFieldId:t+"_$TIMEZONE_DISPLAY$",startPickerId:t+"_SelectBtn"}}},{key:"setStartEndElemAttrs",value:function e(t,r){this.startDateElem=document.getElementById(t.dateFieldId);this.startTimeElem=document.getElementById(t.timeFieldId);this.startTimeZoneElem=document.getElementById(t.timeZoneFieldId);this.startPickerElem=document.getElementById(t.startPickerId);this.endDateElem=document.getElementById(r.dateFieldId);this.endTimeElem=document.getElementById(r.timeFieldId);this.endTimeZoneElem=document.getElementById(r.timeZoneFieldId);this.endPickerElem=document.getElementById(r.startPickerId)}},{key:"validateStartEndElems",value:function e(){if(!this.startDateElem){throw new Error("start date field does not exist in the DOM.")}if(!this.startTimeElem){throw new Error("start time field does not exist in the DOM.")}if(!this.startTimeZoneElem){throw new Error("start time zone field does not exist in the DOM.")}if(!this.startPickerElem){throw new Error("start date picker field does not exist in the DOM.")}if(!this.endDateElem){throw new Error("end date field does not exist in the DOM.")}if(!this.endTimeElem){throw new Error("end time field does not exist in the DOM.")}if(!this.endTimeZoneElem){throw new Error("end time zone field does not exist in the DOM.")}if(!this.endPickerElem){throw new Error("end date picker field does not exist in the DOM.")}}},{key:"setStartAndEndWidgets",value:function e(t){this.startDateElem.value=t.startDate;this.startTimeElem.value=t.startTime;this.startTimeZoneElem.value=t.startTimeZone;this.endDateElem.value=t.endDate;this.endTimeElem.value=t.endTime;this.endTimeZoneElem.value=t.endTimeZone}},{key:"updateResultsTable",value:function e(t){var r=true;this.table.clearData();this.table.addData(t,r);this.table.setSort([{column:"lineNo",dir:"asc"}])}},{key:"formatDateTime",value:function e(t){var r=this.buildFieldIdsForDateTimeWidget(t);var n=document.getElementById(r.dateFieldId).value;var i=document.getElementById(r.timeFieldId).value;return n+" "+i}},{key:"isScheduledHoursCellEditable",value:function e(t){if(this.isAllowedToEditSchedledHours){var r=t.getRow().getData();if(r.isFromJobStop&&r.labourStatus=="ACTV"){return true}}return false}},{key:"isActualHoursCellEditable",value:function e(t){if(this.isAllowedToEditActualHours){var r=t.getRow().getData();if(r.labourStatus=="COMPLETE"){return true}}return false}},{key:"isElapsedTimeGreaterThanThreshold",value:function e(t){var r=t.getValue();if(r){var n=l.default.convertTimeToDecimal(r);if(n>parseFloat(this.laborRowElaspedTimeThreshold)){return"<span class='elapsedTimeExceedsThreshold'>"+r+"</span>"}}return r}},{key:"validateHours",value:function e(t,r){return l.default.validateHours(r)}},{key:"handleScheduleHoursEdit",value:function e(t){var r=t.getRow().getData();this.service.updateScheduledHours(r.taskId,r.labourRowId,t.getValue())}},{key:"handleActualHoursEdit",value:function e(t){var r=t.getRow().getData();this.service.updateActualHours(r.taskId,r.labourRowId,t.getValue())}}]);return t}();t.default=h}).call(this,r(1),r(0))},function(e,t,r){"use strict";(function(e){var t=r(18);var n=i(t);function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}describe("TaskSupervisionController",function(){describe("initCrewsWidget",function(){var t;var r=[{id:"1",code:"crew1",description:"crew one"},{id:"2",code:"crew2",description:"crew two"},{id:"3",code:"crew3",description:"crew three"}];var i=[{id:"1",code:"crew1",description:"crew one"}];var o=(t={startYear:"2019",startMonth:"01",startDayOfMonth:"01",startHourInDay:"12"},a(t,"startHourInDay","00"),a(t,"startMinute","00"),a(t,"endYear","2019"),a(t,"endMonth","02"),a(t,"endDayOfMonth","01"),a(t,"endHourInDay","12"),a(t,"endMinute","00"),a(t,"startTimezone","EST"),t);var s=void 0;var l=void 0;beforeEach(function(){jasmine.Ajax.install();this.validParms={userId:"userId",crewsFieldId:"crewsFieldId",startFieldId:"idStartDateTime",endFieldId:"idEndDateTime",showCompleteId:"idShowComplete",searchButtonId:"idSearchButton",searchResultsId:"idSearchResults",isAllowedToSearch:"true"};setFixtures('<select id="'+this.validParms.crewsFieldId+'"></select>'+'<input id="'+this.validParms.showCompleteId+'" type="checkbox"/>'+'<button id="'+this.validParms.searchButtonId+'" />'+'<div id="'+this.validParms.searchResultsId+'" />'+'<div id="'+this.validParms.startFieldId+'" />'+'<div id="'+this.validParms.startFieldId+'_$DATE$" />'+'<div id="'+this.validParms.startFieldId+'_$TIME$" />'+'<div id="'+this.validParms.startFieldId+'_$TIMEZONE_DISPLAY$" />'+'<div id="'+this.validParms.startFieldId+'_SelectBtn" />'+'<div id="'+this.validParms.endFieldId+'" />'+'<div id="'+this.validParms.endFieldId+'_$DATE$" />'+'<div id="'+this.validParms.endFieldId+'_$TIME$" />'+'<div id="'+this.validParms.endFieldId+'_$TIMEZONE_DISPLAY$" />'+'<div id="'+this.validParms.endFieldId+'_SelectBtn" />')});afterEach(function(){jasmine.Ajax.uninstall()});it("Throws error when user id not provided.",function(){var e=this.validParms;e.userId=undefined;expect(function(){var t=new n.default(e);t.initCrewsWidget()}).toThrowError("userId is mandatory")});it("Throws error when user id is blank.",function(){var e=this.validParms;e.userId=undefined;expect(function(){var t=new n.default(e)}).toThrowError("userId is mandatory")});it("Throws error when crew field id not provided.",function(){var e=this.validParms;e.crewsFieldId=undefined;expect(function(){var t=new n.default(e)}).toThrowError("crewsFieldId is mandatory")});it("Throws error when crew field id is blank.",function(){var e=this.validParms;e.crewsFieldId="";expect(function(){var t=new n.default(e)}).toThrowError("crewsFieldId is mandatory")});it("Throws error when crew field id does not identify a select element.",function(){var e=this.validParms;e.crewsFieldId="non-existing-id";expect(function(){var t=new n.default(e)}).toThrowError("crewsFieldId must be a SELECT element")});it("Throws error when crew field id identifies a non-select element.",function(){setFixtures('<input id="crewsFieldId"></input>');var e=this.validParms;e.crewsFieldId="crewsFieldId";expect(function(){var t=new n.default(e)}).toThrowError("crewsFieldId must be a SELECT element")});it("Fetch of crew list is returned",function(t){setFixtures('<select id="'+this.validParms.crewsFieldId+'"></select>');var i=new n.default(this.validParms);spyOn(e,"ajax").and.callFake(function(e){return e.success(r)});i.initCrewsWidget().then(function(e){expect(e).toBe(r);t()})});it("Populates Crew dropdown when provided list of crews.",function(t){this.validParms.isAllowedToSearch="false";var i=new n.default(this.validParms);spyOn(e,"ajax").and.callFake(function(e){if(e.url==="/maintenix/rest/crews"){return e.success(r)}else if(e.url==="/maintenix/rest/datetime/getCurrent"){return e.success(o)}else{console.warn("Unsupported url: ",e.url)}});var a=document.getElementById(this.validParms.crewsFieldId);var s=a.options;i.init().then(function(e){expect(s.length).toBe(r.length);t()})})})})}).call(this,r(0))},function(e,t,r){var n={"./basemaintenance/task/tasksupervision/TaskSupervisionController.spec.js":19,"./basemaintenance/task/tasksupervision/TaskSupervisionService.spec.js":12,"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchConfig.spec.js":11,"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchController.spec.js":10,"./engineering/requirementdefinition/followOnTask/followOnTaskDefinitionSearchService.spec.js":8,"./someFeature/featureMath/featureMath.spec.js":7};function i(e){var t=a(e);var n=r(t);return n}function a(e){var t=n[e];if(!(t+1)){var r=new Error('Cannot find module "'+e+'".');r.code="MODULE_NOT_FOUND";throw r}return t}i.keys=function e(){return Object.keys(n)};i.resolve=a;e.exports=i;i.id=20},function(e,t,r){"use strict";var n=r(20);n.keys().forEach(n)}],[[21,0]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqUXVlcnlcIiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZXM2LXByb21pc2UtcHJvbWlzZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5naW5lZXJpbmcvcmVxdWlyZW1lbnRkZWZpbml0aW9uL2ZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5naW5lZXJpbmcvcmVxdWlyZW1lbnRkZWZpbml0aW9uL2ZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vdXRpbC9EYXRlVGltZUhlbHBlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYmFzZW1haW50ZW5hbmNlL3Rhc2svdGFza3N1cGVydmlzaW9uL1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NvbWVGZWF0dXJlL2ZlYXR1cmVNYXRoL2ZlYXR1cmVNYXRoLmpzIiwid2VicGFjazovLy8uL3NyYy9zb21lRmVhdHVyZS9mZWF0dXJlTWF0aC9mZWF0dXJlTWF0aC5zcGVjLmpzIiwid2VicGFjazovLy8uL3NyYy9lbmdpbmVlcmluZy9yZXF1aXJlbWVudGRlZmluaXRpb24vZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIuc3BlYy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZW5naW5lZXJpbmcvcmVxdWlyZW1lbnRkZWZpbml0aW9uL2ZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi92YWxpZGF0aW9uL0RhdGVUaW1lVmFsaWRhdG9yLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZXM2LXByb21pc2UtcHJvbWlzZS9ub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYmFzZW1haW50ZW5hbmNlL3Rhc2svdGFza3N1cGVydmlzaW9uL1Rhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjIHN5bmMgc3BlYy5qcyQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Rlc3RfaW5kZXguanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsImpRdWVyeSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJQcm9taXNlIiwiX2pxdWVyeSIsIkZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlIiwidGFza0RlZmluaXRpb25zIiwiQXJyYXkiLCJFcnJvciIsInNvcnQiLCJhIiwiYiIsImNvbXBhcmVSZXN1bHQiLCJjb2RlIiwiY29uZmlnU2xvdENvZGUiLCJuYW1lIiwiYXBpVXJsIiwic2NvcGUiLCJ0aGlzIiwicmVzb2x2ZSIsInJlamVjdCIsIl9qcXVlcnkyIiwiZGVmYXVsdCIsImFqYXgiLCJ0eXBlIiwidXJsIiwic3VjY2VzcyIsInRhc2tEZWZpbml0aW9uc1Jlc3BvbnNlIiwic29ydGVkVGFza0RlZmluaXRpb25zIiwiZXJyb3IiLCJlcnIiLCJGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnIiwiZGF0YSIsIl9jbGFzc0NhbGxDaGVjayIsImxpbWl0IiwibWluTGVuZ3RoIiwiRGF0ZVRpbWVIZWxwZXIiLCJkYXRlIiwiaG91cnMiLCJEYXRlIiwic3RyIiwiZ2V0RGF0ZSIsImdldE1vbnRoU2hvcnRTdHIiLCJnZXRGdWxsWWVhciIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsInRpbWUiLCJob3Vyc01pbnV0ZXMiLCJwYXJzZUludCIsIm1pbnV0ZXMiLCJtb250aCIsIl9EYXRlVGltZUhlbHBlciIsIlRhc2tTdXBlcnZpc2lvblNlcnZpY2UiLCJlcnJvck1zZ1ByZWZpeCIsInVzZXJJZCIsIl90aGlzIiwiY3Jld0xpc3RSZXN0RW5kcG9pbnQiLCJhcmdzIiwiJCIsImNyZXdSZXNwb25zZUxpc3QiLCJ0ZXh0U3RhdHVzIiwianFYSFIiLCJlcnJvclRocm93biIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJfdGhpczIiLCJjdXJyZW50RGF0ZVRpbWVSZXN0RW5kcG9pbnQiLCJyZXNwb25zZSIsImRlZmF1bHRTdGFydCIsInN0YXJ0WWVhciIsInN0YXJ0RGF5T2ZNb250aCIsInN0YXJ0SG91ckluRGF5Iiwic3RhcnRNaW51dGUiLCJkZWZhdWx0RW5kIiwiZW5kWWVhciIsImVuZERheU9mTW9udGgiLCJlbmRIb3VySW5EYXkiLCJlbmRNaW51dGUiLCJkZWZhdWx0U3RhcnRFbmRWYWx1ZXMiLCJmb3JtYXREYXRlIiwiZm9ybWF0VGltZSIsInZhbGlkYXRlRGF0ZUZvcm1hdCIsInN0YXJ0RGF0ZSIsInZhbGlkYXRlVGltZUZvcm1hdCIsInN0YXJ0VGltZSIsImVuZERhdGUiLCJlbmRUaW1lIiwiX3RoaXMzIiwiZXhjbHVkZUNvbXBsZXRlIiwic2VhcmNoRGF0YSIsIm9ubHlXb3Jrc2NvcGVkIiwib25seUNvbnRhaW5pbmdMYWJvdXIiLCJhc3NpZ25lZFRvQ3Jld0lkIiwiY3Jld0lkIiwibWluU2NoZWR1bGVkU3RhcnREYXRlVGltZSIsInN0YXJ0RGF0ZVRpbWUiLCJtYXhTY2hlZHVsZWRTdGFydERhdGVUaW1lIiwiZW5kRGF0ZVRpbWUiLCJleGNsdWRlQ29tcGxldGVkIiwibGlzdENyZXdUYXNrTGFib3VyRW5kcG9pbnQiLCJ0YXNrSWQiLCJsYWJvdXJSb3dJZCIsIm5ld1ZhbHVlIiwiX3RoaXM0Iiwic2NoZWR1bGVkSG91cnMiLCJjb250ZW50VHlwZSIsIkpTT04iLCJfdGhpczUiLCJhY3R1YWxIb3VycyIsImRhdGVTdHIiLCJkYXRlRm9ybWF0IiwibWF0Y2hBcnJheSIsInRpbWVTdHIiLCJ0aW1lRm9ybWF0IiwiQWRkIiwieCIsInkiLCJTdWJ0cmFjdCIsIk11bHRpcGx5IiwiX2ZlYXR1cmVNYXRoIiwiZGVzY3JpYmUiLCJpdCIsImV4cGVjdCIsIl9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZSIsInNlcnZpY2UiLCJ0YXNrRGVmaW5pdGlvblJlc3BvbnNlIiwiYmVmb3JlQWxsIiwic29ydGVkRGF0YSIsInNvcnRUYXNrRGVmaW5pdGlvbnMiLCJqYXNtaW5lIiwic3B5T24iLCJlIiwiaW52YWxpZFJlc3BvbnNlIiwiZ2V0Rm9sbG93T25UYXNrRGVmaW5pdGlvbnMiLCJ0aGVuIiwiZmFrZURhdGEiLCJfZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyIsIkZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyIiwidHlwZUFoZWFkSWQiLCJva0J1dHRvbklkIiwibm90Rm91bmRNc2dJZCIsImZvbGxvd09uVGFza0RlZm5VdWlkT3VwdXRJZCIsImFwaVVybElkIiwibm90Rm91bmRNc2dFbCIsIm9rQnRuRWwiLCJ0eXBlQWhlYWRTZWFyY2hJbnB1dEVsIiwiZm9sbG93T25UYXNrRGVmblV1aWRPdXB1dEVsIiwiYXBpVXJsRWwiLCJsZW5ndGgiLCJ2YWwiLCJzZWxlY3RlZE9wdGlvbiIsImtleWRvd24iLCJzZXRUaW1lb3V0IiwiaW5pdGlhbGl6ZSIsImJpbmQiLCJzdWdnZXN0aW9uIiwiZGlzcGxheUZvbGxvd09uIiwiYXR0ciIsImlkIiwiZGlzYWJsZU9rQnRuIiwiX2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlMiIsImNvbmZpZ3VyZVR5cGVBaGVhZCIsImZvY3VzIiwiY29uZmlnIiwiaW5kZXgiLCJpbnB1dCIsImhpZ2hsaWdodCIsImRpc3BsYXkiLCJlbXB0eVRlbXBsYXRlIiwic291cmNlIiwiY2FsbGJhY2siLCJvbkNsaWNrIiwidHlwZUFoZWFkSW5wdXRFbCIsInNlbGVjdGlvbkVsIiwic2VsZWN0ZWRSZWNvcmQiLCJldmVudCIsImhpZGVMYXlvdXQiLCJxdWVyeSIsInN1Z2dlc3Rpb25PYmoiLCJyZW1vdmVDbGFzcyIsInJlbW92ZUF0dHIiLCJhZGRDbGFzcyIsIl9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29udHJvbGxlciIsInJlc3RBcGlVcmwiLCJnZXRHb29kQ29udHJvbGxlciIsInNldFVwSFRNTEZpeHR1cmUiLCJzZXRGaXh0dXJlcyIsImJlZm9yZUVhY2giLCJva0J1dHRvbkVsIiwiZmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZEVsIiwiYWZ0ZXJFYWNoIiwiY29udHJvbGxlciIsImRvbmUiLCJyZXNwb25zZVRhc2tEZWZpbml0aW9ucyIsIm5hdGl2ZUVsIiwiX1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UiLCJzdWNjZXNzSGFuZGxlciIsImZhaWx1cmVIYW5kbGVyIiwiYWp4IiwiRGF0ZVRpbWVWYWxpZGF0b3IiLCJ2YWx1ZSIsInNwbGl0IiwiZyIsIkZ1bmN0aW9uIiwiZXZhbCIsIndpbmRvdyIsIl90eXBlb2YiLCJwcm9jZXNzIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhbGwiLCJydW5DbGVhclRpbWVvdXQiLCJtYXJrZXIiLCJxdWV1ZSIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImNvbmNhdCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibGVuIiwicnVuIiwibmV4dFRpY2siLCJhcmd1bWVudHMiLCJpIiwicHVzaCIsIkl0ZW0iLCJhcnJheSIsInByb3RvdHlwZSIsImFwcGx5IiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm5vb3AiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsImdsb2JhbCIsImZhY3RvcnkiLCJ1bmRlZmluZWQiLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsIm9iamVjdE9yRnVuY3Rpb24iLCJpc0Z1bmN0aW9uIiwiX2lzQXJyYXkiLCJpc0FycmF5IiwiT2JqZWN0IiwidG9TdHJpbmciLCJ2ZXJ0eE5leHQiLCJjdXN0b21TY2hlZHVsZXJGbiIsImFzYXAiLCJhcmciLCJmbHVzaCIsInNjaGVkdWxlRmx1c2giLCJzZXRTY2hlZHVsZXIiLCJzY2hlZHVsZUZuIiwic2V0QXNhcCIsImFzYXBGbiIsImJyb3dzZXJXaW5kb3ciLCJicm93c2VyR2xvYmFsIiwiQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwiV2ViS2l0TXV0YXRpb25PYnNlcnZlciIsImlzTm9kZSIsInNlbGYiLCJpc1dvcmtlciIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwiaW1wb3J0U2NyaXB0cyIsIk1lc3NhZ2VDaGFubmVsIiwidXNlTmV4dFRpY2siLCJ1c2VWZXJ0eFRpbWVyIiwidXNlTXV0YXRpb25PYnNlcnZlciIsIml0ZXJhdGlvbnMiLCJvYnNlcnZlciIsIm5vZGUiLCJkb2N1bWVudCIsImNyZWF0ZVRleHROb2RlIiwib2JzZXJ2ZSIsImNoYXJhY3RlckRhdGEiLCJ1c2VNZXNzYWdlQ2hhbm5lbCIsImNoYW5uZWwiLCJwb3J0MSIsIm9ubWVzc2FnZSIsInBvcnQyIiwicG9zdE1lc3NhZ2UiLCJ1c2VTZXRUaW1lb3V0IiwiZ2xvYmFsU2V0VGltZW91dCIsImF0dGVtcHRWZXJ0eCIsInIiLCJyZXF1aXJlIiwidmVydHgiLCJydW5Pbkxvb3AiLCJydW5PbkNvbnRleHQiLCJvbkZ1bGZpbGxtZW50Iiwib25SZWplY3Rpb24iLCJfYXJndW1lbnRzIiwicGFyZW50IiwiY2hpbGQiLCJjb25zdHJ1Y3RvciIsIlBST01JU0VfSUQiLCJtYWtlUHJvbWlzZSIsIl9zdGF0ZSIsImludm9rZUNhbGxiYWNrIiwiX3Jlc3VsdCIsInN1YnNjcmliZSIsIm9iamVjdCIsIkNvbnN0cnVjdG9yIiwicHJvbWlzZSIsIl9yZXNvbHZlIiwiTWF0aCIsInJhbmRvbSIsInN1YnN0cmluZyIsIlBFTkRJTkciLCJGVUxGSUxMRUQiLCJSRUpFQ1RFRCIsIkdFVF9USEVOX0VSUk9SIiwiRXJyb3JPYmplY3QiLCJzZWxmRnVsZmlsbG1lbnQiLCJUeXBlRXJyb3IiLCJjYW5ub3RSZXR1cm5Pd24iLCJnZXRUaGVuIiwidHJ5VGhlbiIsImZ1bGZpbGxtZW50SGFuZGxlciIsInJlamVjdGlvbkhhbmRsZXIiLCJoYW5kbGVGb3JlaWduVGhlbmFibGUiLCJ0aGVuYWJsZSIsInNlYWxlZCIsImZ1bGZpbGwiLCJyZWFzb24iLCJfcmVqZWN0IiwiX2xhYmVsIiwiaGFuZGxlT3duVGhlbmFibGUiLCJoYW5kbGVNYXliZVRoZW5hYmxlIiwibWF5YmVUaGVuYWJsZSIsInRoZW4kJCIsInB1Ymxpc2hSZWplY3Rpb24iLCJfb25lcnJvciIsInB1Ymxpc2giLCJfc3Vic2NyaWJlcnMiLCJzdWJzY3JpYmVycyIsInNldHRsZWQiLCJkZXRhaWwiLCJUUllfQ0FUQ0hfRVJST1IiLCJ0cnlDYXRjaCIsImhhc0NhbGxiYWNrIiwic3VjY2VlZGVkIiwiZmFpbGVkIiwiaW5pdGlhbGl6ZVByb21pc2UiLCJyZXNvbHZlciIsInJlc29sdmVQcm9taXNlIiwicmVqZWN0UHJvbWlzZSIsIm5leHRJZCIsIkVudW1lcmF0b3IiLCJfaW5zdGFuY2VDb25zdHJ1Y3RvciIsIl9pbnB1dCIsIl9yZW1haW5pbmciLCJfZW51bWVyYXRlIiwidmFsaWRhdGlvbkVycm9yIiwiX2VhY2hFbnRyeSIsImVudHJ5IiwiYyIsInJlc29sdmUkJCIsIl90aGVuIiwiX3NldHRsZWRBdCIsIl93aWxsU2V0dGxlQXQiLCJzdGF0ZSIsImVudW1lcmF0b3IiLCJhbGwiLCJlbnRyaWVzIiwicmFjZSIsIl8iLCJuZWVkc1Jlc29sdmVyIiwibmVlZHNOZXciLCJfc2V0U2NoZWR1bGVyIiwiX3NldEFzYXAiLCJfYXNhcCIsImNhdGNoIiwiX2NhdGNoIiwicG9seWZpbGwiLCJsb2NhbCIsIlAiLCJwcm9taXNlVG9TdHJpbmciLCJjYXN0IiwiX0RhdGVUaW1lVmFsaWRhdG9yIiwiVGFza1N1cGVydmlzaW9uQ29udHJvbGxlciIsInBhcm1zIiwiY3Jld3NGaWVsZElkIiwiY3Jld3NGaWVsZCIsImlzQWxsb3dlZFRvU2VhcmNoIiwiaXNBbGxvd2VkVG9FZGl0U2NoZWRsZWRIb3VycyIsImlzQWxsb3dlZFRvRWRpdEFjdHVhbEhvdXJzIiwic3RhcnREYXRlV2lkZ2V0SWQiLCJzdGFydEZpZWxkSWQiLCJlbmREYXRlV2lkZ2V0SWQiLCJlbmRGaWVsZElkIiwic2hvd0NvbXBsZXRlSWQiLCJzZWFyY2hCdXR0b25JZCIsInNlYXJjaFJlc3VsdHNJZCIsIm5vU2VhcmNoUmVzdWx0c01lc3NhZ2UiLCJsYWJvclJvd0VsYXNwZWRUaW1lVGhyZXNob2xkIiwiZGVmYXVsdFNob3dDb21wbGV0ZSIsImlzU2NoZWR1bGVkSG91cnNDZWxsRWRpdGFibGUiLCJoYW5kbGVTY2hlZHVsZUhvdXJzRWRpdCIsImhhbmRsZUFjdHVhbEhvdXJzRWRpdCIsImFjdHVhbEhvdXJDZWxsRm9ybWF0dGVyIiwiaW5pdFNob3dDb21wbGV0ZVRhc2tzV2lkZ2V0IiwiaW5pdFJlc3VsdHNUYWJsZSIsImluaXRTZWFyY2hCdXR0b24iLCJpbml0Q3Jld3NXaWRnZXQiLCJyZXN1bHRzIiwicG9wdWxhdGVDcmV3c1dpZGdldCIsInNldFN0YXJ0QW5kRW5kV2lkZ2V0cyIsInBlcmZvcm1TZWFyY2giLCJnZXRDcmV3c0ZvclVzZXIiLCJ2YWxpZGF0ZVN0YXJ0RW5kV2lkZ2V0SWRzIiwic3RhcnRGaWVsZElkcyIsImJ1aWxkRmllbGRJZHNGb3JEYXRlVGltZVdpZGdldCIsImVuZEZpZWxkSWRzIiwic2V0U3RhcnRFbmRFbGVtQXR0cnMiLCJ2YWxpZGF0ZVN0YXJ0RW5kRWxlbXMiLCJleGNlcHRpb24iLCJjb25zb2xlIiwic3RhcnREYXRlRWxlbSIsImRpc2FibGVkIiwiZW5kRGF0ZUVsZW0iLCJnZXREZWZhdWx0U3RhcnRBbmRFbmREYXRlcyIsImxpc3RPZkxhYm91ckF0dHJzIiwidGFibGUiLCJUYWJ1bGF0b3IiLCJjb2x1bW5zIiwiZmllbGQiLCJ2aXNpYmxlIiwic29ydGVyIiwiYWxpZ24iLCJ3aWR0aCIsImhlYWRlclNvcnQiLCJmb3JtYXR0ZXIiLCJpc0VsYXBzZWRUaW1lR3JlYXRlclRoYW5UaHJlc2hvbGQiLCJlZGl0b3IiLCJ2YWxpZGF0b3IiLCJ2YWxpZGF0ZUhvdXJzIiwiZWRpdGFibGUiLCJjZWxsRWRpdGVkIiwiaXNBY3R1YWxIb3Vyc0NlbGxFZGl0YWJsZSIsImRhdGFTb3J0ZWQiLCJzb3J0ZXJzIiwicm93cyIsInNvbWUiLCJzZXRHcm91cEJ5IiwiZ3JvdXBIZWFkZXIiLCJjb3VudCIsImdyb3VwIiwiZ3JvdXBUb2dnbGVFbGVtZW50IiwicGxhY2Vob2xkZXIiLCJjZWxsIiwiYWN0dWFsSG91ckdyZWF0ZXJUaGFuU2NoZWR1bGVkSG91cnMiLCJnZXRWYWx1ZSIsInNjaGVkdWxlSG91cnMiLCIkYnV0dG9uIiwiZm9ybWF0RGF0ZVRpbWUiLCJzaG93Q29tcGxldGVUYXNrcyIsImNoZWNrZWQiLCJ1cGRhdGVSZXN1bHRzVGFibGUiLCJjcmV3cyIsInNlbGVjdCIsInNlbGVjdE9wdGlvbnMiLCJvcHRpb25zIiwiY3JldyIsIm9wdGlvbiIsImxhYmVsIiwid2lkZ2V0SWQiLCJkYXRlRmllbGRJZCIsInRpbWVGaWVsZElkIiwidGltZVpvbmVGaWVsZElkIiwic3RhcnRQaWNrZXJJZCIsInN0YXJ0RGF0ZVdpZGdldElkcyIsImVuZERhdGVXaWRnZXRJZHMiLCJzdGFydFRpbWVFbGVtIiwic3RhcnRUaW1lWm9uZUVsZW0iLCJzdGFydFBpY2tlckVsZW0iLCJlbmRUaW1lRWxlbSIsImVuZFRpbWVab25lRWxlbSIsImVuZFBpY2tlckVsZW0iLCJzdGFydFRpbWVab25lIiwiZW5kVGltZVpvbmUiLCJhZGRUb1RvcCIsImNsZWFyRGF0YSIsImFkZERhdGEiLCJzZXRTb3J0IiwiY29sdW1uIiwiZGF0ZVRpbWVXaWRnZXRJZCIsImZpZWxkSWRzIiwiZGF0ZVZhbHVlIiwidGltZVZhbHVlIiwicm93RGF0YSIsImdldERhdGEiLCJkZWNpbWFsVGltZSIsInBhcnNlRmxvYXQiLCJ1cGRhdGVTY2hlZHVsZWRIb3VycyIsInVwZGF0ZUFjdHVhbEhvdXJzIiwiX1Rhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIiLCJfdGVzdEN1cnJlbnREYXRlVGltZVIiLCJ0ZXN0Q3Jld0xpc3QiLCJkZXNjcmlwdGlvbiIsInRlc3RDcmV3TGlzdE9mT25lIiwidGVzdEN1cnJlbnREYXRlVGltZVJlc3BvbnNlIiwic3RhcnRNb250aCIsIl9kZWZpbmVQcm9wZXJ0eSIsInZhbGlkUGFybXMiLCJmYWtlU2VydmljZSIsInJlcXVlc3QiLCJjcmV3c0ZpZWxkU2VsZWN0RWwiLCJtYXAiLCIuL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyLnNwZWMuanMiLCIuL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlLnNwZWMuanMiLCIuL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5zcGVjLmpzIiwiLi9lbmdpbmVlcmluZy9yZXF1aXJlbWVudGRlZmluaXRpb24vZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyLnNwZWMuanMiLCIuL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2Uuc3BlYy5qcyIsIi4vc29tZUZlYXR1cmUvZmVhdHVyZU1hdGgvZmVhdHVyZU1hdGguc3BlYy5qcyIsIndlYnBhY2tDb250ZXh0IiwicmVxIiwid2VicGFja0NvbnRleHRSZXNvbHZlIiwia2V5cyIsIndlYnBhY2tDb250ZXh0S2V5cyIsInRlc3RzQ29udGV4dCJdLCJtYXBwaW5ncyI6IjZFQUFBQSxFQUFBQyxRQUFBQyxxQ0NBQUYsRUFBT0MsUUFBVUUsRUFBUSxJQUFlQywwV0NBeEMsSUFBQUMsRUFBQUYsRUFBQSxxS0FLcUJHLDBGQUVTQyxHQUN4QixJQUFJQSxLQUFzQkEsYUFBMUJDLE9BQTZELENBQzFELE1BQU0sSUFBQUMsTUFBTiwyQ0FHSCxPQUFPRixFQUFBRyxLQUFxQixTQUFBQyxFQUFBQyxHQUN6QixJQUFJQyxFQUFpQkYsT0FBU0MsRUFBVkUsS0FBQSxFQUEwQkgsT0FBU0MsRUFBVkUsTUFBQSxFQUE3QyxFQUVBLEdBQUlELEdBQUosRUFBd0IsQ0FDckJBLEVBQWlCRixpQkFBbUJDLEVBQXBCRyxl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QUFBQyxRQUFBNGhCLEVBQ0FBLEVBQUE5WCxHQUFBLGlDQzVCQSxJQUFJbVksRUFBZS9oQixFQUFBLElBQ25CK2hCIiwiZmlsZSI6InNyYy90ZXN0L2phdmFzY3JpcHQvMS5zcGVjLWJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0galF1ZXJ5OyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnZXM2LXByb21pc2UnKS5Qcm9taXNlO1xuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuXHJcbi8qKlxyXG4gKiBUaGUgc2VydmljZSBsYXllciwgaXQgc2VuZHMgUkVTVCBBUEkgY2FsbCBhbmQgcGFzcyB0aGUgcmVzcG9uc2UgZGF0YSB0byBjb250cm9sbGVyXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZSB7XHJcblxyXG4gICBzdGF0aWMgc29ydFRhc2tEZWZpbml0aW9ucyh0YXNrRGVmaW5pdGlvbnMpIHtcclxuICAgICAgaWYgKCF0YXNrRGVmaW5pdGlvbnMgfHwgISh0YXNrRGVmaW5pdGlvbnMgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGFza0RlZmluaXRpb25zIGV4cGVjdGVkIHRvIGJlIGFuIEFycmF5XCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGFza0RlZmluaXRpb25zLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICBsZXQgY29tcGFyZVJlc3VsdCA9IChhLmNvZGUgPiBiLmNvZGUpID8gMSA6ICgoYS5jb2RlIDwgYi5jb2RlKSA/IC0xIDogMCk7XHJcblxyXG4gICAgICAgICBpZiAoY29tcGFyZVJlc3VsdCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbXBhcmVSZXN1bHQgPSAoYS5jb25maWdTbG90Q29kZSA+IGIuY29uZmlnU2xvdENvZGUpID8gMSA6ICgoYS5jb25maWdTbG90Q29kZSA8IGIuY29uZmlnU2xvdENvZGUpID8gLTEgOiAwKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgaWYgKGNvbXBhcmVSZXN1bHQgPT0gMCkge1xyXG4gICAgICAgICAgICBjb21wYXJlUmVzdWx0ID0gKGEubmFtZSA+IGIubmFtZSkgPyAxIDogKChhLm5hbWUgPCBiLm5hbWUpID8gLTEgOiAwKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICByZXR1cm4gY29tcGFyZVJlc3VsdDtcclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIHN0YXRpYyBnZXRGb2xsb3dPblRhc2tEZWZpbml0aW9ucyhhcGlVcmwpIHtcclxuICAgICAgbGV0IHNjb3BlID0gdGhpcztcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICByZXR1cm4gJC5hamF4KHtcclxuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgdXJsOiBhcGlVcmwsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHRhc2tEZWZpbml0aW9uc1Jlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgIC8vIG5pY2UgdG8gaGF2ZTogcG9zdFByb2Nlc3NvciBob29rXHJcbiAgICAgICAgICAgICAgIGxldCBzb3J0ZWRUYXNrRGVmaW5pdGlvbnMgPSBzY29wZS5zb3J0VGFza0RlZmluaXRpb25zKHRhc2tEZWZpbml0aW9uc1Jlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgcmVzb2x2ZShzb3J0ZWRUYXNrRGVmaW5pdGlvbnMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgIC8vIGlmIGVycm9yIGhhcHBlbnMgd2l0aCB0aGUgQVBJIGNhbGwsIGluaXRpYWxpemUgdGhlIHdpZGdldCB3aXRoIGFuIGVtcHR5IGFycmF5LlxyXG4gICAgICAgICAgICAgICByZXNvbHZlKFtdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbn1cclxuIiwiLyogZ2xvYmFsICQgKi9cclxuLyoqXHJcbiAqIEl0IGNvbnRhaW5zIGFsbCBjb25maWd1cmF0aW9ucyBmb3IgdGhlIHR5cGUgYWhlYWQgc2VhcmNoIHdpZGdldFxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyB7XHJcblxyXG4gICBjb25zdHJ1Y3RvcihkYXRhKSB7XHJcbiAgICAgIGlmICghZGF0YSB8fCAhKGRhdGEgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHJlc3BvbnNlIGRhdGEgc3VwcG9zZSB0byBiZSBpbiBhcnJheSBmb3JtXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG5cclxuICAgICAgLy8gVGhlIG5hbWUgb2YgdGhlIGRhdGFzZXQuXHJcbiAgICAgIC8vIFRoaXMgd2lsbCBiZSBhcHBlbmRlZCB0byB0aGUgY2xhc3MgbmFtZSBvZiB0aGUgZmlsdGVyZWQgcmVzdWx0IDxkaXY+LlxyXG4gICAgICB0aGlzLm5hbWUgPSAnZm9sbG93T25UYXNrRGVmblNlYXJjaCc7XHJcblxyXG4gICAgICAvLyBUaGUgbWF4IG51bWJlciBvZiBzdWdnZXN0aW9ucyB0byBiZSBkaXNwbGF5ZWQuXHJcbiAgICAgIHRoaXMubGltaXQgPSA1MDtcclxuXHJcbiAgICAgIC8vIFRoZSBtaW5pbXVtIGNoYXJhY3RlciBsZW5ndGggbmVlZGVkIGJlZm9yZSBzdWdnZXN0aW9ucyBzdGFydCBnZXR0aW5nIHJlbmRlcmVkLlxyXG4gICAgICB0aGlzLm1pbkxlbmd0aCA9IDE7XHJcbiAgIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEYXRlVGltZUhlbHBlciB7XG5cbiAgIGNvbnN0cnVjdG9yKCkge31cblxuICAgc3RhdGljIGFkZEhvdXJzKGRhdGUsIGhvdXJzKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgKyAoaG91cnMgKiA2MCAqIDYwICogMTAwMCkpO1xuICAgfVxuXG4gICBzdGF0aWMgZm9ybWF0RGF0ZShkYXRlKSB7XG4gICAgICBsZXQgc3RyID1cbiAgICAgICAgICgoZGF0ZS5nZXREYXRlKCkgPCAxMCkgPyAnMCcgOiAnJykgKyBkYXRlLmdldERhdGUoKSArICctJyArXG4gICAgICAgICB0aGlzLmdldE1vbnRoU2hvcnRTdHIoZGF0ZS5nZXRNb250aCgpICsgMSkgKyAnLScgK1xuICAgICAgICAgZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgcmV0dXJuIHN0cjtcbiAgIH1cblxuICAgc3RhdGljIGZvcm1hdFRpbWUoZGF0ZSkge1xuICAgICAgbGV0IHN0ciA9XG4gICAgICAgICAoKGRhdGUuZ2V0SG91cnMoKSA8IDEwKSA/ICcwJyA6ICcnKSArIGRhdGUuZ2V0SG91cnMoKSArICc6JyArXG4gICAgICAgICAoKGRhdGUuZ2V0TWludXRlcygpIDwgMTApID8gJzAnIDogJycpICsgZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICByZXR1cm4gc3RyO1xuICAgfVxuXG4gICAvLyBDb252ZXJ0cyBhIHRpbWUgaW4gdGhlIGZvcm1hdCBoaDptbSBpbnRvIGl0cyBjb3JyZXNwb25kaW5nIGRlY2ltYWwgdmFsdWVcbiAgIHN0YXRpYyBjb252ZXJ0VGltZVRvRGVjaW1hbCh0aW1lKSB7XG4gICAgICBsZXQgaG91cnNNaW51dGVzID0gdGltZS5zcGxpdCgvWy46XS8pO1xuICAgICAgbGV0IGhvdXJzID0gcGFyc2VJbnQoaG91cnNNaW51dGVzWzBdLCAxMCk7XG4gICAgICBsZXQgbWludXRlcyA9IGhvdXJzTWludXRlc1sxXSA/IHBhcnNlSW50KGhvdXJzTWludXRlc1sxXSwgMTApIDogMDtcbiAgICAgIHJldHVybiBob3VycyArIG1pbnV0ZXMgLyA2MDtcbiAgIH1cblxuICAgc3RhdGljIGdldE1vbnRoU2hvcnRTdHIobW9udGgpIHtcbiAgICAgIGlmIChtb250aCA9PT0gMSkgcmV0dXJuICdKQU4nO1xuICAgICAgZWxzZSBpZiAobW9udGggPT09IDIpIHJldHVybiAnRkVCJztcbiAgICAgIGVsc2UgaWYgKG1vbnRoID09PSAzKSByZXR1cm4gJ01BUic7XG4gICAgICBlbHNlIGlmIChtb250aCA9PT0gNCkgcmV0dXJuICdBUFInO1xuICAgICAgZWxzZSBpZiAobW9udGggPT09IDUpIHJldHVybiAnTUFZJztcbiAgICAgIGVsc2UgaWYgKG1vbnRoID09PSA2KSByZXR1cm4gJ0pVTic7XG4gICAgICBlbHNlIGlmIChtb250aCA9PT0gNykgcmV0dXJuICdKVUwnO1xuICAgICAgZWxzZSBpZiAobW9udGggPT09IDgpIHJldHVybiAnQVVHJztcbiAgICAgIGVsc2UgaWYgKG1vbnRoID09PSA5KSByZXR1cm4gJ1NFUCc7XG4gICAgICBlbHNlIGlmIChtb250aCA9PT0gMTApIHJldHVybiAnT0NUJztcbiAgICAgIGVsc2UgaWYgKG1vbnRoID09PSAxMSkgcmV0dXJuICdOT1YnO1xuICAgICAgZWxzZSBpZiAobW9udGggPT09IDEyKSByZXR1cm4gJ0RFQyc7XG4gICAgICBlbHNlIHJldHVybiBcIlwiO1xuICAgfVxuXG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgRGF0ZVRpbWVIZWxwZXIgZnJvbSAnLi4vLi4vLi4vY29tbW9uL3V0aWwvRGF0ZVRpbWVIZWxwZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFza1N1cGVydmlzaW9uU2VydmljZSB7XHJcblxyXG4gICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgdGhpcy5lcnJvck1zZ1ByZWZpeCA9ICdFcnJvciBjb2RlID0gICc7XHJcbiAgIH1cclxuXHJcbiAgIGdldENyZXdzRm9yVXNlcih1c2VySWQpIHtcclxuXHJcbiAgICAgIGlmICghdXNlcklkKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcigndXNlcklkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBjcmV3TGlzdFJlc3RFbmRwb2ludCA9ICcvbWFpbnRlbml4L3Jlc3QvY3Jld3MnO1xyXG4gICAgICBjb25zdCBhcmdzID0geyAndXNlcklkJzogdXNlcklkIH07XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogY3Jld0xpc3RSZXN0RW5kcG9pbnQsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IGFyZ3MsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IChjcmV3UmVzcG9uc2VMaXN0LCB0ZXh0U3RhdHVzLCBqcVhIUikgPT4ge1xyXG4gICAgICAgICAgICAgICByZXNvbHZlKGNyZXdSZXNwb25zZUxpc3QpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgPT4ge1xyXG4gICAgICAgICAgICAgICBsZXQgbWVzc2FnZSA9IHRoaXMuZXJyb3JNc2dQcmVmaXggKyBqcVhIUi5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgIHJlamVjdChtZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIGdldERlZmF1bHRTdGFydEFuZEVuZERhdGVzKHVzZXJJZCkge1xyXG4gICAgICBpZiAoIXVzZXJJZCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZXJJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY3VycmVudERhdGVUaW1lUmVzdEVuZHBvaW50ID0gJy9tYWludGVuaXgvcmVzdC9kYXRldGltZS9nZXRDdXJyZW50JztcclxuICAgICAgY29uc3QgYXJncyA9IHsgJ3VzZXJJZCc6IHVzZXJJZCB9O1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBjdXJyZW50RGF0ZVRpbWVSZXN0RW5kcG9pbnQsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IGFyZ3MsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IChyZXNwb25zZSwgdGV4dFN0YXR1cywganFYSFIpID0+IHtcclxuICAgICAgICAgICAgICAgbGV0IGRlZmF1bHRTdGFydCA9IG5ldyBEYXRlKFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGFydFllYXIsXHJcbiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXJ0TW9udGggLSAxLFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGFydERheU9mTW9udGgsXHJcbiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXJ0SG91ckluRGF5LFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGFydE1pbnV0ZVxyXG4gICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICBsZXQgZGVmYXVsdEVuZCA9IG5ldyBEYXRlKFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5lbmRZZWFyLFxyXG4gICAgICAgICAgICAgICAgICByZXNwb25zZS5lbmRNb250aCAtIDEsXHJcbiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmVuZERheU9mTW9udGgsXHJcbiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmVuZEhvdXJJbkRheSxcclxuICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZW5kTWludXRlXHJcbiAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICBsZXQgZGVmYXVsdFN0YXJ0RW5kVmFsdWVzID0ge307XHJcbiAgICAgICAgICAgICAgIGRlZmF1bHRTdGFydEVuZFZhbHVlcy5zdGFydERhdGUgPSB0aGlzLmZvcm1hdERhdGUoZGVmYXVsdFN0YXJ0KTtcclxuICAgICAgICAgICAgICAgZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLnN0YXJ0VGltZSA9IHRoaXMuZm9ybWF0VGltZShkZWZhdWx0U3RhcnQpO1xyXG4gICAgICAgICAgICAgICBkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuc3RhcnRUaW1lWm9uZSA9IHJlc3BvbnNlLnN0YXJ0VGltZXpvbmU7XHJcbiAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVEYXRlRm9ybWF0KGRlZmF1bHRTdGFydEVuZFZhbHVlcy5zdGFydERhdGUpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICByZWplY3QoJ2RlZmF1bHQgc3RhcnREYXRlIGZhaWxlZCB2YWxpZGF0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVUaW1lRm9ybWF0KGRlZmF1bHRTdGFydEVuZFZhbHVlcy5zdGFydFRpbWUpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICByZWplY3QoJ2RlZmF1bHQgc3RhcnRUaW1lIGZhaWxlZCB2YWxpZGF0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIGRlZmF1bHRTdGFydEVuZFZhbHVlcy5lbmREYXRlID0gdGhpcy5mb3JtYXREYXRlKGRlZmF1bHRFbmQpO1xyXG4gICAgICAgICAgICAgICBkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuZW5kVGltZSA9IHRoaXMuZm9ybWF0VGltZShkZWZhdWx0RW5kKTtcclxuICAgICAgICAgICAgICAgZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLmVuZFRpbWVab25lID0gcmVzcG9uc2UuZW5kVGltZXpvbmU7XHJcbiAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVEYXRlRm9ybWF0KGRlZmF1bHRTdGFydEVuZFZhbHVlcy5lbmREYXRlKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgcmVqZWN0KCdkZWZhdWx0IGVuZERhdGUgZmFpbGVkIHZhbGlkYXRpb246ICcgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXRlVGltZUZvcm1hdChkZWZhdWx0U3RhcnRFbmRWYWx1ZXMuZW5kVGltZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlamVjdCgnZGVmYXVsdCBlbmRUaW1lIGZhaWxlZCB2YWxpZGF0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgIHJlc29sdmUoZGVmYXVsdFN0YXJ0RW5kVmFsdWVzKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pID0+IHtcclxuICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSB0aGlzLmVycm9yTXNnUHJlZml4ICsganFYSFIuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICByZWplY3QobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICB9XHJcblxyXG4gICBwZXJmb3JtU2VhcmNoKGFyZ3MpIHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgbGV0IGV4Y2x1ZGVDb21wbGV0ZSA9ICgoYXJncy5zaG93Q29tcGxldGVUYXNrcyA9PSB0cnVlKSA/IGZhbHNlIDogdHJ1ZSk7XHJcblxyXG4gICAgICAgICBsZXQgc2VhcmNoRGF0YSA9IHtcclxuICAgICAgICAgICAgb25seVdvcmtzY29wZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIG9ubHlDb250YWluaW5nTGFib3VyOiB0cnVlLFxyXG4gICAgICAgICAgICBhc3NpZ25lZFRvQ3Jld0lkOiBhcmdzLmNyZXdJZCxcclxuICAgICAgICAgICAgbWluU2NoZWR1bGVkU3RhcnREYXRlVGltZTogYXJncy5zdGFydERhdGVUaW1lLFxyXG4gICAgICAgICAgICBtYXhTY2hlZHVsZWRTdGFydERhdGVUaW1lOiBhcmdzLmVuZERhdGVUaW1lLFxyXG4gICAgICAgICAgICBleGNsdWRlQ29tcGxldGVkOiBleGNsdWRlQ29tcGxldGVcclxuICAgICAgICAgfTtcclxuICAgICAgICAgXHJcbiAgICAgICAgIGxldCBsaXN0Q3Jld1Rhc2tMYWJvdXJFbmRwb2ludCA9ICcvbWFpbnRlbml4L3Jlc3QvdGFza3MnO1xyXG5cclxuICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBsaXN0Q3Jld1Rhc2tMYWJvdXJFbmRwb2ludCxcclxuICAgICAgICAgICAgZGF0YTogc2VhcmNoRGF0YSxcclxuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgc3VjY2VzczogKHJlc3BvbnNlLCB0ZXh0U3RhdHVzLCBqcVhIUikgPT4ge1xyXG4gICAgICAgICAgICAgICAvLyBUaGUgcmVzcG9uc2UgaXMgYSBqc29uIGxpc3Qgb2Ygb2JqZWN0cyBnZW5lcmF0ZWQgZnJvbTpcclxuICAgICAgICAgICAgICAgLy8gICAgY29tLm14aS5teC53ZWIucmVzdC50YXNrLkNyZXdUYXNrTGFib3VyUmVzcG9uc2VcclxuICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiAoanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSA9PiB7XHJcbiAgICAgICAgICAgICAgIGxldCBtZXNzYWdlID0gdGhpcy5lcnJvck1zZ1ByZWZpeCArIGpxWEhSLnN0YXR1cztcclxuICAgICAgICAgICAgICAgcmVqZWN0KG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgLy8gdmFsaWRhdGVIb3Vycyh2YWx1ZSkge1xyXG4gICAvLyAgICAvLyBUaGlzIGlzIGJhc2VkIG9uIHRoZSBOVU1CRVIoOSw1KSBjb25zdHJhaW50IGZvclxyXG4gICAvLyAgICAvLyBzY2hlZF9sYWJvdXJfcm9sZS5zY2hlZF9ociBhbmQgc2NoZWRfbGFib3VyX3JvbGUuYWN0dWFsX2hyXHJcbiAgIC8vICAgIGxldCBzcGxpdCA9IHZhbHVlLnNwbGl0KCcuJyk7XHJcbiAgIC8vICAgIGlmICggc3BsaXQubGVuZ3RoID4gMCApIHtcclxuICAgLy8gICAgICAgaWYgKCBzcGxpdFswXS5sZW5ndGggPiA0ICkge1xyXG4gICAvLyAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgIC8vICAgICAgIH1cclxuICAgLy8gICAgICAgaWYgKCBzcGxpdC5sZW5ndGggPT0gMiApIHtcclxuICAgLy8gICAgICAgICAgaWYgKCBzcGxpdFsxXS5sZW5ndGggPiA1ICkge1xyXG4gICAvLyAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgIC8vICAgICAgICAgIH1cclxuICAgLy8gICAgICAgfSBlbHNlIGlmIChzcGxpdC5sZW5ndGggPiAyICkge1xyXG4gICAvLyAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgIC8vICAgICAgIH1cclxuICAgLy8gICAgfVxyXG4gICAvLyAgICByZXR1cm4gdHJ1ZTtcclxuICAgLy8gfVxyXG5cclxuICAgdXBkYXRlU2NoZWR1bGVkSG91cnModGFza0lkLCBsYWJvdXJSb3dJZCwgbmV3VmFsdWUpIHtcclxuICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgIHNjaGVkdWxlZEhvdXJzOiBuZXdWYWx1ZVxyXG4gICAgICB9O1xyXG4gICAgICAkLmFqYXgoe1xyXG4gICAgICAgICB1cmw6ICcvbWFpbnRlbml4L3Jlc3QvdGFza3MvJyArIHRhc2tJZCArICcvbGFib3Vycy8nICsgbGFib3VyUm93SWQsXHJcbiAgICAgICAgIHR5cGU6IFwiUFVUXCIsXHJcbiAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgICBlcnJvcjogKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9IHRoaXMuZXJyb3JNc2dQcmVmaXggKyBqcVhIUi5zdGF0dXM7XHJcbiAgICAgICAgICAgIG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgdXBkYXRlQWN0dWFsSG91cnModGFza0lkLCBsYWJvdXJSb3dJZCwgbmV3VmFsdWUpIHtcclxuICAgICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgIGFjdHVhbEhvdXJzOiBuZXdWYWx1ZVxyXG4gICAgICB9O1xyXG4gICAgICAkLmFqYXgoe1xyXG4gICAgICAgICB1cmw6ICcvbWFpbnRlbml4L3Jlc3QvdGFza3MvJyArIHRhc2tJZCArICcvbGFib3Vycy8nICsgbGFib3VyUm93SWQsXHJcbiAgICAgICAgIHR5cGU6IFwiUFVUXCIsXHJcbiAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgICBlcnJvcjogKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9IHRoaXMuZXJyb3JNc2dQcmVmaXggKyBqcVhIUi5zdGF0dXM7XHJcbiAgICAgICAgICAgIG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuXHJcbiAgIC8vXHJcbiAgIC8vIHByaXZhdGUgbWV0aG9kc1xyXG4gICAvL1xyXG5cclxuICAgdmFsaWRhdGVEYXRlRm9ybWF0KGRhdGVTdHIpIHtcclxuICAgICAgaWYgKCFkYXRlU3RyKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignZGF0ZVN0ciBpcyBtYW5kYXRvcnkuJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVvZiBkYXRlU3RyICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RhdGVTdHIgaXMgbm90IGEgc3RyaW5nJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHJlZ2V4IGV4YW1wbGU6IGRkLU1NTS15eXl5XHJcbiAgICAgIGNvbnN0IGRhdGVGb3JtYXQgPSAvXigoWzAtOV0pfChbMC0yXVswLTldKXwoWzNdWzAtMV0pKVxcLShKQU58RkVCfE1BUnxBUFJ8TUFZfEpVTnxKVUx8QVVHfFNFUHxPQ1R8Tk9WfERFQylcXC1cXGR7NH0kLztcclxuICAgICAgY29uc3QgbWF0Y2hBcnJheSA9IGRhdGVTdHIubWF0Y2goZGF0ZUZvcm1hdCk7XHJcblxyXG4gICAgICBpZiAobWF0Y2hBcnJheSA9PSBudWxsKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignZGF0ZVN0ciBoYXMgaW52YWxpZCBmb3JtYXQuJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICB9XHJcblxyXG4gICB2YWxpZGF0ZVRpbWVGb3JtYXQodGltZVN0cikge1xyXG4gICAgICBpZiAoIXRpbWVTdHIpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd0aW1lU3RyIGlzIG1hbmRhdG9yeS4nKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZW9mIHRpbWVTdHIgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcigndGltZVN0ciBpcyBub3QgYSBzdHJpbmcuJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHJlZ2V4IGV4YW1wbGU6IGhoOm1tXHJcbiAgICAgIGNvbnN0IHRpbWVGb3JtYXQgPSAvXiR8XigoWzAxXVswLTldKXwoMlswLTNdKSk6WzAtNV1bMC05XSQvO1xyXG4gICAgICBjb25zdCBtYXRjaEFycmF5ID0gdGltZVN0ci5tYXRjaCh0aW1lRm9ybWF0KTtcclxuXHJcbiAgICAgIGlmIChtYXRjaEFycmF5ID09IG51bGwpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd0aW1lU3RyIGhhcyBpbnZhbGlkIGZvcm1hdC4nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgIH1cclxuXHJcbiAgIGFkZEhvdXJzKGRhdGUsIGhvdXJzKSB7XHJcbiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSArIChob3VycyAqIDYwICogNjAgKiAxMDAwKSk7XHJcbiAgIH1cclxuXHJcbiAgIGZvcm1hdERhdGUoZGF0ZSkge1xyXG4gICAgICBsZXQgc3RyID1cclxuICAgICAgICAgKChkYXRlLmdldERhdGUoKSA8IDEwKSA/ICcwJyA6ICcnKSArIGRhdGUuZ2V0RGF0ZSgpICsgJy0nICtcclxuICAgICAgICAgdGhpcy5nZXRNb250aFNob3J0U3RyKGRhdGUuZ2V0TW9udGgoKSArIDEpICsgJy0nICtcclxuICAgICAgICAgZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICByZXR1cm4gc3RyO1xyXG4gICB9XHJcblxyXG4gICBmb3JtYXRUaW1lKGRhdGUpIHtcclxuICAgICAgbGV0IHN0ciA9XHJcbiAgICAgICAgICgoZGF0ZS5nZXRIb3VycygpIDwgMTApID8gJzAnIDogJycpICsgZGF0ZS5nZXRIb3VycygpICsgJzonICtcclxuICAgICAgICAgKChkYXRlLmdldE1pbnV0ZXMoKSA8IDEwKSA/ICcwJyA6ICcnKSArIGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICByZXR1cm4gc3RyO1xyXG4gICB9XHJcblxyXG4gICBnZXRNb250aFNob3J0U3RyKG1vbnRoKSB7XHJcbiAgICAgIGlmIChtb250aCA9PT0gMSkgcmV0dXJuICdKQU4nO1xyXG4gICAgICBpZiAobW9udGggPT09IDIpIHJldHVybiAnRkVCJztcclxuICAgICAgaWYgKG1vbnRoID09PSAzKSByZXR1cm4gJ01BUic7XHJcbiAgICAgIGlmIChtb250aCA9PT0gNCkgcmV0dXJuICdBUFInO1xyXG4gICAgICBpZiAobW9udGggPT09IDUpIHJldHVybiAnTUFZJztcclxuICAgICAgaWYgKG1vbnRoID09PSA2KSByZXR1cm4gJ0pVTic7XHJcbiAgICAgIGlmIChtb250aCA9PT0gNykgcmV0dXJuICdKVUwnO1xyXG4gICAgICBpZiAobW9udGggPT09IDgpIHJldHVybiAnQVVHJztcclxuICAgICAgaWYgKG1vbnRoID09PSA5KSByZXR1cm4gJ1NFUCc7XHJcbiAgICAgIGlmIChtb250aCA9PT0gMTApIHJldHVybiAnT0NUJztcclxuICAgICAgaWYgKG1vbnRoID09PSAxMSkgcmV0dXJuICdOT1YnO1xyXG4gICAgICBpZiAobW9udGggPT09IDEyKSByZXR1cm4gJ0RFQyc7XHJcbiAgICAgIHJldHVybiBcIlwiO1xyXG4gICB9XHJcblxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBBZGQgPSBmdW5jdGlvbih4LCB5KSB7XG5cdHJldHVybih4K3kpO1xufVxuXG5leHBvcnQgY29uc3QgU3VidHJhY3QgPSBmdW5jdGlvbih4LCB5KSB7XG5cdHJldHVybih4LXkpO1xufVxuXG5leHBvcnQgY29uc3QgTXVsdGlwbHkgPSBmdW5jdGlvbih4LCB5KSB7XG5cdHJldHVybih4KnkpO1xufSIsIi8qZ2xvYmFsIGV4cGVjdCovXG5pbXBvcnQgeyBBZGQsIFN1YnRyYWN0LCBNdWx0aXBseSB9IGZyb20gJy4vZmVhdHVyZU1hdGguanMnO1xuXG5kZXNjcmliZSgnW0R1bW15XScsICgpID0+IHtcblx0XG5cdGl0KCdbQWRkXSBzaG91bGQgYWRkIHR3byBudW1iZXJzIHRvZ2V0aGVyIGFuZCByZXR1cm4gdGhlIHJlc3VsdCcsICgpID0+IHtcblx0XHRleHBlY3QoQWRkKDEsIDIpKS50b0JlKDMpO1xuXHR9KTtcblxuXHRpdCgnW1N1YnRyYWN0XSBzaG91bGQgc3VidHJhY3Qgc2Vjb25kIHBhcmFtIGZyb20gZmlyc3QgYW5kIHJldHVybiB0aGUgcmVzdWx0JywgKCkgPT4ge1xuXHRcdGV4cGVjdChTdWJ0cmFjdCgxLCAyKSkudG9CZSgtMSk7XG5cdH0pO1xuXG5cdGl0KCdbTXVsdGlwbHldIHNob3VsZCBtdWx0aXBseSB0d28gbnVtYmVycyBhbmQgcmV0dXJuIHRoZSByZXN1bHQnLCAoKSA9PiB7XG5cdFx0ZXhwZWN0KE11bHRpcGx5KDEsIDIpKS50b0JlKDIpO1xuXHR9KTtcblxufSk7IFxuIiwiLyogZ2xvYmFsIGV4cGVjdCwgamFzbWluZSwgYmVmb3JlQWxsLCBzcHlPbiwgJCAqL1xyXG5pbXBvcnQgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UgZnJvbSAnLi9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZS5qcyc7XHJcblxyXG5kZXNjcmliZSgnRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UgZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLmpzJywgZnVuY3Rpb24oKSB7XHJcbiAgIGxldCBzZXJ2aWNlO1xyXG4gICBsZXQgdXJsID0gXCJodHRwczovL3d3dy5nb29nbGUuY29tXCI7XHJcbiAgIGxldCB0YXNrRGVmaW5pdGlvblJlc3BvbnNlID0gW3tcclxuICAgICAgY29kZTogMyxcclxuICAgICAgY29uZmlnU2xvdENvZGU6IDMsXHJcbiAgICAgIG5hbWU6IFwiVGhpcmRcIlxyXG4gICB9LCB7XHJcbiAgICAgIGNvZGU6IDIsXHJcbiAgICAgIGNvbmZpZ1Nsb3RDb2RlOiAyLFxyXG4gICAgICBuYW1lOiBcIlNlY29uZFwiXHJcbiAgIH0sIHtcclxuICAgICAgY29kZTogMSxcclxuICAgICAgY29uZmlnU2xvdENvZGU6IDEsXHJcbiAgICAgIG5hbWU6IFwiRmlyc3RcIlxyXG4gICB9XTtcclxuXHJcbiAgIGJlZm9yZUFsbChmdW5jdGlvbigpIHtcclxuICAgICAgdGhpcy5zZXJ2aWNlID0gRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2U7XHJcbiAgIH0pO1xyXG5cclxuICAgaXQoJ1NvcnRzIHRhc2sgZGVmaW5pdGlvbnMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgbGV0IHNvcnRlZERhdGEgPSB0aGlzLnNlcnZpY2Uuc29ydFRhc2tEZWZpbml0aW9ucyh0YXNrRGVmaW5pdGlvblJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChzb3J0ZWREYXRhWzBdLmNvZGUpLnRvQmUoMSk7XHJcbiAgICAgIGV4cGVjdChzb3J0ZWREYXRhWzFdLmNvZGUpLnRvQmUoMik7XHJcbiAgICAgIGV4cGVjdChzb3J0ZWREYXRhWzJdLmNvZGUpLnRvQmUoMyk7XHJcbiAgIH0pO1xyXG5cclxuICAgaXQoJ0ZldGNoZXMgdGFzayBkZWZpbml0aW9ucyB3aXRoIGVycm9yIGZvciBpbnZhbGlkIHJlc3BvbnNlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGphc21pbmUuQWpheC5pbnN0YWxsKCk7XHJcblxyXG4gICAgICBzcHlPbigkLCAnYWpheCcpLmFuZC5jYWxsRmFrZShmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgIGxldCBpbnZhbGlkUmVzcG9uc2UgPSB7fTtcclxuICAgICAgICAgcmV0dXJuIGUuc3VjY2VzcyhpbnZhbGlkUmVzcG9uc2UpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgdGhpcy5zZXJ2aWNlLmdldEZvbGxvd09uVGFza0RlZmluaXRpb25zKHVybCk7XHJcbiAgICAgIH0pLnRvVGhyb3coKTtcclxuXHJcbiAgICAgIGphc21pbmUuQWpheC51bmluc3RhbGwoKTtcclxuXHJcbiAgIH0pO1xyXG5cclxuICAgaXQoJ0ZldGNoZXMgdGFzayBkZWZpbml0aW9ucyBzdWNjZXNzZnVsbHknLCBmdW5jdGlvbigpIHtcclxuICAgICAgamFzbWluZS5BamF4Lmluc3RhbGwoKTtcclxuXHJcbiAgICAgIHNweU9uKCQsICdhamF4JykuYW5kLmNhbGxGYWtlKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgcmV0dXJuIGUuc3VjY2Vzcyh0YXNrRGVmaW5pdGlvblJlc3BvbnNlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLnNlcnZpY2UuZ2V0Rm9sbG93T25UYXNrRGVmaW5pdGlvbnModXJsKS50aGVuKGZ1bmN0aW9uKGZha2VEYXRhKSB7XHJcbiAgICAgICAgIGV4cGVjdChmYWtlRGF0YSkudG9FcXVhbCh0YXNrRGVmaW5pdGlvblJlc3BvbnNlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBqYXNtaW5lLkFqYXgudW5pbnN0YWxsKCk7XHJcblxyXG4gICB9KTtcclxuXHJcbn0pO1xyXG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG4vLyBpbXBvcnQgVHlwZWFoZWFkIGZyb20gXCJ0eXBlYWhlYWQuanNcIjtcclxuLy8gaW1wb3J0IEJsb29kaG91bmQgZnJvbSBcImJsb29kaG91bmQtanNcIjtcclxuXHJcbmltcG9ydCBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnIGZyb20gJy4vZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5qcyc7XHJcbmltcG9ydCBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZSBmcm9tICcuL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLmpzJztcclxuXHJcbi8qKlxyXG4gKiBUaGUgYnV0dG9uIGNvbnRyb2xsZXIgdGhhdCBoYW5kbGVzIHVpIGludGVyYWN0aW9ucy5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyIHtcclxuXHJcbiAgIGNvbnN0cnVjdG9yKHR5cGVBaGVhZElkLCBva0J1dHRvbklkLCBub3RGb3VuZE1zZ0lkLCBmb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0SWQsIGFwaVVybElkKSB7XHJcbiAgICAgIGxldCBzY29wZSA9IHRoaXM7XHJcbiAgICAgIHRoaXMubm90Rm91bmRNc2dFbCA9ICQoXCIjXCIgKyBub3RGb3VuZE1zZ0lkKTtcclxuICAgICAgdGhpcy5va0J0bkVsID0gJCgnIycgKyBva0J1dHRvbklkKTtcclxuICAgICAgdGhpcy50eXBlQWhlYWRTZWFyY2hJbnB1dEVsID0gJCgnIycgKyB0eXBlQWhlYWRJZCk7XHJcbiAgICAgIHRoaXMuZm9sbG93T25UYXNrRGVmblV1aWRPdXB1dEVsID0gJCgnIycgKyBmb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0SWQpO1xyXG4gICAgICBsZXQgYXBpVXJsRWwgPSAkKFwiI1wiICsgYXBpVXJsSWQpO1xyXG5cclxuICAgICAgaWYgKCF0aGlzLm5vdEZvdW5kTXNnRWwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgZm91bmQgbWVzc2FnZSBlbGVtZW50IHJlcXVpcmVkXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMub2tCdG5FbC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9rIGJ1dHRvbiBlbGVtZW50IHJlcXVpcmVkXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMudHlwZUFoZWFkU2VhcmNoSW5wdXRFbC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlR5cGVhaGVhZCBpbnB1dCBlbGVtZW50IHJlcXVpcmVkXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMuZm9sbG93T25UYXNrRGVmblV1aWRPdXB1dEVsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3V0cHV0IGZvbGxvd09uIHRhc2sgZGVmaW5pdGlvbiBVVUkgaW5wdXQgZWxlbWVudCByZXF1aXJlZFwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFhcGlVcmxFbC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJFU1QgYXBpIHVybCBlbGVtZW50IGlzIHJlcXVpcmVkXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmFwaVVybCA9IGFwaVVybEVsLnZhbCgpO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uID0gJyc7XHJcblxyXG4gICAgICB0aGlzLnR5cGVBaGVhZFNlYXJjaElucHV0RWwua2V5ZG93bihmdW5jdGlvbigpIHtcclxuICAgICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgIGlmIChzY29wZS50eXBlQWhlYWRTZWFyY2hJbnB1dEVsLnZhbCgpICE9IHNjb3BlLnNlbGVjdGVkT3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgIHNjb3BlLmRpc2FibGVPa0J0bigpO1xyXG4gICAgICAgICAgICAgICAgICBzY29wZS5jbGVhclNlbGVjdGVkVGFza0RlZmluaXRpb24oKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBiaW5kIHNpYmxpbmcgbWV0aG9kcyB0byBjbGFzcyBpbnN0YW5jZS5cclxuICAgICAgdGhpcy5pbml0aWFsaXplID0gdGhpcy5pbml0aWFsaXplLmJpbmQodGhpcyk7XHJcblxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogc2V0IHRoZSBpZCB2YWx1ZSBvZiB0aGUgc2VsZWN0ZWQgdGFzayBkZWZpbml0aW9uIHRvIG91ciBodG1sIGlucHV0IGVsZW1lbnRcclxuICAgICovXHJcbiAgIHNldFNlbGVjdGVkVGFza0RlZmluaXRpb24oc3VnZ2VzdGlvbikge1xyXG4gICAgICBpZiAoc3VnZ2VzdGlvbikge1xyXG4gICAgICAgICB0aGlzLnR5cGVBaGVhZFNlYXJjaElucHV0RWwudmFsKHRoaXMuZGlzcGxheUZvbGxvd09uKG51bGwsIHN1Z2dlc3Rpb24pKTtcclxuICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IHRoaXMudHlwZUFoZWFkU2VhcmNoSW5wdXRFbC52YWwoKTtcclxuICAgICAgICAgdGhpcy5mb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0RWwuYXR0cigndmFsdWUnLCBzdWdnZXN0aW9uLmlkKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogY2xlYXIgYW55IHNlbGVjdGVkIHRhc2sgZGVmaW5pdGlvbiB2YWx1ZSBpbiBvdXIgaHRtbCBpbnB1dCBlbGVtZW50XHJcbiAgICAqL1xyXG4gICBjbGVhclNlbGVjdGVkVGFza0RlZmluaXRpb24oKSB7XHJcbiAgICAgIHRoaXMuZm9sbG93T25UYXNrRGVmblV1aWRPdXB1dEVsLmF0dHIoJ3ZhbHVlJywgJycpO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogc2V0dXAgVUkgZWxlbWVudHMsIGZldGNoIHRhc2sgZGVmaW5pdGlvbnMgYW5kIGNvbmZpZ3VyZSB0eXBlIGFoZWFkXHJcbiAgICAqL1xyXG4gICBpbml0aWFsaXplKCkge1xyXG4gICAgICB0aGlzLmRpc2FibGVPa0J0bigpO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAgcmV0dXJuIEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLmdldEZvbGxvd09uVGFza0RlZmluaXRpb25zKHRoaXMuYXBpVXJsKS50aGVuKCh0YXNrRGVmaW5pdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb25maWd1cmVUeXBlQWhlYWQodGFza0RlZmluaXRpb25zKTtcclxuICAgICAgICAgICAgLy8gb25jZSB0aGUgdHlwZWFoZWFkIGlucHV0IGlzIGluaXRpYWxpemVkLCB0aGUgdHlwZSBmaWVsZCB3aWxsIGxvc3QgZm9jdXMsIGhhdmUgdG9cclxuICAgICAgICAgICAgLy8gbWFudWFsbHkgZm9jdXMgaXQgYWdhaW4uXHJcbiAgICAgICAgICAgIHRoaXMudHlwZUFoZWFkU2VhcmNoSW5wdXRFbC5mb2N1cygpO1xyXG4gICAgICAgICB9KTtcclxuXHJcbiAgICAgIH1cclxuICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIHdoaWxlIHRyeWluZyB0byBmZXRjaCB0YXNrIGRlZmluaXRpb25zLlwiLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIGNvbmZpZ3VyZSB0eXBlIGFoZWFkIHdpdGggZGF0YSBzb3VyY2UgYW5kIGRlZmF1bHQgY29uZmlndXJhdGlvbi5cclxuICAgICovXHJcbiAgIGNvbmZpZ3VyZVR5cGVBaGVhZCh0YXNrRGVmaW5pdGlvbnMpIHtcclxuICAgICAgbGV0IHNjb3BlID0gdGhpcztcclxuICAgICAgbGV0IGNvbmZpZyA9IG5ldyBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnKHRhc2tEZWZpbml0aW9ucyk7XHJcblxyXG4gICAgICAvLyBjcmVhdGUgYSBkaXNwbGF5IHZhbHVlIHRoYXQgd2lsbCBhbGxvdyBmdWxsIHRleHQgc2VhcmNoIG9uIGZ1bGwgdmFsdWUuXHJcbiAgICAgICQuZWFjaChjb25maWcuZGF0YSwgZnVuY3Rpb24oaW5kZXgsIGRhdGEpIHtcclxuICAgICAgICAgZGF0YS5kaXNwbGF5VmFsdWUgPSBzY29wZS5kaXNwbGF5Rm9sbG93T24obnVsbCwgZGF0YSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgJC50eXBlYWhlYWQoe1xyXG4gICAgICAgICBpbnB1dDogc2NvcGUudHlwZUFoZWFkU2VhcmNoSW5wdXRFbCxcclxuICAgICAgICAgaGlnaGxpZ2h0OiB0cnVlLFxyXG4gICAgICAgICBuYW1lOiBjb25maWcubmFtZSxcclxuICAgICAgICAgbGltaXQ6IGNvbmZpZy5saW1pdCxcclxuICAgICAgICAgbWluTGVuZ3RoOiBjb25maWcubWluTGVuZ3RoLFxyXG4gICAgICAgICBkaXNwbGF5OiBbXCJkaXNwbGF5VmFsdWVcIl0sXHJcbiAgICAgICAgIGVtcHR5VGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwibXgtdHlwZWFoZWFkLW1zZy1ub3Rmb3VuZFwiPicgKyBzY29wZS5ub3RGb3VuZE1zZ0VsLnZhbCgpICsgJzwvZGl2PicsXHJcbiAgICAgICAgIHNvdXJjZToge1xyXG4gICAgICAgICAgICBkYXRhOiBjb25maWcuZGF0YSxcclxuICAgICAgICAgfSxcclxuICAgICAgICAgY2FsbGJhY2s6IHtcclxuICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24odHlwZUFoZWFkSW5wdXRFbCwgc2VsZWN0aW9uRWwsIHNlbGVjdGVkUmVjb3JkLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICBzY29wZS5lbmFibGVPa0J0bigpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gc2F2ZSB1c2VyIHNlbGVjdGlvbiBmcm9tIHRoZSBzZWFyY2ggcmVzdWx0LlxyXG4gICAgICAgICAgICAgICBzY29wZS5zZXRTZWxlY3RlZFRhc2tEZWZpbml0aW9uKHNlbGVjdGVkUmVjb3JkKTtcclxuICAgICAgICAgICAgICAgdGhpcy5oaWRlTGF5b3V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgLy8gRGVmaW5lIGhvdyB0aGUgcmVzdWx0IGlzIGRpc3BsYXllZCBpbiB0aGUgZHJvcGRvd24uXHJcbiAgIC8vIEl0IHdpbGwgZGlzcGxheSB0aGUgcmVzdWx0IGluIHRoZSBmb3JtYXQgb2Y6IHRhc2sgY29kZSAtIGNvbmZpZ3Nsb3QgY29kZSAtIHRhc2sgbmFtZVxyXG4gICBkaXNwbGF5Rm9sbG93T24ocXVlcnksIHN1Z2dlc3Rpb25PYmopIHtcclxuICAgICAgaWYgKHN1Z2dlc3Rpb25PYmopIHtcclxuICAgICAgICAgcmV0dXJuIHN1Z2dlc3Rpb25PYmouY29kZSArIFwiIC0gXCIgKyBzdWdnZXN0aW9uT2JqLmNvbmZpZ1Nsb3RDb2RlICsgXCIgLSBcIiArIHN1Z2dlc3Rpb25PYmoubmFtZTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogV3JhcHBlciB0byBlbmFibGUgb3VyIE9LIGJ1dHRvblxyXG4gICAgKi9cclxuICAgZW5hYmxlT2tCdG4oKSB7XHJcbiAgICAgIGlmICh0aGlzLm9rQnRuRWwpIHtcclxuICAgICAgICAgaWYgKHRoaXMub2tCdG5FbC5hdHRyKCdvcmlnaW5PbkNsaWNrRXZlbnQnKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9rQnRuRWwuYXR0cignb25jbGljaycsIHRoaXMub2tCdG5FbC5hdHRyKCdvcmlnaW5PbkNsaWNrRXZlbnQnKSk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGlmICh0aGlzLm9rQnRuRWwuYXR0cignb3JpZ2luVGl0bGUnKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9rQnRuRWwuYXR0cigndGl0bGUnLCB0aGlzLm9rQnRuRWwuYXR0cignb3JpZ2luVGl0bGUnKSk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIHRoaXMub2tCdG5FbC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgdGhpcy5va0J0bkVsLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgIHRoaXMub2tCdG5FbC5yZW1vdmVBdHRyKCdvcmlnaW5PbkNsaWNrRXZlbnQnKTtcclxuICAgICAgICAgdGhpcy5va0J0bkVsLnJlbW92ZUF0dHIoJ29yaWdpblRpdGxlJyk7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFdyYXBwZXIgdG8gZGlzYWJsZSBvdXIgT0sgYnV0dG9uXHJcbiAgICAqL1xyXG4gICBkaXNhYmxlT2tCdG4oKSB7XHJcbiAgICAgIGlmICh0aGlzLm9rQnRuRWwpIHtcclxuICAgICAgICAgLy8gc3RvcmUgdGhlIGJ1dHRvbiBvbmNsaWNrIGhhbmRsZXIgYW5kIHRpdGxlIGZvciBmdXR1cmUgcmVzdG9yZVxyXG4gICAgICAgICBpZiAoIXRoaXMub2tCdG5FbC5hdHRyKCdvcmlnaW5PbkNsaWNrRXZlbnQnKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9rQnRuRWwuYXR0cignb3JpZ2luT25DbGlja0V2ZW50JywgdGhpcy5va0J0bkVsLmF0dHIoJ29uY2xpY2snKSk7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGlmICghdGhpcy5va0J0bkVsLmF0dHIoJ29yaWdpblRpdGxlJykpIHtcclxuICAgICAgICAgICAgdGhpcy5va0J0bkVsLmF0dHIoJ29yaWdpblRpdGxlJywgdGhpcy5va0J0bkVsLmF0dHIoJ3RpdGxlJykpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICB0aGlzLm9rQnRuRWwuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgIHRoaXMub2tCdG5FbC5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgICB0aGlzLm9rQnRuRWwuYXR0cignb25jbGljaycsIGZhbHNlKTtcclxuICAgICAgICAgdGhpcy5va0J0bkVsLmF0dHIoJ3RpdGxlJywgJycpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIGV4cGVjdCwgamFzbWluZSwgc3B5T24sICQsIHNldEZpeHR1cmVzICovXHJcbi8qKlxyXG4gKiBDcmVhdGUgRm9sbG93LW9uIFRhc2sgU2VhcmNoIFRlc3QgU3VpdGVcclxuICoqL1xyXG5cclxuaW1wb3J0IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyIGZyb20gJy4vZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIuanMnO1xyXG5cclxuZGVzY3JpYmUoJ0ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyIGZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29udHJvbGxlci5qcycsIGZ1bmN0aW9uKCkge1xyXG4gICBsZXQgcmVzdEFwaVVybCA9IFwiL3NvbWVSZXN0QXBpXCI7XHJcblxyXG4gICBmdW5jdGlvbiBnZXRHb29kQ29udHJvbGxlcigpIHtcclxuICAgICAgcmV0dXJuIG5ldyBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29udHJvbGxlcignZm9sbG93T25UYXNrU2VhcmNoUXVlcnknLFxyXG4gICAgICAgICAnaWRCdXR0b25PaycsXHJcbiAgICAgICAgICdpZFR5cGVhaGVhZE5vdEZvdW5kTWVzc2FnZScsXHJcbiAgICAgICAgICdpZEZpZWxkRm9sbG93T25UYXNrRGVmblV1aWQnLFxyXG4gICAgICAgICAnaWRmb2xsb3dPblRhc2tEZWZpbml0aW9uUmVzdEFQSScpO1xyXG4gICB9XHJcblxyXG4gICBmdW5jdGlvbiBzZXRVcEhUTUxGaXh0dXJlKCkge1xyXG4gICAgICBzZXRGaXh0dXJlcyhcclxuICAgICAgICAgJzxmb3JtIGlkPVwiZm9ybS10eXBlYWhlYWQtdGVzdFwiIG5hbWU9XCJmb3JtLXR5cGVhaGVhZC10ZXN0XCI+JyArXHJcbiAgICAgICAgICcgIDxkaXYgY2xhc3M9XCJ0eXBlYWhlYWRfX2NvbnRhaW5lclwiPicgK1xyXG4gICAgICAgICAnICAgICA8ZGl2IGNsYXNzPVwidHlwZWFoZWFkX19maWVsZFwiPicgK1xyXG4gICAgICAgICAnICAgICAgICA8c3BhbiBjbGFzcz1cInR5cGVhaGVhZF9fcXVlcnlcIj4nICtcclxuICAgICAgICAgJyAgICAgICAgICA8aW5wdXQgY2xhc3M9IFwianMtdHlwZWFoZWFkLXRlc3RcIiBpZD1cImZvbGxvd09uVGFza1NlYXJjaFF1ZXJ5XCIgbmFtZT1cImZvbGxvd09uVGFza1NlYXJjaFF1ZXJ5XCI+JyArXHJcbiAgICAgICAgICcgICAgICAgIDwvc3Bhbj4nICtcclxuICAgICAgICAgJyAgICAgPC9kaXY+JyArXHJcbiAgICAgICAgICcgIDwvZGl2PicgK1xyXG4gICAgICAgICAnICA8YnV0dG9uIGlkPVwiaWRCdXR0b25Pa1wiIHRpdGxlPVwibXl0aXRsZVwiPk9rPC9idXR0b24+JyArXHJcbiAgICAgICAgICcgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImFGb2xsb3dPblRhc2tEZWZpbml0aW9uVXVpZFwiIGlkPVwiaWRGaWVsZEZvbGxvd09uVGFza0RlZm5VdWlkXCI+JyArXHJcbiAgICAgICAgICcgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgaWQ9XCJpZFR5cGVhaGVhZE5vdEZvdW5kTWVzc2FnZVwiIHZhbHVlPVwid2ViLm1zZy5NU0dfTk9fTUFUQ0hJTkdfRk9MTE9XT05fVEFTS19ERUZJTklUSU9OU1wiPicgK1xyXG4gICAgICAgICAnICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIGlkPVwiaWRmb2xsb3dPblRhc2tEZWZpbml0aW9uUmVzdEFQSVwiIHZhbHVlPVwiJyArIHJlc3RBcGlVcmwgKyAnXCInICtcclxuICAgICAgICAgJzwvZm9ybT4nKTtcclxuICAgfVxyXG5cclxuICAgYmVmb3JlRWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgamFzbWluZS5BamF4Lmluc3RhbGwoKTtcclxuICAgICAgc2V0VXBIVE1MRml4dHVyZSgpO1xyXG4gICAgICB0aGlzLm9rQnV0dG9uRWwgPSAkKCcjaWRCdXR0b25PaycpO1xyXG4gICAgICB0aGlzLmZpZWxkRm9sbG93T25UYXNrRGVmblV1aWRFbCA9ICQoJyNpZEZpZWxkRm9sbG93T25UYXNrRGVmblV1aWQnKTtcclxuICAgfSk7XHJcblxyXG4gICBhZnRlckVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgIGphc21pbmUuQWpheC51bmluc3RhbGwoKTtcclxuICAgfSk7XHJcblxyXG4gICBpdChcIlNob3VsZCBoYXZlIGEgYnV0dG9uIHdpdGggT0sgbGFiZWxcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGV4cGVjdCh0aGlzLm9rQnV0dG9uRWwpLnRvSGF2ZVRleHQoXCJPa1wiKTtcclxuICAgfSk7XHJcblxyXG4gICBpdChcIlNob3VsZCB0aHJvdyBlcnJvciBpbmRpY2F0aW5nIG1pc3NpbmcgdHlwZWFoZWFkSWRcIiwgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIG5ldyBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29udHJvbGxlcignRkFLRV9mb2xsb3dPblRhc2tTZWFyY2hRdWVyeScsXHJcbiAgICAgICAgICAgICdGQUtFX2lkQnV0dG9uT2snLFxyXG4gICAgICAgICAgICAnRkFLRV9pZFR5cGVhaGVhZE5vdEZvdW5kTWVzc2FnZScsXHJcbiAgICAgICAgICAgICdGQUtFX2lkRmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZCcsXHJcbiAgICAgICAgICAgICdGQUtFX2lkZm9sbG93T25UYXNrRGVmaW5pdGlvblJlc3RBUEknKTtcclxuICAgICAgfSkudG9UaHJvdygpO1xyXG4gICB9KTtcclxuXHJcbiAgIGl0KFwiU2hvdWxkIGhhdmUgT2sgYnV0dG9uIGVuYWJsZWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGxldCBjb250cm9sbGVyID0gZ2V0R29vZENvbnRyb2xsZXIoKTtcclxuICAgICAgY29udHJvbGxlci5lbmFibGVPa0J0bigpO1xyXG4gICAgICBleHBlY3QodGhpcy5va0J1dHRvbkVsKS5ub3QudG9IYXZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgIH0pO1xyXG5cclxuICAgaXQoXCJTaG91bGQgaGF2ZSBPayBidXR0b24gZGlzYWJsZWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGxldCBjb250cm9sbGVyID0gZ2V0R29vZENvbnRyb2xsZXIoKTtcclxuICAgICAgY29udHJvbGxlci5kaXNhYmxlT2tCdG4oKTtcclxuICAgICAgZXhwZWN0KHRoaXMub2tCdXR0b25FbCkudG9IYXZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgIH0pO1xyXG5cclxuXHJcbiAgIGl0KCdyZXR1cm5zIGEgcHJvcGVybHkgY29uc3RydWN0ZWQgZGlzcGxheSB2YWx1ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IFt7XHJcbiAgICAgICAgIGNvZGU6IDUsXHJcbiAgICAgICAgIGNvbmZpZ1Nsb3RDb2RlOiAzLFxyXG4gICAgICAgICBuYW1lOiAndGVzdCdcclxuICAgICAgfV07XHJcblxyXG4gICAgICBsZXQgY29udHJvbGxlciA9IGdldEdvb2RDb250cm9sbGVyKCk7XHJcbiAgICAgIGV4cGVjdChjb250cm9sbGVyLmRpc3BsYXlGb2xsb3dPbihudWxsLCBkYXRhWzBdKSkudG9CZShcIjUgLSAzIC0gdGVzdFwiKTtcclxuICAgfSk7XHJcblxyXG4gICBpdChcIlNob3VsZCBzZXQgYW5kIGNsZWFyIHNlbGVjdGVkIHRhc2sgZGVmaW5pdGlvbiBvZiBvdXRwdXQgZWxlbWVudFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgbGV0IGNvbnRyb2xsZXIgPSBnZXRHb29kQ29udHJvbGxlcigpO1xyXG4gICAgICBjb250cm9sbGVyLnNldFNlbGVjdGVkVGFza0RlZmluaXRpb24oeyBpZDogJ3NvbWVWYWx1ZScgfSk7XHJcbiAgICAgIGV4cGVjdCh0aGlzLmZpZWxkRm9sbG93T25UYXNrRGVmblV1aWRFbC5hdHRyKCd2YWx1ZScpKS50b0JlKCdzb21lVmFsdWUnKTtcclxuXHJcbiAgICAgIGNvbnRyb2xsZXIuY2xlYXJTZWxlY3RlZFRhc2tEZWZpbml0aW9uKCk7XHJcbiAgICAgIGV4cGVjdCh0aGlzLmZpZWxkRm9sbG93T25UYXNrRGVmblV1aWRFbC5hdHRyKCd2YWx1ZScpKS50b0JlKCcnKTtcclxuICAgfSk7XHJcblxyXG4gICBpdCgnRmV0Y2hlcyB0YXNrIGRlZmluaXRpb25zIHN1Y2Nlc3NmdWxseScsIGZ1bmN0aW9uKGRvbmUpIHtcclxuICAgICAgbGV0IGNvbnRyb2xsZXIgPSBnZXRHb29kQ29udHJvbGxlcigpO1xyXG4gICAgICBsZXQgcmVzcG9uc2VUYXNrRGVmaW5pdGlvbnMgPSBbXHJcbiAgICAgICAgIHsgXCJpZFwiOiBcIkE2QUFFMThCNjM4NzQwQjI5QjJGMzRENTFDRjJDQ0Q1XCIsIFwiY29uZmlnU2xvdENvZGVcIjogXCJCT00xMjNcIiwgXCJuYW1lXCI6IFwiUmVxV2l0aEltcGFjdDFcIiwgXCJjb2RlXCI6IFwiTkMxNDk5Mi1SRVExXCIgfSxcclxuICAgICAgICAgeyBcImlkXCI6IFwiQTZBQUUxOEI2Mzg3NDBCMjlCMkYzNEQ1MUNGMkNDRDZcIiwgXCJjb25maWdTbG90Q29kZVwiOiBcIkJPTTEyM1wiLCBcIm5hbWVcIjogXCJSZXFXaXRoSW1wYWN0MlwiLCBcImNvZGVcIjogXCJOQzE0OTkyLVJFUTJcIiB9LFxyXG4gICAgICAgICB7IFwiaWRcIjogXCJBNkFBRTE4QjYzODc0MEIyOUIyRjM0RDUxQ0YyQ0NEN1wiLCBcImNvbmZpZ1Nsb3RDb2RlXCI6IFwiQk9NMTIzXCIsIFwibmFtZVwiOiBcIlJlcVdpdGhJbXBhY3QzXCIsIFwiY29kZVwiOiBcIk5DMTQ5OTItUkVRM1wiIH0sXHJcbiAgICAgICAgIHsgXCJpZFwiOiBcIkE2QUFFMThCNjM4NzQwQjI5QjJGMzRENTFDRjJDQ0Q4XCIsIFwiY29uZmlnU2xvdENvZGVcIjogXCJCT00xMjNcIiwgXCJuYW1lXCI6IFwiUmVxV2l0aEltcGFjdDRcIiwgXCJjb2RlXCI6IFwiTkMxNDk5Mi1SRVE0XCIgfSxcclxuICAgICAgICAgeyBcImlkXCI6IFwiQTZBQUUxOEI2Mzg3NDBCMjlCMkYzNEQ1MUNGMkNDRDlcIiwgXCJjb25maWdTbG90Q29kZVwiOiBcIkJPTTEyM1wiLCBcIm5hbWVcIjogXCJSZXFXaXRoSW1wYWN0NVwiLCBcImNvZGVcIjogXCJOQzE0OTkyLVJFUTVcIiB9LFxyXG4gICAgICAgICB7IFwiaWRcIjogXCJBNkFBRTE4QjYzODc0MEIyOUIyRjM0RDUxQ0YyQ0NFM1wiLCBcImNvbmZpZ1Nsb3RDb2RlXCI6IFwiQk9NMTIzXCIsIFwibmFtZVwiOiBcIlJlcVdpdGhJbXBhY3Q2XCIsIFwiY29kZVwiOiBcIk5DMTQ5OTItUkVRNlwiIH0sXHJcbiAgICAgIF07XHJcblxyXG4gICAgICBzcHlPbigkLCAnYWpheCcpLmFuZC5jYWxsRmFrZShmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICByZXR1cm4gZS5zdWNjZXNzKHJlc3BvbnNlVGFza0RlZmluaXRpb25zKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBsZXQgb2tCdXR0b25FbCA9ICQoJyNpZEJ1dHRvbk9rJyk7XHJcbiAgICAgIGxldCBuYXRpdmVFbCA9ICQoXCIjZm9sbG93T25UYXNrU2VhcmNoUXVlcnlcIik7XHJcblxyXG4gICAgICAvLyBpbml0aWFsaXplIGNvbnRyb2xsZXJcclxuICAgICAgY29udHJvbGxlci5pbml0aWFsaXplKCkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgLy8gY2hlY2sgdG8gc2VlIGlmIGFqYXggd2FzIGRvbmUgd2l0aCBwcm9wZXIgdXJsXHJcbiAgICAgICAgIGV4cGVjdCgkLmFqYXguY2FsbHMubW9zdFJlY2VudCgpLmFyZ3NbMF0udXJsKS50b0VxdWFsKHJlc3RBcGlVcmwpO1xyXG5cclxuICAgICAgICAgLy8gY2hlY2sgaWYgb2sgYnV0dG9uIHdhcyBkaXNhYmxlZFxyXG4gICAgICAgICBleHBlY3Qob2tCdXR0b25FbCkudG9IYXZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgICAvLyBjaGVjayBpZiBmb2N1cyB3YXMgZ2l2ZW4gdG8gY29tcG9uZW50XHJcbiAgICAgICAgIGV4cGVjdChuYXRpdmVFbCkudG9CZUZvY3VzZWQoKTtcclxuICAgICAgICAgZG9uZSgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgIH0pO1xyXG5cclxufSk7XHJcbiIsIi8qIGdsb2JhbCBleHBlY3QgKi9cclxuaW1wb3J0IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcgZnJvbSAnLi9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnLmpzJztcclxuXHJcbmRlc2NyaWJlKCdGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnIGZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnLmpzJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICBpdCgndGhyb3dzIGV4Y2VwdGlvbiBvbiBlbXB0eSBkYXRhIHBhcmFtZXRlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGxldCBjb25maWcgPSBuZXcgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZygpO1xyXG4gICAgICB9KS50b1Rocm93RXJyb3IoXCJUaGUgcmVzcG9uc2UgZGF0YSBzdXBwb3NlIHRvIGJlIGluIGFycmF5IGZvcm1cIik7XHJcbiAgIH0pO1xyXG4gICBcclxuICAgaXQoJ3Rocm93cyBleGNlcHRpb24gd2l0aCBhIG9iamVjdCB0eXBlIGRhdGEgcGFyYW1ldGVyIGluc3RlYWQgb2YgYXJyYXknLCBmdW5jdGlvbigpIHtcclxuICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBsZXQgZGF0YSA9IHt9O1xyXG4gICAgICAgICBsZXQgY29uZmlnID0gbmV3IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcoZGF0YSk7XHJcbiAgICAgIH0pLnRvVGhyb3dFcnJvcihcIlRoZSByZXNwb25zZSBkYXRhIHN1cHBvc2UgdG8gYmUgaW4gYXJyYXkgZm9ybVwiKTtcclxuICAgfSk7XHJcbiAgIFxyXG4gICBpdCgnY3JlYXRlcyBhIHZhbGlkIGNvbmZpZyBvYmplY3QnLCBmdW5jdGlvbigpIHtcclxuICAgICAgbGV0IGRhdGEgPSBbXTtcclxuICAgICAgbGV0IGNvbmZpZyA9IG5ldyBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnKGRhdGEpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGNvbmZpZy5uYW1lKS50b0JlKCdmb2xsb3dPblRhc2tEZWZuU2VhcmNoJyk7XHJcbiAgICAgIGV4cGVjdChjb25maWcubGltaXQpLnRvQmUoNTApO1xyXG4gICAgICBleHBlY3QoY29uZmlnLm1pbkxlbmd0aCkudG9CZSgxKTtcclxuICAgfSk7XHJcblxyXG59KTtcclxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IFRhc2tTdXBlcnZpc2lvblNlcnZpY2UgZnJvbSAnLi9UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlJztcclxuXHJcbmRlc2NyaWJlKCdUYXNrU3VwZXJ2aXNpb25TZXJ2aWNlLmpzJywgKCk9PntcclxuXHJcbiAgIGRlc2NyaWJlKCdnZXRDcmV3c0ZvclVzZXInLCAoKT0+e1xyXG5cclxuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBUYXNrU3VwZXJ2aXNpb25TZXJ2aWNlKCk7XHJcblxyXG4gICAgICBjb25zdCB1c2VySWQgPSAndXNlcic7XHJcbiAgICAgIGNvbnN0IHN1Y2Nlc3NIYW5kbGVyID0gZnVuY3Rpb24oKXt9O1xyXG4gICAgICBjb25zdCBmYWlsdXJlSGFuZGxlciA9IGZ1bmN0aW9uKCl7fTtcclxuXHJcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGphc21pbmUuQWpheC5pbnN0YWxsKCk7XHJcbiAgICAgICB9KTtcclxuXHJcbiAgICAgIGFmdGVyRWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgamFzbWluZS5BamF4LnVuaW5zdGFsbCgpO1xyXG4gICAgICAgfSk7XHJcblx0ICAgXHJcblxyXG5cdCAgIC8qKiBcclxuXHQgICBcclxuICAgICAgaXQoJ3Rocm93cyBhbiBlcnJvciB3aGVuIHVzZXIgaXMgbm90IHByb3ZpZGVkJywgKCk9PntcclxuICAgICAgICAgbGV0IHVuZGVmaW5lZFVzZXJJZDtcclxuICAgICAgICAgZXhwZWN0KCgpID0+IHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVuZGVmaW5lZFVzZXJJZCwgc3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICkpXHJcbiAgICAgICAgICAgIC50b1Rocm93RXJyb3IoJ3VzZXJJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgndGhyb3dzIGFuIGVycm9yIHdoZW4gdXNlciBpcyBibGFuayBzdHJpbmcnLCAoKT0+e1xyXG4gICAgICAgICBjb25zdCBibGFua1VzZXJJZCA9ICcnO1xyXG4gICAgICAgICBleHBlY3QoKCkgPT4gc2VydmljZS5nZXRDcmV3c0ZvclVzZXIoYmxhbmtVc2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlciApKVxyXG4gICAgICAgICAgICAudG9UaHJvd0Vycm9yKCd1c2VySWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Rocm93cyBhbiBlcnJvciB3aGVuIHN1Y2Nlc3MgaGFuZGxlciBpcyBub3QgcHJvdmlkZWQnLCAoKT0+e1xyXG4gICAgICAgICBsZXQgdW5kZWZpbmVkU3VjY2Vzc0hhbmRsZXI7XHJcbiAgICAgICAgIGV4cGVjdCgoKSA9PiBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHVuZGVmaW5lZFN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlciApKVxyXG4gICAgICAgICAgICAudG9UaHJvd0Vycm9yKCdzdWNjZXNzSGFuZGxlciBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgndGhyb3dzIGFuIGVycm9yIHdoZW4gc3VjY2VzcyBoYW5kbGVyIGlzIG5vdCBhIGZ1bmN0aW9uJywgKCk9PntcclxuICAgICAgICAgY29uc3Qgbm9uRnVuY3Rpb25TdWNjZXNzSGFuZGxlciA9ICdoZWxsbyc7XHJcbiAgICAgICAgIGV4cGVjdCgoKSA9PiBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIG5vbkZ1bmN0aW9uU3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICkpXHJcbiAgICAgICAgICAgIC50b1Rocm93RXJyb3IoJ3N1Y2Nlc3NIYW5kbGVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCd0aHJvd3MgYW4gZXJyb3Igd2hlbiBmYWlsdXJlIGhhbmRsZXIgaXMgbm90IHByb3ZpZGVkJywgKCk9PntcclxuICAgICAgICAgbGV0IHVuZGVmaW5lZEZhaWx1cmVIYW5kbGVyO1xyXG4gICAgICAgICBleHBlY3QoKCkgPT4gc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCBzdWNjZXNzSGFuZGxlciwgdW5kZWZpbmVkRmFpbHVyZUhhbmRsZXIgKSlcclxuICAgICAgICAgICAgLnRvVGhyb3dFcnJvcignZmFpbHVyZUhhbmRsZXIgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Rocm93cyBhbiBlcnJvciB3aGVuIGZhaWx1cmUgaGFuZGxlciBpcyBub3QgYSBmdW5jdGlvbicsICgpPT57XHJcbiAgICAgICAgIGNvbnN0IG5vbkZ1bmN0aW9uRmFpbHVyZUhhbmRsZXIgPSAnaGVsbG8nO1xyXG4gICAgICAgICBleHBlY3QoKCkgPT4gc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCBzdWNjZXNzSGFuZGxlciwgbm9uRnVuY3Rpb25GYWlsdXJlSGFuZGxlciApKVxyXG4gICAgICAgICAgICAudG9UaHJvd0Vycm9yKCdmYWlsdXJlSGFuZGxlciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnd2lsbCBtYWtlIGFuIGFqYXggY2FsbCB0byB0aGUgY29ycmVjdCB1cmwnLCAoKT0+e1xyXG4gICAgICAgICBzcHlPbigkLCAnYWpheCcpO1xyXG4gICAgICAgICBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlciApO1xyXG4gICAgICAgICBleHBlY3QoJC5hamF4LmNhbGxzLm1vc3RSZWNlbnQoKS5hcmdzWzBdLnVybCkudG9FcXVhbCgnL21haW50ZW5peC9yZXN0L2NyZXcvbGlzdCcpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCd3aWxsIG1ha2UgYW4gYWpheCBjYWxsIHdpdGggdGhlIGNvcnJlY3QgdHlwZScsICgpPT57XHJcbiAgICAgICAgIHNweU9uKCQsICdhamF4Jyk7XHJcbiAgICAgICAgIHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgc3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICk7XHJcbiAgICAgICAgIGV4cGVjdCgkLmFqYXguY2FsbHMubW9zdFJlY2VudCgpLmFyZ3NbMF0udHlwZSkudG9FcXVhbCgnR0VUJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3dpbGwgbWFrZSBhbiBhamF4IGNhbGwgd2l0aCB0aGUgY29ycmVjdCBkYXRhJywgKCk9PntcclxuICAgICAgICAgc3B5T24oJCwgJ2FqYXgnKTtcclxuICAgICAgICAgc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCBzdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKTtcclxuICAgICAgICAgbGV0IGV4cGVjdGVkRGF0YSA9IHsndXNlcklkJzogdXNlcklkfTtcclxuICAgICAgICAgZXhwZWN0KCQuYWpheC5jYWxscy5tb3N0UmVjZW50KCkuYXJnc1swXS5kYXRhKS50b0VxdWFsKGV4cGVjdGVkRGF0YSk7XHJcbiAgICAgIH0pO1xyXG5cdCAgKiovXHJcblxyXG4gICAgICBpdCgnd2lsbCBjYWxsIHRoZSBzdWNjZXNzIGhhbmRsZXIgd2hlbiB0aGUgYWpheCBjYWxsIGlzIHN1Y2Nlc3NmdWwnLCAoKT0+e1xyXG4gICAgICAgICBzcHlPbigkLCAnYWpheCcpLmFuZC5jYWxsRmFrZSggZnVuY3Rpb24oYWp4KSB7XHJcbiAgICAgICAgICAgIGFqeC5zdWNjZXNzKHt9KTtcclxuICAgICAgICAgfSk7XHJcblx0XHQgXHJcbiAgICAgICAgIC8qKiBjb25zdCBzcHlTdWNjZXNzSGFuZGxlciA9IGphc21pbmUuY3JlYXRlU3B5KCdzcHlTdWNjZXNzSGFuZGxlcicpO1xyXG4gICAgICAgICBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHNweVN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlciApO1xyXG4gICAgICAgICBleHBlY3Qoc3B5U3VjY2Vzc0hhbmRsZXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTsgKiovXHJcblx0XHQgXHJcblx0XHQgXHJcblx0XHQgLyoqXHJcblx0XHR2YXIgc3B5U3VjY2Vzc0hhbmRsZXIgPSBqYXNtaW5lLmNyZWF0ZVNweSgnc3VjY2VzczIyMicpO1xyXG5cdFx0dmFyIHNweUZhaWx1cmVIYW5kbGVyID0gamFzbWluZS5jcmVhdGVTcHkoJ2ZhaWx1cmUnKTtcclxuXHRcdGphc21pbmUuQWpheC53aXRoTW9jayhmdW5jdGlvbigpIHtcclxuXHRcdFx0c2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCBzcHlTdWNjZXNzSGFuZGxlciwgc3B5RmFpbHVyZUhhbmRsZXIgKTtcclxuXHRcdFx0ZXhwZWN0KHNweVN1Y2Nlc3NIYW5kbGVyKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcblx0XHR9KTsgKiovXHJcbiAgICAgIH0pO1xyXG4vKipcclxuICAgICAgaXQoJ3dpbGwgY2FsbCB0aGUgZXJyb3IgaGFuZGxlciB3aGVuIHRoZSBhamF4IGNhbGwgaXMgdW5zdWNjZXNzZnVsJywgKCk9PntcclxuICAgICAgICAgc3B5T24oJCwgJ2FqYXgnKS5hbmQuY2FsbEZha2UoIGZ1bmN0aW9uKGFqeCkge1xyXG4gICAgICAgICAgICBhanguZXJyb3Ioe30pO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgICAgY29uc3Qgc3B5RmFpbHVyZUhhbmRsZXIgPSBqYXNtaW5lLmNyZWF0ZVNweSgnc3B5RmFpbHVyZUhhbmRsZXInKTtcclxuICAgICAgICAgc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCBzdWNjZXNzSGFuZGxlciwgc3B5RmFpbHVyZUhhbmRsZXIgKTtcclxuICAgICAgICAgZXhwZWN0KHNweUZhaWx1cmVIYW5kbGVyKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgIH0pO1xyXG4qKi9cclxuXHJcbi8vICAgICAgaXQoJ3dpbGwgY2FsbCB0aGUgc3VjY2VzcyBoYW5kbGVyIHdpdGggZW1wdHkgbGlzdCB3aGVuIHVzZXIgYmVsb25ncyB0byBubyBjcmV3cycsICgpPT57XHJcbi8vXHJcbi8vICAgICAgICAgLy9cclxuLy8gICAgICAgICAvLyB0aGUgZm9sbG93aW5nIHRlc3QgZG9lcyBleGVyY2lzZSB0aGUgYmVoYXZpb3VyIGJ1dCBkb2VzIG5vdCByZWFsbHkgaGF2ZSBhbnl0aGluZyB0b1xyXG4vLyAgICAgICAgIC8vIGRvIHdpdGggdGhlIGxpc3QgYmVpbmcgcmV0dXJuZWQsIHRoZSBhamF4IGNhbGwgc2ltcGx5IGNhbGxzIHRoZSBzdWNjZXNzIGhhbmRsZXIgd2l0aFxyXG4vLyAgICAgICAgIC8vIHdoYXRldmVyIGRhdGEgaXQgaXMgcHJvdmlkZWQuLi4gc2VlIHRlc3QgYmVsb3cgYXMgcHJvb2ZcclxuLy8gICAgICAgICAvL1xyXG4vLyAgICAgICAgIC8vIEkgdGhpbmsgdGhpcyBhbmQgdGhlIGJlaGF2aW91cnMgYmVsb3cgYXJlIGFsbCBhY3R1YWxseSBiZWhhdmlvdXJzIG9mIHRoZSBlbmRwb2ludFxyXG4vLyAgICAgICAgIC8vIGFuZCBub3QgdGhpcyBzZXJ2aWNlXHJcbi8vICAgICAgICAgLy9cclxuLy8gICAgICAgICAvLyBzbyBpbnN0ZWFkIG9mIHRoaXMgdGVzdCwgbWF5YmUgd2Ugc2hvdWxkIGp1c3QgYmUgd3JpdGluZyBhIHRlc3QgdG8gXCJleHBlY3RcIiB0aGF0IHRoZVxyXG4vLyAgICAgICAgIC8vIHN1Y2Nlc3NIYW5kbGVyIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuIHRoZSBhamF4IGNhbGwgaXMgc3VjY2Vzc2Z1bFxyXG4vLyAgICAgICAgIC8vIChhbHJlYWR5IHdyaXR0ZW4gYWJvdmUpXHJcbi8vICAgICAgICAgLy9cclxuLy9cclxuLy8gICAgICAgICBjb25zdCBleHBlY3RlZFJlc3VsdCA9ICdleHBlY3RlZCc7XHJcbi8vXHJcbi8vICAgICAgICAgc3B5T24oJCwgJ2FqYXgnKS5hbmQuY2FsbEZha2UoIChlKSA9PiB7XHJcbi8vICAgICAgICAgICAgcmV0dXJuIGUuc3VjY2VzcyggZXhwZWN0ZWRSZXN1bHQsICdmYWtlIHRleHRTdGF0dXMnLCAnZmFrZSBqcVhIUicgKTtcclxuLy8gICAgICAgICB9KTtcclxuLy9cclxuLy8gICAgICAgICBsZXQgYWN0dWFsUmVzdWx0O1xyXG4vLyAgICAgICAgIGNvbnN0IHVzZXJJZCA9ICd1c2VyJztcclxuLy8gICAgICAgICBjb25zdCBzdWNjZXNzSGFuZGxlciA9IGZ1bmN0aW9uKGRhdGEpeyBhY3R1YWxSZXN1bHQgPSBkYXRhOyB9O1xyXG4vLyAgICAgICAgIGNvbnN0IGZhaWx1cmVIYW5kbGVyID0gZnVuY3Rpb24oKXt9O1xyXG4vL1xyXG4vLyAgICAgICAgIHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgc3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICk7XHJcbi8vXHJcbi8vICAgICAgICAgZXhwZWN0KGFjdHVhbFJlc3VsdCkudG9FcXVhbChleHBlY3RlZFJlc3VsdCk7XHJcbi8vXHJcbi8vICAgICAgfSk7XHJcbi8vXHJcbi8vXHJcbi8vXHJcbi8vICAgICAgaXQoJ3dpbGwgY2FsbCB0aGUgc3VjY2VzcyBoYW5kbGVyIHdpdGggdGhlIGxpc3Qgb2YgY3Jld3MgdG8gd2hpY2ggdXNlciBiZWxvbmdzIHdoZW4gdGhlIHVzZXIgYmVsb25ncyB0byBhbGwgY3Jld3MnLCAoKT0+e1xyXG4vL1xyXG4vLyAgICAgIH0pO1xyXG4vL1xyXG4vLyAgICAgIGl0KCd3aWxsIGNhbGwgdGhlIHN1Y2Nlc3MgaGFuZGxlciB3aXRoIHRoZSBsaXN0IG9mIGNyZXdzIHRvIHdoaWNoIHVzZXIgYmVsb25ncyB3aGVuIHRoZSB1c2VyIGJlbG9uZ3MgdG8gc29tZSBjcmV3cycsICgpPT57XHJcbi8vXHJcbi8vICAgICAgfSk7XHJcbi8vXHJcbi8vICAgICAgaXQoJ3dpbGwgY2FsbCB0aGUgZmFpbHVyZSBoYW5kbGVyIHdpdGggRXJyb3IgbXNnIHdoZW4gcmVzdCBFbmQgUG9pbnQgaXMgbm90IGFjY2Vzc2libGUnLCAoKT0+e1xyXG4vL1xyXG4vLyAgICAgIH0pO1xyXG5cclxuICAgfSk7XHJcblxyXG59KTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEYXRlVGltZVZhbGlkYXRvciB7XG5cbiAgIGNvbnN0cnVjdG9yKCkge1xuICAgfVxuXG4gICBcbiAgIHN0YXRpYyB2YWxpZGF0ZUhvdXJzKHZhbHVlKSB7XG4gICAgICAvLyBUaGlzIGlzIGJhc2VkIG9uIHRoZSBOVU1CRVIoOSw1KSBjb25zdHJhaW50IGZvclxuICAgICAgLy8gc2NoZWRfbGFib3VyX3JvbGUuc2NoZWRfaHIgYW5kIHNjaGVkX2xhYm91cl9yb2xlLmFjdHVhbF9oclxuICAgICAgbGV0IHNwbGl0ID0gdmFsdWUuc3BsaXQoJy4nKTtcbiAgICAgIGlmICggc3BsaXQubGVuZ3RoID4gMCApIHtcbiAgICAgICAgIGlmICggc3BsaXRbMF0ubGVuZ3RoID4gNCApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgIH1cbiAgICAgICAgIGlmICggc3BsaXQubGVuZ3RoID09IDIgKSB7XG4gICAgICAgICAgICBpZiAoIHNwbGl0WzFdLmxlbmd0aCA+IDUgKSB7XG4gICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICB9IGVsc2UgaWYgKHNwbGl0Lmxlbmd0aCA+IDIgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgIH1cblxuICBcbiAgIC8vXG4gICAvLyBwcml2YXRlIG1ldGhvZHNcbiAgIC8vXG5cbiAgIHN0YXRpYyB2YWxpZGF0ZURhdGVGb3JtYXQoZGF0ZVN0cikge1xuICAgICAgaWYoICEgZGF0ZVN0ciApIHtcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignZGF0ZVN0ciBpcyBtYW5kYXRvcnkuJyk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGRhdGVTdHIgIT09ICdzdHJpbmcnKSAge1xuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRlU3RyIGlzIG5vdCBhIHN0cmluZycpO1xuICAgICAgfVxuXG4gICAgICAvLyByZWdleCBleGFtcGxlOiBkZC1NTU0teXl5eVxuICAgICAgY29uc3QgZGF0ZUZvcm1hdCA9IC9eKChbMC05XSl8KFswLTJdWzAtOV0pfChbM11bMC0xXSkpXFwtKEpBTnxGRUJ8TUFSfEFQUnxNQVl8SlVOfEpVTHxBVUd8U0VQfE9DVHxOT1Z8REVDKVxcLVxcZHs0fSQvO1xuICAgICAgY29uc3QgbWF0Y2hBcnJheSA9IGRhdGVTdHIubWF0Y2goZGF0ZUZvcm1hdCk7XG5cbiAgICAgIGlmKCBtYXRjaEFycmF5ID09IG51bGwgKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdkYXRlU3RyIGhhcyBpbnZhbGlkIGZvcm1hdC4nKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAgc3RhdGljIHZhbGlkYXRlVGltZUZvcm1hdCh0aW1lU3RyKSB7XG4gICAgICBpZiggISB0aW1lU3RyICl7XG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3RpbWVTdHIgaXMgbWFuZGF0b3J5LicpO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB0aW1lU3RyICE9PSAnc3RyaW5nJykgIHtcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcigndGltZVN0ciBpcyBub3QgYSBzdHJpbmcuJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIHJlZ2V4IGV4YW1wbGU6IGhoOm1tXG4gICAgICBjb25zdCB0aW1lRm9ybWF0ID0gL14kfF4oKFswMV1bMC05XSl8KDJbMC0zXSkpOlswLTVdWzAtOV0kLztcbiAgICAgIGNvbnN0IG1hdGNoQXJyYXkgPSB0aW1lU3RyLm1hdGNoKHRpbWVGb3JtYXQpO1xuXG4gICAgICBpZiggbWF0Y2hBcnJheSA9PSBudWxsICkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndGltZVN0ciBoYXMgaW52YWxpZCBmb3JtYXQuJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgfVxuXG59IiwidmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsIGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaCAoZSkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXHJcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XHJcbn1cclxuXHJcbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cclxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3NcclxuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnO1xyXG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLyohXG4gKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3N0ZWZhbnBlbm5lci9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuICogQHZlcnNpb24gICAzLjMuMVxuICovXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gICAgKGdsb2JhbC5FUzZQcm9taXNlID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBvYmplY3RPckZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xufVxuXG52YXIgX2lzQXJyYXkgPSB1bmRlZmluZWQ7XG5pZiAoIUFycmF5LmlzQXJyYXkpIHtcbiAgX2lzQXJyYXkgPSBmdW5jdGlvbiAoeCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH07XG59IGVsc2Uge1xuICBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG59XG5cbnZhciBpc0FycmF5ID0gX2lzQXJyYXk7XG5cbnZhciBsZW4gPSAwO1xudmFyIHZlcnR4TmV4dCA9IHVuZGVmaW5lZDtcbnZhciBjdXN0b21TY2hlZHVsZXJGbiA9IHVuZGVmaW5lZDtcblxudmFyIGFzYXAgPSBmdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBhcmcpIHtcbiAgcXVldWVbbGVuXSA9IGNhbGxiYWNrO1xuICBxdWV1ZVtsZW4gKyAxXSA9IGFyZztcbiAgbGVuICs9IDI7XG4gIGlmIChsZW4gPT09IDIpIHtcbiAgICAvLyBJZiBsZW4gaXMgMiwgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gc2NoZWR1bGUgYW4gYXN5bmMgZmx1c2guXG4gICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXlcbiAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuXG4gICAgaWYgKGN1c3RvbVNjaGVkdWxlckZuKSB7XG4gICAgICBjdXN0b21TY2hlZHVsZXJGbihmbHVzaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxlRmx1c2goKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHNldFNjaGVkdWxlcihzY2hlZHVsZUZuKSB7XG4gIGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjtcbn1cblxuZnVuY3Rpb24gc2V0QXNhcChhc2FwRm4pIHtcbiAgYXNhcCA9IGFzYXBGbjtcbn1cblxudmFyIGJyb3dzZXJXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcbnZhciBicm93c2VyR2xvYmFsID0gYnJvd3NlcldpbmRvdyB8fCB7fTtcbnZhciBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG52YXIgaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAoe30pLnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJztcblxuLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcbnZhciBpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cbi8vIG5vZGVcbmZ1bmN0aW9uIHVzZU5leHRUaWNrKCkge1xuICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcbiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO1xuICB9O1xufVxuXG4vLyB2ZXJ0eFxuZnVuY3Rpb24gdXNlVmVydHhUaW1lcigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2ZXJ0eE5leHQoZmx1c2gpO1xuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmbHVzaCk7XG4gIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIG5vZGUuZGF0YSA9IGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyO1xuICB9O1xufVxuXG4vLyB3ZWIgd29ya2VyXG5mdW5jdGlvbiB1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcbiAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXNlU2V0VGltZW91dCgpIHtcbiAgLy8gU3RvcmUgc2V0VGltZW91dCByZWZlcmVuY2Ugc28gZXM2LXByb21pc2Ugd2lsbCBiZSB1bmFmZmVjdGVkIGJ5XG4gIC8vIG90aGVyIGNvZGUgbW9kaWZ5aW5nIHNldFRpbWVvdXQgKGxpa2Ugc2lub24udXNlRmFrZVRpbWVycygpKVxuICB2YXIgZ2xvYmFsU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdsb2JhbFNldFRpbWVvdXQoZmx1c2gsIDEpO1xuICB9O1xufVxuXG52YXIgcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHZhciBjYWxsYmFjayA9IHF1ZXVlW2ldO1xuICAgIHZhciBhcmcgPSBxdWV1ZVtpICsgMV07XG5cbiAgICBjYWxsYmFjayhhcmcpO1xuXG4gICAgcXVldWVbaV0gPSB1bmRlZmluZWQ7XG4gICAgcXVldWVbaSArIDFdID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gYXR0ZW1wdFZlcnR4KCkge1xuICB0cnkge1xuICAgIHZhciByID0gcmVxdWlyZTtcbiAgICB2YXIgdmVydHggPSByKCd2ZXJ0eCcpO1xuICAgIHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7XG4gICAgcmV0dXJuIHVzZVZlcnR4VGltZXIoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG4gIH1cbn1cblxudmFyIHNjaGVkdWxlRmx1c2ggPSB1bmRlZmluZWQ7XG4vLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuaWYgKGlzTm9kZSkge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTmV4dFRpY2soKTtcbn0gZWxzZSBpZiAoQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcbn0gZWxzZSBpZiAoaXNXb3JrZXIpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU1lc3NhZ2VDaGFubmVsKCk7XG59IGVsc2UgaWYgKGJyb3dzZXJXaW5kb3cgPT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICBzY2hlZHVsZUZsdXNoID0gYXR0ZW1wdFZlcnR4KCk7XG59IGVsc2Uge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlU2V0VGltZW91dCgpO1xufVxuXG5mdW5jdGlvbiB0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzO1xuXG4gIHZhciBwYXJlbnQgPSB0aGlzO1xuXG4gIHZhciBjaGlsZCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKG5vb3ApO1xuXG4gIGlmIChjaGlsZFtQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbWFrZVByb21pc2UoY2hpbGQpO1xuICB9XG5cbiAgdmFyIF9zdGF0ZSA9IHBhcmVudC5fc3RhdGU7XG5cbiAgaWYgKF9zdGF0ZSkge1xuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY2FsbGJhY2sgPSBfYXJndW1lbnRzW19zdGF0ZSAtIDFdO1xuICAgICAgYXNhcChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpbnZva2VDYWxsYmFjayhfc3RhdGUsIGNoaWxkLCBjYWxsYmFjaywgcGFyZW50Ll9yZXN1bHQpO1xuICAgICAgfSk7XG4gICAgfSkoKTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuICB9XG5cbiAgcmV0dXJuIGNoaWxkO1xufVxuXG4vKipcbiAgYFByb21pc2UucmVzb2x2ZWAgcmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIGJlY29tZSByZXNvbHZlZCB3aXRoIHRoZVxuICBwYXNzZWQgYHZhbHVlYC4gSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHJlc29sdmUoMSk7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gdmFsdWUgPT09IDFcbiAgfSk7XG4gIGBgYFxuXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKDEpO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gdmFsdWUgPT09IDFcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVzb2x2ZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QW55fSB2YWx1ZSB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVzb2x2ZWQgd2l0aFxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIGZ1bGZpbGxlZCB3aXRoIHRoZSBnaXZlblxuICBgdmFsdWVgXG4qL1xuZnVuY3Rpb24gcmVzb2x2ZShvYmplY3QpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG5cbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIF9yZXNvbHZlKHByb21pc2UsIG9iamVjdCk7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG52YXIgUFJPTUlTRV9JRCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygxNik7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG52YXIgUEVORElORyA9IHZvaWQgMDtcbnZhciBGVUxGSUxMRUQgPSAxO1xudmFyIFJFSkVDVEVEID0gMjtcblxudmFyIEdFVF9USEVOX0VSUk9SID0gbmV3IEVycm9yT2JqZWN0KCk7XG5cbmZ1bmN0aW9uIHNlbGZGdWxmaWxsbWVudCgpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xufVxuXG5mdW5jdGlvbiBjYW5ub3RSZXR1cm5Pd24oKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG59XG5cbmZ1bmN0aW9uIGdldFRoZW4ocHJvbWlzZSkge1xuICB0cnkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW47XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBlcnJvcjtcbiAgICByZXR1cm4gR0VUX1RIRU5fRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJ5VGhlbih0aGVuLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG4gIHRyeSB7XG4gICAgdGhlbi5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuKSB7XG4gIGFzYXAoZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG4gICAgdmFyIGVycm9yID0gdHJ5VGhlbih0aGVuLCB0aGVuYWJsZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG4gICAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcblxuICAgICAgX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cbiAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgIH1cbiAgfSwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG4gIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IEZVTEZJTExFRCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgIF9yZWplY3QocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gIH0gZWxzZSB7XG4gICAgc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkKSB7XG4gIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmIHRoZW4kJCA9PT0gdGhlbiAmJiBtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yLnJlc29sdmUgPT09IHJlc29sdmUpIHtcbiAgICBoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodGhlbiQkID09PSBHRVRfVEhFTl9FUlJPUikge1xuICAgICAgX3JlamVjdChwcm9taXNlLCBHRVRfVEhFTl9FUlJPUi5lcnJvcik7XG4gICAgfSBlbHNlIGlmICh0aGVuJCQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24odGhlbiQkKSkge1xuICAgICAgaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgIF9yZWplY3QocHJvbWlzZSwgc2VsZkZ1bGZpbGxtZW50KCkpO1xuICB9IGVsc2UgaWYgKG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgZ2V0VGhlbih2YWx1ZSkpO1xuICB9IGVsc2Uge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xuICBpZiAocHJvbWlzZS5fb25lcnJvcikge1xuICAgIHByb21pc2UuX29uZXJyb3IocHJvbWlzZS5fcmVzdWx0KTtcbiAgfVxuXG4gIHB1Ymxpc2gocHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG4gIHByb21pc2UuX3N0YXRlID0gRlVMRklMTEVEO1xuXG4gIGlmIChwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggIT09IDApIHtcbiAgICBhc2FwKHB1Ymxpc2gsIHByb21pc2UpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHJldHVybjtcbiAgfVxuICBwcm9taXNlLl9zdGF0ZSA9IFJFSkVDVEVEO1xuICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cbiAgYXNhcChwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gIHZhciBfc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuICB2YXIgbGVuZ3RoID0gX3N1YnNjcmliZXJzLmxlbmd0aDtcblxuICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXG4gIF9zdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIFJFSkVDVEVEXSA9IG9uUmVqZWN0aW9uO1xuXG4gIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xuICAgIGFzYXAocHVibGlzaCwgcGFyZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoKHByb21pc2UpIHtcbiAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XG4gIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cbiAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjaGlsZCA9IHVuZGVmaW5lZCxcbiAgICAgIGNhbGxiYWNrID0gdW5kZWZpbmVkLFxuICAgICAgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldO1xuICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xuXG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKGRldGFpbCk7XG4gICAgfVxuICB9XG5cbiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcbn1cblxuZnVuY3Rpb24gRXJyb3JPYmplY3QoKSB7XG4gIHRoaXMuZXJyb3IgPSBudWxsO1xufVxuXG52YXIgVFJZX0NBVENIX0VSUk9SID0gbmV3IEVycm9yT2JqZWN0KCk7XG5cbmZ1bmN0aW9uIHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGU7XG4gICAgcmV0dXJuIFRSWV9DQVRDSF9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG4gIHZhciBoYXNDYWxsYmFjayA9IGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuICAgICAgdmFsdWUgPSB1bmRlZmluZWQsXG4gICAgICBlcnJvciA9IHVuZGVmaW5lZCxcbiAgICAgIHN1Y2NlZWRlZCA9IHVuZGVmaW5lZCxcbiAgICAgIGZhaWxlZCA9IHVuZGVmaW5lZDtcblxuICBpZiAoaGFzQ2FsbGJhY2spIHtcbiAgICB2YWx1ZSA9IHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXG4gICAgaWYgKHZhbHVlID09PSBUUllfQ0FUQ0hfRVJST1IpIHtcbiAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuICAgICAgdmFsdWUgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCBjYW5ub3RSZXR1cm5Pd24oKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhbHVlID0gZGV0YWlsO1xuICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gIH1cblxuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAvLyBub29wXG4gIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG4gICAgICBfcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChmYWlsZWQpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gRlVMRklMTEVEKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IFJFSkVDVEVEKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG4gIHRyeSB7XG4gICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpIHtcbiAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuICAgICAgX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgX3JlamVjdChwcm9taXNlLCBlKTtcbiAgfVxufVxuXG52YXIgaWQgPSAwO1xuZnVuY3Rpb24gbmV4dElkKCkge1xuICByZXR1cm4gaWQrKztcbn1cblxuZnVuY3Rpb24gbWFrZVByb21pc2UocHJvbWlzZSkge1xuICBwcm9taXNlW1BST01JU0VfSURdID0gaWQrKztcbiAgcHJvbWlzZS5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTtcbn1cblxuZnVuY3Rpb24gRW51bWVyYXRvcihDb25zdHJ1Y3RvciwgaW5wdXQpIHtcbiAgdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaWYgKCF0aGlzLnByb21pc2VbUFJPTUlTRV9JRF0pIHtcbiAgICBtYWtlUHJvbWlzZSh0aGlzLnByb21pc2UpO1xuICB9XG5cbiAgaWYgKGlzQXJyYXkoaW5wdXQpKSB7XG4gICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcbiAgICB0aGlzLmxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICB0aGlzLl9yZW1haW5pbmcgPSBpbnB1dC5sZW5ndGg7XG5cbiAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xuICAgICAgdGhpcy5fZW51bWVyYXRlKCk7XG4gICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBfcmVqZWN0KHRoaXMucHJvbWlzZSwgdmFsaWRhdGlvbkVycm9yKCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRpb25FcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGg7XG4gIHZhciBfaW5wdXQgPSB0aGlzLl9pbnB1dDtcblxuICBmb3IgKHZhciBpID0gMDsgdGhpcy5fc3RhdGUgPT09IFBFTkRJTkcgJiYgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdGhpcy5fZWFjaEVudHJ5KF9pbnB1dFtpXSwgaSk7XG4gIH1cbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9lYWNoRW50cnkgPSBmdW5jdGlvbiAoZW50cnksIGkpIHtcbiAgdmFyIGMgPSB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yO1xuICB2YXIgcmVzb2x2ZSQkID0gYy5yZXNvbHZlO1xuXG4gIGlmIChyZXNvbHZlJCQgPT09IHJlc29sdmUpIHtcbiAgICB2YXIgX3RoZW4gPSBnZXRUaGVuKGVudHJ5KTtcblxuICAgIGlmIChfdGhlbiA9PT0gdGhlbiAmJiBlbnRyeS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGVuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLl9yZW1haW5pbmctLTtcbiAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IGVudHJ5O1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gUHJvbWlzZSkge1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgYyhub29wKTtcbiAgICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgZW50cnksIF90aGVuKTtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyBjKGZ1bmN0aW9uIChyZXNvbHZlJCQpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUkJChlbnRyeSk7XG4gICAgICB9KSwgaSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlJCQoZW50cnkpLCBpKTtcbiAgfVxufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uIChzdGF0ZSwgaSwgdmFsdWUpIHtcbiAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HKSB7XG4gICAgdGhpcy5fcmVtYWluaW5nLS07XG5cbiAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVzdWx0W2ldID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgfVxufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uIChwcm9taXNlLCBpKSB7XG4gIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblxuICBzdWJzY3JpYmUocHJvbWlzZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KEZVTEZJTExFRCwgaSwgdmFsdWUpO1xuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChSRUpFQ1RFRCwgaSwgcmVhc29uKTtcbiAgfSk7XG59O1xuXG4vKipcbiAgYFByb21pc2UuYWxsYCBhY2NlcHRzIGFuIGFycmF5IG9mIHByb21pc2VzLCBhbmQgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoXG4gIGlzIGZ1bGZpbGxlZCB3aXRoIGFuIGFycmF5IG9mIGZ1bGZpbGxtZW50IHZhbHVlcyBmb3IgdGhlIHBhc3NlZCBwcm9taXNlcywgb3JcbiAgcmVqZWN0ZWQgd2l0aCB0aGUgcmVhc29uIG9mIHRoZSBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBiZSByZWplY3RlZC4gSXQgY2FzdHMgYWxsXG4gIGVsZW1lbnRzIG9mIHRoZSBwYXNzZWQgaXRlcmFibGUgdG8gcHJvbWlzZXMgYXMgaXQgcnVucyB0aGlzIGFsZ29yaXRobS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcbiAgbGV0IHByb21pc2UyID0gcmVzb2x2ZSgyKTtcbiAgbGV0IHByb21pc2UzID0gcmVzb2x2ZSgzKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIFRoZSBhcnJheSBoZXJlIHdvdWxkIGJlIFsgMSwgMiwgMyBdO1xuICB9KTtcbiAgYGBgXG5cbiAgSWYgYW55IG9mIHRoZSBgcHJvbWlzZXNgIGdpdmVuIHRvIGBhbGxgIGFyZSByZWplY3RlZCwgdGhlIGZpcnN0IHByb21pc2VcbiAgdGhhdCBpcyByZWplY3RlZCB3aWxsIGJlIGdpdmVuIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSByZXR1cm5lZCBwcm9taXNlcydzXG4gIHJlamVjdGlvbiBoYW5kbGVyLiBGb3IgZXhhbXBsZTpcblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcbiAgbGV0IHByb21pc2UyID0gcmVqZWN0KG5ldyBFcnJvcihcIjJcIikpO1xuICBsZXQgcHJvbWlzZTMgPSByZWplY3QobmV3IEVycm9yKFwiM1wiKSk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyFcbiAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAvLyBlcnJvci5tZXNzYWdlID09PSBcIjJcIlxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCBhbGxcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBlbnRyaWVzIGFycmF5IG9mIHByb21pc2VzXG4gIEBwYXJhbSB7U3RyaW5nfSBsYWJlbCBvcHRpb25hbCBzdHJpbmcgZm9yIGxhYmVsaW5nIHRoZSBwcm9taXNlLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IHByb21pc2UgdGhhdCBpcyBmdWxmaWxsZWQgd2hlbiBhbGwgYHByb21pc2VzYCBoYXZlIGJlZW5cbiAgZnVsZmlsbGVkLCBvciByZWplY3RlZCBpZiBhbnkgb2YgdGhlbSBiZWNvbWUgcmVqZWN0ZWQuXG4gIEBzdGF0aWNcbiovXG5mdW5jdGlvbiBhbGwoZW50cmllcykge1xuICByZXR1cm4gbmV3IEVudW1lcmF0b3IodGhpcywgZW50cmllcykucHJvbWlzZTtcbn1cblxuLyoqXG4gIGBQcm9taXNlLnJhY2VgIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaCBpcyBzZXR0bGVkIGluIHRoZSBzYW1lIHdheSBhcyB0aGVcbiAgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gc2V0dGxlLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAyJyk7XG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gcmVzdWx0ID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIGl0IHdhcyByZXNvbHZlZCBiZWZvcmUgcHJvbWlzZTFcbiAgICAvLyB3YXMgcmVzb2x2ZWQuXG4gIH0pO1xuICBgYGBcblxuICBgUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0XG4gIHNldHRsZWQgcHJvbWlzZSBtYXR0ZXJzLiBGb3IgZXhhbXBsZSwgZXZlbiBpZiBvdGhlciBwcm9taXNlcyBnaXZlbiB0byB0aGVcbiAgYHByb21pc2VzYCBhcnJheSBhcmd1bWVudCBhcmUgcmVzb2x2ZWQsIGJ1dCB0aGUgZmlyc3Qgc2V0dGxlZCBwcm9taXNlIGhhc1xuICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWRcbiAgcHJvbWlzZSB3aWxsIGJlY29tZSByZWplY3RlZDpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdwcm9taXNlIDInKSk7XG4gICAgfSwgMTAwKTtcbiAgfSk7XG5cbiAgUHJvbWlzZS5yYWNlKFtwcm9taXNlMSwgcHJvbWlzZTJdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnNcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBwcm9taXNlIDIgYmVjYW1lIHJlamVjdGVkIGJlZm9yZVxuICAgIC8vIHByb21pc2UgMSBiZWNhbWUgZnVsZmlsbGVkXG4gIH0pO1xuICBgYGBcblxuICBBbiBleGFtcGxlIHJlYWwtd29ybGQgdXNlIGNhc2UgaXMgaW1wbGVtZW50aW5nIHRpbWVvdXRzOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgUHJvbWlzZS5yYWNlKFthamF4KCdmb28uanNvbicpLCB0aW1lb3V0KDUwMDApXSlcbiAgYGBgXG5cbiAgQG1ldGhvZCByYWNlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gcHJvbWlzZXMgYXJyYXkgb2YgcHJvbWlzZXMgdG8gb2JzZXJ2ZVxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSB3aGljaCBzZXR0bGVzIGluIHRoZSBzYW1lIHdheSBhcyB0aGUgZmlyc3QgcGFzc2VkXG4gIHByb21pc2UgdG8gc2V0dGxlLlxuKi9cbmZ1bmN0aW9uIHJhY2UoZW50cmllcykge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gIGlmICghaXNBcnJheShlbnRyaWVzKSkge1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuICAgICAgcmV0dXJuIHJlamVjdChuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAgYFByb21pc2UucmVqZWN0YCByZXR1cm5zIGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBwYXNzZWQgYHJlYXNvbmAuXG4gIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICByZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG4gIH0pO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG4gIH0pO1xuICBgYGBcblxuICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuXG4gIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgLy8gQ29kZSBoZXJlIGRvZXNuJ3QgcnVuIGJlY2F1c2UgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQhXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdXSE9PUFMnXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIHJlamVjdFxuICBAc3RhdGljXG4gIEBwYXJhbSB7QW55fSByZWFzb24gdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGguXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIGdpdmVuIGByZWFzb25gLlxuKi9cbmZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIF9yZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIG5lZWRzUmVzb2x2ZXIoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3InKTtcbn1cblxuZnVuY3Rpb24gbmVlZHNOZXcoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XG59XG5cbi8qKlxuICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG4gIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsIHdoaWNoXG4gIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvblxuICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICBUZXJtaW5vbG9neVxuICAtLS0tLS0tLS0tLVxuXG4gIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG4gIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cbiAgLSBgdmFsdWVgIGlzIGFueSBsZWdhbCBKYXZhU2NyaXB0IHZhbHVlIChpbmNsdWRpbmcgdW5kZWZpbmVkLCBhIHRoZW5hYmxlLCBvciBhIHByb21pc2UpLlxuICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cbiAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxuICAtIGBzZXR0bGVkYCB0aGUgZmluYWwgcmVzdGluZyBzdGF0ZSBvZiBhIHByb21pc2UsIGZ1bGZpbGxlZCBvciByZWplY3RlZC5cblxuICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cbiAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWRcbiAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSByZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRoZVxuICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS5cblxuICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcbiAgcHJvbWlzZSwgdGhlbiB0aGUgb3JpZ2luYWwgcHJvbWlzZSdzIHNldHRsZWQgc3RhdGUgd2lsbCBtYXRjaCB0aGUgdmFsdWUnc1xuICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcbiAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxuICBpdHNlbGYgZnVsZmlsbC5cblxuXG4gIEJhc2ljIFVzYWdlOlxuICAtLS0tLS0tLS0tLS1cblxuICBgYGBqc1xuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIC8vIG9uIHN1Y2Nlc3NcbiAgICByZXNvbHZlKHZhbHVlKTtcblxuICAgIC8vIG9uIGZhaWx1cmVcbiAgICByZWplY3QocmVhc29uKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgLy8gb24gcmVqZWN0aW9uXG4gIH0pO1xuICBgYGBcblxuICBBZHZhbmNlZCBVc2FnZTpcbiAgLS0tLS0tLS0tLS0tLS0tXG5cbiAgUHJvbWlzZXMgc2hpbmUgd2hlbiBhYnN0cmFjdGluZyBhd2F5IGFzeW5jaHJvbm91cyBpbnRlcmFjdGlvbnMgc3VjaCBhc1xuICBgWE1MSHR0cFJlcXVlc3Rgcy5cblxuICBgYGBqc1xuICBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gdGhpcy5ET05FKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cbiAgYGBganNcbiAgUHJvbWlzZS5hbGwoW1xuICAgIGdldEpTT04oJy9wb3N0cycpLFxuICAgIGdldEpTT04oJy9jb21tZW50cycpXG4gIF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXtcbiAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG4gICAgdmFsdWVzWzFdIC8vID0+IGNvbW1lbnRzSlNPTlxuXG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfSk7XG4gIGBgYFxuXG4gIEBjbGFzcyBQcm9taXNlXG4gIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQGNvbnN0cnVjdG9yXG4qL1xuZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcikge1xuICB0aGlzW1BST01JU0VfSURdID0gbmV4dElkKCk7XG4gIHRoaXMuX3Jlc3VsdCA9IHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdO1xuXG4gIGlmIChub29wICE9PSByZXNvbHZlcikge1xuICAgIHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1bmN0aW9uJyAmJiBuZWVkc1Jlc29sdmVyKCk7XG4gICAgdGhpcyBpbnN0YW5jZW9mIFByb21pc2UgPyBpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcikgOiBuZWVkc05ldygpO1xuICB9XG59XG5cblByb21pc2UuYWxsID0gYWxsO1xuUHJvbWlzZS5yYWNlID0gcmFjZTtcblByb21pc2UucmVzb2x2ZSA9IHJlc29sdmU7XG5Qcm9taXNlLnJlamVjdCA9IHJlamVjdDtcblByb21pc2UuX3NldFNjaGVkdWxlciA9IHNldFNjaGVkdWxlcjtcblByb21pc2UuX3NldEFzYXAgPSBzZXRBc2FwO1xuUHJvbWlzZS5fYXNhcCA9IGFzYXA7XG5cblByb21pc2UucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogUHJvbWlzZSxcblxuICAvKipcbiAgICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcbiAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxuICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG4gICAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBDaGFpbmluZ1xuICAgIC0tLS0tLS0tXG4gIFxuICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG4gICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxuICAgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgcmV0dXJuIHVzZXIubmFtZTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG4gICAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcbiAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuICAgIH0pO1xuICBcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG4gICAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cbiAgICB9KTtcbiAgICBgYGBcbiAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQXNzaW1pbGF0aW9uXG4gICAgLS0tLS0tLS0tLS0tXG4gIFxuICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG4gICAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxuICAgIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBoYW5kbGVyLiBUaGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgdGhlbiBiZSBwZW5kaW5nXG4gICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG4gICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFNpbXBsZSBFeGFtcGxlXG4gICAgLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgU3luY2hyb25vdXMgRXhhbXBsZVxuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgbGV0IHJlc3VsdDtcbiAgXG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH1cbiAgICBgYGBcbiAgXG4gICAgRXJyYmFjayBFeGFtcGxlXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFJlc3VsdChmdW5jdGlvbihyZXN1bHQsIGVycil7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH1cbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgUHJvbWlzZSBFeGFtcGxlO1xuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgIC8vIHN1Y2Nlc3NcbiAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBBZHZhbmNlZCBFeGFtcGxlXG4gICAgLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgU3luY2hyb25vdXMgRXhhbXBsZVxuICBcbiAgICBgYGBqYXZhc2NyaXB0XG4gICAgbGV0IGF1dGhvciwgYm9va3M7XG4gIFxuICAgIHRyeSB7XG4gICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG4gICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfVxuICAgIGBgYFxuICBcbiAgICBFcnJiYWNrIEV4YW1wbGVcbiAgXG4gICAgYGBganNcbiAgXG4gICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuICBcbiAgICB9XG4gIFxuICAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XG4gIFxuICAgIH1cbiAgXG4gICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XG4gICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBQcm9taXNlIEV4YW1wbGU7XG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBmaW5kQXV0aG9yKCkuXG4gICAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cbiAgICAgIHRoZW4oZnVuY3Rpb24oYm9va3Mpe1xuICAgICAgICAvLyBmb3VuZCBib29rc1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBAbWV0aG9kIHRoZW5cbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcbiAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cbiAgdGhlbjogdGhlbixcblxuICAvKipcbiAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG4gICAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC5cbiAgXG4gICAgYGBganNcbiAgICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcbiAgICB9XG4gIFxuICAgIC8vIHN5bmNocm9ub3VzXG4gICAgdHJ5IHtcbiAgICAgIGZpbmRBdXRob3IoKTtcbiAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9XG4gIFxuICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgY2F0Y2hcbiAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuICAnY2F0Y2gnOiBmdW5jdGlvbiBfY2F0Y2gob25SZWplY3Rpb24pIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0aW9uKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gcG9seWZpbGwoKSB7XG4gICAgdmFyIGxvY2FsID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGxvY2FsID0gZ2xvYmFsO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGxvY2FsID0gc2VsZjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXG4gICAgaWYgKFApIHtcbiAgICAgICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwcm9taXNlVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBzaWxlbnRseSBpZ25vcmVkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvbWlzZVRvU3RyaW5nID09PSAnW29iamVjdCBQcm9taXNlXScgJiYgIVAuY2FzdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2U7XG59XG5cbnBvbHlmaWxsKCk7XG4vLyBTdHJhbmdlIGNvbXBhdC4uXG5Qcm9taXNlLnBvbHlmaWxsID0gcG9seWZpbGw7XG5Qcm9taXNlLlByb21pc2UgPSBQcm9taXNlO1xuXG5yZXR1cm4gUHJvbWlzZTtcblxufSkpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVzNi1wcm9taXNlLm1hcCIsIi8qIGdsb2JhbCBUYWJ1bGF0b3IgKi9cclxuaW1wb3J0IFRhc2tTdXBlcnZpc2lvblNlcnZpY2UgZnJvbSAnLi9UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlJztcclxuaW1wb3J0IERhdGVUaW1lVmFsaWRhdG9yIGZyb20gJy4uLy4uLy4uL2NvbW1vbi92YWxpZGF0aW9uL0RhdGVUaW1lVmFsaWRhdG9yJztcclxuaW1wb3J0IERhdGVUaW1lSGVscGVyIGZyb20gJy4uLy4uLy4uL2NvbW1vbi91dGlsL0RhdGVUaW1lSGVscGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIge1xyXG5cclxuICAgY29uc3RydWN0b3IocGFybXMpIHtcclxuICAgICAgdGhpcy51c2VySWQgPSBwYXJtcy51c2VySWQ7XHJcblxyXG4gICAgICBpZiAoIXRoaXMudXNlcklkKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcigndXNlcklkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmNyZXdzRmllbGRJZCA9IHBhcm1zLmNyZXdzRmllbGRJZDtcclxuXHJcbiAgICAgIGlmICghdGhpcy5jcmV3c0ZpZWxkSWQpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjcmV3c0ZpZWxkSWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBjcmV3c0ZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jcmV3c0ZpZWxkSWQpO1xyXG4gICAgICBpZiAoIWNyZXdzRmllbGQgfHwgY3Jld3NGaWVsZC50YWdOYW1lICE9ICdTRUxFQ1QnKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignY3Jld3NGaWVsZElkIG11c3QgYmUgYSBTRUxFQ1QgZWxlbWVudCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnNlcnZpY2UgPSBwYXJtcy5UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlIHx8IG5ldyBUYXNrU3VwZXJ2aXNpb25TZXJ2aWNlKCk7XHJcbiAgICAgIHRoaXMuaXNBbGxvd2VkVG9TZWFyY2ggPSBwYXJtcy5pc0FsbG93ZWRUb1NlYXJjaCA9PT0gJ3RydWUnO1xyXG4gICAgICB0aGlzLmlzQWxsb3dlZFRvRWRpdFNjaGVkbGVkSG91cnMgPSBwYXJtcy5pc0FsbG93ZWRUb0VkaXRTY2hlZGxlZEhvdXJzID09PSAndHJ1ZSc7XHJcbiAgICAgIHRoaXMuaXNBbGxvd2VkVG9FZGl0QWN0dWFsSG91cnMgPSBwYXJtcy5pc0FsbG93ZWRUb0VkaXRBY3R1YWxIb3VycyA9PT0gJ3RydWUnO1xyXG4gICAgICB0aGlzLnN0YXJ0RGF0ZVdpZGdldElkID0gcGFybXMuc3RhcnRGaWVsZElkO1xyXG4gICAgICB0aGlzLmVuZERhdGVXaWRnZXRJZCA9IHBhcm1zLmVuZEZpZWxkSWQ7XHJcbiAgICAgIHRoaXMuc2hvd0NvbXBsZXRlSWQgPSBwYXJtcy5zaG93Q29tcGxldGVJZDtcclxuICAgICAgdGhpcy5zZWFyY2hCdXR0b25JZCA9IHBhcm1zLnNlYXJjaEJ1dHRvbklkO1xyXG4gICAgICB0aGlzLnNlYXJjaFJlc3VsdHNJZCA9IHBhcm1zLnNlYXJjaFJlc3VsdHNJZDtcclxuICAgICAgdGhpcy5ub1NlYXJjaFJlc3VsdHNNZXNzYWdlID0gcGFybXMubm9TZWFyY2hSZXN1bHRzTWVzc2FnZTtcclxuICAgICAgdGhpcy5sYWJvclJvd0VsYXNwZWRUaW1lVGhyZXNob2xkID0gcGFybXMubGFib3JSb3dFbGFzcGVkVGltZVRocmVzaG9sZDtcclxuXHJcbiAgICAgIHRoaXMuZGVmYXVsdFNob3dDb21wbGV0ZSA9IHRydWU7XHJcbiAgICAgIHRoaXMuaXNTY2hlZHVsZWRIb3Vyc0NlbGxFZGl0YWJsZS5iaW5kKHRoaXMpO1xyXG4gICAgICB0aGlzLmhhbmRsZVNjaGVkdWxlSG91cnNFZGl0LmJpbmQodGhpcyk7XHJcbiAgICAgIHRoaXMuaGFuZGxlQWN0dWFsSG91cnNFZGl0LmJpbmQodGhpcyk7XHJcbiAgICAgIHRoaXMuYWN0dWFsSG91ckNlbGxGb3JtYXR0ZXIuYmluZCh0aGlzKTtcclxuICAgfVxyXG5cclxuICAgZ2V0U2VydmljZUluc3RhbmNlKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlO1xyXG4gICB9XHJcblxyXG4gICBpbml0KCkge1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICB0aGlzLmluaXRTaG93Q29tcGxldGVUYXNrc1dpZGdldCgpO1xyXG4gICAgICAgICB0aGlzLmluaXRSZXN1bHRzVGFibGUoKTtcclxuICAgICAgICAgdGhpcy5pbml0U2VhcmNoQnV0dG9uKCk7XHJcblxyXG4gICAgICAgICBQcm9taXNlLmFsbChbdGhpcy5pbml0Q3Jld3NXaWRnZXQoKSwgdGhpcy5pbml0U3RhcnRBbmRFbmRXaWRnZXRzKCldKS50aGVuKChyZXN1bHRzKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucG9wdWxhdGVDcmV3c1dpZGdldChyZXN1bHRzWzBdKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGFydEFuZEVuZFdpZGdldHMocmVzdWx0c1sxXSk7XHJcbiAgICAgICAgICAgIHRoaXMucGVyZm9ybVNlYXJjaCgpLnRoZW4oKCkgPT4gcmVzb2x2ZSgpKTtcclxuICAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgaW5pdENyZXdzV2lkZ2V0KCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmdldENyZXdzRm9yVXNlcih0aGlzLnVzZXJJZCk7XHJcbiAgIH1cclxuXHJcbiAgIGluaXRTdGFydEFuZEVuZFdpZGdldHMoKSB7XHJcbiAgICAgIGlmICghdGhpcy51c2VySWQpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1c2VySWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgIHRoaXMudmFsaWRhdGVTdGFydEVuZFdpZGdldElkcygpO1xyXG4gICAgICAgICBsZXQgc3RhcnRGaWVsZElkcyA9IHRoaXMuYnVpbGRGaWVsZElkc0ZvckRhdGVUaW1lV2lkZ2V0KHRoaXMuc3RhcnREYXRlV2lkZ2V0SWQpO1xyXG4gICAgICAgICBsZXQgZW5kRmllbGRJZHMgPSB0aGlzLmJ1aWxkRmllbGRJZHNGb3JEYXRlVGltZVdpZGdldCh0aGlzLmVuZERhdGVXaWRnZXRJZCk7XHJcbiAgICAgICAgIHRoaXMuc2V0U3RhcnRFbmRFbGVtQXR0cnMoc3RhcnRGaWVsZElkcywgZW5kRmllbGRJZHMpO1xyXG4gICAgICAgICB0aGlzLnZhbGlkYXRlU3RhcnRFbmRFbGVtcygpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhdGNoIChleGNlcHRpb24pIHtcclxuICAgICAgICAgY29uc29sZS5lcnJvcihcImluaXRTdGFydEFuZEVuZFdpZGdldHNcIiwgZXhjZXB0aW9uKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBUaGUgZGF0ZSBmaWVsZHMgZm9yIHRoZSBEYXRlVGltZSB3aWRnZXRzXHJcbiAgICAgIC8vIGRvIG5vdCBwcm92aWRlIHN1ZmZpY2llbnQgdmFsaWRhdGlvbiBzbyB3ZSB3aWxsIGRpc2FibGUgdGhlbS5cclxuICAgICAgdGhpcy5zdGFydERhdGVFbGVtLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5lbmREYXRlRWxlbS5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmdldERlZmF1bHRTdGFydEFuZEVuZERhdGVzKHRoaXMudXNlcklkKTtcclxuICAgfVxyXG5cclxuICAgaW5pdFNob3dDb21wbGV0ZVRhc2tzV2lkZ2V0KCkge1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNob3dDb21wbGV0ZUlkKS5jaGVja2VkID0gdGhpcy5kZWZhdWx0U2hvd0NvbXBsZXRlO1xyXG4gICB9XHJcblxyXG5cclxuICAgaW5pdFJlc3VsdHNUYWJsZSgpIHtcclxuICAgICAgLy8gVGhlIGZpZWxkIG5hbWVzIG1hdGNoIHRob3NlIGluOlxyXG4gICAgICAvLyAgICBjb20ubXhpLm14LndlYi5yZXN0LnRhc2suQ3Jld1Rhc2tMYWJvdXJSZXNwb25zZVxyXG4gICAgICBjb25zdCBsaXN0T2ZMYWJvdXJBdHRycyA9IFsndGVjaG5pY2lhbicsICdsYWJvdXJTa2lsbCcsICdsYWJvdXJTdGF0dXMnLCAnam9iU3RvcFJlYXNvbicsICdlbGFwc2VkSG91cnNNaW51dGVzJyxcclxuICAgICAgICAgJ3NjaGVkdWxlZEhvdXJzJywgJ2FjdHVhbEhvdXJzJ1xyXG4gICAgICBdO1xyXG5cclxuICAgICAgLy8gTm90ZTogaXQgYXBwZWFycyB0aGF0IFRhYnVsYXRvciBoYXMgZGlmZmljdWx0eSBpZiB2aXNpYmxlOmZhbHNlIGZpZWxkcyBhcmUgYWZ0ZXIgb3RoZXIgZmllbGRzLFxyXG4gICAgICAvLyBzbyBjb25maWd1cmUgdGhlbSBmaXJzdC5cdCAgXHJcbiAgICAgIHRoaXMudGFibGUgPSBuZXcgVGFidWxhdG9yKFwiI1wiICsgdGhpcy5zZWFyY2hSZXN1bHRzSWQsIHtcclxuICAgICAgICAgY29sdW1uczogW1xyXG4gICAgICAgICAgICB7IHRpdGxlOiAnVGFzayBJZCcsIGZpZWxkOiAndGFza0lkJywgdmlzaWJsZTogZmFsc2UgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ0xhYm91ciBSb3cgSWQnLCBmaWVsZDogJ2xhYm91clJvd0lkJywgdmlzaWJsZTogZmFsc2UgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ0Zyb20gSm9iIFN0b3AnLCBmaWVsZDogJ2lzRnJvbUpvYlN0b3AnLCB2aXNpYmxlOiBmYWxzZSB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnTGluZSBObycsIGZpZWxkOiAnbGluZU5vJywgc29ydGVyOiAnbnVtYmVyJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdUYXNrJywgZmllbGQ6ICd0YXNrTmFtZScsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnVGFzayBTdGF0dXMnLCBmaWVsZDogJ3Rhc2tTdGF0dXMnLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ1Rhc2sgQ2xhc3MgLSBTdWJjbGFzcycsIGZpZWxkOiAndGFza0NsYXNzU3ViY2xhc3MnLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ1Rhc2sgUHJpb3JpdHknLCBmaWVsZDogJ3Rhc2tQcmlvcml0eScsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnQWlyY3JhZnQnLCBmaWVsZDogJ2FpcmNyYWZ0Jywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdXb3JrIFBhY2thZ2UnLCBmaWVsZDogJ3dvcmtwYWNrYWdlJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdXb3JrIExvY2F0aW9uJywgZmllbGQ6ICd3b3JrTG9jYXRpb24nLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ1dvcmsgQXJlYScsIGZpZWxkOiAnd29ya0FyZWEnLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ1NjaGVkdWxlZCBTdGFydCBEYXRlJywgZmllbGQ6ICdzY2hlZHVsZWRTdGFydERhdGUnLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ0FjdHVhbCBTdGFydCBEYXRlJywgZmllbGQ6ICdhY3R1YWxTdGFydERhdGUnLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyBmaWVsZDogJ1NlbGVjdGVkJywgYWxpZ246ICdjZW50ZXInLCB3aWR0aDogNTAsIGhlYWRlclNvcnQ6IGZhbHNlLCBmb3JtYXR0ZXI6ICgpID0+IHsgcmV0dXJuICc8aW5wdXQgaWQ9XCJjaGVja0JveFwiIHR5cGU9XCJjaGVja2JveFwiPic7IH0gfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ1RlY2huaWNpYW4nLCBmaWVsZDogJ3RlY2huaWNpYW4nLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicgfSxcclxuICAgICAgICAgICAgeyB0aXRsZTogJ1NraWxsJywgZmllbGQ6ICdsYWJvdXJTa2lsbCcsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnTGFib3VyIFJvdyBTdGF0dXMnLCBmaWVsZDogJ2xhYm91clN0YXR1cycsIHNvcnRlcjogJ3N0cmluZycsIGFsaWduOiAnY2VudGVyJyB9LFxyXG4gICAgICAgICAgICB7IHRpdGxlOiAnSm9iIFN0b3AgUmVhc29uJywgZmllbGQ6ICdqb2JTdG9wUmVhc29uJywgc29ydGVyOiAnc3RyaW5nJywgYWxpZ246ICdjZW50ZXInIH0sXHJcbiAgICAgICAgICAgIHsgdGl0bGU6ICdFbGFwc2VkIFRpbWUnLCBmaWVsZDogJ2VsYXBzZWRIb3Vyc01pbnV0ZXMnLCBzb3J0ZXI6ICdzdHJpbmcnLCBhbGlnbjogJ2NlbnRlcicsIGZvcm1hdHRlcjogdGhpcy5pc0VsYXBzZWRUaW1lR3JlYXRlclRoYW5UaHJlc2hvbGQuYmluZCh0aGlzKSB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgIHRpdGxlOiAnU2NoZWQuIEhvdXJzJyxcclxuICAgICAgICAgICAgICAgZmllbGQ6ICdzY2hlZHVsZWRIb3VycycsXHJcbiAgICAgICAgICAgICAgIHNvcnRlcjogJ3N0cmluZycsXHJcbiAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgICAgZWRpdG9yOiAnaW5wdXQnLFxyXG4gICAgICAgICAgICAgICB2YWxpZGF0b3I6IFsnbWluOiAwJywgdGhpcy52YWxpZGF0ZUhvdXJzXSxcclxuICAgICAgICAgICAgICAgZWRpdGFibGU6IHRoaXMuaXNTY2hlZHVsZWRIb3Vyc0NlbGxFZGl0YWJsZSxcclxuICAgICAgICAgICAgICAgY2VsbEVkaXRlZDogdGhpcy5oYW5kbGVTY2hlZHVsZUhvdXJzRWRpdFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgIHRpdGxlOiAnQWN0dWFsIEhvdXJzJyxcclxuICAgICAgICAgICAgICAgZmllbGQ6ICdhY3R1YWxIb3VycycsXHJcbiAgICAgICAgICAgICAgIHNvcnRlcjogJ3N0cmluZycsXHJcbiAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgICAgZWRpdG9yOiAnaW5wdXQnLFxyXG4gICAgICAgICAgICAgICB2YWxpZGF0b3I6IFsnbWluOiAwJywgdGhpcy52YWxpZGF0ZUhvdXJzXSxcclxuICAgICAgICAgICAgICAgZWRpdGFibGU6IHRoaXMuaXNBY3R1YWxIb3Vyc0NlbGxFZGl0YWJsZSxcclxuICAgICAgICAgICAgICAgY2VsbEVkaXRlZDogdGhpcy5oYW5kbGVBY3R1YWxIb3Vyc0VkaXQsXHJcbiAgICAgICAgICAgICAgIGZvcm1hdHRlcjogdGhpcy5hY3R1YWxIb3VyQ2VsbEZvcm1hdHRlclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIF0sXHJcbiAgICAgICAgIGRhdGFTb3J0ZWQ6IChzb3J0ZXJzLCByb3dzKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgY2hlY2sgaXMgZG9uZSBhcyB0aGUgY2FsbGJhY2sgaXMgY2FsbGVkIGJlZm9yZSB0aGUgdGFibGUgaGFzIGJlZW4gY29tcGxldGVseSBpbnN0YW50aWF0ZWRcclxuICAgICAgICAgICAgLy8gQXMgYSByZXN1bHQsIGFuIHVuZGVmaW5lZCBvYmplY3QgZXJyb3IgbWVzc2FnZSB3aWxsIG9jY3VyIGFzIHRoZSBzZXRHcm91cEJ5IGlzIGJlaW5nIGNhbGxlZCBvbiBhbiB1bmRlZmluZWQgdGFibGVcclxuICAgICAgICAgICAgaWYgKHRoaXMudGFibGUpIHtcclxuICAgICAgICAgICAgICAgaWYgKHNvcnRlcnMuc29tZSgoYXR0cikgPT4gbGlzdE9mTGFib3VyQXR0cnMuaW5kZXhPZihhdHRyLmZpZWxkKSA+PSAwKSkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnRhYmxlLnNldEdyb3VwQnkoKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZS5zZXRHcm91cEJ5KFwidGFza0lkXCIpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgfSxcclxuICAgICAgICAgZ3JvdXBIZWFkZXI6ICh2YWx1ZSwgY291bnQsIGRhdGEsIGdyb3VwKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhWzBdLnRhc2tOYW1lICsgXCI8c3BhbiBzdHlsZT0nY29sb3I6IzAwMDsgbWFyZ2luLWxlZnQ6MTBweDsnPihcIiArIGNvdW50ICsgXCIgaXRlbXMpPC9zcGFuPlwiO1xyXG4gICAgICAgICB9LFxyXG4gICAgICAgICBncm91cFRvZ2dsZUVsZW1lbnQ6IFwiaGVhZGVyXCIsXHJcbiAgICAgICAgIHBsYWNlaG9sZGVyOiB0aGlzLm5vU2VhcmNoUmVzdWx0c01lc3NhZ2VcclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcblxyXG4gICBhY3R1YWxIb3VyQ2VsbEZvcm1hdHRlcihjZWxsKSB7XHJcblxyXG4gICAgICBpZiAoIWNlbGwpIHtcclxuICAgICAgICAgcmV0dXJuIGNlbGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmFjdHVhbEhvdXJHcmVhdGVyVGhhblNjaGVkdWxlZEhvdXJzKGNlbGwpKSB7XHJcbiAgICAgICAgIC8vZm9ybWF0IGNlbGwgYmFja2dyb3VuZCB0byB5ZWxsb3dcclxuICAgICAgICAgY2VsbC5nZXRFbGVtZW50KCkuY2xhc3NMaXN0LmFkZChcImhpZ2hsaWdodEFjdHVhbEhvdXJzQ2VsbFwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHRpbWUgPSBjZWxsLmdldFZhbHVlKCk7XHJcbiAgICAgIC8vIFJldHVybiBlbXB0eSBzdHJpbmcgaWYgQWN0dWFsIEhvdXIgdmFsdWUgaXMgYmxhbmtcclxuICAgICAgLy8gb3RoZXJ3aXNlIHJldHVybiBBY3R1YWwgSG91cnMgdmFsdWUuXHJcbiAgICAgIHJldHVybiAodGltZSA/IHRpbWUgOiAnJyk7XHJcbiAgIH1cclxuXHJcbiAgIGFjdHVhbEhvdXJHcmVhdGVyVGhhblNjaGVkdWxlZEhvdXJzKGNlbGwpIHtcclxuXHJcbiAgICAgIGxldCBhY3R1YWxIb3VycyA9IGNlbGwuZ2V0VmFsdWUoKTtcclxuICAgICAgaWYgKCFhY3R1YWxIb3Vycykge1xyXG4gICAgICAgICByZXR1cm4gYWN0dWFsSG91cnM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBzY2hlZHVsZUhvdXJzID0gY2VsbC5nZXRSb3coKS5nZXREYXRhKCkuc2NoZWR1bGVkSG91cnM7XHJcbiAgICAgIGlmICghc2NoZWR1bGVIb3Vycykge1xyXG4gICAgICAgICByZXR1cm4gc2NoZWR1bGVIb3VycztcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHBhcnNlSW50KGFjdHVhbEhvdXJzKSA+IHBhcnNlSW50KHNjaGVkdWxlSG91cnMpO1xyXG4gICB9XHJcblxyXG4gICBpbml0U2VhcmNoQnV0dG9uKCkge1xyXG4gICAgICBsZXQgJGJ1dHRvbiA9ICQoJyMnICsgdGhpcy5zZWFyY2hCdXR0b25JZCk7XHJcbiAgICAgIGlmICh0aGlzLmlzQWxsb3dlZFRvU2VhcmNoKSB7XHJcbiAgICAgICAgICRidXR0b24uc2hvdygpO1xyXG4gICAgICAgICAkYnV0dG9uLmNsaWNrKChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnBlcmZvcm1TZWFyY2goKTtcclxuICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgICRidXR0b24uaGlkZSgpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHBlcmZvcm1TZWFyY2goKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgIGlmICh0aGlzLmlzQWxsb3dlZFRvU2VhcmNoKSB7XHJcbiAgICAgICAgICAgIGxldCBhcmdzID0ge1xyXG4gICAgICAgICAgICAgICAnY3Jld0lkJzogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jcmV3c0ZpZWxkSWQpLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAnc3RhcnREYXRlVGltZSc6IHRoaXMuZm9ybWF0RGF0ZVRpbWUodGhpcy5zdGFydERhdGVXaWRnZXRJZCksXHJcbiAgICAgICAgICAgICAgICdlbmREYXRlVGltZSc6IHRoaXMuZm9ybWF0RGF0ZVRpbWUodGhpcy5lbmREYXRlV2lkZ2V0SWQpLFxyXG4gICAgICAgICAgICAgICAnc2hvd0NvbXBsZXRlVGFza3MnOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNob3dDb21wbGV0ZUlkKS5jaGVja2VkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLnBlcmZvcm1TZWFyY2goYXJncykudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVzdWx0c1RhYmxlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgLy9cclxuICAgLy8gcHJpdmF0ZSBtZXRob2RzXHJcbiAgIC8vXHJcblxyXG4gICAvLyBFeHBlY3QgY3Jld3MgdG8gYmU6IFt7Y29kZSxuYW1lLGlkfV1cclxuICAgcG9wdWxhdGVDcmV3c1dpZGdldChjcmV3cykge1xyXG4gICAgICAvLyBDbGVhciBleGlzdGluZyBvcHRpb25zLlxyXG4gICAgICAkKCcjJyArIHRoaXMuY3Jld3NGaWVsZElkKS5maW5kKCdvcHRpb24nKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgIC8vIFNvcnQgdGhlIGNyZXdzLlxyXG4gICAgICBjcmV3cy5zb3J0KHRoaXMuY29tcGFyZUNyZXdBbHBoYW51bWVyaWNhbGx5KTtcclxuXHJcbiAgICAgIC8vIEFkZCBwcm92aWRlZCBjcmV3cyBhcyBvcHRpb25zLCBpZiBwcm92aWRlZC5cclxuICAgICAgaWYgKGNyZXdzKSB7XHJcbiAgICAgICAgIGxldCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNyZXdzRmllbGRJZCk7XHJcbiAgICAgICAgIGxldCBzZWxlY3RPcHRpb25zID0gc2VsZWN0Lm9wdGlvbnM7XHJcbiAgICAgICAgIGNyZXdzLmZvckVhY2goKGNyZXcsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgICAgICAgICBvcHRpb24udGV4dCA9IGNyZXcubGFiZWw7XHJcbiAgICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGNyZXcuaWQ7XHJcbiAgICAgICAgICAgIHNlbGVjdE9wdGlvbnMuYWRkKG9wdGlvbik7XHJcbiAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgLy8gU2V0IHRoZSBmaXJzdCBjcmV3IGFzIHRoZSBkZWZhdWx0LlxyXG4gICAgICAgICBzZWxlY3Quc2VsZWN0ZWRJbmRleCA9IDA7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgY29tcGFyZUNyZXdBbHBoYW51bWVyaWNhbGx5KGEsIGIpIHtcclxuICAgICAgaWYgKGEubGFiZWwgPCBiLmxhYmVsKSByZXR1cm4gLTE7XHJcbiAgICAgIGlmIChhLmxhYmVsID4gYi5sYWJlbCkgcmV0dXJuIDE7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICB9XHJcblxyXG4gICAvLyBFeHBlY3QgbWVzc2FnZSB0byBiZSBhIHN0cmluZ1xyXG4gICBoYW5kbGVGYWlsdXJlVG9HZXRDcmV3c0ZvclVzZXIobWVzc2FnZSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgIH1cclxuXHJcbiAgIHZhbGlkYXRlU3RhcnRFbmRXaWRnZXRJZHMoKSB7XHJcbiAgICAgIGlmICghdGhpcy5zdGFydERhdGVXaWRnZXRJZCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXJ0RmllbGRJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodHlwZW9mIHRoaXMuc3RhcnREYXRlV2lkZ2V0SWQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3RhcnRGaWVsZElkIGlzIG5vdCBhIHN0cmluZycpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy5lbmREYXRlV2lkZ2V0SWQpIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlbmRGaWVsZElkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5lbmREYXRlV2lkZ2V0SWQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignZW5kRmllbGRJZCBpcyBub3QgYSBzdHJpbmcnKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICBidWlsZEZpZWxkSWRzRm9yRGF0ZVRpbWVXaWRnZXQod2lkZ2V0SWQpIHtcclxuICAgICAgLy8gVGhlc2UgaWRzIHdlcmUgZGV0ZXJtaW5lZCBieSBsb29raW5nIGF0IHRoZSBjdXN0b20gdGFnIERhdGVUaW1lRmllbGRcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgZGF0ZUZpZWxkSWQ6IHdpZGdldElkICsgJ18kREFURSQnLFxyXG4gICAgICAgICB0aW1lRmllbGRJZDogd2lkZ2V0SWQgKyAnXyRUSU1FJCcsXHJcbiAgICAgICAgIHRpbWVab25lRmllbGRJZDogd2lkZ2V0SWQgKyAnXyRUSU1FWk9ORV9ESVNQTEFZJCcsXHJcbiAgICAgICAgIHN0YXJ0UGlja2VySWQ6IHdpZGdldElkICsgJ19TZWxlY3RCdG4nXHJcbiAgICAgIH07XHJcbiAgIH1cclxuXHJcbiAgIHNldFN0YXJ0RW5kRWxlbUF0dHJzKHN0YXJ0RGF0ZVdpZGdldElkcywgZW5kRGF0ZVdpZGdldElkcykge1xyXG4gICAgICB0aGlzLnN0YXJ0RGF0ZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGFydERhdGVXaWRnZXRJZHMuZGF0ZUZpZWxkSWQpO1xyXG4gICAgICB0aGlzLnN0YXJ0VGltZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGFydERhdGVXaWRnZXRJZHMudGltZUZpZWxkSWQpO1xyXG4gICAgICB0aGlzLnN0YXJ0VGltZVpvbmVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RhcnREYXRlV2lkZ2V0SWRzLnRpbWVab25lRmllbGRJZCk7XHJcbiAgICAgIHRoaXMuc3RhcnRQaWNrZXJFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RhcnREYXRlV2lkZ2V0SWRzLnN0YXJ0UGlja2VySWQpO1xyXG5cclxuICAgICAgdGhpcy5lbmREYXRlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVuZERhdGVXaWRnZXRJZHMuZGF0ZUZpZWxkSWQpO1xyXG4gICAgICB0aGlzLmVuZFRpbWVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZW5kRGF0ZVdpZGdldElkcy50aW1lRmllbGRJZCk7XHJcbiAgICAgIHRoaXMuZW5kVGltZVpvbmVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZW5kRGF0ZVdpZGdldElkcy50aW1lWm9uZUZpZWxkSWQpO1xyXG4gICAgICB0aGlzLmVuZFBpY2tlckVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbmREYXRlV2lkZ2V0SWRzLnN0YXJ0UGlja2VySWQpO1xyXG4gICB9XHJcblxyXG4gICB2YWxpZGF0ZVN0YXJ0RW5kRWxlbXMoKSB7XHJcbiAgICAgIGlmICghdGhpcy5zdGFydERhdGVFbGVtKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3RhcnQgZGF0ZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgRE9NLicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy5zdGFydFRpbWVFbGVtKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3RhcnQgdGltZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgRE9NLicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy5zdGFydFRpbWVab25lRWxlbSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXJ0IHRpbWUgem9uZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgRE9NLicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy5zdGFydFBpY2tlckVsZW0pIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydCBkYXRlIHBpY2tlciBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgRE9NLicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMuZW5kRGF0ZUVsZW0pIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdlbmQgZGF0ZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgRE9NLicpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy5lbmRUaW1lRWxlbSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VuZCB0aW1lIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIHRoZSBET00uJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLmVuZFRpbWVab25lRWxlbSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VuZCB0aW1lIHpvbmUgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIERPTS4nKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMuZW5kUGlja2VyRWxlbSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2VuZCBkYXRlIHBpY2tlciBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgRE9NLicpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIHNldFN0YXJ0QW5kRW5kV2lkZ2V0cyhkZWZhdWx0U3RhcnRFbmRWYWx1ZXMpIHtcclxuICAgICAgdGhpcy5zdGFydERhdGVFbGVtLnZhbHVlID0gZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLnN0YXJ0RGF0ZTtcclxuICAgICAgdGhpcy5zdGFydFRpbWVFbGVtLnZhbHVlID0gZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLnN0YXJ0VGltZTtcclxuICAgICAgdGhpcy5zdGFydFRpbWVab25lRWxlbS52YWx1ZSA9IGRlZmF1bHRTdGFydEVuZFZhbHVlcy5zdGFydFRpbWVab25lO1xyXG5cclxuICAgICAgdGhpcy5lbmREYXRlRWxlbS52YWx1ZSA9IGRlZmF1bHRTdGFydEVuZFZhbHVlcy5lbmREYXRlO1xyXG4gICAgICB0aGlzLmVuZFRpbWVFbGVtLnZhbHVlID0gZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLmVuZFRpbWU7XHJcbiAgICAgIHRoaXMuZW5kVGltZVpvbmVFbGVtLnZhbHVlID0gZGVmYXVsdFN0YXJ0RW5kVmFsdWVzLmVuZFRpbWVab25lO1xyXG4gICB9XHJcblxyXG5cclxuICAgdXBkYXRlUmVzdWx0c1RhYmxlKHJlc3BvbnNlKSB7XHJcbiAgICAgIC8vIFRoZSByZXNwb25zZSBpcyBhIGpzb24gbGlzdCBvZiBvYmplY3RzIGdlbmVyYXRlZCBmcm9tOlxyXG4gICAgICAvLyAgICBjb20ubXhpLm14LndlYi5yZXN0LnRhc2suQ3Jld1Rhc2tMYWJvdXJSZXNwb25zZVxyXG4gICAgICBsZXQgYWRkVG9Ub3AgPSB0cnVlO1xyXG4gICAgICB0aGlzLnRhYmxlLmNsZWFyRGF0YSgpO1xyXG4gICAgICB0aGlzLnRhYmxlLmFkZERhdGEocmVzcG9uc2UsIGFkZFRvVG9wKTtcclxuICAgICAgdGhpcy50YWJsZS5zZXRTb3J0KFt7IGNvbHVtbjogJ2xpbmVObycsIGRpcjogJ2FzYycgfV0pO1xyXG4gICB9XHJcblxyXG5cclxuICAgLy8gRm9ybWF0IHRoZSBkYXRlIGFuZCB0aW1lIHRvIHRoYXQgZXhwZWN0ZWQgYnkgY29tLm14aS5teC5jb21tb24udXRpbHMuRGF0YVR5cGVVdGlsc1xyXG4gICBmb3JtYXREYXRlVGltZShkYXRlVGltZVdpZGdldElkKSB7XHJcbiAgICAgIGxldCBmaWVsZElkcyA9IHRoaXMuYnVpbGRGaWVsZElkc0ZvckRhdGVUaW1lV2lkZ2V0KGRhdGVUaW1lV2lkZ2V0SWQpO1xyXG5cclxuICAgICAgbGV0IGRhdGVWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpZWxkSWRzLmRhdGVGaWVsZElkKS52YWx1ZTtcclxuICAgICAgbGV0IHRpbWVWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpZWxkSWRzLnRpbWVGaWVsZElkKS52YWx1ZTtcclxuXHJcbiAgICAgIHJldHVybiBkYXRlVmFsdWUgKyAnICcgKyB0aW1lVmFsdWU7XHJcbiAgIH1cclxuXHJcbiAgIGlzU2NoZWR1bGVkSG91cnNDZWxsRWRpdGFibGUoY2VsbCkge1xyXG4gICAgICBpZiAodGhpcy5pc0FsbG93ZWRUb0VkaXRTY2hlZGxlZEhvdXJzKSB7XHJcbiAgICAgICAgIGxldCByb3dEYXRhID0gY2VsbC5nZXRSb3coKS5nZXREYXRhKCk7XHJcbiAgICAgICAgIGlmIChyb3dEYXRhLmlzRnJvbUpvYlN0b3AgJiYgcm93RGF0YS5sYWJvdXJTdGF0dXMgPT0gJ0FDVFYnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICB9XHJcblxyXG4gICBpc0FjdHVhbEhvdXJzQ2VsbEVkaXRhYmxlKGNlbGwpIHtcclxuICAgICAgaWYgKHRoaXMuaXNBbGxvd2VkVG9FZGl0QWN0dWFsSG91cnMpIHtcclxuICAgICAgICAgbGV0IHJvd0RhdGEgPSBjZWxsLmdldFJvdygpLmdldERhdGEoKTtcclxuICAgICAgICAgaWYgKHJvd0RhdGEubGFib3VyU3RhdHVzID09ICdDT01QTEVURScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgIH1cclxuXHJcbiAgIGlzRWxhcHNlZFRpbWVHcmVhdGVyVGhhblRocmVzaG9sZChjZWxsKSB7XHJcbiAgICAgIGxldCB0aW1lID0gY2VsbC5nZXRWYWx1ZSgpO1xyXG4gICAgICBpZiAodGltZSkge1xyXG4gICAgICAgICBsZXQgZGVjaW1hbFRpbWUgPSBEYXRlVGltZVZhbGlkYXRvci5jb252ZXJ0VGltZVRvRGVjaW1hbCh0aW1lKTtcclxuICAgICAgICAgaWYgKGRlY2ltYWxUaW1lID4gcGFyc2VGbG9hdCh0aGlzLmxhYm9yUm93RWxhc3BlZFRpbWVUaHJlc2hvbGQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIjxzcGFuIGNsYXNzPSdlbGFwc2VkVGltZUV4Y2VlZHNUaHJlc2hvbGQnPlwiICsgdGltZSArIFwiPC9zcGFuPlwiO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aW1lO1xyXG4gICB9XHJcblxyXG4gICB2YWxpZGF0ZUhvdXJzKGNlbGwsIHZhbHVlKSB7XHJcbiAgICAgIHJldHVybiBEYXRlVGltZVZhbGlkYXRvci52YWxpZGF0ZUhvdXJzKHZhbHVlKTtcclxuICAgfVxyXG5cclxuICAgaGFuZGxlU2NoZWR1bGVIb3Vyc0VkaXQoY2VsbCkge1xyXG4gICAgICBsZXQgcm93RGF0YSA9IGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpO1xyXG4gICAgICB0aGlzLnNlcnZpY2UudXBkYXRlU2NoZWR1bGVkSG91cnMoXHJcbiAgICAgICAgIHJvd0RhdGEudGFza0lkLFxyXG4gICAgICAgICByb3dEYXRhLmxhYm91clJvd0lkLFxyXG4gICAgICAgICBjZWxsLmdldFZhbHVlKCkpO1xyXG4gICB9XHJcblxyXG4gICBoYW5kbGVBY3R1YWxIb3Vyc0VkaXQoY2VsbCkge1xyXG4gICAgICBsZXQgcm93RGF0YSA9IGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpO1xyXG4gICAgICB0aGlzLnNlcnZpY2UudXBkYXRlQWN0dWFsSG91cnMoXHJcbiAgICAgICAgIHJvd0RhdGEudGFza0lkLFxyXG4gICAgICAgICByb3dEYXRhLmxhYm91clJvd0lkLFxyXG4gICAgICAgICBjZWxsLmdldFZhbHVlKCkpO1xyXG4gICB9XHJcbn1cclxuIiwiLyogZ2xvYmFsICQsIGV4cGVjdCwgc3B5T24sIGphc21pbmUsIHNldEZpeHR1cmVzICovXHJcbmltcG9ydCBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyIGZyb20gJy4vVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcic7XHJcblxyXG5kZXNjcmliZSgnVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcicsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgZGVzY3JpYmUoJ2luaXRDcmV3c1dpZGdldCcsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgY29uc3QgdGVzdENyZXdMaXN0ID0gW1xyXG4gICAgICAgICB7IGlkOiAnMScsIGNvZGU6ICdjcmV3MScsIGRlc2NyaXB0aW9uOiAnY3JldyBvbmUnIH0sXHJcbiAgICAgICAgIHsgaWQ6ICcyJywgY29kZTogJ2NyZXcyJywgZGVzY3JpcHRpb246ICdjcmV3IHR3bycgfSxcclxuICAgICAgICAgeyBpZDogJzMnLCBjb2RlOiAnY3JldzMnLCBkZXNjcmlwdGlvbjogJ2NyZXcgdGhyZWUnIH1cclxuICAgICAgXTtcclxuICAgICAgY29uc3QgdGVzdENyZXdMaXN0T2ZPbmUgPSBbXHJcbiAgICAgICAgIHsgaWQ6ICcxJywgY29kZTogJ2NyZXcxJywgZGVzY3JpcHRpb246ICdjcmV3IG9uZScgfVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgY29uc3QgdGVzdEN1cnJlbnREYXRlVGltZVJlc3BvbnNlID0ge1xyXG4gICAgICAgICBzdGFydFllYXI6ICcyMDE5JyxcclxuICAgICAgICAgc3RhcnRNb250aDogJzAxJyxcclxuICAgICAgICAgc3RhcnREYXlPZk1vbnRoOiAnMDEnLFxyXG4gICAgICAgICBzdGFydEhvdXJJbkRheTogJzEyJyxcclxuICAgICAgICAgc3RhcnRIb3VySW5EYXk6ICcwMCcsXHJcbiAgICAgICAgIHN0YXJ0TWludXRlOiAnMDAnLFxyXG4gICAgICAgICBlbmRZZWFyOiAnMjAxOScsXHJcbiAgICAgICAgIGVuZE1vbnRoOiAnMDInLFxyXG4gICAgICAgICBlbmREYXlPZk1vbnRoOiAnMDEnLFxyXG4gICAgICAgICBlbmRIb3VySW5EYXk6ICcxMicsXHJcbiAgICAgICAgIGVuZE1pbnV0ZTogJzAwJyxcclxuICAgICAgICAgc3RhcnRUaW1lem9uZTogXCJFU1RcIlxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbGV0IHZhbGlkUGFybXM7XHJcbiAgICAgIGxldCBmYWtlU2VydmljZTtcclxuXHJcbiAgICAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGphc21pbmUuQWpheC5pbnN0YWxsKCk7XHJcbiAgICAgICAgIHRoaXMudmFsaWRQYXJtcyA9IHtcclxuICAgICAgICAgICAgdXNlcklkOiAndXNlcklkJyxcclxuICAgICAgICAgICAgY3Jld3NGaWVsZElkOiAnY3Jld3NGaWVsZElkJyxcclxuICAgICAgICAgICAgc3RhcnRGaWVsZElkOiAnaWRTdGFydERhdGVUaW1lJyxcclxuICAgICAgICAgICAgZW5kRmllbGRJZDogJ2lkRW5kRGF0ZVRpbWUnLFxyXG4gICAgICAgICAgICBzaG93Q29tcGxldGVJZDogJ2lkU2hvd0NvbXBsZXRlJyxcclxuICAgICAgICAgICAgc2VhcmNoQnV0dG9uSWQ6ICdpZFNlYXJjaEJ1dHRvbicsXHJcbiAgICAgICAgICAgIHNlYXJjaFJlc3VsdHNJZDogJ2lkU2VhcmNoUmVzdWx0cycsXHJcbiAgICAgICAgICAgIGlzQWxsb3dlZFRvU2VhcmNoIDogJ3RydWUnXHJcbiAgICAgICAgIH07XHJcblxyXG4gICAgICAgICBzZXRGaXh0dXJlcyhcclxuICAgICAgICAgICAgJzxzZWxlY3QgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLmNyZXdzRmllbGRJZCArICdcIj48L3NlbGVjdD4nICtcclxuICAgICAgICAgICAgJzxpbnB1dCBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuc2hvd0NvbXBsZXRlSWQgKyAnXCIgdHlwZT1cImNoZWNrYm94XCIvPicgK1xyXG4gICAgICAgICAgICAnPGJ1dHRvbiBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuc2VhcmNoQnV0dG9uSWQgKyAnXCIgLz4nICtcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLnNlYXJjaFJlc3VsdHNJZCArICdcIiAvPicgK1xyXG4gICAgICAgICAgICAnPGRpdiBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuc3RhcnRGaWVsZElkICsgJ1wiIC8+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5zdGFydEZpZWxkSWQgKyAnXyREQVRFJFwiIC8+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5zdGFydEZpZWxkSWQgKyAnXyRUSU1FJFwiIC8+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5zdGFydEZpZWxkSWQgKyAnXyRUSU1FWk9ORV9ESVNQTEFZJFwiIC8+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5zdGFydEZpZWxkSWQgKyAnX1NlbGVjdEJ0blwiIC8+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5lbmRGaWVsZElkICsgJ1wiIC8+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5lbmRGaWVsZElkICsgJ18kREFURSRcIiAvPicgK1xyXG4gICAgICAgICAgICAnPGRpdiBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuZW5kRmllbGRJZCArICdfJFRJTUUkXCIgLz4nICtcclxuICAgICAgICAgICAgJzxkaXYgaWQ9XCInICsgdGhpcy52YWxpZFBhcm1zLmVuZEZpZWxkSWQgKyAnXyRUSU1FWk9ORV9ESVNQTEFZJFwiIC8+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5lbmRGaWVsZElkICsgJ19TZWxlY3RCdG5cIiAvPidcclxuICAgICAgICAgKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBhZnRlckVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGphc21pbmUuQWpheC51bmluc3RhbGwoKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnVGhyb3dzIGVycm9yIHdoZW4gdXNlciBpZCBub3QgcHJvdmlkZWQuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGxldCBwYXJtcyA9IHRoaXMudmFsaWRQYXJtcztcclxuICAgICAgICAgcGFybXMudXNlcklkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIocGFybXMpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLmluaXRDcmV3c1dpZGdldCgpO1xyXG4gICAgICAgICB9KS50b1Rocm93RXJyb3IoJ3VzZXJJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnVGhyb3dzIGVycm9yIHdoZW4gdXNlciBpZCBpcyBibGFuay4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgbGV0IHBhcm1zID0gdGhpcy52YWxpZFBhcm1zO1xyXG4gICAgICAgICBwYXJtcy51c2VySWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcihwYXJtcyk7XHJcbiAgICAgICAgIH0pLnRvVGhyb3dFcnJvcigndXNlcklkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICBpdCgnVGhyb3dzIGVycm9yIHdoZW4gY3JldyBmaWVsZCBpZCBub3QgcHJvdmlkZWQuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGxldCBwYXJtcyA9IHRoaXMudmFsaWRQYXJtcztcclxuICAgICAgICAgcGFybXMuY3Jld3NGaWVsZElkID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIocGFybXMpO1xyXG4gICAgICAgICB9KS50b1Rocm93RXJyb3IoJ2NyZXdzRmllbGRJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnVGhyb3dzIGVycm9yIHdoZW4gY3JldyBmaWVsZCBpZCBpcyBibGFuay4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgbGV0IHBhcm1zID0gdGhpcy52YWxpZFBhcm1zO1xyXG4gICAgICAgICBwYXJtcy5jcmV3c0ZpZWxkSWQgPSAnJztcclxuICAgICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHBhcm1zKTtcclxuICAgICAgICAgfSkudG9UaHJvd0Vycm9yKCdjcmV3c0ZpZWxkSWQgaXMgbWFuZGF0b3J5Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ1Rocm93cyBlcnJvciB3aGVuIGNyZXcgZmllbGQgaWQgZG9lcyBub3QgaWRlbnRpZnkgYSBzZWxlY3QgZWxlbWVudC4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgbGV0IHBhcm1zID0gdGhpcy52YWxpZFBhcm1zO1xyXG4gICAgICAgICBwYXJtcy5jcmV3c0ZpZWxkSWQgPSAnbm9uLWV4aXN0aW5nLWlkJztcclxuICAgICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHBhcm1zKTtcclxuICAgICAgICAgfSkudG9UaHJvd0Vycm9yKCdjcmV3c0ZpZWxkSWQgbXVzdCBiZSBhIFNFTEVDVCBlbGVtZW50Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ1Rocm93cyBlcnJvciB3aGVuIGNyZXcgZmllbGQgaWQgaWRlbnRpZmllcyBhIG5vbi1zZWxlY3QgZWxlbWVudC4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgc2V0Rml4dHVyZXMoJzxpbnB1dCBpZD1cImNyZXdzRmllbGRJZFwiPjwvaW5wdXQ+Jyk7XHJcbiAgICAgICAgIGxldCBwYXJtcyA9IHRoaXMudmFsaWRQYXJtcztcclxuICAgICAgICAgcGFybXMuY3Jld3NGaWVsZElkID0gJ2NyZXdzRmllbGRJZCc7XHJcbiAgICAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcihwYXJtcyk7XHJcbiAgICAgICAgIH0pLnRvVGhyb3dFcnJvcignY3Jld3NGaWVsZElkIG11c3QgYmUgYSBTRUxFQ1QgZWxlbWVudCcpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdGZXRjaCBvZiBjcmV3IGxpc3QgaXMgcmV0dXJuZWQnLCBmdW5jdGlvbihkb25lKSB7XHJcbiAgICAgICAgIC8vIEFycmFuZ2UgXHJcbiAgICAgICAgIHNldEZpeHR1cmVzKCc8c2VsZWN0IGlkPVwiJyArIHRoaXMudmFsaWRQYXJtcy5jcmV3c0ZpZWxkSWQgKyAnXCI+PC9zZWxlY3Q+Jyk7XHJcbiAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIodGhpcy52YWxpZFBhcm1zKTtcclxuXHJcbiAgICAgICAgIHNweU9uKCQsICdhamF4JykuYW5kLmNhbGxGYWtlKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGUuc3VjY2Vzcyh0ZXN0Q3Jld0xpc3QpO1xyXG4gICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgIC8vIEFjdFxyXG4gICAgICAgICBjb250cm9sbGVyLmluaXRDcmV3c1dpZGdldCgpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZSkudG9CZSh0ZXN0Q3Jld0xpc3QpO1xyXG4gICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdQb3B1bGF0ZXMgQ3JldyBkcm9wZG93biB3aGVuIHByb3ZpZGVkIGxpc3Qgb2YgY3Jld3MuJywgZnVuY3Rpb24oZG9uZSkge1xyXG4gICAgICAgICAvLyBBcnJhbmdlIFxyXG4gICAgICAgICB0aGlzLnZhbGlkUGFybXMuaXNBbGxvd2VkVG9TZWFyY2ggPSAnZmFsc2UnO1xyXG4gICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHRoaXMudmFsaWRQYXJtcyk7XHJcblxyXG4gICAgICAgICBzcHlPbigkLCAnYWpheCcpLmFuZC5jYWxsRmFrZShmdW5jdGlvbihyZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnVybCA9PT0gJy9tYWludGVuaXgvcmVzdC9jcmV3cycpIHtcclxuICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3Quc3VjY2Vzcyh0ZXN0Q3Jld0xpc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHJlcXVlc3QudXJsID09PSAnL21haW50ZW5peC9yZXN0L2RhdGV0aW1lL2dldEN1cnJlbnQnKSB7XHJcbiAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0LnN1Y2Nlc3ModGVzdEN1cnJlbnREYXRlVGltZVJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiVW5zdXBwb3J0ZWQgdXJsOiBcIiwgcmVxdWVzdC51cmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgbGV0IGNyZXdzRmllbGRTZWxlY3RFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudmFsaWRQYXJtcy5jcmV3c0ZpZWxkSWQpO1xyXG4gICAgICAgICBsZXQgc2VsZWN0T3B0aW9ucyA9IGNyZXdzRmllbGRTZWxlY3RFbC5vcHRpb25zO1xyXG5cclxuICAgICAgICAgLy8gQWN0XHJcbiAgICAgICAgIGNvbnRyb2xsZXIuaW5pdCgpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RPcHRpb25zLmxlbmd0aCkudG9CZSh0ZXN0Q3Jld0xpc3QubGVuZ3RoKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZWN0T3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICBsZXQgZXhwZWN0ZWRUZXh0ID0gdGVzdENyZXdMaXN0W2ldLmNvZGUgKyBcIiAoXCIgKyB0ZXN0Q3Jld0xpc3RbaV0uZGVzY3JpcHRpb24gKyBcIilcIjtcclxuICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwic2VsZWN0T3B0aW9uczogXCIsIHNlbGVjdE9wdGlvbnNbaV0udGV4dCwgdGVzdENyZXdMaXN0W2ldLmlkLCBleHBlY3RlZFRleHQpO1xyXG4gICAgICAgICAgICAgICAvLyBleHBlY3Qoc2VsZWN0T3B0aW9uc1tpXS50ZXh0KS50b0JlKGV4cGVjdGVkVGV4dCk7XHJcbiAgICAgICAgICAgICAgIC8vIGV4cGVjdChzZWxlY3RPcHRpb25zW2ldLnZhbHVlKS50b0JlKHRlc3RDcmV3TGlzdFtpXS5pZCk7XHJcbiAgICAgICAgICAgIH0gKiovXHJcblxyXG4gICAgICAgICAgICAvLyBleHBlY3QoY3Jld3NGaWVsZFNlbGVjdEVsLnNlbGVjdGVkSW5kZXgpLnRvQmUoMCk7XHRcdFx0IFx0XHRcdCBcclxuICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvKipcdFxyXG4gICAgICBpdCgnQ2xlYXJzIGNyZXcgZHJvcGRvd24gcHJpb3IgdG8gcG9wdWxhdGluZyBpdCB3aXRoIHByb3ZpZGVkIGxpc3Qgb2YgY3Jld3MuJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIC8vIEFycmFuZ2VcclxuICAgICAgICAgc2V0Rml4dHVyZXMoIFxyXG4gICAgICAgICAgICAgICAnPHNlbGVjdCBpZD1cIicgKyB0aGlzLnZhbGlkUGFybXMuY3Jld3NGaWVsZElkICsgJ1wiPicgK1xyXG4gICAgICAgICAgICAgICAnICAgPG9wdGlvbiBpZD1cIjEwXCI+Y3JldzEwPC9vcHRpb24+JytcclxuICAgICAgICAgICAgICAgJyAgIDxvcHRpb24gaWQ9XCIyMFwiPmNyZXcyMDwvb3B0aW9uPicrXHJcbiAgICAgICAgICAgICAgICc8L3NlbGVjdD4nXHJcbiAgICAgICAgICk7XHJcblxyXG4gICAgICAgICBsZXQgZmFrZVNlcnZpY2UgPSBuZXcgVGFza1N1cGVydmlzaW9uU2VydmljZSgpO1xyXG4gICAgICAgICBzcHlPbihmYWtlU2VydmljZSwgJ2dldENyZXdzRm9yVXNlcicpLmFuZC5jYWxsRmFrZSggZnVuY3Rpb24odXNlcklkLCBzdWNlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlcikge1xyXG4gICAgICAgICAgICBzdWNlc3NIYW5kbGVyKHRlc3RDcmV3TGlzdCk7XHJcbiAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgbGV0IHBhcm1zID0gdGhpcy52YWxpZFBhcm1zO1xyXG4gICAgICAgICBwYXJtcy5UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlID0gZmFrZVNlcnZpY2U7XHJcbiAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIocGFybXMpO1xyXG5cclxuICAgICAgICAgLy8gQWN0XHJcbiAgICAgICAgIGNvbnRyb2xsZXIuaW5pdENyZXdzV2lkZ2V0KCk7XHJcblxyXG4gICAgICAgICAvLyBBc3NlcnRcclxuICAgICAgICAgbGV0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudmFsaWRQYXJtcy5jcmV3c0ZpZWxkSWQpO1xyXG4gICAgICAgICBsZXQgc2VsZWN0T3B0aW9ucyA9IHNlbGVjdC5vcHRpb25zO1xyXG4gICAgICAgICBleHBlY3Qoc2VsZWN0T3B0aW9ucy5sZW5ndGgpLnRvQmUoMyk7XHJcbiAgICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxlY3RPcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBleHBlY3RlZFRleHQgPSB0ZXN0Q3Jld0xpc3RbaV0uY29kZSArIFwiIChcIiArIHRlc3RDcmV3TGlzdFtpXS5kZXNjcmlwdGlvbiArXCIpXCI7XHJcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RPcHRpb25zW2ldLnRleHQpLnRvQmUoZXhwZWN0ZWRUZXh0KTtcclxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdE9wdGlvbnNbaV0udmFsdWUpLnRvQmUodGVzdENyZXdMaXN0W2ldLmlkKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBleHBlY3Qoc2VsZWN0LnNlbGVjdGVkSW5kZXgpLnRvQmUoMCk7XHRcdCBcclxuICAgICAgfSk7XHJcbioqL1xyXG4gICAgICAvKipcclxuICAgICAgICAgICAgaXQoJ1BvcHVsYXRlcyBDcmV3IGRyb3Bkb3duIHdoZW4gcHJvdmlkZWQgbGlzdCBvZiBhIHNpbmdsZSBjcmV3LicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAvLyBBcnJhbmdlXHJcbiAgICAgICAgICAgICAgIGxldCBmYWtlU2VydmljZSA9IG5ldyBUYXNrU3VwZXJ2aXNpb25TZXJ2aWNlKCk7XHJcbiAgICAgICAgICAgICAgIHNweU9uKGZha2VTZXJ2aWNlLCAnZ2V0Q3Jld3NGb3JVc2VyJykuYW5kLmNhbGxGYWtlKCBmdW5jdGlvbih1c2VySWQsIHN1Y2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgIHN1Y2Vzc0hhbmRsZXIodGVzdENyZXdMaXN0T2ZPbmUpO1xyXG4gICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgIGxldCBwYXJtcyA9IHRoaXMudmFsaWRQYXJtcztcclxuICAgICAgICAgICAgICAgcGFybXMuVGFza1N1cGVydmlzaW9uU2VydmljZSA9IGZha2VTZXJ2aWNlO1xyXG4gICAgICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBUYXNrU3VwZXJ2aXNpb25Db250cm9sbGVyKHBhcm1zKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFjdFxyXG4gICAgICAgICAgICAgICBjb250cm9sbGVyLmluaXRDcmV3c1dpZGdldCgpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gQXNzZXJ0XHJcbiAgICAgICAgICAgICAgIGxldCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnZhbGlkUGFybXMuY3Jld3NGaWVsZElkKTtcclxuICAgICAgICAgICAgICAgbGV0IHNlbGVjdE9wdGlvbnMgPSBzZWxlY3Qub3B0aW9ucztcclxuICAgICAgICAgICAgICAgZXhwZWN0KHNlbGVjdE9wdGlvbnMubGVuZ3RoKS50b0JlKDEpO1xyXG5cclxuICAgICAgICAgICAgICAgbGV0IGV4cGVjdGVkVGV4dCA9IHRlc3RDcmV3TGlzdE9mT25lWzBdLmNvZGUgKyBcIiAoXCIgKyB0ZXN0Q3Jld0xpc3RPZk9uZVswXS5kZXNjcmlwdGlvbiArXCIpXCI7XHJcbiAgICAgICAgICAgICAgIGV4cGVjdChzZWxlY3RPcHRpb25zWzBdLnRleHQpLnRvQmUoZXhwZWN0ZWRUZXh0KTtcclxuICAgICAgICAgICAgICAgZXhwZWN0KHNlbGVjdE9wdGlvbnNbMF0udmFsdWUpLnRvQmUodGVzdENyZXdMaXN0T2ZPbmVbMF0uaWQpO1xyXG4gICAgICAgICAgICAgICBleHBlY3Qoc2VsZWN0LnNlbGVjdGVkSW5kZXgpLnRvQmUoMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ0RvZXMgbm90IHBvcHVsYXRlIENyZXcgZHJvcGRvd24gd2hlbiBwcm92aWRlZCBubyBsaXN0IG9mIGNyZXdzLicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAvLyBBcnJhbmdlXHJcbiAgICAgICAgICAgICAgIGxldCBjcmV3cyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgbGV0IGZha2VTZXJ2aWNlID0gbmV3IFRhc2tTdXBlcnZpc2lvblNlcnZpY2UoKTtcclxuICAgICAgICAgICAgICAgc3B5T24oZmFrZVNlcnZpY2UsICdnZXRDcmV3c0ZvclVzZXInKS5hbmQuY2FsbEZha2UoIGZ1bmN0aW9uKHVzZXJJZCwgc3VjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgc3VjZXNzSGFuZGxlcihjcmV3cyk7XHJcbiAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgbGV0IHBhcm1zID0gdGhpcy52YWxpZFBhcm1zO1xyXG4gICAgICAgICAgICAgICBwYXJtcy5UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlID0gZmFrZVNlcnZpY2U7XHJcbiAgICAgICAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIocGFybXMpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gQWN0XHJcbiAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuaW5pdENyZXdzV2lkZ2V0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBBc3NlcnRcclxuICAgICAgICAgICAgICAgbGV0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudmFsaWRQYXJtcy5jcmV3c0ZpZWxkSWQpO1xyXG4gICAgICAgICAgICAgICBsZXQgc2VsZWN0T3B0aW9ucyA9IHNlbGVjdC5vcHRpb25zO1xyXG4gICAgICAgICAgICAgICBleHBlY3Qoc2VsZWN0T3B0aW9ucy5sZW5ndGgpLnRvQmUoMCk7XHJcbiAgICAgICAgICAgICAgIGV4cGVjdChzZWxlY3Quc2VsZWN0ZWRJbmRleCkudG9CZSgtMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaXQoJ0RvZXMgbm90IHBvcHVsYXRlIENyZXcgZHJvcGRvd24gd2hlbiBwcm92aWRlZCBlbXB0eSBsaXN0IG9mIGNyZXdzLicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAvLyBBcnJhbmdlXHJcbiAgICAgICAgICAgICAgIGxldCBjcmV3cyA9IFtdO1xyXG4gICAgICAgICAgICAgICBsZXQgZmFrZVNlcnZpY2UgPSBuZXcgVGFza1N1cGVydmlzaW9uU2VydmljZSgpO1xyXG4gICAgICAgICAgICAgICBzcHlPbihmYWtlU2VydmljZSwgJ2dldENyZXdzRm9yVXNlcicpLmFuZC5jYWxsRmFrZSggZnVuY3Rpb24odXNlcklkLCBzdWNlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgICBzdWNlc3NIYW5kbGVyKGNyZXdzKTtcclxuICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICBsZXQgcGFybXMgPSB0aGlzLnZhbGlkUGFybXM7XHJcbiAgICAgICAgICAgICAgIHBhcm1zLlRhc2tTdXBlcnZpc2lvblNlcnZpY2UgPSBmYWtlU2VydmljZTtcclxuICAgICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgVGFza1N1cGVydmlzaW9uQ29udHJvbGxlcihwYXJtcyk7XHJcblxyXG4gICAgICAgICAgICAgICAvLyBBY3RcclxuICAgICAgICAgICAgICAgY29udHJvbGxlci5pbml0Q3Jld3NXaWRnZXQoKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIEFzc2VydFxyXG4gICAgICAgICAgICAgICBsZXQgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy52YWxpZFBhcm1zLmNyZXdzRmllbGRJZCk7XHJcbiAgICAgICAgICAgICAgIGxldCBzZWxlY3RPcHRpb25zID0gc2VsZWN0Lm9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgIGV4cGVjdChzZWxlY3RPcHRpb25zLmxlbmd0aCkudG9CZSgwKTtcclxuICAgICAgICAgICAgICAgZXhwZWN0KHNlbGVjdC5zZWxlY3RlZEluZGV4KS50b0JlKC0xKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpdCgnVGhyb3dzIGVycm9yIHdoZW4gdW5hYmxlIHRvIGdldCBjcmV3cyBmb3IgdXNlci4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgLy8gQXJyYW5nZVxyXG4gICAgICAgICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJ2Vycm9yTWVzc2FnZSc7XHJcbiAgICAgICAgICAgICAgIGxldCBmYWtlU2VydmljZSA9IG5ldyBUYXNrU3VwZXJ2aXNpb25TZXJ2aWNlKCk7XHJcbiAgICAgICAgICAgICAgIHNweU9uKGZha2VTZXJ2aWNlLCAnZ2V0Q3Jld3NGb3JVc2VyJykuYW5kLmNhbGxGYWtlKCBmdW5jdGlvbih1c2VySWQsIHN1Y2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgIGZhaWx1cmVIYW5kbGVyKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgbGV0IHBhcm1zID0gdGhpcy52YWxpZFBhcm1zO1xyXG4gICAgICAgICAgICAgICBwYXJtcy5UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlID0gZmFrZVNlcnZpY2U7XHJcbiAgICAgICAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IFRhc2tTdXBlcnZpc2lvbkNvbnRyb2xsZXIocGFybXMpO1xyXG5cclxuICAgICAgICAgICAgICAgLy8gQWN0IGFuZCBBc3NlcnRcclxuICAgICAgICAgICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmluaXRDcmV3c1dpZGdldCgpO1xyXG4gICAgICAgICAgICAgICB9KS50b1Rocm93RXJyb3IoZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgIFx0ICAqKi9cclxuXHJcbiAgIH0pO1xyXG5cclxufSk7XHJcbiIsInZhciBtYXAgPSB7XG5cdFwiLi9iYXNlbWFpbnRlbmFuY2UvdGFzay90YXNrc3VwZXJ2aXNpb24vVGFza1N1cGVydmlzaW9uQ29udHJvbGxlci5zcGVjLmpzXCI6IDE5LFxuXHRcIi4vYmFzZW1haW50ZW5hbmNlL3Rhc2svdGFza3N1cGVydmlzaW9uL1Rhc2tTdXBlcnZpc2lvblNlcnZpY2Uuc3BlYy5qc1wiOiAxMixcblx0XCIuL2VuZ2luZWVyaW5nL3JlcXVpcmVtZW50ZGVmaW5pdGlvbi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5zcGVjLmpzXCI6IDExLFxuXHRcIi4vZW5naW5lZXJpbmcvcmVxdWlyZW1lbnRkZWZpbml0aW9uL2ZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29udHJvbGxlci5zcGVjLmpzXCI6IDEwLFxuXHRcIi4vZW5naW5lZXJpbmcvcmVxdWlyZW1lbnRkZWZpbml0aW9uL2ZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZS5zcGVjLmpzXCI6IDgsXG5cdFwiLi9zb21lRmVhdHVyZS9mZWF0dXJlTWF0aC9mZWF0dXJlTWF0aC5zcGVjLmpzXCI6IDdcbn07XG5cblxuZnVuY3Rpb24gd2VicGFja0NvbnRleHQocmVxKSB7XG5cdHZhciBpZCA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpO1xuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXyhpZCk7XG5cdHJldHVybiBtb2R1bGU7XG59XG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSB7XG5cdHZhciBpZCA9IG1hcFtyZXFdO1xuXHRpZighKGlkICsgMSkpIHsgLy8gY2hlY2sgZm9yIG51bWJlciBvciBzdHJpbmdcblx0XHR2YXIgZSA9IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgbW9kdWxlIFwiJyArIHJlcSArICdcIi4nKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gaWQ7XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gMjA7IiwiLy8gdGVzdF9pbmRleC5qc1xudmFyIHRlc3RzQ29udGV4dCA9IHJlcXVpcmUuY29udGV4dChcIi5cIiwgdHJ1ZSwgL3NwZWMuanMkLyk7XG50ZXN0c0NvbnRleHQua2V5cygpLmZvckVhY2godGVzdHNDb250ZXh0KTsiXSwic291cmNlUm9vdCI6IiJ9