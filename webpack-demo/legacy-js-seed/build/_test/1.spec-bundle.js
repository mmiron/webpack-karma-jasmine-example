(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],[function(e,t){e.exports=jQuery},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();var o=n(0);var a=r(o);function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function e(){l(this,e)}i(e,null,[{key:"sortTaskDefinitions",value:function e(t){if(!t||!(t instanceof Array)){throw new Error("taskDefinitions expected to be an Array")}return t.sort(function(e,t){var n=e.code>t.code?1:e.code<t.code?-1:0;if(n==0){n=e.configSlotCode>t.configSlotCode?1:e.configSlotCode<t.configSlotCode?-1:0}if(n==0){n=e.name>t.name?1:e.name<t.name?-1:0}return n})}},{key:"getFollowOnTaskDefinitions",value:function e(t){var n=this;return new Promise(function(e,i){return a.default.ajax({type:"GET",url:t,success:function t(i){var o=n.sortTaskDefinitions(i);e(o)},error:function t(n){e([])}})})}}]);return e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=function e(t){i(this,e);if(!t||!(t instanceof Array)){throw new Error("The response data suppose to be in array form")}this.data=t;this.name="followOnTaskDefnSearch";this.limit=50;this.minLength=1};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=t.Add=function e(t,n){return t+n};var o=t.Subtract=function e(t,n){return t-n};var a=t.Multiply=function e(t,n){return t*n}},function(e,t,n){"use strict";var i=n(3);describe("[Dummy]",function(){it("[Add] should add two numbers together and return the result",function(){expect((0,i.Add)(1,2)).toBe(3)});it("[Subtract] should subtract second param from first and return the result",function(){expect((0,i.Subtract)(1,2)).toBe(-1)});it("[Multiply] should multiply two numbers and return the result",function(){expect((0,i.Multiply)(1,2)).toBe(2)})})},function(e,t,n){"use strict";(function(e){var t=n(1);var i=o(t);function o(e){return e&&e.__esModule?e:{default:e}}describe("FollowOnTaskDefinitionSearchService followOnTask/followOnTaskDefinitionSearchService.js",function(){var t=void 0;var n="https://www.google.com";var o=[{code:3,configSlotCode:3,name:"Third"},{code:2,configSlotCode:2,name:"Second"},{code:1,configSlotCode:1,name:"First"}];beforeAll(function(){this.service=i.default});it("Sorts task definitions",function(){var e=this.service.sortTaskDefinitions(o);expect(e[0].code).toBe(1);expect(e[1].code).toBe(2);expect(e[2].code).toBe(3)});it("Fetches task definitions with error for invalid response",function(){jasmine.Ajax.install();spyOn(e,"ajax").and.callFake(function(e){var t={};return e.success(t)});expect(function(){this.service.getFollowOnTaskDefinitions(n)}).toThrow();jasmine.Ajax.uninstall()});it("Fetches task definitions successfully",function(){jasmine.Ajax.install();spyOn(e,"ajax").and.callFake(function(e){return e.success(o)});this.service.getFollowOnTaskDefinitions(n).then(function(e){expect(e).toEqual(o)});jasmine.Ajax.uninstall()})})}).call(this,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();var o=n(0);var a=c(o);var r=n(2);var l=c(r);var s=n(1);var u=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var d=function(){function e(t,n,i,o,r){f(this,e);var l=this;this.notFoundMsgEl=(0,a.default)("#"+i);this.okBtnEl=(0,a.default)("#"+n);this.typeAheadSearchInputEl=(0,a.default)("#"+t);this.followOnTaskDefnUuidOuputEl=(0,a.default)("#"+o);var s=(0,a.default)("#"+r);if(!this.notFoundMsgEl.length>0){throw new Error("Not found message element required")}if(!this.okBtnEl.length>0){throw new Error("Ok button element required")}if(!this.typeAheadSearchInputEl.length>0){throw new Error("Typeahead input element required")}if(!this.followOnTaskDefnUuidOuputEl.length>0){throw new Error("Output followOn task definition UUI input element required")}if(!s.length>0){throw new Error("REST api url element is required")}this.apiUrl=s.val();this.selectedOption="";this.typeAheadSearchInputEl.keydown(function(){setTimeout(function(){if(l.typeAheadSearchInputEl.val()!=l.selectedOption){l.disableOkBtn();l.clearSelectedTaskDefinition()}})});this.initialize=this.initialize.bind(this)}i(e,[{key:"setSelectedTaskDefinition",value:function e(t){if(t){this.typeAheadSearchInputEl.val(this.displayFollowOn(null,t));this.selectedOption=this.typeAheadSearchInputEl.val();this.followOnTaskDefnUuidOuputEl.attr("value",t.id)}}},{key:"clearSelectedTaskDefinition",value:function e(){this.followOnTaskDefnUuidOuputEl.attr("value","")}},{key:"initialize",value:function e(){var t=this;this.disableOkBtn();try{u.default.getFollowOnTaskDefinitions(this.apiUrl).then(function(e){return t.configureTypeAhead(e)});this.typeAheadSearchInputEl.focus()}catch(e){throw new Error("Error while trying to fetch task definitions.",e)}}},{key:"configureTypeAhead",value:function e(t){var n=this;var i=new l.default(t);a.default.each(i.data,function(e,t){t.displayValue=n.displayFollowOn(null,t)});a.default.typeahead({input:n.typeAheadSearchInputEl,highlight:true,name:i.name,limit:i.limit,minLength:i.minLength,display:["displayValue"],emptyTemplate:'<div class="mx-typeahead-msg-notfound">'+n.notFoundMsgEl.val()+"</div>",source:{data:i.data},callback:{onClick:function e(t,i,o,a){a.preventDefault();n.enableOkBtn();n.setSelectedTaskDefinition(o);this.hideLayout()}}})}},{key:"displayFollowOn",value:function e(t,n){if(n){return n.code+" - "+n.configSlotCode+" - "+n.name}}},{key:"enableOkBtn",value:function e(){if(this.okBtnEl){if(this.okBtnEl.attr("originOnClickEvent")){this.okBtnEl.attr("onclick",this.okBtnEl.attr("originOnClickEvent"))}if(this.okBtnEl.attr("originTitle")){this.okBtnEl.attr("title",this.okBtnEl.attr("originTitle"))}this.okBtnEl.removeClass("disabled");this.okBtnEl.removeAttr("disabled");this.okBtnEl.removeAttr("originOnClickEvent");this.okBtnEl.removeAttr("originTitle")}}},{key:"disableOkBtn",value:function e(){if(this.okBtnEl){if(!this.okBtnEl.attr("originOnClickEvent")){this.okBtnEl.attr("originOnClickEvent",this.okBtnEl.attr("onclick"))}if(!this.okBtnEl.attr("originTitle")){this.okBtnEl.attr("originTitle",this.okBtnEl.attr("title"))}this.okBtnEl.addClass("disabled");this.okBtnEl.attr("disabled","disabled");this.okBtnEl.attr("onclick",false);this.okBtnEl.attr("title","")}}}]);return e}();t.default=d},function(e,t,n){"use strict";(function(e){var t=n(6);var i=o(t);function o(e){return e&&e.__esModule?e:{default:e}}describe("FollowOnTaskDefinitionSearchController followOnTask/followOnTaskDefinitionSearchController.js",function(){var t="/someRestApi";function n(){return new i.default("followOnTaskSearchQuery","idButtonOk","idTypeaheadNotFoundMessage","idFieldFollowOnTaskDefnUuid","idfollowOnTaskDefinitionRestAPI")}function o(){setFixtures('<form id="form-typeahead-test" name="form-typeahead-test">'+'  <div class="typeahead__container">'+'     <div class="typeahead__field">'+'        <span class="typeahead__query">'+'          <input class= "js-typeahead-test" id="followOnTaskSearchQuery" name="followOnTaskSearchQuery">'+"        </span>"+"     </div>"+"  </div>"+'  <button id="idButtonOk" title="mytitle">Ok</button>'+'  <input type="hidden" name="aFollowOnTaskDefinitionUuid" id="idFieldFollowOnTaskDefnUuid">'+'  <input type="hidden" id="idTypeaheadNotFoundMessage" value="web.msg.MSG_NO_MATCHING_FOLLOWON_TASK_DEFINITIONS">'+'  <input type="hidden" id="idfollowOnTaskDefinitionRestAPI" value="'+t+'"'+"</form>")}beforeEach(function(){jasmine.Ajax.install();o();this.okButtonEl=e("#idButtonOk");this.fieldFollowOnTaskDefnUuidEl=e("#idFieldFollowOnTaskDefnUuid")});afterEach(function(){jasmine.Ajax.uninstall()});it("Should have a button with OK label",function(){expect(this.okButtonEl).toHaveText("Ok")});it("Should throw error indicating missing typeaheadId",function(){expect(function(){new i.default("FAKE_followOnTaskSearchQuery","FAKE_idButtonOk","FAKE_idTypeaheadNotFoundMessage","FAKE_idFieldFollowOnTaskDefnUuid","FAKE_idfollowOnTaskDefinitionRestAPI")}).toThrow()});it("Should have Ok button enabled",function(){var e=n();e.enableOkBtn();expect(this.okButtonEl).not.toHaveClass("disabled")});it("Should have Ok button disabled",function(){var e=n();e.disableOkBtn();expect(this.okButtonEl).toHaveClass("disabled")});it("returns a properly constructed display value",function(){var e=[{code:5,configSlotCode:3,name:"test"}];var t=n();expect(t.displayFollowOn(null,e[0])).toBe("5 - 3 - test")});it("Should set and clear selected task definition of output element",function(){var e=n();e.setSelectedTaskDefinition({id:"someValue"});expect(this.fieldFollowOnTaskDefnUuidEl.attr("value")).toBe("someValue");e.clearSelectedTaskDefinition();expect(this.fieldFollowOnTaskDefnUuidEl.attr("value")).toBe("")});it("Fetches task definitions successfully",function(){var i=n();var o=[{id:"A6AAE18B638740B29B2F34D51CF2CCD5",configSlotCode:"BOM123",name:"ReqWithImpact1",code:"NC14992-REQ1"},{id:"A6AAE18B638740B29B2F34D51CF2CCD6",configSlotCode:"BOM123",name:"ReqWithImpact2",code:"NC14992-REQ2"},{id:"A6AAE18B638740B29B2F34D51CF2CCD7",configSlotCode:"BOM123",name:"ReqWithImpact3",code:"NC14992-REQ3"},{id:"A6AAE18B638740B29B2F34D51CF2CCD8",configSlotCode:"BOM123",name:"ReqWithImpact4",code:"NC14992-REQ4"},{id:"A6AAE18B638740B29B2F34D51CF2CCD9",configSlotCode:"BOM123",name:"ReqWithImpact5",code:"NC14992-REQ5"},{id:"A6AAE18B638740B29B2F34D51CF2CCE3",configSlotCode:"BOM123",name:"ReqWithImpact6",code:"NC14992-REQ6"}];spyOn(e,"ajax").and.callFake(function(e){return e.success(o)});i.initialize();expect(e.ajax.calls.mostRecent().args[0].url).toEqual(t);var a=e("#idButtonOk");var r=e("#followOnTaskSearchQuery");spyOn(r,"focus");setTimeout(function(){expect(a).toHaveClass("disabled");expect(r.focus).toHaveBeenCalled()},100)})})}).call(this,n(0))},function(e,t,n){"use strict";var i=n(2);var o=a(i);function a(e){return e&&e.__esModule?e:{default:e}}describe("FollowOnTaskDefinitionSearchConfig followOnTask/followOnTaskDefinitionSearchConfig.js",function(){it("throws exception on empty data parameter",function(){expect(function(){var e=new o.default}).toThrowError("The response data suppose to be in array form")});it("throws exception with a object type data parameter instead of array",function(){expect(function(){var e={};var t=new o.default(e)}).toThrowError("The response data suppose to be in array form")});it("creates a valid config object",function(){var e=[];var t=new o.default(e);expect(t.name).toBe("followOnTaskDefnSearch");expect(t.limit).toBe(50);expect(t.minLength).toBe(1)})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();var o=n(0);var a=r(o);function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s=function(){function e(){l(this,e)}i(e,[{key:"getCrewsForUser",value:function e(t){return new Promise(function(e,n){if(!t){throw new Error("userId is mandatory")}var i="/maintenix/rest/crew/list";var o={userId:t};a.default.ajax({url:i,type:"GET",data:o,success:function t(n,i,o){console.log("success: ",n);e(n)},error:function e(t,i,o){var a="Error code =  "+t.status;n(a)}})})}}]);return e}();t.default=s},function(e,t,n){"use strict";var i=n(0);var o=l(i);var a=n(9);var r=l(a);function l(e){return e&&e.__esModule?e:{default:e}}describe("TaskSupervisionService.js",function(){describe("getCrewsForUser",function(){var e=new r.default;var t="user";var n=function e(){};var i=function e(){};beforeEach(function(){jasmine.Ajax.install()});afterEach(function(){jasmine.Ajax.uninstall()});it("will call the success handler when the ajax call is successful",function(){spyOn(o.default,"ajax").and.callFake(function(e){e.success({})})})})})},function(e,t){throw new Error("Module build failed: SyntaxError: await is a reserved word (37:12)\n\n[0m [90m 35 | [39m         let controller [33m=[39m [36mnew[39m [33mTaskSupervisionController[39m(parms)[33m;[39m\n [90m 36 | [39m         expect([36mfunction[39m() {\n[31m[1m>[22m[39m[90m 37 | [39m            await controller[33m.[39minitCrewsWidget()[33m;[39m\n [90m    | [39m            [31m[1m^[22m[39m\n [90m 38 | [39m         })[33m.[39mtoThrowError([32m'userId is mandatory'[39m)[33m;[39m\n [90m 39 | [39m      })[33m;[39m\n [90m 40 | [39m[0m\n")},function(e,t,n){var i={"./basemaintenance/task/tasksupervision/TaskSupervisionController.initCrewsWidget.spec.js":11,"./basemaintenance/task/tasksupervision/TaskSupervisionService.spec.js":10,"./followOnTask/followOnTaskDefinitionSearchConfig.spec.js":8,"./followOnTask/followOnTaskDefinitionSearchController.spec.js":7,"./followOnTask/followOnTaskDefinitionSearchService.spec.js":5,"./someFeature/featureMath/featureMath.spec.js":4};function o(e){var t=a(e);var i=n(t);return i}function a(e){var t=i[e];if(!(t+1)){var n=new Error('Cannot find module "'+e+'".');n.code="MODULE_NOT_FOUND";throw n}return t}o.keys=function e(){return Object.keys(i)};o.resolve=a;e.exports=o;o.id=12},function(e,t,n){"use strict";var i=n(12);i.keys().forEach(i)}],[[13,0]]]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJqUXVlcnlcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc29tZUZlYXR1cmUvZmVhdHVyZU1hdGgvZmVhdHVyZU1hdGguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NvbWVGZWF0dXJlL2ZlYXR1cmVNYXRoL2ZlYXR1cmVNYXRoLnNwZWMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZS5zcGVjLmpzIiwid2VicGFjazovLy8uL3NyYy9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29udHJvbGxlci5zcGVjLmpzIiwid2VicGFjazovLy8uL3NyYy9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5zcGVjLmpzIiwid2VicGFjazovLy8uL3NyYy9iYXNlbWFpbnRlbmFuY2UvdGFzay90YXNrc3VwZXJ2aXNpb24vVGFza1N1cGVydmlzaW9uU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYmFzZW1haW50ZW5hbmNlL3Rhc2svdGFza3N1cGVydmlzaW9uL1Rhc2tTdXBlcnZpc2lvblNlcnZpY2Uuc3BlYy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMgc3luYyBzcGVjLmpzJCIsIndlYnBhY2s6Ly8vLi9zcmMvdGVzdF9pbmRleC5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwialF1ZXJ5IiwiX2pxdWVyeSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZSIsInRhc2tEZWZpbml0aW9ucyIsIkFycmF5IiwiRXJyb3IiLCJzb3J0IiwiYSIsImIiLCJjb21wYXJlUmVzdWx0IiwiY29kZSIsImNvbmZpZ1Nsb3RDb2RlIiwibmFtZSIsImFwaVVybCIsInNjb3BlIiwidGhpcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiX2pxdWVyeTIiLCJkZWZhdWx0IiwiYWpheCIsInR5cGUiLCJ1cmwiLCJzdWNjZXNzIiwidGFza0RlZmluaXRpb25zUmVzcG9uc2UiLCJzb3J0ZWRUYXNrRGVmaW5pdGlvbnMiLCJlcnJvciIsImVyciIsIkZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWciLCJkYXRhIiwiX2NsYXNzQ2FsbENoZWNrIiwibGltaXQiLCJtaW5MZW5ndGgiLCJBZGQiLCJ4IiwieSIsIlN1YnRyYWN0IiwiTXVsdGlwbHkiLCJfZmVhdHVyZU1hdGgiLCJkZXNjcmliZSIsIml0IiwiZXhwZWN0IiwiX2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlIiwic2VydmljZSIsInRhc2tEZWZpbml0aW9uUmVzcG9uc2UiLCJiZWZvcmVBbGwiLCJzb3J0ZWREYXRhIiwic29ydFRhc2tEZWZpbml0aW9ucyIsImphc21pbmUiLCJzcHlPbiIsImUiLCJpbnZhbGlkUmVzcG9uc2UiLCJnZXRGb2xsb3dPblRhc2tEZWZpbml0aW9ucyIsInRoZW4iLCJmYWtlRGF0YSIsIl9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnIiwiRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIiLCJ0eXBlQWhlYWRJZCIsIm9rQnV0dG9uSWQiLCJub3RGb3VuZE1zZ0lkIiwiZm9sbG93T25UYXNrRGVmblV1aWRPdXB1dElkIiwiYXBpVXJsSWQiLCJub3RGb3VuZE1zZ0VsIiwib2tCdG5FbCIsInR5cGVBaGVhZFNlYXJjaElucHV0RWwiLCJmb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0RWwiLCJhcGlVcmxFbCIsImxlbmd0aCIsInZhbCIsInNlbGVjdGVkT3B0aW9uIiwia2V5ZG93biIsInNldFRpbWVvdXQiLCJpbml0aWFsaXplIiwiYmluZCIsInN1Z2dlc3Rpb24iLCJkaXNwbGF5Rm9sbG93T24iLCJhdHRyIiwiaWQiLCJfdGhpcyIsImRpc2FibGVPa0J0biIsImNvbmZpZ3VyZVR5cGVBaGVhZCIsImZvY3VzIiwiY29uZmlnIiwiJCIsImluZGV4IiwiaW5wdXQiLCJoaWdobGlnaHQiLCJkaXNwbGF5IiwiZW1wdHlUZW1wbGF0ZSIsInNvdXJjZSIsImNhbGxiYWNrIiwib25DbGljayIsInR5cGVBaGVhZElucHV0RWwiLCJzZWxlY3Rpb25FbCIsInNlbGVjdGVkUmVjb3JkIiwiZXZlbnQiLCJoaWRlTGF5b3V0IiwicXVlcnkiLCJzdWdnZXN0aW9uT2JqIiwicmVtb3ZlQ2xhc3MiLCJyZW1vdmVBdHRyIiwiYWRkQ2xhc3MiLCJfZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIiLCJyZXN0QXBpVXJsIiwiZ2V0R29vZENvbnRyb2xsZXIiLCJzZXRVcEhUTUxGaXh0dXJlIiwic2V0Rml4dHVyZXMiLCJiZWZvcmVFYWNoIiwib2tCdXR0b25FbCIsImZpZWxkRm9sbG93T25UYXNrRGVmblV1aWRFbCIsImFmdGVyRWFjaCIsImNvbnRyb2xsZXIiLCJyZXNwb25zZVRhc2tEZWZpbml0aW9ucyIsIm5hdGl2ZUVsIiwiVGFza1N1cGVydmlzaW9uU2VydmljZSIsInVzZXJJZCIsImNyZXdMaXN0UmVzdEVuZHBvaW50IiwiYXJncyIsImNyZXdSZXNwb25zZUxpc3QiLCJ0ZXh0U3RhdHVzIiwianFYSFIiLCJjb25zb2xlIiwiZXJyb3JUaHJvd24iLCJtZXNzYWdlIiwic3RhdHVzIiwiX1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UiLCJzdWNjZXNzSGFuZGxlciIsImZhaWx1cmVIYW5kbGVyIiwiYWp4IiwibWFwIiwiLi9iYXNlbWFpbnRlbmFuY2UvdGFzay90YXNrc3VwZXJ2aXNpb24vVGFza1N1cGVydmlzaW9uQ29udHJvbGxlci5pbml0Q3Jld3NXaWRnZXQuc3BlYy5qcyIsIi4vYmFzZW1haW50ZW5hbmNlL3Rhc2svdGFza3N1cGVydmlzaW9uL1Rhc2tTdXBlcnZpc2lvblNlcnZpY2Uuc3BlYy5qcyIsIi4vZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcuc3BlYy5qcyIsIi4vZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyLnNwZWMuanMiLCIuL2ZvbGxvd09uVGFzay9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZS5zcGVjLmpzIiwiLi9zb21lRmVhdHVyZS9mZWF0dXJlTWF0aC9mZWF0dXJlTWF0aC5zcGVjLmpzIiwid2VicGFja0NvbnRleHQiLCJyZXEiLCJ3ZWJwYWNrQ29udGV4dFJlc29sdmUiLCJrZXlzIiwid2VicGFja0NvbnRleHRLZXlzIiwiT2JqZWN0IiwidGVzdHNDb250ZXh0Il0sIm1hcHBpbmdzIjoiNkVBQUFBLEVBQUFDLFFBQUFDLDRWQ0FBLElBQUFDLEVBQUFDLEVBQUEscUtBS3FCQywwRkFFU0MsR0FDeEIsSUFBSUEsS0FBc0JBLGFBQTFCQyxPQUE2RCxDQUMxRCxNQUFNLElBQUFDLE1BQU4sMkNBR0gsT0FBT0YsRUFBQUcsS0FBcUIsU0FBQUMsRUFBQUMsR0FDekIsSUFBSUMsRUFBaUJGLE9BQVNDLEVBQVZFLEtBQUEsRUFBMEJILE9BQVNDLEVBQVZFLE1BQUEsRUFBN0MsRUFFQSxHQUFJRCxHQUFKLEVBQXdCLENBQ3JCQSxFQUFpQkYsaUJBQW1CQyxFQUFwQkcsZUFBQSxFQUE4Q0osaUJBQW1CQyxFQUFwQkcsZ0JBQUEsRUFBN0RGLEVBR0gsR0FBSUEsR0FBSixFQUF3QixDQUNyQkEsRUFBaUJGLE9BQVNDLEVBQVZJLEtBQUEsRUFBMEJMLE9BQVNDLEVBQVZJLE1BQUEsRUFBekNILEVBRUgsT0FB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MkJBQ0F6RyxNQUdIVSxNQUFPLFNBQUFBLEVBQUE4RixFQUFBRCxFQUFBRyxHQUNKLElBQUlDLEVBQVUsaUJBQW1CSCxFQUFqQ0ksT0FDQTNHLG9DQXZCTWlHLGdDQ0ZyQixJQUFBbkgsRUFBQUMsRUFBQSxjQUNBLElBQUE2SCxFQUFBN0gsRUFBQSxpRUFFQXVDLHFDQUFzQyxXQUVuQ0EsMkJBQTRCLFdBRXpCLElBQU1JLEVBQVUsSUFBSXVFLEVBQXBCL0YsUUFFQSxJQUFNZ0csRUFBTixPQUNBLElBQU1XLEVBQWlCLFNBQWpCQSxNQUNOLElBQU1DLEVBQWlCLFNBQWpCQSxNQUVOcEIsV0FBVyxXQUNSM0QseUJBR0g4RCxVQUFVLFdBQ1A5RCwyQkE2REhSLG9FQUFxRSxXQUNsRVMsTUFBTWtDLEVBQU5sQyw2QkFBK0IsU0FBQStFLEdBQzVCQSxpb0JDakZaLElBQUFDLEdBQ0FDLDJGQUFBLEdBQ0FDLHdFQUFBLEdBQ0FDLDREQUFBLEVBQ0FDLGdFQUFBLEVBQ0FDLDZEQUFBLEVBQ0FDLGdEQUFBLEdBSUEsU0FBQUMsRUFBQUMsR0FDQSxJQUFBNUQsRUFBQTZELEVBQUFELEdBQ0EsSUFBQTdJLEVBQUFJLEVBQUE2RSxHQUNBLE9BQUFqRixFQUVBLFNBQUE4SSxFQUFBRCxHQUNBLElBQUE1RCxFQUFBb0QsRUFBQVEsR0FDQSxLQUFBNUQsRUFBQSxJQUNBLElBQUEzQixFQUFBLElBQUE5QyxNQUFBLHVCQUFBcUksRUFBQSxNQUNBdkYsRUFBQXpDLEtBQUEsbUJBQ0EsTUFBQXlDLEVBRUEsT0FBQTJCLEVBRUEyRCxFQUFBRyxLQUFBLFNBQUFDLElBQ0EsT0FBQUMsT0FBQUYsS0FBQVYsSUFFQU8sRUFBQXhILFFBQUEwSCxFQUNBOUksRUFBQUMsUUFBQTJJLEVBQ0FBLEVBQUEzRCxHQUFBLGlDQzVCQSxJQUFJaUUsRUFBZTlJLEVBQUEsSUFDbkI4SSIsImZpbGUiOiJ0ZXN0LzEuc3BlYy1idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGpRdWVyeTsiLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5cclxuLyoqXHJcbiAqIFRoZSBzZXJ2aWNlIGxheWVyLCBpdCBzZW5kcyBSRVNUIEFQSSBjYWxsIGFuZCBwYXNzIHRoZSByZXNwb25zZSBkYXRhIHRvIGNvbnRyb2xsZXJcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlIHtcclxuXHJcbiAgIHN0YXRpYyBzb3J0VGFza0RlZmluaXRpb25zKHRhc2tEZWZpbml0aW9ucykge1xyXG4gICAgICBpZiAoIXRhc2tEZWZpbml0aW9ucyB8fCAhKHRhc2tEZWZpbml0aW9ucyBpbnN0YW5jZW9mIEFycmF5KSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0YXNrRGVmaW5pdGlvbnMgZXhwZWN0ZWQgdG8gYmUgYW4gQXJyYXlcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0YXNrRGVmaW5pdGlvbnMuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgIGxldCBjb21wYXJlUmVzdWx0ID0gKGEuY29kZSA+IGIuY29kZSkgPyAxIDogKChhLmNvZGUgPCBiLmNvZGUpID8gLTEgOiAwKTtcclxuXHJcbiAgICAgICAgIGlmIChjb21wYXJlUmVzdWx0ID09IDApIHtcclxuICAgICAgICAgICAgY29tcGFyZVJlc3VsdCA9IChhLmNvbmZpZ1Nsb3RDb2RlID4gYi5jb25maWdTbG90Q29kZSkgPyAxIDogKChhLmNvbmZpZ1Nsb3RDb2RlIDwgYi5jb25maWdTbG90Q29kZSkgPyAtMSA6IDApO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAoY29tcGFyZVJlc3VsdCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbXBhcmVSZXN1bHQgPSAoYS5uYW1lID4gYi5uYW1lKSA/IDEgOiAoKGEubmFtZSA8IGIubmFtZSkgPyAtMSA6IDApO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHJldHVybiBjb21wYXJlUmVzdWx0O1xyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxuICAgc3RhdGljIGdldEZvbGxvd09uVGFza0RlZmluaXRpb25zKGFwaVVybCkge1xyXG4gICAgICBsZXQgc2NvcGUgPSB0aGlzO1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICB1cmw6IGFwaVVybCxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24odGFza0RlZmluaXRpb25zUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgLy8gbmljZSB0byBoYXZlOiBwb3N0UHJvY2Vzc29yIGhvb2tcclxuICAgICAgICAgICAgICAgbGV0IHNvcnRlZFRhc2tEZWZpbml0aW9ucyA9IHNjb3BlLnNvcnRUYXNrRGVmaW5pdGlvbnModGFza0RlZmluaXRpb25zUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICByZXNvbHZlKHNvcnRlZFRhc2tEZWZpbml0aW9ucyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgLy8gaWYgZXJyb3IgaGFwcGVucyB3aXRoIHRoZSBBUEkgY2FsbCwgaW5pdGlhbGl6ZSB0aGUgd2lkZ2V0IHdpdGggYW4gZW1wdHkgYXJyYXkuXHJcbiAgICAgICAgICAgICAgIHJlc29sdmUoW10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxufVxyXG4iLCIvKiBnbG9iYWwgJCAqL1xyXG4vKipcclxuICogSXQgY29udGFpbnMgYWxsIGNvbmZpZ3VyYXRpb25zIGZvciB0aGUgdHlwZSBhaGVhZCBzZWFyY2ggd2lkZ2V0XHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnIHtcclxuXHJcbiAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgICAgaWYgKCFkYXRhIHx8ICEoZGF0YSBpbnN0YW5jZW9mIEFycmF5KSkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcmVzcG9uc2UgZGF0YSBzdXBwb3NlIHRvIGJlIGluIGFycmF5IGZvcm1cIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcblxyXG4gICAgICAvLyBUaGUgbmFtZSBvZiB0aGUgZGF0YXNldC5cclxuICAgICAgLy8gVGhpcyB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoZSBjbGFzcyBuYW1lIG9mIHRoZSBmaWx0ZXJlZCByZXN1bHQgPGRpdj4uXHJcbiAgICAgIHRoaXMubmFtZSA9ICdmb2xsb3dPblRhc2tEZWZuU2VhcmNoJztcclxuXHJcbiAgICAgIC8vIFRoZSBtYXggbnVtYmVyIG9mIHN1Z2dlc3Rpb25zIHRvIGJlIGRpc3BsYXllZC5cclxuICAgICAgdGhpcy5saW1pdCA9IDUwO1xyXG5cclxuICAgICAgLy8gVGhlIG1pbmltdW0gY2hhcmFjdGVyIGxlbmd0aCBuZWVkZWQgYmVmb3JlIHN1Z2dlc3Rpb25zIHN0YXJ0IGdldHRpbmcgcmVuZGVyZWQuXHJcbiAgICAgIHRoaXMubWluTGVuZ3RoID0gMTtcclxuICAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBBZGQgPSBmdW5jdGlvbih4LCB5KSB7XG5cdHJldHVybih4K3kpO1xufVxuXG5leHBvcnQgY29uc3QgU3VidHJhY3QgPSBmdW5jdGlvbih4LCB5KSB7XG5cdHJldHVybih4LXkpO1xufVxuXG5leHBvcnQgY29uc3QgTXVsdGlwbHkgPSBmdW5jdGlvbih4LCB5KSB7XG5cdHJldHVybih4KnkpO1xufSIsIi8qZ2xvYmFsIGV4cGVjdCovXG5pbXBvcnQgeyBBZGQsIFN1YnRyYWN0LCBNdWx0aXBseSB9IGZyb20gJy4vZmVhdHVyZU1hdGguanMnO1xuXG5kZXNjcmliZSgnW0R1bW15XScsICgpID0+IHtcblx0XG5cdGl0KCdbQWRkXSBzaG91bGQgYWRkIHR3byBudW1iZXJzIHRvZ2V0aGVyIGFuZCByZXR1cm4gdGhlIHJlc3VsdCcsICgpID0+IHtcblx0XHRleHBlY3QoQWRkKDEsIDIpKS50b0JlKDMpO1xuXHR9KTtcblxuXHRpdCgnW1N1YnRyYWN0XSBzaG91bGQgc3VidHJhY3Qgc2Vjb25kIHBhcmFtIGZyb20gZmlyc3QgYW5kIHJldHVybiB0aGUgcmVzdWx0JywgKCkgPT4ge1xuXHRcdGV4cGVjdChTdWJ0cmFjdCgxLCAyKSkudG9CZSgtMSk7XG5cdH0pO1xuXG5cdGl0KCdbTXVsdGlwbHldIHNob3VsZCBtdWx0aXBseSB0d28gbnVtYmVycyBhbmQgcmV0dXJuIHRoZSByZXN1bHQnLCAoKSA9PiB7XG5cdFx0ZXhwZWN0KE11bHRpcGx5KDEsIDIpKS50b0JlKDIpO1xuXHR9KTtcblxufSk7IFxuIiwiLyogZ2xvYmFsIGV4cGVjdCwgamFzbWluZSwgYmVmb3JlQWxsLCBzcHlPbiwgJCAqL1xyXG5pbXBvcnQgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UgZnJvbSAnLi9mb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZS5qcyc7XHJcblxyXG5kZXNjcmliZSgnRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UgZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLmpzJywgZnVuY3Rpb24oKSB7XHJcbiAgIGxldCBzZXJ2aWNlO1xyXG4gICBsZXQgdXJsID0gXCJodHRwczovL3d3dy5nb29nbGUuY29tXCI7XHJcbiAgIGxldCB0YXNrRGVmaW5pdGlvblJlc3BvbnNlID0gW3tcclxuICAgICAgY29kZTogMyxcclxuICAgICAgY29uZmlnU2xvdENvZGU6IDMsXHJcbiAgICAgIG5hbWU6IFwiVGhpcmRcIlxyXG4gICB9LCB7XHJcbiAgICAgIGNvZGU6IDIsXHJcbiAgICAgIGNvbmZpZ1Nsb3RDb2RlOiAyLFxyXG4gICAgICBuYW1lOiBcIlNlY29uZFwiXHJcbiAgIH0sIHtcclxuICAgICAgY29kZTogMSxcclxuICAgICAgY29uZmlnU2xvdENvZGU6IDEsXHJcbiAgICAgIG5hbWU6IFwiRmlyc3RcIlxyXG4gICB9XTtcclxuXHJcbiAgIGJlZm9yZUFsbChmdW5jdGlvbigpIHtcclxuICAgICAgdGhpcy5zZXJ2aWNlID0gRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2U7XHJcbiAgIH0pO1xyXG5cclxuICAgaXQoJ1NvcnRzIHRhc2sgZGVmaW5pdGlvbnMnLCBmdW5jdGlvbigpIHtcclxuICAgICAgbGV0IHNvcnRlZERhdGEgPSB0aGlzLnNlcnZpY2Uuc29ydFRhc2tEZWZpbml0aW9ucyh0YXNrRGVmaW5pdGlvblJlc3BvbnNlKTtcclxuXHJcbiAgICAgIGV4cGVjdChzb3J0ZWREYXRhWzBdLmNvZGUpLnRvQmUoMSk7XHJcbiAgICAgIGV4cGVjdChzb3J0ZWREYXRhWzFdLmNvZGUpLnRvQmUoMik7XHJcbiAgICAgIGV4cGVjdChzb3J0ZWREYXRhWzJdLmNvZGUpLnRvQmUoMyk7XHJcbiAgIH0pO1xyXG5cclxuICAgaXQoJ0ZldGNoZXMgdGFzayBkZWZpbml0aW9ucyB3aXRoIGVycm9yIGZvciBpbnZhbGlkIHJlc3BvbnNlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGphc21pbmUuQWpheC5pbnN0YWxsKCk7XHJcblxyXG4gICAgICBzcHlPbigkLCAnYWpheCcpLmFuZC5jYWxsRmFrZShmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgIGxldCBpbnZhbGlkUmVzcG9uc2UgPSB7fTtcclxuICAgICAgICAgcmV0dXJuIGUuc3VjY2VzcyhpbnZhbGlkUmVzcG9uc2UpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgdGhpcy5zZXJ2aWNlLmdldEZvbGxvd09uVGFza0RlZmluaXRpb25zKHVybCk7XHJcbiAgICAgIH0pLnRvVGhyb3coKTtcclxuXHJcbiAgICAgIGphc21pbmUuQWpheC51bmluc3RhbGwoKTtcclxuXHJcbiAgIH0pO1xyXG5cclxuICAgaXQoJ0ZldGNoZXMgdGFzayBkZWZpbml0aW9ucyBzdWNjZXNzZnVsbHknLCBmdW5jdGlvbigpIHtcclxuICAgICAgamFzbWluZS5BamF4Lmluc3RhbGwoKTtcclxuXHJcbiAgICAgIHNweU9uKCQsICdhamF4JykuYW5kLmNhbGxGYWtlKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgcmV0dXJuIGUuc3VjY2Vzcyh0YXNrRGVmaW5pdGlvblJlc3BvbnNlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLnNlcnZpY2UuZ2V0Rm9sbG93T25UYXNrRGVmaW5pdGlvbnModXJsKS50aGVuKGZ1bmN0aW9uKGZha2VEYXRhKSB7XHJcbiAgICAgICAgIGV4cGVjdChmYWtlRGF0YSkudG9FcXVhbCh0YXNrRGVmaW5pdGlvblJlc3BvbnNlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBqYXNtaW5lLkFqYXgudW5pbnN0YWxsKCk7XHJcblxyXG4gICB9KTtcclxuXHJcbn0pO1xyXG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG4vLyBpbXBvcnQgVHlwZWFoZWFkIGZyb20gXCJ0eXBlYWhlYWQuanNcIjtcclxuLy8gaW1wb3J0IEJsb29kaG91bmQgZnJvbSBcImJsb29kaG91bmQtanNcIjtcclxuXHJcbmltcG9ydCBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnIGZyb20gJy4vZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5qcyc7XHJcbmltcG9ydCBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoU2VydmljZSBmcm9tICcuL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLmpzJztcclxuXHJcbi8qKlxyXG4gKiBUaGUgYnV0dG9uIGNvbnRyb2xsZXIgdGhhdCBoYW5kbGVzIHVpIGludGVyYWN0aW9ucy5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyIHtcclxuXHJcbiAgIGNvbnN0cnVjdG9yKHR5cGVBaGVhZElkLCBva0J1dHRvbklkLCBub3RGb3VuZE1zZ0lkLCBmb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0SWQsIGFwaVVybElkKSB7XHJcbiAgICAgIGxldCBzY29wZSA9IHRoaXM7XHJcbiAgICAgIHRoaXMubm90Rm91bmRNc2dFbCA9ICQoXCIjXCIgKyBub3RGb3VuZE1zZ0lkKTtcclxuICAgICAgdGhpcy5va0J0bkVsID0gJCgnIycgKyBva0J1dHRvbklkKTtcclxuICAgICAgdGhpcy50eXBlQWhlYWRTZWFyY2hJbnB1dEVsID0gJCgnIycgKyB0eXBlQWhlYWRJZCk7XHJcbiAgICAgIHRoaXMuZm9sbG93T25UYXNrRGVmblV1aWRPdXB1dEVsID0gJCgnIycgKyBmb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0SWQpO1xyXG4gICAgICBsZXQgYXBpVXJsRWwgPSAkKFwiI1wiICsgYXBpVXJsSWQpO1xyXG5cclxuICAgICAgaWYgKCF0aGlzLm5vdEZvdW5kTXNnRWwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgZm91bmQgbWVzc2FnZSBlbGVtZW50IHJlcXVpcmVkXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMub2tCdG5FbC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9rIGJ1dHRvbiBlbGVtZW50IHJlcXVpcmVkXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMudHlwZUFoZWFkU2VhcmNoSW5wdXRFbC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlR5cGVhaGVhZCBpbnB1dCBlbGVtZW50IHJlcXVpcmVkXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMuZm9sbG93T25UYXNrRGVmblV1aWRPdXB1dEVsLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3V0cHV0IGZvbGxvd09uIHRhc2sgZGVmaW5pdGlvbiBVVUkgaW5wdXQgZWxlbWVudCByZXF1aXJlZFwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFhcGlVcmxFbC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlJFU1QgYXBpIHVybCBlbGVtZW50IGlzIHJlcXVpcmVkXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmFwaVVybCA9IGFwaVVybEVsLnZhbCgpO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uID0gJyc7XHJcblxyXG4gICAgICB0aGlzLnR5cGVBaGVhZFNlYXJjaElucHV0RWwua2V5ZG93bihmdW5jdGlvbigpIHtcclxuICAgICAgICAgc2V0VGltZW91dChcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgIGlmIChzY29wZS50eXBlQWhlYWRTZWFyY2hJbnB1dEVsLnZhbCgpICE9IHNjb3BlLnNlbGVjdGVkT3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgIHNjb3BlLmRpc2FibGVPa0J0bigpO1xyXG4gICAgICAgICAgICAgICAgICBzY29wZS5jbGVhclNlbGVjdGVkVGFza0RlZmluaXRpb24oKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBiaW5kIHNpYmxpbmcgbWV0aG9kcyB0byBjbGFzcyBpbnN0YW5jZS5cclxuICAgICAgdGhpcy5pbml0aWFsaXplID0gdGhpcy5pbml0aWFsaXplLmJpbmQodGhpcyk7XHJcblxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogc2V0IHRoZSBpZCB2YWx1ZSBvZiB0aGUgc2VsZWN0ZWQgdGFzayBkZWZpbml0aW9uIHRvIG91ciBodG1sIGlucHV0IGVsZW1lbnRcclxuICAgICovXHJcbiAgIHNldFNlbGVjdGVkVGFza0RlZmluaXRpb24oc3VnZ2VzdGlvbikge1xyXG4gICAgICBpZiAoc3VnZ2VzdGlvbikge1xyXG4gICAgICAgICB0aGlzLnR5cGVBaGVhZFNlYXJjaElucHV0RWwudmFsKHRoaXMuZGlzcGxheUZvbGxvd09uKG51bGwsIHN1Z2dlc3Rpb24pKTtcclxuICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbiA9IHRoaXMudHlwZUFoZWFkU2VhcmNoSW5wdXRFbC52YWwoKTtcclxuICAgICAgICAgdGhpcy5mb2xsb3dPblRhc2tEZWZuVXVpZE91cHV0RWwuYXR0cigndmFsdWUnLCBzdWdnZXN0aW9uLmlkKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogY2xlYXIgYW55IHNlbGVjdGVkIHRhc2sgZGVmaW5pdGlvbiB2YWx1ZSBpbiBvdXIgaHRtbCBpbnB1dCBlbGVtZW50XHJcbiAgICAqL1xyXG4gICBjbGVhclNlbGVjdGVkVGFza0RlZmluaXRpb24oKSB7XHJcbiAgICAgIHRoaXMuZm9sbG93T25UYXNrRGVmblV1aWRPdXB1dEVsLmF0dHIoJ3ZhbHVlJywgJycpO1xyXG4gICB9XHJcblxyXG4gICAvKipcclxuICAgICogc2V0dXAgVUkgZWxlbWVudHMsIGZldGNoIHRhc2sgZGVmaW5pdGlvbnMgYW5kIGNvbmZpZ3VyZSB0eXBlIGFoZWFkXHJcbiAgICAqL1xyXG4gICBpbml0aWFsaXplKCkge1xyXG4gICAgICB0aGlzLmRpc2FibGVPa0J0bigpO1xyXG5cclxuICAgICAgdHJ5IHtcclxuICAgICAgICAgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaFNlcnZpY2UuZ2V0Rm9sbG93T25UYXNrRGVmaW5pdGlvbnMoXHJcbiAgICAgICAgICAgIHRoaXMuYXBpVXJsKS50aGVuKCh0YXNrRGVmaW5pdGlvbnMpID0+IHRoaXMuY29uZmlndXJlVHlwZUFoZWFkKHRhc2tEZWZpbml0aW9ucykpO1xyXG5cclxuICAgICAgICAgLy8gb25jZSB0aGUgdHlwZWFoZWFkIGlucHV0IGlzIGluaXRpYWxpemVkLCB0aGUgdHlwZSBmaWVsZCB3aWxsIGxvc3QgZm9jdXMsIGhhdmUgdG9cclxuICAgICAgICAgLy8gbWFudWFsbHkgZm9jdXMgaXQgYWdhaW4uXHJcbiAgICAgICAgIHRoaXMudHlwZUFoZWFkU2VhcmNoSW5wdXRFbC5mb2N1cygpO1xyXG4gICAgICB9XHJcbiAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciB3aGlsZSB0cnlpbmcgdG8gZmV0Y2ggdGFzayBkZWZpbml0aW9ucy5cIiwgZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBjb25maWd1cmUgdHlwZSBhaGVhZCB3aXRoIGRhdGEgc291cmNlIGFuZCBkZWZhdWx0IGNvbmZpZ3VyYXRpb24uXHJcbiAgICAqL1xyXG4gICBjb25maWd1cmVUeXBlQWhlYWQodGFza0RlZmluaXRpb25zKSB7XHJcbiAgICAgIGxldCBzY29wZSA9IHRoaXM7XHJcbiAgICAgIGxldCBjb25maWcgPSBuZXcgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyh0YXNrRGVmaW5pdGlvbnMpO1xyXG4gICAgICBcclxuICAgICAgLy8gY3JlYXRlIGEgZGlzcGxheSB2YWx1ZSB0aGF0IHdpbGwgYWxsb3cgZnVsbCB0ZXh0IHNlYXJjaCBvbiBmdWxsIHZhbHVlLlxyXG4gICAgICAkLmVhY2goY29uZmlnLmRhdGEsIGZ1bmN0aW9uKGluZGV4LCBkYXRhKSB7XHJcbiAgICAgICAgIGRhdGEuZGlzcGxheVZhbHVlID0gc2NvcGUuZGlzcGxheUZvbGxvd09uKG51bGwsIGRhdGEpO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgICQudHlwZWFoZWFkKHtcclxuICAgICAgICAgaW5wdXQ6IHNjb3BlLnR5cGVBaGVhZFNlYXJjaElucHV0RWwsXHJcbiAgICAgICAgIGhpZ2hsaWdodDogdHJ1ZSxcclxuICAgICAgICAgbmFtZTogY29uZmlnLm5hbWUsXHJcbiAgICAgICAgIGxpbWl0OiBjb25maWcubGltaXQsXHJcbiAgICAgICAgIG1pbkxlbmd0aDogY29uZmlnLm1pbkxlbmd0aCxcclxuICAgICAgICAgZGlzcGxheTogW1wiZGlzcGxheVZhbHVlXCJdLFxyXG4gICAgICAgICBlbXB0eVRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cIm14LXR5cGVhaGVhZC1tc2ctbm90Zm91bmRcIj4nICsgc2NvcGUubm90Rm91bmRNc2dFbC52YWwoKSArICc8L2Rpdj4nLFxyXG4gICAgICAgICBzb3VyY2U6IHtcclxuICAgICAgICAgICAgZGF0YTogY29uZmlnLmRhdGEsXHJcbiAgICAgICAgIH0sXHJcbiAgICAgICAgIGNhbGxiYWNrOiB7XHJcbiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKHR5cGVBaGVhZElucHV0RWwsIHNlbGVjdGlvbkVsLCBzZWxlY3RlZFJlY29yZCwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgc2NvcGUuZW5hYmxlT2tCdG4oKTtcclxuXHJcbiAgICAgICAgICAgICAgIC8vIHNhdmUgdXNlciBzZWxlY3Rpb24gZnJvbSB0aGUgc2VhcmNoIHJlc3VsdC5cclxuICAgICAgICAgICAgICAgc2NvcGUuc2V0U2VsZWN0ZWRUYXNrRGVmaW5pdGlvbihzZWxlY3RlZFJlY29yZCk7XHJcbiAgICAgICAgICAgICAgIHRoaXMuaGlkZUxheW91dCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgIH1cclxuXHJcbiAgIC8vIERlZmluZSBob3cgdGhlIHJlc3VsdCBpcyBkaXNwbGF5ZWQgaW4gdGhlIGRyb3Bkb3duLlxyXG4gICAvLyBJdCB3aWxsIGRpc3BsYXkgdGhlIHJlc3VsdCBpbiB0aGUgZm9ybWF0IG9mOiB0YXNrIGNvZGUgLSBjb25maWdzbG90IGNvZGUgLSB0YXNrIG5hbWVcclxuICAgZGlzcGxheUZvbGxvd09uKHF1ZXJ5LCBzdWdnZXN0aW9uT2JqKSB7XHJcbiAgICAgIGlmIChzdWdnZXN0aW9uT2JqKSB7XHJcbiAgICAgICAgIHJldHVybiBzdWdnZXN0aW9uT2JqLmNvZGUgKyBcIiAtIFwiICsgc3VnZ2VzdGlvbk9iai5jb25maWdTbG90Q29kZSArIFwiIC0gXCIgKyBzdWdnZXN0aW9uT2JqLm5hbWU7XHJcbiAgICAgIH1cclxuICAgfVxyXG5cclxuICAgLyoqXHJcbiAgICAqIFdyYXBwZXIgdG8gZW5hYmxlIG91ciBPSyBidXR0b25cclxuICAgICovXHJcbiAgIGVuYWJsZU9rQnRuKCkge1xyXG4gICAgICBpZiAodGhpcy5va0J0bkVsKSB7XHJcbiAgICAgICAgIGlmICh0aGlzLm9rQnRuRWwuYXR0cignb3JpZ2luT25DbGlja0V2ZW50JykpIHtcclxuICAgICAgICAgICAgdGhpcy5va0J0bkVsLmF0dHIoJ29uY2xpY2snLCB0aGlzLm9rQnRuRWwuYXR0cignb3JpZ2luT25DbGlja0V2ZW50JykpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAodGhpcy5va0J0bkVsLmF0dHIoJ29yaWdpblRpdGxlJykpIHtcclxuICAgICAgICAgICAgdGhpcy5va0J0bkVsLmF0dHIoJ3RpdGxlJywgdGhpcy5va0J0bkVsLmF0dHIoJ29yaWdpblRpdGxlJykpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICB0aGlzLm9rQnRuRWwucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgIHRoaXMub2tCdG5FbC5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICB0aGlzLm9rQnRuRWwucmVtb3ZlQXR0cignb3JpZ2luT25DbGlja0V2ZW50Jyk7XHJcbiAgICAgICAgIHRoaXMub2tCdG5FbC5yZW1vdmVBdHRyKCdvcmlnaW5UaXRsZScpO1xyXG4gICAgICB9XHJcbiAgIH1cclxuXHJcbiAgIC8qKlxyXG4gICAgKiBXcmFwcGVyIHRvIGRpc2FibGUgb3VyIE9LIGJ1dHRvblxyXG4gICAgKi9cclxuICAgZGlzYWJsZU9rQnRuKCkge1xyXG4gICAgICBpZiAodGhpcy5va0J0bkVsKSB7XHJcbiAgICAgICAgIC8vIHN0b3JlIHRoZSBidXR0b24gb25jbGljayBoYW5kbGVyIGFuZCB0aXRsZSBmb3IgZnV0dXJlIHJlc3RvcmVcclxuICAgICAgICAgaWYgKCF0aGlzLm9rQnRuRWwuYXR0cignb3JpZ2luT25DbGlja0V2ZW50JykpIHtcclxuICAgICAgICAgICAgdGhpcy5va0J0bkVsLmF0dHIoJ29yaWdpbk9uQ2xpY2tFdmVudCcsIHRoaXMub2tCdG5FbC5hdHRyKCdvbmNsaWNrJykpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBpZiAoIXRoaXMub2tCdG5FbC5hdHRyKCdvcmlnaW5UaXRsZScpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2tCdG5FbC5hdHRyKCdvcmlnaW5UaXRsZScsIHRoaXMub2tCdG5FbC5hdHRyKCd0aXRsZScpKTtcclxuICAgICAgICAgfVxyXG5cclxuICAgICAgICAgdGhpcy5va0J0bkVsLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICB0aGlzLm9rQnRuRWwuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgdGhpcy5va0J0bkVsLmF0dHIoJ29uY2xpY2snLCBmYWxzZSk7XHJcbiAgICAgICAgIHRoaXMub2tCdG5FbC5hdHRyKCd0aXRsZScsICcnKTtcclxuICAgICAgfVxyXG4gICB9XHJcblxyXG59XHJcbiIsIi8qIGdsb2JhbCAkLCBleHBlY3QsIGphc21pbmUsIHNweU9uLCAkLCBzZXRGaXh0dXJlcyAqL1xyXG4vKipcclxuICogQ3JlYXRlIEZvbGxvdy1vbiBUYXNrIFNlYXJjaCBUZXN0IFN1aXRlXHJcbiAqKi9cclxuXHJcbmltcG9ydCBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29udHJvbGxlciBmcm9tICcuL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb250cm9sbGVyLmpzJztcclxuXHJcbmRlc2NyaWJlKCdGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29udHJvbGxlciBmb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIuanMnLCBmdW5jdGlvbigpIHtcclxuICAgbGV0IHJlc3RBcGlVcmwgPSBcIi9zb21lUmVzdEFwaVwiO1xyXG5cclxuICAgZnVuY3Rpb24gZ2V0R29vZENvbnRyb2xsZXIoKSB7XHJcbiAgICAgIHJldHVybiBuZXcgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIoJ2ZvbGxvd09uVGFza1NlYXJjaFF1ZXJ5JyxcclxuICAgICAgICAgJ2lkQnV0dG9uT2snLFxyXG4gICAgICAgICAnaWRUeXBlYWhlYWROb3RGb3VuZE1lc3NhZ2UnLFxyXG4gICAgICAgICAnaWRGaWVsZEZvbGxvd09uVGFza0RlZm5VdWlkJyxcclxuICAgICAgICAgJ2lkZm9sbG93T25UYXNrRGVmaW5pdGlvblJlc3RBUEknKTtcclxuICAgfVxyXG5cclxuICAgZnVuY3Rpb24gc2V0VXBIVE1MRml4dHVyZSgpIHtcclxuICAgICAgc2V0Rml4dHVyZXMoXHJcbiAgICAgICAgICc8Zm9ybSBpZD1cImZvcm0tdHlwZWFoZWFkLXRlc3RcIiBuYW1lPVwiZm9ybS10eXBlYWhlYWQtdGVzdFwiPicgK1xyXG4gICAgICAgICAnICA8ZGl2IGNsYXNzPVwidHlwZWFoZWFkX19jb250YWluZXJcIj4nICtcclxuICAgICAgICAgJyAgICAgPGRpdiBjbGFzcz1cInR5cGVhaGVhZF9fZmllbGRcIj4nICtcclxuICAgICAgICAgJyAgICAgICAgPHNwYW4gY2xhc3M9XCJ0eXBlYWhlYWRfX3F1ZXJ5XCI+JyArXHJcbiAgICAgICAgICcgICAgICAgICAgPGlucHV0IGNsYXNzPSBcImpzLXR5cGVhaGVhZC10ZXN0XCIgaWQ9XCJmb2xsb3dPblRhc2tTZWFyY2hRdWVyeVwiIG5hbWU9XCJmb2xsb3dPblRhc2tTZWFyY2hRdWVyeVwiPicgK1xyXG4gICAgICAgICAnICAgICAgICA8L3NwYW4+JyArXHJcbiAgICAgICAgICcgICAgIDwvZGl2PicgK1xyXG4gICAgICAgICAnICA8L2Rpdj4nICtcclxuICAgICAgICAgJyAgPGJ1dHRvbiBpZD1cImlkQnV0dG9uT2tcIiB0aXRsZT1cIm15dGl0bGVcIj5PazwvYnV0dG9uPicgK1xyXG4gICAgICAgICAnICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJhRm9sbG93T25UYXNrRGVmaW5pdGlvblV1aWRcIiBpZD1cImlkRmllbGRGb2xsb3dPblRhc2tEZWZuVXVpZFwiPicgK1xyXG4gICAgICAgICAnICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIGlkPVwiaWRUeXBlYWhlYWROb3RGb3VuZE1lc3NhZ2VcIiB2YWx1ZT1cIndlYi5tc2cuTVNHX05PX01BVENISU5HX0ZPTExPV09OX1RBU0tfREVGSU5JVElPTlNcIj4nICtcclxuICAgICAgICAgJyAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBpZD1cImlkZm9sbG93T25UYXNrRGVmaW5pdGlvblJlc3RBUElcIiB2YWx1ZT1cIicgKyByZXN0QXBpVXJsICsgJ1wiJyArXHJcbiAgICAgICAgICc8L2Zvcm0+Jyk7XHJcbiAgIH1cclxuXHJcbiAgIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgIGphc21pbmUuQWpheC5pbnN0YWxsKCk7XHJcbiAgICAgIHNldFVwSFRNTEZpeHR1cmUoKTtcclxuICAgICAgdGhpcy5va0J1dHRvbkVsID0gJCgnI2lkQnV0dG9uT2snKTtcclxuICAgICAgdGhpcy5maWVsZEZvbGxvd09uVGFza0RlZm5VdWlkRWwgPSAkKCcjaWRGaWVsZEZvbGxvd09uVGFza0RlZm5VdWlkJyk7XHJcbiAgIH0pO1xyXG5cclxuICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICBqYXNtaW5lLkFqYXgudW5pbnN0YWxsKCk7XHJcbiAgIH0pO1xyXG5cclxuICAgaXQoXCJTaG91bGQgaGF2ZSBhIGJ1dHRvbiB3aXRoIE9LIGxhYmVsXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBleHBlY3QodGhpcy5va0J1dHRvbkVsKS50b0hhdmVUZXh0KFwiT2tcIik7XHJcbiAgIH0pO1xyXG5cclxuICAgaXQoXCJTaG91bGQgdGhyb3cgZXJyb3IgaW5kaWNhdGluZyBtaXNzaW5nIHR5cGVhaGVhZElkXCIsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgZXhwZWN0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBuZXcgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIoJ0ZBS0VfZm9sbG93T25UYXNrU2VhcmNoUXVlcnknLFxyXG4gICAgICAgICAgICAnRkFLRV9pZEJ1dHRvbk9rJyxcclxuICAgICAgICAgICAgJ0ZBS0VfaWRUeXBlYWhlYWROb3RGb3VuZE1lc3NhZ2UnLFxyXG4gICAgICAgICAgICAnRkFLRV9pZEZpZWxkRm9sbG93T25UYXNrRGVmblV1aWQnLFxyXG4gICAgICAgICAgICAnRkFLRV9pZGZvbGxvd09uVGFza0RlZmluaXRpb25SZXN0QVBJJyk7XHJcbiAgICAgIH0pLnRvVGhyb3coKTtcclxuICAgfSk7XHJcblxyXG4gICBpdChcIlNob3VsZCBoYXZlIE9rIGJ1dHRvbiBlbmFibGVkXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgY29udHJvbGxlciA9IGdldEdvb2RDb250cm9sbGVyKCk7XHJcbiAgICAgIGNvbnRyb2xsZXIuZW5hYmxlT2tCdG4oKTtcclxuICAgICAgZXhwZWN0KHRoaXMub2tCdXR0b25FbCkubm90LnRvSGF2ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICB9KTtcclxuXHJcbiAgIGl0KFwiU2hvdWxkIGhhdmUgT2sgYnV0dG9uIGRpc2FibGVkXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgY29udHJvbGxlciA9IGdldEdvb2RDb250cm9sbGVyKCk7XHJcbiAgICAgIGNvbnRyb2xsZXIuZGlzYWJsZU9rQnRuKCk7XHJcbiAgICAgIGV4cGVjdCh0aGlzLm9rQnV0dG9uRWwpLnRvSGF2ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICB9KTtcclxuXHJcblxyXG4gICBpdCgncmV0dXJucyBhIHByb3Blcmx5IGNvbnN0cnVjdGVkIGRpc3BsYXkgdmFsdWUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgbGV0IGRhdGEgPSBbe1xyXG4gICAgICAgICBjb2RlOiA1LFxyXG4gICAgICAgICBjb25maWdTbG90Q29kZTogMyxcclxuICAgICAgICAgbmFtZTogJ3Rlc3QnXHJcbiAgICAgIH1dO1xyXG5cclxuICAgICAgbGV0IGNvbnRyb2xsZXIgPSBnZXRHb29kQ29udHJvbGxlcigpO1xyXG4gICAgICBleHBlY3QoY29udHJvbGxlci5kaXNwbGF5Rm9sbG93T24obnVsbCwgZGF0YVswXSkpLnRvQmUoXCI1IC0gMyAtIHRlc3RcIik7XHJcbiAgIH0pO1xyXG5cclxuICAgaXQoXCJTaG91bGQgc2V0IGFuZCBjbGVhciBzZWxlY3RlZCB0YXNrIGRlZmluaXRpb24gb2Ygb3V0cHV0IGVsZW1lbnRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGxldCBjb250cm9sbGVyID0gZ2V0R29vZENvbnRyb2xsZXIoKTtcclxuICAgICAgY29udHJvbGxlci5zZXRTZWxlY3RlZFRhc2tEZWZpbml0aW9uKHsgaWQ6ICdzb21lVmFsdWUnIH0pO1xyXG4gICAgICBleHBlY3QodGhpcy5maWVsZEZvbGxvd09uVGFza0RlZm5VdWlkRWwuYXR0cigndmFsdWUnKSkudG9CZSgnc29tZVZhbHVlJyk7XHJcblxyXG4gICAgICBjb250cm9sbGVyLmNsZWFyU2VsZWN0ZWRUYXNrRGVmaW5pdGlvbigpO1xyXG4gICAgICBleHBlY3QodGhpcy5maWVsZEZvbGxvd09uVGFza0RlZm5VdWlkRWwuYXR0cigndmFsdWUnKSkudG9CZSgnJyk7XHJcbiAgIH0pO1xyXG5cclxuICAgaXQoJ0ZldGNoZXMgdGFzayBkZWZpbml0aW9ucyBzdWNjZXNzZnVsbHknLCBmdW5jdGlvbigpIHtcclxuICAgICAgbGV0IGNvbnRyb2xsZXIgPSBnZXRHb29kQ29udHJvbGxlcigpO1xyXG4gICAgICBsZXQgcmVzcG9uc2VUYXNrRGVmaW5pdGlvbnMgPSBbXHJcbiAgICAgICAgIHsgXCJpZFwiOiBcIkE2QUFFMThCNjM4NzQwQjI5QjJGMzRENTFDRjJDQ0Q1XCIsIFwiY29uZmlnU2xvdENvZGVcIjogXCJCT00xMjNcIiwgXCJuYW1lXCI6IFwiUmVxV2l0aEltcGFjdDFcIiwgXCJjb2RlXCI6IFwiTkMxNDk5Mi1SRVExXCIgfSxcclxuICAgICAgICAgeyBcImlkXCI6IFwiQTZBQUUxOEI2Mzg3NDBCMjlCMkYzNEQ1MUNGMkNDRDZcIiwgXCJjb25maWdTbG90Q29kZVwiOiBcIkJPTTEyM1wiLCBcIm5hbWVcIjogXCJSZXFXaXRoSW1wYWN0MlwiLCBcImNvZGVcIjogXCJOQzE0OTkyLVJFUTJcIiB9LFxyXG4gICAgICAgICB7IFwiaWRcIjogXCJBNkFBRTE4QjYzODc0MEIyOUIyRjM0RDUxQ0YyQ0NEN1wiLCBcImNvbmZpZ1Nsb3RDb2RlXCI6IFwiQk9NMTIzXCIsIFwibmFtZVwiOiBcIlJlcVdpdGhJbXBhY3QzXCIsIFwiY29kZVwiOiBcIk5DMTQ5OTItUkVRM1wiIH0sXHJcbiAgICAgICAgIHsgXCJpZFwiOiBcIkE2QUFFMThCNjM4NzQwQjI5QjJGMzRENTFDRjJDQ0Q4XCIsIFwiY29uZmlnU2xvdENvZGVcIjogXCJCT00xMjNcIiwgXCJuYW1lXCI6IFwiUmVxV2l0aEltcGFjdDRcIiwgXCJjb2RlXCI6IFwiTkMxNDk5Mi1SRVE0XCIgfSxcclxuICAgICAgICAgeyBcImlkXCI6IFwiQTZBQUUxOEI2Mzg3NDBCMjlCMkYzNEQ1MUNGMkNDRDlcIiwgXCJjb25maWdTbG90Q29kZVwiOiBcIkJPTTEyM1wiLCBcIm5hbWVcIjogXCJSZXFXaXRoSW1wYWN0NVwiLCBcImNvZGVcIjogXCJOQzE0OTkyLVJFUTVcIiB9LFxyXG4gICAgICAgICB7IFwiaWRcIjogXCJBNkFBRTE4QjYzODc0MEIyOUIyRjM0RDUxQ0YyQ0NFM1wiLCBcImNvbmZpZ1Nsb3RDb2RlXCI6IFwiQk9NMTIzXCIsIFwibmFtZVwiOiBcIlJlcVdpdGhJbXBhY3Q2XCIsIFwiY29kZVwiOiBcIk5DMTQ5OTItUkVRNlwiIH0sXHJcbiAgICAgIF07XHJcblxyXG4gICAgICBzcHlPbigkLCAnYWpheCcpLmFuZC5jYWxsRmFrZShmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgIHJldHVybiBlLnN1Y2Nlc3MocmVzcG9uc2VUYXNrRGVmaW5pdGlvbnMpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIGluaXRpYWxpemUgY29udHJvbGxlclxyXG4gICAgICBjb250cm9sbGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiBhamF4IHdhcyBkb25lIHdpdGggcHJvcGVyIHVybFxyXG4gICAgICBleHBlY3QoJC5hamF4LmNhbGxzLm1vc3RSZWNlbnQoKS5hcmdzWzBdLnVybCkudG9FcXVhbChyZXN0QXBpVXJsKTtcclxuXHJcbiAgICAgIGxldCBva0J1dHRvbkVsID0gJCgnI2lkQnV0dG9uT2snKTtcclxuICAgICAgbGV0IG5hdGl2ZUVsID0gJChcIiNmb2xsb3dPblRhc2tTZWFyY2hRdWVyeVwiKTtcclxuXHJcbiAgICAgIC8vIGhvb2sgZm9jdXMgbWV0aG9kIG9mIGlucHV0IGZpZWxkXHJcbiAgICAgIHNweU9uKG5hdGl2ZUVsLCAnZm9jdXMnKTtcclxuXHJcbiAgICAgIC8vIHNpbmNlIHRoaXMgaXMgYW4gYXN5bmMgcmVxdWVzdDsgbWlnaHQgdGFrZSBhIGZldyBtcyB0byBoYW5kbGUgdGhlIHRpbWUgamlnZ2xpbmcuLi5cclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgLy8gY2hlY2sgaWYgb2sgYnV0dG9uIHdhcyBkaXNhYmxlZFxyXG4gICAgICAgICBleHBlY3Qob2tCdXR0b25FbCkudG9IYXZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgICAvLyBjaGVjayBpZiBmb2N1cyB3YXMgZ2l2ZW4gdG8gY29tcG9uZW50XHJcbiAgICAgICAgIGV4cGVjdChuYXRpdmVFbC5mb2N1cykudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICB9LCAxMDApO1xyXG5cclxuICAgfSk7XHJcblxyXG59KTtcclxuIiwiLyogZ2xvYmFsIGV4cGVjdCAqL1xyXG5pbXBvcnQgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyBmcm9tICcuL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcuanMnO1xyXG5cclxuZGVzY3JpYmUoJ0ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcgZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcuanMnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgIGl0KCd0aHJvd3MgZXhjZXB0aW9uIG9uIGVtcHR5IGRhdGEgcGFyYW1ldGVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGV4cGVjdChmdW5jdGlvbigpIHtcclxuICAgICAgICAgbGV0IGNvbmZpZyA9IG5ldyBGb2xsb3dPblRhc2tEZWZpbml0aW9uU2VhcmNoQ29uZmlnKCk7XHJcbiAgICAgIH0pLnRvVGhyb3dFcnJvcihcIlRoZSByZXNwb25zZSBkYXRhIHN1cHBvc2UgdG8gYmUgaW4gYXJyYXkgZm9ybVwiKTtcclxuICAgfSk7XHJcbiAgIFxyXG4gICBpdCgndGhyb3dzIGV4Y2VwdGlvbiB3aXRoIGEgb2JqZWN0IHR5cGUgZGF0YSBwYXJhbWV0ZXIgaW5zdGVhZCBvZiBhcnJheScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBleHBlY3QoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgIGxldCBkYXRhID0ge307XHJcbiAgICAgICAgIGxldCBjb25maWcgPSBuZXcgRm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZyhkYXRhKTtcclxuICAgICAgfSkudG9UaHJvd0Vycm9yKFwiVGhlIHJlc3BvbnNlIGRhdGEgc3VwcG9zZSB0byBiZSBpbiBhcnJheSBmb3JtXCIpO1xyXG4gICB9KTtcclxuICAgXHJcbiAgIGl0KCdjcmVhdGVzIGEgdmFsaWQgY29uZmlnIG9iamVjdCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICBsZXQgZGF0YSA9IFtdO1xyXG4gICAgICBsZXQgY29uZmlnID0gbmV3IEZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hDb25maWcoZGF0YSk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoY29uZmlnLm5hbWUpLnRvQmUoJ2ZvbGxvd09uVGFza0RlZm5TZWFyY2gnKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5saW1pdCkudG9CZSg1MCk7XHJcbiAgICAgIGV4cGVjdChjb25maWcubWluTGVuZ3RoKS50b0JlKDEpO1xyXG4gICB9KTtcclxuXHJcbn0pO1xyXG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFza1N1cGVydmlzaW9uU2VydmljZSB7XHJcblxyXG4gICBnZXRDcmV3c0ZvclVzZXIodXNlcklkKSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuXHJcbiAgICAgICAgIGlmICghdXNlcklkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndXNlcklkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBjb25zdCBjcmV3TGlzdFJlc3RFbmRwb2ludCA9ICcvbWFpbnRlbml4L3Jlc3QvY3Jldy9saXN0JztcclxuICAgICAgICAgY29uc3QgYXJncyA9IHsgJ3VzZXJJZCc6IHVzZXJJZCB9O1xyXG5cclxuICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBjcmV3TGlzdFJlc3RFbmRwb2ludCxcclxuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgZGF0YTogYXJncyxcclxuICAgICAgICAgICAgc3VjY2VzczogKGNyZXdSZXNwb25zZUxpc3QsIHRleHRTdGF0dXMsIGpxWEhSKSA9PiB7XHJcbiAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3VjY2VzczogXCIsIGNyZXdSZXNwb25zZUxpc3QpO1xyXG4gICAgICAgICAgICAgICByZXNvbHZlKGNyZXdSZXNwb25zZUxpc3QpO1xyXG4gICAgICAgICAgICAgICAvLyBzdWNjZXNzSGFuZGxlcihjcmV3UmVzcG9uc2VMaXN0KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IChqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pID0+IHtcclxuICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSAnRXJyb3IgY29kZSA9ICAnICsganFYSFIuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICByZWplY3QobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgIC8vIGZhaWx1cmVIYW5kbGVyKG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgVGFza1N1cGVydmlzaW9uU2VydmljZSBmcm9tICcuL1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UnO1xyXG5cclxuZGVzY3JpYmUoJ1Rhc2tTdXBlcnZpc2lvblNlcnZpY2UuanMnLCAoKT0+e1xyXG5cclxuICAgZGVzY3JpYmUoJ2dldENyZXdzRm9yVXNlcicsICgpPT57XHJcblxyXG4gICAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFRhc2tTdXBlcnZpc2lvblNlcnZpY2UoKTtcclxuXHJcbiAgICAgIGNvbnN0IHVzZXJJZCA9ICd1c2VyJztcclxuICAgICAgY29uc3Qgc3VjY2Vzc0hhbmRsZXIgPSBmdW5jdGlvbigpe307XHJcbiAgICAgIGNvbnN0IGZhaWx1cmVIYW5kbGVyID0gZnVuY3Rpb24oKXt9O1xyXG5cclxuICAgICAgYmVmb3JlRWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgamFzbWluZS5BamF4Lmluc3RhbGwoKTtcclxuICAgICAgIH0pO1xyXG5cclxuICAgICAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICBqYXNtaW5lLkFqYXgudW5pbnN0YWxsKCk7XHJcbiAgICAgICB9KTtcclxuXHJcblx0ICAgLyoqIFxyXG5cdCAgIFxyXG4gICAgICBpdCgndGhyb3dzIGFuIGVycm9yIHdoZW4gdXNlciBpcyBub3QgcHJvdmlkZWQnLCAoKT0+e1xyXG4gICAgICAgICBsZXQgdW5kZWZpbmVkVXNlcklkO1xyXG4gICAgICAgICBleHBlY3QoKCkgPT4gc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodW5kZWZpbmVkVXNlcklkLCBzdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKSlcclxuICAgICAgICAgICAgLnRvVGhyb3dFcnJvcigndXNlcklkIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCd0aHJvd3MgYW4gZXJyb3Igd2hlbiB1c2VyIGlzIGJsYW5rIHN0cmluZycsICgpPT57XHJcbiAgICAgICAgIGNvbnN0IGJsYW5rVXNlcklkID0gJyc7XHJcbiAgICAgICAgIGV4cGVjdCgoKSA9PiBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcihibGFua1VzZXJJZCwgc3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICkpXHJcbiAgICAgICAgICAgIC50b1Rocm93RXJyb3IoJ3VzZXJJZCBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgndGhyb3dzIGFuIGVycm9yIHdoZW4gc3VjY2VzcyBoYW5kbGVyIGlzIG5vdCBwcm92aWRlZCcsICgpPT57XHJcbiAgICAgICAgIGxldCB1bmRlZmluZWRTdWNjZXNzSGFuZGxlcjtcclxuICAgICAgICAgZXhwZWN0KCgpID0+IHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgdW5kZWZpbmVkU3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICkpXHJcbiAgICAgICAgICAgIC50b1Rocm93RXJyb3IoJ3N1Y2Nlc3NIYW5kbGVyIGlzIG1hbmRhdG9yeScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCd0aHJvd3MgYW4gZXJyb3Igd2hlbiBzdWNjZXNzIGhhbmRsZXIgaXMgbm90IGEgZnVuY3Rpb24nLCAoKT0+e1xyXG4gICAgICAgICBjb25zdCBub25GdW5jdGlvblN1Y2Nlc3NIYW5kbGVyID0gJ2hlbGxvJztcclxuICAgICAgICAgZXhwZWN0KCgpID0+IHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgbm9uRnVuY3Rpb25TdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKSlcclxuICAgICAgICAgICAgLnRvVGhyb3dFcnJvcignc3VjY2Vzc0hhbmRsZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3Rocm93cyBhbiBlcnJvciB3aGVuIGZhaWx1cmUgaGFuZGxlciBpcyBub3QgcHJvdmlkZWQnLCAoKT0+e1xyXG4gICAgICAgICBsZXQgdW5kZWZpbmVkRmFpbHVyZUhhbmRsZXI7XHJcbiAgICAgICAgIGV4cGVjdCgoKSA9PiBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCB1bmRlZmluZWRGYWlsdXJlSGFuZGxlciApKVxyXG4gICAgICAgICAgICAudG9UaHJvd0Vycm9yKCdmYWlsdXJlSGFuZGxlciBpcyBtYW5kYXRvcnknKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgndGhyb3dzIGFuIGVycm9yIHdoZW4gZmFpbHVyZSBoYW5kbGVyIGlzIG5vdCBhIGZ1bmN0aW9uJywgKCk9PntcclxuICAgICAgICAgY29uc3Qgbm9uRnVuY3Rpb25GYWlsdXJlSGFuZGxlciA9ICdoZWxsbyc7XHJcbiAgICAgICAgIGV4cGVjdCgoKSA9PiBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCBub25GdW5jdGlvbkZhaWx1cmVIYW5kbGVyICkpXHJcbiAgICAgICAgICAgIC50b1Rocm93RXJyb3IoJ2ZhaWx1cmVIYW5kbGVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCd3aWxsIG1ha2UgYW4gYWpheCBjYWxsIHRvIHRoZSBjb3JyZWN0IHVybCcsICgpPT57XHJcbiAgICAgICAgIHNweU9uKCQsICdhamF4Jyk7XHJcbiAgICAgICAgIHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgc3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICk7XHJcbiAgICAgICAgIGV4cGVjdCgkLmFqYXguY2FsbHMubW9zdFJlY2VudCgpLmFyZ3NbMF0udXJsKS50b0VxdWFsKCcvbWFpbnRlbml4L3Jlc3QvY3Jldy9saXN0Jyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaXQoJ3dpbGwgbWFrZSBhbiBhamF4IGNhbGwgd2l0aCB0aGUgY29ycmVjdCB0eXBlJywgKCk9PntcclxuICAgICAgICAgc3B5T24oJCwgJ2FqYXgnKTtcclxuICAgICAgICAgc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCBzdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKTtcclxuICAgICAgICAgZXhwZWN0KCQuYWpheC5jYWxscy5tb3N0UmVjZW50KCkuYXJnc1swXS50eXBlKS50b0VxdWFsKCdHRVQnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnd2lsbCBtYWtlIGFuIGFqYXggY2FsbCB3aXRoIHRoZSBjb3JyZWN0IGRhdGEnLCAoKT0+e1xyXG4gICAgICAgICBzcHlPbigkLCAnYWpheCcpO1xyXG4gICAgICAgICBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlciApO1xyXG4gICAgICAgICBsZXQgZXhwZWN0ZWREYXRhID0geyd1c2VySWQnOiB1c2VySWR9O1xyXG4gICAgICAgICBleHBlY3QoJC5hamF4LmNhbGxzLm1vc3RSZWNlbnQoKS5hcmdzWzBdLmRhdGEpLnRvRXF1YWwoZXhwZWN0ZWREYXRhKTtcclxuICAgICAgfSk7XHJcblx0ICAqKi9cclxuXHJcbiAgICAgIGl0KCd3aWxsIGNhbGwgdGhlIHN1Y2Nlc3MgaGFuZGxlciB3aGVuIHRoZSBhamF4IGNhbGwgaXMgc3VjY2Vzc2Z1bCcsICgpPT57XHJcbiAgICAgICAgIHNweU9uKCQsICdhamF4JykuYW5kLmNhbGxGYWtlKCBmdW5jdGlvbihhangpIHtcclxuICAgICAgICAgICAgYWp4LnN1Y2Nlc3Moe30pO1xyXG4gICAgICAgICB9KTtcclxuXHRcdCBcclxuICAgICAgICAgLyoqIGNvbnN0IHNweVN1Y2Nlc3NIYW5kbGVyID0gamFzbWluZS5jcmVhdGVTcHkoJ3NweVN1Y2Nlc3NIYW5kbGVyJyk7XHJcbiAgICAgICAgIHNlcnZpY2UuZ2V0Q3Jld3NGb3JVc2VyKHVzZXJJZCwgc3B5U3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyICk7XHJcbiAgICAgICAgIGV4cGVjdChzcHlTdWNjZXNzSGFuZGxlcikudG9IYXZlQmVlbkNhbGxlZCgpOyAqKi9cclxuXHRcdCBcclxuXHRcdCBcclxuXHRcdCAvKipcclxuXHRcdHZhciBzcHlTdWNjZXNzSGFuZGxlciA9IGphc21pbmUuY3JlYXRlU3B5KCdzdWNjZXNzMjIyJyk7XHJcblx0XHR2YXIgc3B5RmFpbHVyZUhhbmRsZXIgPSBqYXNtaW5lLmNyZWF0ZVNweSgnZmFpbHVyZScpO1xyXG5cdFx0amFzbWluZS5BamF4LndpdGhNb2NrKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHNweVN1Y2Nlc3NIYW5kbGVyLCBzcHlGYWlsdXJlSGFuZGxlciApO1xyXG5cdFx0XHRleHBlY3Qoc3B5U3VjY2Vzc0hhbmRsZXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuXHRcdH0pOyAqKi9cclxuICAgICAgfSk7XHJcbi8qKlxyXG4gICAgICBpdCgnd2lsbCBjYWxsIHRoZSBlcnJvciBoYW5kbGVyIHdoZW4gdGhlIGFqYXggY2FsbCBpcyB1bnN1Y2Nlc3NmdWwnLCAoKT0+e1xyXG4gICAgICAgICBzcHlPbigkLCAnYWpheCcpLmFuZC5jYWxsRmFrZSggZnVuY3Rpb24oYWp4KSB7XHJcbiAgICAgICAgICAgIGFqeC5lcnJvcih7fSk7XHJcbiAgICAgICAgIH0pO1xyXG4gICAgICAgICBjb25zdCBzcHlGYWlsdXJlSGFuZGxlciA9IGphc21pbmUuY3JlYXRlU3B5KCdzcHlGYWlsdXJlSGFuZGxlcicpO1xyXG4gICAgICAgICBzZXJ2aWNlLmdldENyZXdzRm9yVXNlcih1c2VySWQsIHN1Y2Nlc3NIYW5kbGVyLCBzcHlGYWlsdXJlSGFuZGxlciApO1xyXG4gICAgICAgICBleHBlY3Qoc3B5RmFpbHVyZUhhbmRsZXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgfSk7XHJcbioqL1xyXG5cclxuLy8gICAgICBpdCgnd2lsbCBjYWxsIHRoZSBzdWNjZXNzIGhhbmRsZXIgd2l0aCBlbXB0eSBsaXN0IHdoZW4gdXNlciBiZWxvbmdzIHRvIG5vIGNyZXdzJywgKCk9PntcclxuLy9cclxuLy8gICAgICAgICAvL1xyXG4vLyAgICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgdGVzdCBkb2VzIGV4ZXJjaXNlIHRoZSBiZWhhdmlvdXIgYnV0IGRvZXMgbm90IHJlYWxseSBoYXZlIGFueXRoaW5nIHRvXHJcbi8vICAgICAgICAgLy8gZG8gd2l0aCB0aGUgbGlzdCBiZWluZyByZXR1cm5lZCwgdGhlIGFqYXggY2FsbCBzaW1wbHkgY2FsbHMgdGhlIHN1Y2Nlc3MgaGFuZGxlciB3aXRoXHJcbi8vICAgICAgICAgLy8gd2hhdGV2ZXIgZGF0YSBpdCBpcyBwcm92aWRlZC4uLiBzZWUgdGVzdCBiZWxvdyBhcyBwcm9vZlxyXG4vLyAgICAgICAgIC8vXHJcbi8vICAgICAgICAgLy8gSSB0aGluayB0aGlzIGFuZCB0aGUgYmVoYXZpb3VycyBiZWxvdyBhcmUgYWxsIGFjdHVhbGx5IGJlaGF2aW91cnMgb2YgdGhlIGVuZHBvaW50XHJcbi8vICAgICAgICAgLy8gYW5kIG5vdCB0aGlzIHNlcnZpY2VcclxuLy8gICAgICAgICAvL1xyXG4vLyAgICAgICAgIC8vIHNvIGluc3RlYWQgb2YgdGhpcyB0ZXN0LCBtYXliZSB3ZSBzaG91bGQganVzdCBiZSB3cml0aW5nIGEgdGVzdCB0byBcImV4cGVjdFwiIHRoYXQgdGhlXHJcbi8vICAgICAgICAgLy8gc3VjY2Vzc0hhbmRsZXIgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gdGhlIGFqYXggY2FsbCBpcyBzdWNjZXNzZnVsXHJcbi8vICAgICAgICAgLy8gKGFscmVhZHkgd3JpdHRlbiBhYm92ZSlcclxuLy8gICAgICAgICAvL1xyXG4vL1xyXG4vLyAgICAgICAgIGNvbnN0IGV4cGVjdGVkUmVzdWx0ID0gJ2V4cGVjdGVkJztcclxuLy9cclxuLy8gICAgICAgICBzcHlPbigkLCAnYWpheCcpLmFuZC5jYWxsRmFrZSggKGUpID0+IHtcclxuLy8gICAgICAgICAgICByZXR1cm4gZS5zdWNjZXNzKCBleHBlY3RlZFJlc3VsdCwgJ2Zha2UgdGV4dFN0YXR1cycsICdmYWtlIGpxWEhSJyApO1xyXG4vLyAgICAgICAgIH0pO1xyXG4vL1xyXG4vLyAgICAgICAgIGxldCBhY3R1YWxSZXN1bHQ7XHJcbi8vICAgICAgICAgY29uc3QgdXNlcklkID0gJ3VzZXInO1xyXG4vLyAgICAgICAgIGNvbnN0IHN1Y2Nlc3NIYW5kbGVyID0gZnVuY3Rpb24oZGF0YSl7IGFjdHVhbFJlc3VsdCA9IGRhdGE7IH07XHJcbi8vICAgICAgICAgY29uc3QgZmFpbHVyZUhhbmRsZXIgPSBmdW5jdGlvbigpe307XHJcbi8vXHJcbi8vICAgICAgICAgc2VydmljZS5nZXRDcmV3c0ZvclVzZXIodXNlcklkLCBzdWNjZXNzSGFuZGxlciwgZmFpbHVyZUhhbmRsZXIgKTtcclxuLy9cclxuLy8gICAgICAgICBleHBlY3QoYWN0dWFsUmVzdWx0KS50b0VxdWFsKGV4cGVjdGVkUmVzdWx0KTtcclxuLy9cclxuLy8gICAgICB9KTtcclxuLy9cclxuLy9cclxuLy9cclxuLy8gICAgICBpdCgnd2lsbCBjYWxsIHRoZSBzdWNjZXNzIGhhbmRsZXIgd2l0aCB0aGUgbGlzdCBvZiBjcmV3cyB0byB3aGljaCB1c2VyIGJlbG9uZ3Mgd2hlbiB0aGUgdXNlciBiZWxvbmdzIHRvIGFsbCBjcmV3cycsICgpPT57XHJcbi8vXHJcbi8vICAgICAgfSk7XHJcbi8vXHJcbi8vICAgICAgaXQoJ3dpbGwgY2FsbCB0aGUgc3VjY2VzcyBoYW5kbGVyIHdpdGggdGhlIGxpc3Qgb2YgY3Jld3MgdG8gd2hpY2ggdXNlciBiZWxvbmdzIHdoZW4gdGhlIHVzZXIgYmVsb25ncyB0byBzb21lIGNyZXdzJywgKCk9PntcclxuLy9cclxuLy8gICAgICB9KTtcclxuLy9cclxuLy8gICAgICBpdCgnd2lsbCBjYWxsIHRoZSBmYWlsdXJlIGhhbmRsZXIgd2l0aCBFcnJvciBtc2cgd2hlbiByZXN0IEVuZCBQb2ludCBpcyBub3QgYWNjZXNzaWJsZScsICgpPT57XHJcbi8vXHJcbi8vICAgICAgfSk7XHJcblxyXG4gICB9KTtcclxuXHJcbn0pOyIsInZhciBtYXAgPSB7XG5cdFwiLi9iYXNlbWFpbnRlbmFuY2UvdGFzay90YXNrc3VwZXJ2aXNpb24vVGFza1N1cGVydmlzaW9uQ29udHJvbGxlci5pbml0Q3Jld3NXaWRnZXQuc3BlYy5qc1wiOiAxMSxcblx0XCIuL2Jhc2VtYWludGVuYW5jZS90YXNrL3Rhc2tzdXBlcnZpc2lvbi9UYXNrU3VwZXJ2aXNpb25TZXJ2aWNlLnNwZWMuanNcIjogMTAsXG5cdFwiLi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbmZpZy5zcGVjLmpzXCI6IDgsXG5cdFwiLi9mb2xsb3dPblRhc2svZm9sbG93T25UYXNrRGVmaW5pdGlvblNlYXJjaENvbnRyb2xsZXIuc3BlYy5qc1wiOiA3LFxuXHRcIi4vZm9sbG93T25UYXNrL2ZvbGxvd09uVGFza0RlZmluaXRpb25TZWFyY2hTZXJ2aWNlLnNwZWMuanNcIjogNSxcblx0XCIuL3NvbWVGZWF0dXJlL2ZlYXR1cmVNYXRoL2ZlYXR1cmVNYXRoLnNwZWMuanNcIjogNFxufTtcblxuXG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0dmFyIGlkID0gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7XG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcblx0cmV0dXJuIG1vZHVsZTtcbn1cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0dmFyIGlkID0gbWFwW3JlcV07XG5cdGlmKCEoaWQgKyAxKSkgeyAvLyBjaGVjayBmb3IgbnVtYmVyIG9yIHN0cmluZ1xuXHRcdHZhciBlID0gbmV3IEVycm9yKCdDYW5ub3QgZmluZCBtb2R1bGUgXCInICsgcmVxICsgJ1wiLicpO1xuXHRcdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0XHR0aHJvdyBlO1xuXHR9XG5cdHJldHVybiBpZDtcbn1cbndlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0O1xud2VicGFja0NvbnRleHQuaWQgPSAxMjsiLCIvLyB0ZXN0X2luZGV4LmpzXG52YXIgdGVzdHNDb250ZXh0ID0gcmVxdWlyZS5jb250ZXh0KFwiLlwiLCB0cnVlLCAvc3BlYy5qcyQvKTtcbnRlc3RzQ29udGV4dC5rZXlzKCkuZm9yRWFjaCh0ZXN0c0NvbnRleHQpOyJdLCJzb3VyY2VSb290IjoiIn0=